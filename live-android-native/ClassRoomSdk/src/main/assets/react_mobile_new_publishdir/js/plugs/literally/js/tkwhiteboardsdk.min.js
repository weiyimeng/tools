"use strict";!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LC=e()}window&&(!window.LC||window.LC&&!window.LC.shapeToJSON)&&(window.LC=e())}(function(){return function a(r,s,l){function d(o,e){if(!s[o]){if(!r[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(c)return c(o,!0);var i=new Error("Cannot find module '"+o+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[o]={exports:{}};r[o][0].call(n.exports,function(e){var t=r[o][1][e];return d(t||e)},n,n.exports,a,r,s,l)}return s[o].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,o){var h,u,m,a,i,n,s,r,l,d,c,f=[].slice,p=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1};m=e("./actions"),a=e("./bindEvents"),i=e("./math"),(n=e("./shapes")).createShape,d=n.shapeToJSON,u=n.JSONToShape,s=e("./canvasRenderer").renderShapeToContext,e("./svgRenderer").renderShapeToSVG,r=e("./renderSnapshotToImage"),l=e("./renderSnapshotToSVG"),e("../tools/Pencil"),c=e("./util"),h="infinite",t.exports=function(){function e(e,t){var o,i,n,a;this.setImageSize=(o=this.setImageSize,i=this,function(){return o.apply(i,arguments)}),n=a=null,a=e instanceof HTMLElement?(n=e,t):e,this.opts=a||{},this.config={zoomMin:a.zoomMin||.2,zoomMax:a.zoomMax||4,zoomStep:a.zoomStep||.2},this.colors={primary:a.primaryColor||"#000",secondary:a.secondaryColor||"#fff",background:a.backgroundColor||"transparent"},this.watermarkImage=a.watermarkImage,this.watermarkScale=a.watermarkScale||1,this.backgroundCanvas=document.createElement("canvas"),this.backgroundCanvas.className="background-canvas",this.backgroundCtx=this.backgroundCanvas.getContext("2d"),this.canvas=document.createElement("canvas"),this.canvas.style["background-color"]="transparent",this.buffer=document.createElement("canvas"),this.buffer.style["background-color"]="transparent",this.ctx=this.canvas.getContext("2d"),this.bufferCtx=this.buffer.getContext("2d"),this.backingScale=c.getBackingScale(this.ctx),this.backgroundShapes=a.backgroundShapes||[],this._shapesInProgress=[],this.shapes=[],this.undoStack=[],this.redoStack=[],this.isDragging=!1,this.isDrawAble=!0,this.isTmpDrawAble=!0,this.rotateDeg=0,this.position={x:0,y:0},this.scale=1,this.setTool(new this.opts.tools[0](this)),this.width=a.imageSize.width||h,this.height=a.imageSize.height||h,this.setZoom(this.scale),a.snapshot&&this.loadSnapshot(a.snapshot),this.isBound=!1,n&&this.bindToElement(n)}return e.prototype.setWatermarkImageToLcBackground=function(e){this.watermarkImageToLcBackground=e,this.containerEl.setAttribute("watermarkImageToLcBackground",this.watermarkImageToLcBackground)},e.prototype.bindToElement=function(e){var t,o,i,n;if(!this.containerEl)return this.containerEl=e,this._unsubscribeEvents=a(this,this.containerEl,this.opts.keyboardShortcuts),this.containerEl.style["background-color"]=this.colors.background,this.containerEl.appendChild(this.backgroundCanvas),this.containerEl.appendChild(this.canvas),this.isBound=!0,o=function(){return i.keepPanInImageBounds(),i.repaintAllLayers()},(i=this).respondToSizeChange=c.matchElementSize(this.containerEl,[this.backgroundCanvas,this.canvas],this.backingScale,o),this.watermarkImage&&(this.watermarkImage.onload=(n=this,function(){return n.repaintLayer("background")})),null!=(t=this.tool)&&t.didBecomeActive(this),o();console.warn("Trying to bind Literally Canvas to a DOM element more than once is unsupported.")},e.prototype._teardown=function(){var e;return null!=(e=this.tool)&&e.willBecomeInactive(this),"function"==typeof this._unsubscribeEvents&&this._unsubscribeEvents(),this.tool=null,this.containerEl=null,this.isBound=!1},e.prototype.trigger=function(e,t){return this.canvas.dispatchEvent(new CustomEvent(e,{detail:t})),null},e.prototype.on=function(e,t){var o,i;return o=function(e){return t(e.detail)},this.canvas.addEventListener(e,o),i=this,function(){return i.canvas.removeEventListener(e,o)}},e.prototype.getRenderScale=function(){return this.scale*this.backingScale},e.prototype.clientCoordsToDrawingCoords=function(e,t){var o,i,n=this.canvas.width,a=this.canvas.height;switch(this.rotateDeg){case 0:o=e,i=t;break;case 90:o=t,i=a-e;break;case 180:o=n-e,i=a-t;break;case 270:o=n-t,i=e;break;default:o=e,i=t}return{x:(o*this.backingScale-this.position.x)/this.getRenderScale(),y:(i*this.backingScale-this.position.y)/this.getRenderScale()}},e.prototype.drawingCoordsToClientCoords=function(e,t){return{x:e*this.getRenderScale()+this.position.x,y:t*this.getRenderScale()+this.position.y}},e.prototype.setImageSize=function(e,t){return this.width=e||h,this.height=t||h,this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("imageSizeChange",{width:this.width,height:this.height})},e.prototype.setTool=function(e){var t;if(this.isBound&&null!=(t=this.tool)&&t.willBecomeInactive(this),this.tool=e,this.trigger("toolChange",{tool:e}),this.isBound)return this.tool.didBecomeActive(this)},e.prototype.setShapesInProgress=function(e){return this._shapesInProgress=e},e.prototype.pointerDown=function(e,t){var o;return o=this.clientCoordsToDrawingCoords(e,t),this.tool.usesSimpleAPI?(this.tool.begin(o.x,o.y,this),this.isDragging=!0,this.trigger("drawStart",{tool:this.tool})):(this.isDragging=!0,this.trigger("lc-pointerdown",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},e.prototype.pointerMove=function(o,i){return c.requestAnimationFrame((n=this,function(){var e,t;return e=n.clientCoordsToDrawingCoords(o,i),null!=(t=n.tool)&&t.usesSimpleAPI?n.isDragging?(n.tool.continue(e.x,e.y,n),n.trigger("drawContinue",{tool:n.tool})):void 0:n.isDragging?n.trigger("lc-pointerdrag",{tool:n.tool,x:e.x,y:e.y,rawX:o,rawY:i}):n.trigger("lc-pointermove",{tool:n.tool,x:e.x,y:e.y,rawX:o,rawY:i})}));var n},e.prototype.pointerUp=function(e,t){var o;return o=this.clientCoordsToDrawingCoords(e,t),this.tool.usesSimpleAPI?this.isDragging?(this.tool.end(o.x,o.y,this),this.isDragging=!1,this.trigger("drawEnd",{tool:this.tool})):void 0:(this.isDragging=!1,this.trigger("lc-pointerup",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},e.prototype.setColor=function(e,t){if(this.colors[e]=t,this.isBound){switch(e){case"background":this.containerEl.style.backgroundColor=this.colors.background,this.repaintLayer("background");break;case"primary":this.repaintLayer("main");break;case"secondary":this.repaintLayer("main")}return this.trigger(e+"ColorChange",this.colors[e]),"background"===e?this.trigger("drawingChange"):void 0}},e.prototype.getColor=function(e){return this.colors[e]},e.prototype.saveShape=function(e,t,o,i,n,a){i=null!=i&&null!=i&&i,null==t&&(t=!0),null==o&&(o=null),o||(o=this.shapes.length?this.shapes[this.shapes.length-1].id:null),e.authorUserId=n;var r="saveShape_"+(new Date).getTime()+parseInt(1e4*Math.random()),s=new m.AddShapeAction(this,e,o,r,i,n,a);return this.execute(s),this.isDrawAble&&t&&this.trigger("shapeSave",{shape:e,previousShapeId:o,executeId:r,shapeId:e.id,action:{actionName:s.actionName}}),this.trigger("drawingChange")},e.prototype.pan=function(e,t){return this.setPan(this.position.x-e,this.position.y-t)},e.prototype.keepPanInImageBounds=function(){var e,t,o,i;return t=this.getRenderScale(),o=(e=this.position).x,i=e.y,this.width!==h&&(o=this.canvas.width>this.width*t?(this.canvas.width-this.width*t)/2:Math.max(Math.min(0,o),this.canvas.width-this.width*t)),this.height!==h&&(i=this.canvas.height>this.height*t?(this.canvas.height-this.height*t)/2:Math.max(Math.min(0,i),this.canvas.height-this.height*t)),this.position={x:o,y:i}},e.prototype.setPan=function(e,t){return this.position={x:e,y:t},this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("pan",{x:this.position.x,y:this.position.y})},e.prototype.zoom=function(e){var t;return t=this.scale+e,t=Math.max(t,this.config.zoomMin),t=Math.min(t,this.config.zoomMax),t=Math.round(100*t)/100,this.setZoom(t)},e.prototype.setZoom=function(e){var t;return t=this.scale,this.scale=e,this.position.x=i.scalePositionScalar(this.position.x,this.canvas.width,t,this.scale),this.position.y=i.scalePositionScalar(this.position.y,this.canvas.height,t,this.scale),this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("zoom",{oldScale:t,newScale:this.scale})},e.prototype.setWatermarkImage=function(e){if(this.watermarkImage=e,this.watermarkImageToLcBackground){if(c.addImageOnload(e,(t=this,function(){return t.repaintLayer("background")})),e.width)return this.repaintLayer("background")}else this.customCanvasBackgroundElement.style.backgroundImage="url("+JSON.stringify(e.src)+")";var t},e.prototype.repaintAllLayers=function(){var e,t,o,i;for(e=0,o=(i=["background","main"]).length;e<o;e++)t=i[e],this.repaintLayer(t);return null},e.prototype.repaintLayer=function(e,t){var o;if(null==t&&(t="main"===e),this.isBound){switch(e){case"background":if(!this.watermarkImageToLcBackground)return;this.backgroundCtx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height),o=function(){return r.repaintLayer("background")},(r=this).watermarkImage&&this._renderWatermark(this.backgroundCtx,!0,o),this.draw(this.backgroundShapes,this.backgroundCtx,o);break;case"main":n=this,o=function(){return n.repaintLayer("main",!0)},t&&(this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx.clearRect(0,0,this.buffer.width,this.buffer.height),this.draw(this.shapes,this.bufferCtx,o)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),0<this.canvas.width&&0<this.canvas.height&&(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clipped((i=this,function(){return i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height),i.ctx.drawImage(i.buffer,0,0)}),this.ctx),this.clipped((a=this,function(){return a.transformed(function(){var e,t,o,i,n;for(i=[],e=0,t=(o=a._shapesInProgress).length;e<t;e++)n=o[e],i.push(s(a.ctx,n,{bufferCtx:a.bufferCtx,shouldOnlyDrawLatest:!0}));return i},a.ctx,a.bufferCtx)}),this.ctx,this.bufferCtx))}var a,i,n,r;return this.trigger("repaint",{layerKey:e})}},e.prototype._renderWatermark=function(e,t,o){if(null==t&&(t=!0),this.watermarkImage.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(this.watermarkScale,this.watermarkScale),t&&e.scale(this.backingScale,this.backingScale),e.drawImage(this.watermarkImage,-this.watermarkImage.width/2,-this.watermarkImage.height/2),e.restore();this.watermarkImage.onload=o},e.prototype.drawShapeInProgress=function(e){return this.repaintLayer("main",!1),this.clipped((t=this,function(){return t.transformed(function(){return s(t.ctx,e,{bufferCtx:t.bufferCtx,shouldOnlyDrawLatest:!0})},t.ctx,t.bufferCtx)}),this.ctx,this.bufferCtx);var t},e.prototype.draw=function(n,a,r){var e,t;if(n.length)return e=function(){var e,t,o,i;for(o=[],e=0,t=n.length;e<t;e++)i=n[e],o.push(s(a,i,{retryCallback:r}));return o},this.clipped((t=this,function(){return t.transformed(e,a)}),a)},e.prototype.clipped=function(){var e,t,o,i,n,a,r,s,l,d,c,u;for(o=arguments[0],e=2<=arguments.length?f.call(arguments,1):[],c=this.width===h?0:this.position.x,u=this.height===h?0:this.position.y,d=function(){switch(this.width){case h:return this.canvas.width;default:return this.width*this.getRenderScale()}}.call(this),i=function(){switch(this.height){case h:return this.canvas.height;default:return this.height*this.getRenderScale()}}.call(this),n=0,r=e.length;n<r;n++)(t=e[n]).save(),t.beginPath(),t.rect(c,u,d,i),t.clip();for(o(),l=[],a=0,s=e.length;a<s;a++)t=e[a],l.push(t.restore());return l},e.prototype.transformed=function(){var e,t,o,i,n,a,r,s,l;for(o=arguments[0],i=0,a=(e=2<=arguments.length?f.call(arguments,1):[]).length;i<a;i++)(t=e[i]).save(),t.translate(Math.floor(this.position.x),Math.floor(this.position.y)),l=this.getRenderScale(),t.scale(l,l);for(o(),s=[],n=0,r=e.length;n<r;n++)t=e[n],s.push(t.restore());return s},e.prototype.sendClear=function(e){var t=!1;if(e){for(var o=0;o<this.shapes.length;o++)if(this.shapes[o].authorUserId===e){t=!0;break}}else t=!0;if(t){var i="clear_"+(new Date).getTime()+parseInt(1e4*Math.random());this.trigger("sendClear",{clearActionId:i,action:{actionName:"ClearAction"}})}},e.prototype.clear=function(e,t,o,i,n){var a,r;if(null==e&&(e=!0),r=this.shapes,a=[],0!==this.shapes.length){if(i&&0<this.shapes.length){for(var s=!1,l=0;l<this.shapes.length;l++)this.shapes[l].authorUserId!==i?a.push(this.shapes[l]):s=!0;if(!s)return}this.setShapesInProgress([]);var d=t||"clear_"+(new Date).getTime()+parseInt(1e4*Math.random()),c=new m.ClearAction(this,r,a,d,o,i,n);return this.execute(c),this.repaintLayer("main"),e&&this.trigger("clear",{clearActionId:d,oldShapes:r,action:{actionName:c.actionName}}),this.trigger("drawingChange",{})}},e.prototype.execute=function(e){return this.undoStack.push(e),e.do(),0<this.redoStack.length&&this.trigger("doClearRedoStack",{doClearRedoStack:this.redoStack}),this.redoStack=[]},e.prototype.goToStackPosition=function(e){},e.prototype.sendUndo=function(e){if(this.undoStack.length){var t;if(e){for(var o=this.undoStack.length-1;0<=o;o--)if(e===this.undoStack[o].authorUserId){t=this.undoStack[o];break}}else t=this.undoStack[this.undoStack.length-1];t&&(t.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendUndo",{action:t,executeId:t.executeId}))}},e.prototype.undo=function(e,t){var o;if(null==e&&(e=!0),this.undoStack.length){if(t){for(var i=this.undoStack.length-1;0<=i;i--)if(this.undoStack[i]&&this.undoStack[i].id===t){o=this.undoStack[i],this.undoStack.splice(i,1);break}}else o=this.undoStack.pop();return o?(o.undo(),o.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.redoStack.push(o),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),e&&this.trigger("undo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})):void 0}},e.prototype.sendRedo=function(e){if(this.redoStack.length){var t;if(e){for(var o=this.redoStack.length-1;0<=o;o--)if(e===this.redoStack[o].authorUserId){t=this.redoStack[o];break}}else t=this.redoStack[this.redoStack.length-1];t&&(t.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendRedo",{action:t,executeId:t.executeId}))}},e.prototype.redo=function(e,t){var o;if(null==e&&(e=!0),this.redoStack.length){if(t){for(var i=this.redoStack.length-1;0<=i;i--)if(this.redoStack[i]&&this.redoStack[i].id===t){o=this.redoStack[i],this.redoStack.splice(i,1);break}}else o=this.redoStack.pop();if(o){this.undoStack.push(o);return o.do(!0),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),o.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),e&&this.trigger("redo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})}}},e.prototype.canUndo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=this.undoStack.length-1;0<=t;t--)if(this.undoStack[t].authorUserId==this.myselfId){e=!0;break}return e}return!!this.undoStack.length},e.prototype.canRedo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=0;t<this.redoStack.length;t++)this.redoStack[t].authorUserId==this.myselfId&&(e=!0);return e}return!!this.redoStack.length},e.prototype.getPixel=function(e,t){var o,i;return o=this.drawingCoordsToClientCoords(e,t),(i=this.ctx.getImageData(o.x,o.y,1,1).data)[3]?"rgb("+i[0]+", "+i[1]+", "+i[2]+")":null},e.prototype.getContentBounds=function(){return c.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function(e){return e.getBoundingRect()}),this.width===h?0:this.width,this.height===h?0:this.height)},e.prototype.getDefaultImageRect=function(e,t){var n;return null==e&&(e={width:0,height:0}),null==t&&(t={top:0,right:0,bottom:0,left:0}),c.getDefaultImageRect(function(){var e,t,o,i;for(i=[],e=0,t=(o=this.shapes.concat(this.backgroundShapes)).length;e<t;e++)n=o[e],i.push(n.getBoundingRect(this.ctx));return i}.call(this),e,t)},e.prototype.getImage=function(e){return null==e&&(e={}),null==e.includeWatermark&&(e.includeWatermark=!0),null==e.scaleDownRetina&&(e.scaleDownRetina=!0),null==e.scale&&(e.scale=1),e.scaleDownRetina||(e.scale*=this.backingScale),e.includeWatermark&&(e.watermarkImage=this.watermarkImage,e.watermarkScale=this.watermarkScale,e.scaleDownRetina||(e.watermarkScale*=this.backingScale)),r(this.getSnapshot(),e)},e.prototype.canvasForExport=function(){return this.repaintAllLayers(),c.combineCanvases(this.backgroundCanvas,this.canvas)},e.prototype.canvasWithBackground=function(e){return c.combineCanvases(e,this.canvasForExport())},e.prototype.getSnapshot=function(e){var t,o,i,n,a,r;for(null==e&&(e=null),null==e&&(e=["shapes","imageSize","colors","position","scale","backgroundShapes"]),r={},t=0,i=(n=["colors","position","scale"]).length;t<i;t++)o=n[t],0<=p.call(e,o)&&(r[o]=this[o]);return 0<=p.call(e,"shapes")&&(r.shapes=function(){var e,t,o,i;for(i=[],e=0,t=(o=this.shapes).length;e<t;e++)a=o[e],i.push(d(a));return i}.call(this)),0<=p.call(e,"backgroundShapes")&&(r.backgroundShapes=function(){var e,t,o,i;for(i=[],e=0,t=(o=this.backgroundShapes).length;e<t;e++)a=o[e],i.push(d(a));return i}.call(this)),0<=p.call(e,"imageSize")&&(r.imageSize={width:this.width,height:this.height}),r},e.prototype.getSnapshotJSON=function(){return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),JSON.stringify(this.getSnapshot())},e.prototype.getSVGString=function(e){return null==e&&(e={}),l(this.getSnapshot(),e)},e.prototype.loadSnapshot=function(n){var e,t,o,i,a,r,s,l,d,c;if(n){if(n.colors)for(e=0,i=(r=["primary","secondary","background"]).length;e<i;e++)o=r[e],this.setColor(o,n.colors[o]);if(n.shapes)for(this.shapes=[],t=0,a=(s=n.shapes).length;t<a;t++)c=s[t],(d=u(c))&&this.execute(new m.AddShapeAction(this,d));return n.backgroundShapes&&(this.backgroundShapes=function(){var e,t,o,i;for(i=[],e=0,t=(o=n.backgroundShapes).length;e<t;e++)l=o[e],i.push(u(l));return i}()),n.imageSize&&(this.width=n.imageSize.width,this.height=n.imageSize.height),n.position&&(this.position=n.position),n.scale&&(this.scale=n.scale),this.repaintAllLayers(),this.trigger("snapshotLoad"),this.trigger("drawingChange",{})}},e.prototype.loadSnapshotJSON=function(e){return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),this.loadSnapshot(JSON.parse(e))},e}()},{"../tools/Pencil":24,"./actions":3,"./bindEvents":4,"./canvasRenderer":5,"./math":10,"./renderSnapshotToImage":11,"./renderSnapshotToSVG":12,"./shapes":13,"./svgRenderer":14,"./util":15}],2:[function(e,t,o){var i,d,h,c;e("./fontmetrics.js"),c=function(e){var t,o,i,n,a,r;for(n=o=0,a=(t=e.split(" ")).length;n<a;n++)i=t[n],r=parseInt(i.replace("px",""),10),isNaN(r)||(o=r);if(!o)throw"Font size not found";return{fontSize:o,fontFamily:e.substring(t[0].length+1).replace("bold ","").replace("italic ","").replace("underline ","")}},h=function(e,t,o){var i,n,a,r,s,l,d,c,u,h;if(!t.length)return["",""];for(d=l=n=0,h=!1;;)if(r=(s=!(a=(n+=1)>=t.length)&&t[n].match(/\s/))||a,u=t.substring(0,n),(i=!o||e.measureTextWidth(u).width<=o)&&(d=n),r&&h&&(h=!1,i&&(l=n)),h=!s,a||!i){if(i)return[t,""];if(0<l){for(c=l+1;c<t.length&&t[c].match("/s/");)c+=1;return[t.substring(0,l),t.substring(c)]}return[t.substring(0,d),t.substring(d)]}},d=function(e,t,o){var i,n,a,r,s,l,d,c,u;for(a=[],i=0,n=(u=t.split(/\r\n|\r|\n/g)).length;i<n;i++)if(c=u[i],r=(s=h(e,c,o))[0],d=s[1],r)for(;r;)a.push(r),r=(l=h(e,d,o))[0],d=l[1];else a.push(c);return a},i=function(){function e(t,e,o,i,n){var a,r,s,l;this.text=e,this.font=o,this.forcedWidth=i,this.forcedHeight=n,a=(s=c(this.font)).fontFamily,r=s.fontSize,t.font=this.font,t.textBaseline="baseline",this.emDashWidth=t.measureTextWidth("—",r,a).width,this.caratWidth=t.measureTextWidth("|",r,a).width,this.lines=d(t,this.text,this.forcedWidth),this.metricses=this.lines.map((l=this,function(e){return t.measureText2(e||"X",r,l.font)})),this.metrics={ascent:Math.max.apply(Math,this.metricses.map(function(e){return e.ascent})),descent:Math.max.apply(Math,this.metricses.map(function(e){return e.descent})),fontsize:Math.max.apply(Math,this.metricses.map(function(e){return e.fontsize})),leading:Math.max.apply(Math,this.metricses.map(function(e){return e.leading})),width:Math.max.apply(Math,this.metricses.map(function(e){return e.width})),height:Math.max.apply(Math,this.metricses.map(function(e){return e.height})),bounds:{minx:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.minx})),miny:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.miny})),maxx:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxx})),maxy:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxy}))}},this.boundingBoxWidth=Math.ceil(this.metrics.width)}return e.prototype.draw=function(e,t,o){var i,n,a,r,s,l;for(e.textBaseline="top",e.font=this.font,l=[],n=i=0,a=(s=this.lines).length;n<a;n++)r=s[n],e.fillText(r,t,o+i*this.metrics.leading),l.push(i+=1);return l},e.prototype.getWidth=function(e){return null==e&&(e=!1),this.forcedWidth?this.forcedWidth:e?this.metrics.bounds.maxx+this.caratWidth:this.metrics.bounds.maxx},e.prototype.getHeight=function(){return this.forcedHeight||this.metrics.leading*this.lines.length},e}(),t.exports=i},{"./fontmetrics.js":7}],3:[function(e,t,o){var i,n;n=function(){function e(e,t,o,i,n,a,r){this.lc=e,this.oldShapes=t,this.newShapes=o,this.executeId=i,this.id=i,this.clearActionId=i,this.authorUserId=n,this.toAuthorUserId=a,this.seq=r,this.actions=[],this.actionName="ClearAction"}return e.prototype.do=function(){var e=[];this.actions=[];for(var t=this.lc.undoStack.length-1;0<=t;t--){var o=this.lc.undoStack[t];"AddShapeAction"===o.actionName&&(this.toAuthorUserId?this.lc.undoStack[t].authorUserId===this.toAuthorUserId?(this.actions.push(o),this.lc.undoStack.splice(t,1)):e.push(this.lc.undoStack[t].shape):(this.actions.push(o),this.lc.undoStack.splice(t,1)))}return this.lc.shapes=e.reverse(),this.lc.repaintLayer("main")},e.prototype.undo=function(){var e=[];this.lc.undoStack=this.lc.undoStack.concat(this.actions),this.actions=[],this.lc.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0});for(var t=0;t<this.lc.undoStack.length;t++){"AddShapeAction"===this.lc.undoStack[t].actionName&&e.push(this.lc.undoStack[t].shape)}return this.lc.shapes=e,this.lc.repaintLayer("main")},e}(),i=function(){function e(e,t,o,i,n,a,r){this.lc=e,this.shape=t,this.previousShapeId=null!=o?o:null,this.doNotPaint=n,this.executeId=i,this.shapeId=t.id,this.id=t.id,this.authorUserId=a,this.seq=r,this.actionName="AddShapeAction"}return e.prototype.do=function(e,t){var o,i,n,a,r,s;if(e=null!=e&&e,this.lc.shapes.length&&this.lc.shapes[this.lc.shapes.length-1].id!==this.previousShapeId&&null!==this.previousShapeId){for(o=!(a=[]),i=0,n=(r=this.lc.shapes).length;i<n;i++)s=r[i],a.push(s),s.id===this.previousShapeId&&(a.push(this.shape),o=!0);o||a.push(this.shape),this.lc.shapes=a}else this.lc.shapes.push(this.shape);if((e||!this.doNotPaint)&&!t)return this.lc.repaintLayer("main")},e.prototype.undo=function(){var e,t,o,i,n;if(this.lc.shapes[this.lc.shapes.length-1].id===this.shape.id)this.lc.shapes.pop();else{for(o=[],e=0,t=(i=this.lc.shapes).length;e<t;e++)(n=i[e]).id!==this.shape.id&&o.push(n);this.lc.shapes=o}return this.lc.repaintLayer("main")},e}(),t.exports={ClearAction:n,AddShapeAction:i}},{}],4:[function(e,t,o){var m,f;m=function(e,t){var o,i,n;return i=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,[i-(o=e.getBoundingClientRect()).left,n-o.top]},f=function(e,t){var o;return o=e.getBoundingClientRect(),{left:t.clientX-o.left,top:t.clientY-o.top}},t.exports=function(l,d,e){var t,c,u,s,h,n;return null==e&&(e=!1),n=[],c=function(e){var t;return e.preventDefault(),t=f(d,e),l.pointerMove(t.left,t.top)},u=function(e){var t;e.preventDefault(),d.onselectstart=function(){return!0},t=f(d,e),l.pointerUp(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var i=0;i<o.length;i++){var n=o[i].parentNode;if(n){var a=n.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)n.removeChild(a[r])}}}catch(e){console.error("tklc error:",e)}return document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),d.addEventListener("mousemove",c)},d.addEventListener("mousedown",function(e){var t;if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault(),d.onselectstart=function(){return!1},t=f(d,e),l.pointerDown(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var i=0;i<o.length;i++){var n=o[i].parentNode;if(n){var a=n.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)n.removeChild(a[r]);var s=document.createElement("div");s.className="ifreamTempLayer",n.appendChild(s)}}}catch(e){console.error("tklc error:",e)}return d.removeEventListener("mousemove",c),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)}}),h=function(e){return e.preventDefault(),l.pointerMove.apply(l,m(d,e))},s=function(e){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var i=t[o].parentNode;if(i){var n=i.getElementsByClassName("ifreamTempLayer");if(n&&0<n.length)for(var a=n.length-1;0<=a;a--)i.removeChild(n[a])}}}catch(e){console.error("tklc error:",e)}return l.pointerUp.apply(l,m(d,e)),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)},d.addEventListener("touchstart",function(e){if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var i=t[o].parentNode;if(i){var n=i.getElementsByClassName("ifreamTempLayer");if(n&&0<n.length)for(var a=n.length-1;0<=a;a--)i.removeChild(n[a]);var r=document.createElement("div");r.className="ifreamTempLayer",i.appendChild(r)}}}catch(e){console.error("tklc error:",e)}return 1===e.touches.length?(l.pointerDown.apply(l,m(d,e)),document.addEventListener("touchmove",h),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s)):l.pointerMove.apply(l,m(d,e))}}),e&&(console.warn("Keyboard panning is deprecated."),t=function(e){switch(e.keyCode){case 37:l.pan(-10,0);break;case 38:l.pan(0,-10);break;case 39:l.pan(10,0);break;case 40:l.pan(0,10)}return l.repaintAllLayers()},n.push(function(){return document.removeEventListener(t)})),function(){var e,t,o,i;for(i=[],t=0,o=n.length;t<o;t++)e=n[t],i.push(e());return i}}},{}],5:[function(e,t,o){var r,i,n,a,s,l,d,c,u,h;s=e("./lineEndCapShapes"),u={},l=function(){},c=function(e,t,o){var i;if(null==o&&(o={}),null==o.shouldIgnoreUnsupportedShapes&&(o.shouldIgnoreUnsupportedShapes=!1),null==o.retryCallback&&(o.retryCallback=l),null==o.shouldOnlyDrawLatest&&(o.shouldOnlyDrawLatest=!1),null==o.bufferCtx&&(o.bufferCtx=null),i=o.bufferCtx,u[t.className])return o.shouldOnlyDrawLatest&&u[t.className].drawLatestFunc?u[t.className].drawLatestFunc(e,i,t,o.retryCallback):u[t.className].drawFunc(e,t,o.retryCallback);if(o.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+t.className+" to canvas");throw"Can't render shape of type "+t.className+" to canvas"},d=function(e,t,o){return c(e.getContext("2d"),t,o)},(i=function(e,t,o){return u[e]={drawFunc:t,drawLatestFunc:o}})("Rectangle",function(e,t){var o,i;return o=t.x,i=t.y,t.strokeWidth%2!=0&&(o+=.5,i+=.5),e.fillStyle=t.fillColor,e.fillRect(o,i,t.width,t.height),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.strokeRect(o,i,t.width,t.height)}),i("Ellipse",function(e,t){var o,i,n,a;return e.save(),a=Math.floor(t.width/2),n=Math.floor(t.height/2),o=t.x+a,i=t.y+n,e.translate(o,i),e.scale(1,Math.abs(t.height/t.width)),e.beginPath(),e.arc(0,0,Math.abs(a),0,2*Math.PI),e.closePath(),e.restore(),e.fillStyle=t.fillColor,e.fill(),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.stroke()}),i("SelectionBox",(h=function(e,t,o){var i,n;if(i=t.x,n=t.y,0!==o)return e.fillStyle="#fff",e.fillRect(i,n,o,o),e.strokeStyle="#000",e.strokeRect(i,n,o,o)},function(e,t){return h(e,t.getTopLeftHandleRect(),t.handleSize),h(e,t.getTopRightHandleRect(),t.handleSize),h(e,t.getBottomLeftHandleRect(),t.handleSize),h(e,t.getBottomRightHandleRect(),t.handleSize),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin)),e.lineWidth=1,e.strokeStyle="#000",e.setLineDash([2,4]),e.strokeRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin),e.setLineDash([])})),i("Image",function(e,t,o){return t.image.width?1===t.scale?e.drawImage(t.image,t.x,t.y):e.drawImage(t.image,t.x,t.y,t.image.width*t.scale,t.image.height*t.scale):o?t.image.onload=o:void 0}),i("Line",function(e,t){var o,i,n,a,r;if(t.x1!==t.x2||t.y1!==t.y2)return i=t.x1,n=t.x2,a=t.y1,r=t.y2,t.strokeWidth%2!=0&&(i+=.5,n+=.5,a+=.5,r+=.5),e.lineWidth=t.strokeWidth,e.strokeStyle=t.color,e.lineCap=t.capStyle,t.dash&&e.setLineDash(t.dash),e.beginPath(),e.moveTo(i,a),e.lineTo(n,r),e.stroke(),t.dash&&e.setLineDash([]),o=Math.max(2.2*t.strokeWidth,5),t.endCapShapes[0]&&s[t.endCapShapes[0]].drawToCanvas(e,i,a,Math.atan2(a-r,i-n),o,t.color),t.endCapShapes[1]?s[t.endCapShapes[1]].drawToCanvas(e,n,r,Math.atan2(r-a,n-i),o,t.color):void 0}),r=function(e,t,o,i){var n,a,r,s;if(null==o&&(o=!1),null==i&&(i="round"),t.length){for(e.lineCap=i,e.strokeStyle=t[0].color,e.lineWidth=t[0].size,e.beginPath(),t[0].size%2==0?e.moveTo(t[0].x,t[0].y):e.moveTo(t[0].x+.5,t[0].y+.5),n=0,a=(s=t.slice(1)).length;n<a;n++)r=s[n],t[0].size%2==0?e.lineTo(r.x,r.y):e.lineTo(r.x+.5,r.y+.5);return o?e.closePath():void 0}},i("LinePath",n=function(e,t){return r(e,t.smoothedPoints),e.stroke()},a=function(e,t,o){var i,n,a;return o.tail?(n=(a=o.smoothedPoints.length-o.segmentSize*o.tailSize)<2*o.segmentSize?0:a,i=a+o.segmentSize+1,r(t,o.smoothedPoints.slice(n,i))):r(t,o.smoothedPoints),t.stroke()}),i("ErasedLinePath",function(e,t){return e.save(),e.globalCompositeOperation="destination-out",n(e,t),e.restore()},function(e,t,o){return e.save(),e.globalCompositeOperation="destination-out",t.save(),t.globalCompositeOperation="destination-out",a(0,t,o),e.restore(),t.restore()}),i("Text",function(e,t){return t.renderer||t._makeRenderer(e),e.fillStyle=t.color,t.renderer.draw(e,t.x,t.y)}),i("Polygon",function(e,t){return e.fillStyle=t.fillColor,r(e,t.points,t.isClosed,"butt"),e.fill(),e.stroke()}),t.exports={defineCanvasRenderer:i,renderShapeToCanvas:d,renderShapeToContext:c}},{"./lineEndCapShapes":8}],6:[function(e,t,o){t.exports={imageURLPrefix:"lib/img",primaryColor:"hsla(0, 0%, 0%, 1)",secondaryColor:"hsla(0, 0%, 100%, 1)",backgroundColor:"transparent",strokeWidths:[1,2,5,10,20,30],defaultStrokeWidth:5,toolbarPosition:"top",keyboardShortcuts:!1,imageSize:{width:"infinite",height:"infinite"},backgroundShapes:[],watermarkImage:null,watermarkScale:1,zoomMin:.2,zoomMax:4,zoomStep:.2,snapshot:null,onInit:function(){},tools:[e("../tools/Pencil"),e("../tools/Eraser"),e("../tools/Line"),e("../tools/Rectangle"),e("../tools/Ellipse"),e("../tools/Text"),e("../tools/Polygon"),e("../tools/Pan"),e("../tools/Eyedropper")]}},{"../tools/Ellipse":19,"../tools/Eraser":20,"../tools/Eyedropper":21,"../tools/Line":22,"../tools/Pan":23,"../tools/Pencil":24,"../tools/Polygon":25,"../tools/Rectangle":26,"../tools/Text":28}],7:[function(e,t,o){!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText;CanvasRenderingContext2D.prototype.measureText2=function(e,t,o){var i=this.measureTextWidth(e),n=!/\S/.test(e);i.fontsize=t;var a=document.createElement("div");a.style.position="absolute",a.style.opacity=0,a.style.font=o,a.innerHTML=e+"<br/>"+e,document.body.appendChild(a),i.leading=1.2*t;var r,s,l=(r=a,s="height",document.defaultView.getComputedStyle(r,null).getPropertyValue(s));if(2*t<=(l=l.replace("px",""))&&(i.leading=l/2|0),document.body.removeChild(a),n)i.ascent=0,i.descent=0,i.bounds={minx:0,maxx:i.width,miny:0,maxy:0},i.height=0;else{var d=document.createElement("canvas");d.width=i.width+100,d.height=3*t,d.style.opacity=1,d.style.font=o;var c=d.getContext("2d");c.font=o;var u=d.width,h=d.height,m=h/2;c.fillStyle="white",c.fillRect(-1,-1,u+2,h+2),c.fillStyle="black",c.fillText(e,50,m);for(var f=c.getImageData(0,0,u,h).data,p=0,g=4*u,v=f.length;++p<v&&255===f[p];);var y=p/g|0;for(p=v-1;0<--p&&255===f[p];);var b=p/g|0;for(p=0;p<v&&255===f[p];)v<=(p+=g)&&(p=p-v+4);var _=p%g/4|0,w=1;for(p=v-3;0<=p&&255===f[p];)(p-=g)<0&&(p=v-3-4*w++);var S=p%g/4+1|0;i.ascent=m-y,i.descent=b-m,i.bounds={minx:_-50,maxx:S-50,miny:0,maxy:b-y},i.height=b-y+1}return i}}()},{}],8:[function(e,t,o){var l;t.exports={arrow:(l=function(e,t,o,i,n){return[{x:e+Math.cos(o+Math.PI/2)*i/2,y:t+Math.sin(o+Math.PI/2)*i/2},{x:e+Math.cos(o)*n,y:t+Math.sin(o)*n},{x:e+Math.cos(o-Math.PI/2)*i/2,y:t+Math.sin(o-Math.PI/2)*i/2}]},{drawToCanvas:function(e,t,o,i,n,a,r){var s;return null==r&&(r=0),r=r||n,e.fillStyle=a,e.lineWidth=0,e.strokeStyle="transparent",e.beginPath(),s=l(t,o,i,n,r),e.moveTo(s[0].x,s[0].y),e.lineTo(s[1].x,s[1].y),e.lineTo(s[2].x,s[2].y),e.fill()},svg:function(e,t,o,i,n,a){return null==a&&(a=0),"<polygon fill='"+n+"' stroke='none' points='"+l(e,t,o,i,a=a||i).map(function(e){return e.x+","+e.y})+"' />"}})}},{}],9:[function(e,t,o){var i,n,a;a={},n=function(e){return a=e},i=function(e){return a[e]||e},t.exports={localize:n,_:i}},{}],10:[function(e,t,o){var l,i,d,n;e("./shapes").Point,e("./util"),i={toPoly:function(e){var t,o,i,n,a,r,s;for(r=[],s=[],t=o=0,i=e.length;t<i;t++)a=e[t],n=d(a,l(e,o)),r=r.concat([n[0]]),s=[n[1]].concat(s),o+=1;return r.concat(s)}},l=function(e,t){return e.length<3&&{x:0,y:0},0===t?l(e,t+1):t===e.length-1?l(e,t-1):i.diff(e[t-1],e[t+1])},i.diff=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},n=function(e){var t;return t=i.len(e),{x:e.x/t,y:e.y/t}},d=function(e,t){return(t=n(t)).x=t.x*e.size/2,t.y=t.y*e.size/2,[{x:e.x-t.y,y:e.y+t.x,color:e.color},{x:e.x+t.y,y:e.y-t.x,color:e.color}]},i.len=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},i.scalePositionScalar=function(e,t,o,i){return e+(t*o-t*i)/2},t.exports=i},{"./shapes":13,"./util":15}],11:[function(e,t,o){var c,u,h,m;m=e("./util"),u=e("./shapes").JSONToShape,c="infinite",h=function(e,t,o){if(t.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(o,o),e.drawImage(t,-t.width/2,-t.height/2),e.restore()},t.exports=function(n,e){var i,t,o,a,r,s,l,d;return null==e&&(e={}),null==e.scale&&(e.scale=1),s=function(){var e,t,o,i;for(i=[],e=0,t=(o=n.shapes).length;e<t;e++)r=o[e],i.push(u(r));return i}(),t=[],n.backgroundShapes&&(t=function(){var e,t,o,i;for(i=[],e=0,t=(o=n.backgroundShapes).length;e<t;e++)r=o[e],i.push(u(r));return i}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),a=n.imageSize||{width:c,height:c},o=n.colors||{background:"transparent"},i=s.concat(t),l=document.createElement("canvas"),d=l.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=m.getDefaultImageRect(function(){var e,t,o;for(o=[],e=0,t=i.length;e<t;e++)r=i[e],o.push(r.getBoundingRect(d));return o}(),a,e.margin),l.width=e.rect.width*e.scale,l.height=e.rect.height*e.scale,d.fillStyle=o.background,d.fillRect(0,0,l.width,l.height),e.rect.width&&e.rect.height?(e.watermarkImage&&h(d,e.watermarkImage,e.watermarkScale),m.combineCanvases(l,m.renderShapes(t,e.rect,e.scale),m.renderShapes(s,e.rect,e.scale))):null}},{"./shapes":13,"./util":15}],12:[function(e,t,o){var c,u,h;h=e("./util"),u=e("./shapes").JSONToShape,c="infinite",t.exports=function(n,e){var i,t,o,a,r,s,l,d;return null==e&&(e={}),d=function(){var e,t,o,i;for(i=[],e=0,t=(o=n.shapes).length;e<t;e++)l=o[e],i.push(u(l));return i}(),t=[],n.backgroundShapes&&(t=function(){var e,t,o,i;for(i=[],e=0,t=(o=n.backgroundShapes).length;e<t;e++)l=o[e],i.push(u(l));return i}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),s=n.imageSize||{width:c,height:c},o=n.colors||{background:"transparent"},i=d.concat(t),r=document.createElement("canvas"),a=r.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=h.getDefaultImageRect(function(){var e,t,o;for(o=[],e=0,t=i.length;e<t;e++)l=i[e],o.push(l.getBoundingRect(a));return o}(),s,e.margin),LC.renderShapesToSVG(t.concat(d),e.rect,o.background)}},{"./shapes":13,"./util":15}],13:[function(e,t,o){var l,i,n,r,a,s,d,c,u,h,m,f,p,g,v,y,b,_,w,S;S=e("./util"),i=e("./TextRenderer"),e("./lineEndCapShapes"),g=e("./canvasRenderer"),h=g.defineCanvasRenderer,y=g.renderShapeToContext,v=e("./svgRenderer"),m=v.defineSVGRenderer,b=v.renderShapeToSVG,w={},u=function(e,t,o,i,n,a,r,s,l,d,c,u,h,m,f,p,g){var v;return(v=new w[e](t,o,i,n,a,r,s,l,d,c,u,h,m,f,p,g)).id=S.getGUID(),v},l=function(e){var t,o,i,n;return t=e.className,o=e.data,i=e.id,t in w?(n=w[t].fromJSON(o))?(i&&(n.id=i),n):(console.log("Unreadable shape:",t,o),null):(console.log("Unknown shape:",t,o),null)},_=function(e){return{className:e.className,data:e.toJSON(),id:e.id}},c=function(e,t){return t?c(a(a(d(e))),t-1):e},d=function(e){var t,o,i,n,a;for(a=[],n=t=0,o=(e=[e[0]].concat(e).concat(S.last(e))).length;n<o;n++)i=e[n],a[2*t]=i,e[t+1]&&(a[2*t+1]=s(i,e[t+1])),t+=1;return a},a=function(e){var t,o,i,n,a;for(t=[],a=o=0,i=e.length;a<i;a++)n=e[a],e[o+1]&&(t[o]=s(n,e[o+1])),o+=1;return t},s=function(e,t){return u("Point",{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2,size:e.size+(t.size-e.size)/2,color:e.color})},(f=function(e,g){var t,o,i,n,a,r,s,l;for(n in(t=function(e,t,o,i,n,a,r,s,l,d,c,u,h,m,f,p){return g.constructor.call(this,e,t,o,i,n,a,r,s,l,d,c,u,h,m,f,p),this}).prototype.className=e,t.fromJSON=g.fromJSON,g.draw&&(a=g.draw,r=g.draw||function(e,t,o){return this.draw(e,t,o)},o=function(e,t,o){return a.call(t,e,o)},i=function(e,t,o,i){return r.call(o,e,t,i)},delete g.draw,g.drawLatest&&delete g.drawLatest,h(e,o,i)),g.toSVG&&(s=g.toSVG,l=function(e){return s.call(e)},delete g.toSVG,m(e,l)),t.prototype.draw=function(e,t){return y(e,this,{retryCallback:t})},t.prototype.drawLatest=function(e,t,o){return y(e,this,{retryCallback:o,bufferCtx:t,shouldOnlyDrawLatest:!0})},t.prototype.toSVG=function(){return b(this)},g)"fromJSON"!==n&&(t.prototype[n]=g[n]);return w[e]=t})("Image",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.scale=e.scale||1,this.image=e.image||null},getBoundingRect:function(){return{x:this.x,y:this.y,width:this.image.width*this.scale,height:this.image.height*this.scale}},toJSON:function(){return{x:this.x,y:this.y,imageSrc:this.image.src,imageObject:this.image,scale:this.scale}},fromJSON:function(e){var t,o;return((t=null)!=(o=e.imageObject)?o.width:void 0)?t=e.imageObject:(t=new Image).src=e.imageSrc,u("Image",{x:e.x,y:e.y,image:t,scale:e.scale})},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Rectangle",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return u("Rectangle",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Ellipse",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return u("Ellipse",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Line",{constructor:function(e){return null==e&&(e={}),this.x1=e.x1||0,this.y1=e.y1||0,this.x2=e.x2||0,this.y2=e.y2||0,this.strokeWidth=e.strokeWidth||1,this.color=e.color||"black",this.capStyle=e.capStyle||"round",this.endCapShapes=e.endCapShapes||[null,null],this.dash=e.dash||null},getBoundingRect:function(){return{x:Math.min(this.x1,this.x2)-this.strokeWidth/2,y:Math.min(this.y1,this.y2)-this.strokeWidth/2,width:Math.abs(this.x2-this.x1)+this.strokeWidth/2,height:Math.abs(this.y2-this.y1)+this.strokeWidth/2}},toJSON:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,strokeWidth:this.strokeWidth,color:this.color,capStyle:this.capStyle,dash:this.dash,endCapShapes:this.endCapShapes}},fromJSON:function(e){return u("Line",e)},move:function(e){return null==e&&(e={}),this.x1=this.x1-e.xDiff,this.y1=this.y1-e.yDiff,this.x2=this.x2-e.xDiff,this.y2=this.y2-e.yDiff},setUpperLeft:function(e){var t,o,i;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,i=t.y-e.y,this.move({xDiff:o,yDiff:i})}}),r=function(e){var t,o,i,n,a;if(!e.length)return!1;for(a=e[0].size,t=e[0].color,n=0,o=e.length;n<o;n++)if((i=e[n]).size===a&&i.color===t||console.log(a,t,i.size,i.color),i.size!==a||i.color!==t)return!1;return!0},n=function(e,a){var n,t,o,r,s;return t=null,a.points?t=function(){var e,t,o,i;for(i=[],t=0,e=(o=a.points).length;t<e;t++)n=o[t],i.push(l(n));return i}():a.pointCoordinatePairs&&(t=function(){var e,t,o,i,n;for(n=[],t=0,e=(o=a.pointCoordinatePairs).length;t<e;t++)i=o[t],r=i[0],s=i[1],n.push(l({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return n}()),o=null,a.smoothedPointCoordinatePairs&&(o=function(){var e,t,o,i,n;for(n=[],t=0,e=(o=a.smoothedPointCoordinatePairs).length;t<e;t++)i=o[t],r=i[0],s=i[1],n.push(l({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return n}()),t[0]?u(e,{points:t,smoothedPoints:o,order:a.order,tailSize:a.tailSize,smooth:a.smooth}):null},f("LinePath",p={constructor:function(e){var t,o,i,n,a;if(null==e&&(e={}),i=e.points||[],this.order=e.order||3,this.tailSize=e.tailSize||3,this.smooth=!("smooth"in e)||e.smooth,this.segmentSize=Math.pow(2,this.order),this.sampleSize=this.tailSize+1,e.smoothedPoints)return this.points=e.points,this.smoothedPoints=e.smoothedPoints;for(this.points=[],a=[],n=0,t=i.length;n<t;n++)o=i[n],a.push(this.addPoint(o));return a},getBoundingRect:function(){return S.getBoundingRect(this.points.map(function(e){return{x:e.x-e.size/2,y:e.y-e.size/2,width:e.size,height:e.size}}))},toJSON:function(){var n,a;return r(this.points)?{order:this.order,tailSize:this.tailSize,smooth:this.smooth,pointCoordinatePairs:function(){var e,t,o,i;for(i=[],t=0,e=(o=this.points).length;t<e;t++)a=o[t],i.push([a.x,a.y]);return i}.call(this),smoothedPointCoordinatePairs:function(){var e,t,o,i;for(i=[],t=0,e=(o=this.smoothedPoints).length;t<e;t++)a=o[t],i.push([a.x,a.y]);return i}.call(this),pointSize:this.points[0].size,pointColor:this.points[0].color}:{order:this.order,tailSize:this.tailSize,smooth:this.smooth,points:function(){var e,t,o,i;for(i=[],t=0,e=(o=this.points).length;t<e;t++)n=o[t],i.push(_(n));return i}.call(this)}},fromJSON:function(e){return n("LinePath",e)},addPoint:function(e){if(this.points.push(e),this.smooth)return!this.smoothedPoints||this.points.length<this.sampleSize?this.smoothedPoints=c(this.points,this.order):(this.tail=S.last(c(S.last(this.points,this.sampleSize),this.order),this.segmentSize*this.tailSize),this.smoothedPoints=this.smoothedPoints.slice(0,this.smoothedPoints.length-this.segmentSize*(this.tailSize-1)).concat(this.tail));this.smoothedPoints=this.points},move:function(e){var t,o,i;for(null==e&&(e={}),i=0,t=(o=this.smooth?this.smoothedPoints:this.points).length;i<t;i++)o[i].move(e);return this.points=this.smoothedPoints},setUpperLeft:function(e){var t,o,i;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,i=t.y-e.y,this.move({xDiff:o,yDiff:i})}}),f("ErasedLinePath",{constructor:p.constructor,toJSON:p.toJSON,addPoint:p.addPoint,getBoundingRect:p.getBoundingRect,fromJSON:function(e){return n("ErasedLinePath",e)}}),f("Point",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.size=e.size||0,this.color=e.color||""},getBoundingRect:function(){return{x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size}},toJSON:function(){return{x:this.x,y:this.y,size:this.size,color:this.color}},fromJSON:function(e){return u("Point",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Polygon",{constructor:function(e){var t,o,i,n,a;for(null==e&&(e={}),this.points=e.points,this.fillColor=e.fillColor||"white",this.strokeColor=e.strokeColor||"black",this.strokeWidth=e.strokeWidth,this.dash=e.dash||null,null==e.isClosed&&(e.isClosed=!0),this.isClosed=e.isClosed,a=[],i=0,t=(n=this.points).length;i<t;i++)(o=n[i]).color=this.strokeColor,a.push(o.size=this.strokeWidth);return a},addPoint:function(e,t){return this.points.push(LC.createShape("Point",{x:e,y:t}))},getBoundingRect:function(){return S.getBoundingRect(this.points.map(function(e){return e.getBoundingRect()}))},toJSON:function(){return{strokeWidth:this.strokeWidth,fillColor:this.fillColor,strokeColor:this.strokeColor,dash:this.dash,isClosed:this.isClosed,pointCoordinatePairs:this.points.map(function(e){return[e.x,e.y]})}},fromJSON:function(i){return i.points=i.pointCoordinatePairs.map(function(e){var t,o;return t=e[0],o=e[1],u("Point",{x:t,y:o,size:i.strokeWidth,color:i.strokeColor})}),u("Polygon",i)},move:function(e){var t,o,i,n,a;for(null==e&&(e={}),a=[],i=0,t=(n=this.points).length;i<t;i++)o=n[i],a.push(o.move(e));return a},setUpperLeft:function(e){var t,o,i;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,i=t.y-e.y,this.move({xDiff:o,yDiff:i})}}),f("Text",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.v=e.v||0,this.text=e.text||"",this.color=e.color||"black",this.font=e.font||"18px sans-serif",this.forcedWidth=e.forcedWidth||null,this.forcedHeight=e.forcedHeight||null},_makeRenderer:function(e){if(e.lineHeight=1.2,this.renderer=new i(e,this.text,this.font,this.forcedWidth,this.forcedHeight),this.v<1)return console.log("repairing baseline"),this.v=1,this.x-=this.renderer.metrics.bounds.minx,this.y-=this.renderer.metrics.leading-this.renderer.metrics.descent},setText:function(e){return this.text=e,this.renderer=null},setFont:function(e){return this.font=e,this.renderer=null},setPosition:function(e,t){return this.x=e,this.y=t},setSize:function(e,t){return this.forcedWidth=Math.max(e,0),this.forcedHeight=Math.max(t,0),this.renderer=null},enforceMaxBoundingRect:function(e){var t,o,i;if(t=this.getBoundingRect(e.ctx),i={x:-e.position.x/e.scale,y:-e.position.y/e.scale,width:e.canvas.width/e.scale,height:e.canvas.height/e.scale},t.x+t.width>i.x+i.width)return o=t.x-i.x,this.forcedWidth=i.width-o-10,this.renderer=null},getBoundingRect:function(e,t){if(null==t&&(t=!1),!this.renderer){if(!e)throw"Must pass ctx if text hasn't been rendered yet";this._makeRenderer(e)}return{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.ceil(this.renderer.getWidth(!0)),height:Math.ceil(this.renderer.getHeight())}},toJSON:function(){return{x:this.x,y:this.y,text:this.text,color:this.color,font:this.font,forcedWidth:this.forcedWidth,forcedHeight:this.forcedHeight,v:this.v}},fromJSON:function(e){return u("Text",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("SelectionBox",{constructor:function(e){return null==e&&(e={}),this.shape=e.shape,null!=e.handleSize?this.handleSize=e.handleSize:this.handleSize=10,this.margin=4,this.backgroundColor=e.backgroundColor||null,this._br=this.shape.getBoundingRect(e.ctx)},toJSON:function(){return{shape:_(this.shape),backgroundColor:this.backgroundColor}},fromJSON:function(e){var t,o;return o=e.shape,e.handleSize,e.margin,t=e.backgroundColor,u("SelectionBox",{shape:l(o),backgroundColor:t})},getTopLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getTopRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getBoundingRect:function(){return{x:this._br.x-this.margin,y:this._br.y-this.margin,width:this._br.width+2*this.margin,height:this._br.height+2*this.margin}}}),t.exports={defineShape:f,createShape:u,JSONToShape:l,shapeToJSON:_}},{"./TextRenderer":2,"./canvasRenderer":5,"./lineEndCapShapes":8,"./svgRenderer":14,"./util":15}],14:[function(e,t,o){var i,l,n,a;l=e("./lineEndCapShapes"),a={},n=function(e,t){if(null==t&&(t={}),null==t.shouldIgnoreUnsupportedShapes&&(t.shouldIgnoreUnsupportedShapes=!1),a[e.className])return a[e.className](e);if(t.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+e.className+" to SVG"),"";throw"Can't render shape of type "+e.className+" to SVG"},(i=function(e,t){return a[e]=t})("Rectangle",function(e){var t,o,i,n,a,r,s,l;return n=e.x,s=e.y,a=e.x+e.width,l=e.y+e.height,i=Math.min(n,a),r=Math.min(s,l),o=Math.max(n,a)-i,t=Math.max(s,l)-r,e.strokeWidth%2!=0&&(i+=.5,r+=.5),"<rect x='"+i+"' y='"+r+"' width='"+o+"' height='"+t+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"}),i("SelectionBox",function(e){return""}),i("Ellipse",function(e){var t,o;return o=Math.floor(e.width/2),t=Math.floor(e.height/2),"<ellipse cx='"+(e.x+o)+"' cy='"+(e.y+t)+"' rx='"+Math.abs(o)+"' ry='"+Math.abs(t)+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"}),i("Image",function(e){return"<image x='"+e.x+"' y='"+e.y+"' width='"+e.image.naturalWidth*e.scale+"' height='"+e.image.naturalHeight*e.scale+"' xlink:href='"+e.image.src+"' />"}),i("Line",function(e){var t,o,i,n,a,r,s;return i=e.dash?"stroke-dasharray='"+e.dash.join(", ")+"'":"",o="",t=Math.max(2.2*e.strokeWidth,5),n=e.x1,a=e.x2,r=e.y1,s=e.y2,e.strokeWidth%2!=0&&(n+=.5,a+=.5,r+=.5,s+=.5),e.endCapShapes[0]&&(o+=l[e.endCapShapes[0]].svg(n,r,Math.atan2(r-s,n-a),t,e.color)),e.endCapShapes[1]&&(o+=l[e.endCapShapes[1]].svg(a,s,Math.atan2(s-r,a-n),t,e.color)),"<g> <line x1='"+n+"' y1='"+r+"' x2='"+a+"' y2='"+s+"' "+i+" stroke-linecap='"+e.capStyle+"' stroke='"+e.color+" 'stroke-width='"+e.strokeWidth+"' /> "+o+" </g>"}),i("LinePath",function(e){return"<polyline fill='none' points='"+e.smoothedPoints.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.points[0].color+"' stroke-linecap='round' stroke-width='"+e.points[0].size+"' />"}),i("ErasedLinePath",function(e){return""}),i("Polygon",function(e){return e.isClosed?"<polygon fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />":"<polyline fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='none' /> <polyline fill='none' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />"}),i("Text",function(i){var e,t,o;return o=i.forcedWidth?"width='"+i.forcedWidth+"px'":"",e=i.forcedHeight?"height='"+i.forcedHeight+"px'":"",t=i.text.split(/\r\n|\r|\n/g),i.renderer&&(t=i.renderer.lines),"<text x='"+i.x+"' y='"+i.y+"' "+o+" "+e+" fill='"+i.color+"' style='font: "+i.font+";'> "+t.map(function(e,t){var o;return o=0===t?0:"1.2em","<tspan x='"+i.x+"' dy='"+o+"' alignment-baseline='text-before-edge'> "+e+" </tspan>"}).join("")+" </text>"}),t.exports={defineSVGRenderer:i,renderShapeToSVG:n}},{"./lineEndCapShapes":8}],15:[function(e,t,o){var l,s,i,r,n,d=[].slice;i=Array.prototype.slice,l=e("./canvasRenderer").renderShapeToContext,s=e("./svgRenderer").renderShapeToSVG,r={addImageOnload:function(e,t){var o;return o=e.onload,e.onload=function(){return"function"==typeof o&&o(),t()},e},last:function(e,t){return null==t&&(t=null),t?i.call(e,Math.max(e.length-t,0)):e[e.length-1]},classSet:function(e){var t,o;for(o in t=[],e)e[o]&&t.push(o);return t.join(" ")},matchElementSize:function(i,n,e,a){var t;return null==a&&(a=function(){}),t=function(){var e,t,o;for(t=0,o=n.length;t<o;t++)(e=n[t]).style.width=i.offsetWidth+"px",e.style.height=i.offsetHeight+"px",null!=e.width&&(e.setAttribute("width",i.offsetWidth),e.setAttribute("height",i.offsetHeight));return a()},i.addEventListener("resize",t),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),t(),t},combineCanvases:function(){var e,t,o,i,n,a,r,s;for(o=1<=arguments.length?d.call(arguments,0):[],(e=document.createElement("canvas")).width=o[0].width,e.height=o[0].height,n=0,r=o.length;n<r;n++)t=o[n],e.width=Math.max(t.width,e.width),e.height=Math.max(t.height,e.height);for(i=e.getContext("2d"),a=0,s=o.length;a<s;a++)t=o[a],i.drawImage(t,0,0);return e},renderShapes:function(e,t,o,i){var n,a,r,s;for(null==o&&(o=1),null==i&&(i=null),(i=i||document.createElement("canvas")).width=t.width*o,i.height=t.height*o,(n=i.getContext("2d")).translate(-t.x*o,-t.y*o),n.scale(o,o),a=0,r=e.length;a<r;a++)s=e[a],l(n,s);return i},renderShapesToSVG:function(e,t,o){var i,n,a,r;return a=t.x,r=t.y,("<svg xmlns='http://www.w3.org/2000/svg' width='"+(n=t.width)+"' height='"+(i=t.height)+"' viewBox='0 0 "+n+" "+i+"'> <rect width='"+n+"' height='"+i+"' x='0' y='0' fill='"+o+"' /> <g transform='translate("+-a+", "+-r+")'> "+e.map(s).join("")+" </g> </svg>").replace(/(\r\n|\n|\r)/gm,"")},getBoundingRect:function(e,t,o){var i,n,a,r,s,l,d;if(!e.length)return{x:0,y:0,width:t,height:o};for(s=e[0].x,l=e[0].y,a=e[0].x+e[0].width,r=e[0].y+e[0].height,i=0,n=e.length;i<n;i++)d=e[i],s=Math.floor(Math.min(d.x,s)),l=Math.floor(Math.min(d.y,l)),a=Math.ceil(Math.max(a,d.x+d.width)),r=Math.ceil(Math.max(r,d.y+d.height));return{x:s=t?0:s,y:l=o?0:l,width:(a=t||a)-s,height:(r=o||r)-l}},getDefaultImageRect:function(e,t,o){var i,n,a;return null==t&&(t={width:0,height:0}),null==o&&(o={top:0,right:0,bottom:0,left:0}),a=t.width,i=t.height,(n=r.getBoundingRect(e,"infinite"===a?0:a,"infinite"===i?0:i)).x-=o.left,n.y-=o.top,n.width+=o.left+o.right,n.height+=o.top+o.bottom,n},getBackingScale:function(e){return null==window.devicePixelRatio?1:1<window.devicePixelRatio?window.devicePixelRatio:1},getGUID:(n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}),requestAnimationFrame:function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):setTimeout(e,0)},cancelAnimationFrame:function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):clearTimeout(e)}},t.exports=r},{"./canvasRenderer":5,"./svgRenderer":14}],16:[function(e,t,o){!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.CustomEvent.prototype,window.CustomEvent=e}()},{}],17:[function(e,t,o){var i=!1;CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(){i||(console.warn("context2D.setLineDash is a no-op in this browser."),i=!0)}),t.exports=null},{}],18:[function(e,t,o){var c,i,n,a,s,r,l,d,u,h,m,f,p,g,v,y,b;e("./ie_customevent"),e("./ie_setLineDash"),c=e("./core/LiterallyCanvas"),s=e("./core/defaultOptions"),n=e("./core/canvasRenderer"),v=e("./core/svgRenderer"),g=e("./core/shapes"),b=e("./core/util"),m=e("./core/renderSnapshotToImage"),f=e("./core/renderSnapshotToSVG"),u=e("./core/localization").localize,a={snapshotToShapes:function(e){var t,o,i,n,a;for(n=[],t=0,o=(i=e.shapes).length;t<o;t++)a=i[t],n.push(g.JSONToShape(a));return n},snapshotJSONToShapes:function(e){return a.snapshotToShapes(JSON.parse(e))}},i=e("./tools/base"),y={Pencil:e("./tools/Pencil"),Eraser:e("./tools/Eraser"),Line:e("./tools/Line"),Rectangle:e("./tools/Rectangle"),Ellipse:e("./tools/Ellipse"),Text:e("./tools/Text"),Polygon:e("./tools/Polygon"),Pan:e("./tools/Pan"),Eyedropper:e("./tools/Eyedropper"),SelectShape:e("./tools/SelectShape"),Tool:i.Tool,ToolWithStroke:i.ToolWithStroke},r=s.tools,s.imageURLPrefix,p=function(e){return e,s.imageURLPrefix=e},l=function(e,t){var o,i,n,a,r;for(a in null==t&&(t={}),s)a in t||(t[a]=s[a]);for(i=0,n=(r=e.children).length;i<n;i++)o=r[i],e.removeChild(o);return d(e,t)},d=function(i,e){var t,n,a;a=i.className,-1===[" "," "].join(i.className).indexOf(" literally ")&&(i.className=i.className+" literally"),i.className=i.className+" toolbar-hidden",(t=document.createElement("div")).className="lc-drawing",i.appendChild(t);var o=document.createElement("div");o.className="custom-canvas-background",t.appendChild(o);var r=document.createElement("div");r.className="draw-permission",i.appendChild(r);var s=document.createElement("div");s.className="temporary-draw-permission",i.appendChild(s);var l=document.createElement("span");l.className="laser-mark",i.appendChild(l);var d=document.createElement("div");return d.className="literally-data-loading-wrap",d.style.zIndex=100,d.style.display="none",i.appendChild(d),(n=new c(t,e)).customCanvasBackgroundElement=o,n.loadingElement=d,n.watermarkImageToLcBackground=void 0===e.watermarkImageToLcBackground||e.watermarkImageToLcBackground,t.setAttribute("watermarkImageToLcBackground",n.watermarkImageToLcBackground),n.isDrawAble?(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" yes"):(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" no"),n.isTmpDrawAble?(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" yes"):(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" no"),n.teardown=function(){var e,t,o;try{for(n._teardown(),t=(o=i.children).length-1;0<=t;t--)(e=o[t])&&i.removeChild(e);return i.className=a}catch(e){return void console.error("tk_lc error:",e)}},"onInit"in e&&e.onInit(n),n},h=function(e){return e.fn.literallycanvas=function(o){return null==o&&(o={}),this.each(function(e,t){return t.literallycanvas=l(t,o)}),this}},"undefined"!=typeof window&&(window.LC={init:l},window.$&&h(window.$)),t.exports={init:l,registerJQueryPlugin:h,util:b,tools:y,setDefaultImageURLPrefix:p,defaultTools:r,defineShape:g.defineShape,createShape:g.createShape,JSONToShape:g.JSONToShape,shapeToJSON:g.shapeToJSON,defineCanvasRenderer:n.defineCanvasRenderer,renderShapeToContext:n.renderShapeToContext,renderShapeToCanvas:n.renderShapeToCanvas,renderShapesToCanvas:b.renderShapes,defineSVGRenderer:v.defineSVGRenderer,renderShapeToSVG:v.renderShapeToSVG,renderShapesToSVG:b.renderShapesToSVG,snapshotToShapes:a.snapshotToShapes,snapshotJSONToShapes:a.snapshotJSONToShapes,renderSnapshotToImage:m,renderSnapshotToSVG:f,localize:u}},{"./core/LiterallyCanvas":1,"./core/canvasRenderer":5,"./core/defaultOptions":6,"./core/localization":9,"./core/renderSnapshotToImage":11,"./core/renderSnapshotToSVG":12,"./core/shapes":13,"./core/svgRenderer":14,"./core/util":15,"./ie_customevent":16,"./ie_setLineDash":17,"./tools/Ellipse":19,"./tools/Eraser":20,"./tools/Eyedropper":21,"./tools/Line":22,"./tools/Pan":23,"./tools/Pencil":24,"./tools/Polygon":25,"./tools/Rectangle":26,"./tools/SelectShape":27,"./tools/Text":28,"./tools/base":29}],19:[function(e,t,o){var i,n,a={}.hasOwnProperty;i=e("./base").ToolWithStroke,n=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Ellipse",t.prototype.iconName="ellipse",t.prototype.begin=function(e,t,o){return this.currentShape=n("Ellipse",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},t.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},t}()},{"../core/shapes":13,"./base":29}],20:[function(e,t,o){var i,n,a={}.hasOwnProperty;i=e("./Pencil"),n=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Eraser",t.prototype.iconName="eraser",t.prototype.makePoint=function(e,t,o){return n("Point",{x:e,y:t,size:this.strokeWidth,color:"#000"})},t.prototype.makeShape=function(){return n("ErasedLinePath")},t}()},{"../core/shapes":13,"./Pencil":24}],21:[function(e,t,o){var i,r,n={}.hasOwnProperty;i=e("./base").Tool,r=function(e,t){var o,i,n;return i=t.x,n=t.y,(o=e.getImageData(i,n,1,1).data)[3]?"rgb("+o[0]+", "+o[1]+", "+o[2]+")":null},t.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.strokeOrFill="stroke"}return function(e,t){for(var o in t)n.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Eyedropper",t.prototype.iconName="eyedropper",t.prototype.optionsStyle="stroke-or-fill",t.prototype.readColor=function(e,t,o){var i,n,a;return a=o.getDefaultImageRect(),i=o.getImage(),(n=r(i.getContext("2d"),{x:e-a.x,y:t-a.y}))||o.getColor("background"),"stroke"===this.strokeOrFill?o.setColor("primary",n):o.setColor("secondary",n)},t.prototype.begin=function(e,t,o){return this.readColor(e,t,o)},t.prototype.continue=function(e,t,o){return this.readColor(e,t,o)},t}()},{"./base":29}],22:[function(e,t,o){var i,n,a={}.hasOwnProperty;i=e("./base").ToolWithStroke,n=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Line",t.prototype.iconName="line",t.prototype.optionsStyle="line-options-and-stroke-width",t.prototype.begin=function(e,t,o){return this.currentShape=n("Line",{x1:e,y1:t,x2:e,y2:t,strokeWidth:this.strokeWidth,dash:function(){switch(!1){case!this.isDashed:return[2*this.strokeWidth,4*this.strokeWidth];default:return null}}.call(this),endCapShapes:this.hasEndArrow?[null,"arrow"]:null,color:o.getColor("primary")})},t.prototype.continue=function(e,t,o){return this.currentShape.x2=e,this.currentShape.y2=t,o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},t}()},{"../core/shapes":13,"./base":29}],23:[function(e,t,o){var i,n={}.hasOwnProperty;i=e("./base").Tool,e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)n.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Pan",t.prototype.iconName="pan",t.prototype.usesSimpleAPI=!1,t.prototype.didBecomeActive=function(n){var a,i,r;return a=[],this.unsubscribe=function(){var e,t,o,i;for(i=[],t=0,o=a.length;t<o;t++)e=a[t],i.push(e());return i},a.push(n.on("lc-pointerdown",(i=this,function(e){var t,o;return t=e.rawX,o=e.rawY,i.oldPosition=n.position,i.pointerStart={x:t,y:o}}))),a.push(n.on("lc-pointerdrag",(r=this,function(e){var t,o,i;return o=e.rawX,i=e.rawY,t={x:(o-r.pointerStart.x)*n.backingScale,y:(i-r.pointerStart.y)*n.backingScale},n.setPan(r.oldPosition.x+t.x,r.oldPosition.y+t.y)})))},t.prototype.willBecomeInactive=function(e){return this.unsubscribe()},t}()},{"../core/shapes":13,"./base":29}],24:[function(e,t,o){var i,n,a={}.hasOwnProperty;i=e("./base").ToolWithStroke,n=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Pencil",t.prototype.iconName="pencil",t.prototype.eventTimeThreshold=10,t.prototype.begin=function(e,t,o){return this.color=o.getColor("primary"),this.currentShape=this.makeShape(),this.currentShape.addPoint(this.makePoint(e,t,o)),this.lastEventTime=Date.now()},t.prototype.continue=function(e,t,o){var i;if((i=Date.now()-this.lastEventTime)>this.eventTimeThreshold)return this.lastEventTime+=i,this.currentShape.addPoint(this.makePoint(e,t,o)),o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape),this.currentShape=void 0},t.prototype.makePoint=function(e,t,o){return n("Point",{x:e,y:t,size:this.strokeWidth,color:this.color})},t.prototype.makeShape=function(){return n("LinePath")},t}()},{"../core/shapes":13,"./base":29}],25:[function(e,t,o){var i,n,a={}.hasOwnProperty;i=e("./base").ToolWithStroke,n=e("../core/shapes").createShape,t.exports=function(e){function p(){return p.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(p,i),p.prototype.name="Polygon",p.prototype.iconName="polygon",p.prototype.usesSimpleAPI=!1,p.prototype.didBecomeActive=function(i){var e,t,o,n,a,r,s,l,d,c,u,h,m,f;return p.__super__.didBecomeActive.call(this,i),s=[],this.polygonUnsubscribe=function(){var e,t,o,i;for(i=[],t=0,o=s.length;t<o;t++)e=s[t],i.push(e());return i},this.points=null,this.maybePoint=null,o=function(){return l._getWillFinish()?l._close(i):(i.trigger("lc-polygon-started"),l.points?l.points.push(l.maybePoint):l.points=[l.maybePoint],l.maybePoint={x:l.maybePoint.x,y:l.maybePoint.y},i.setShapesInProgress(l._getShapes(i)),i.repaintLayer("main"))},t=function(e){var t,o;if(t=e.x,o=e.y,d.maybePoint)return d.maybePoint.x=t,d.maybePoint.y=o,i.setShapesInProgress(d._getShapes(i)),i.repaintLayer("main")},e=function(e){var t,o;return t=e.x,o=e.y,c.maybePoint={x:t,y:o},i.setShapesInProgress(c._getShapes(i)),i.repaintLayer("main")},r=function(){return u.maybePoint={x:1/0,y:1/0},u._close(i)},a=function(){return h.maybePoint=h.points[0],h._close(i)},m=h=u=c=d=l=this,n=function(){return m._cancel(i)},s.push(i.on("drawingChange",(f=this,function(){return f._cancel(i)}))),s.push(i.on("lc-pointerdown",e)),s.push(i.on("lc-pointerdrag",t)),s.push(i.on("lc-pointermove",t)),s.push(i.on("lc-pointerup",o)),s.push(i.on("lc-polygon-finishopen",r)),s.push(i.on("lc-polygon-finishclosed",a)),s.push(i.on("lc-polygon-cancel",n))},p.prototype.willBecomeInactive=function(e){return p.__super__.willBecomeInactive.call(this,e),(this.points||this.maybePoint)&&this._cancel(e),this.polygonUnsubscribe()},p.prototype._getArePointsClose=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)<10},p.prototype._getWillClose=function(){return!!(this.points&&1<this.points.length)&&(!!this.maybePoint&&this._getArePointsClose(this.points[0],this.maybePoint))},p.prototype._getWillFinish=function(){return!!(this.points&&1<this.points.length)&&(!!this.maybePoint&&(this._getArePointsClose(this.points[0],this.maybePoint)||this._getArePointsClose(this.points[this.points.length-1],this.maybePoint)))},p.prototype._cancel=function(e){return e.trigger("lc-polygon-stopped"),this.maybePoint=null,this.points=null,e.setShapesInProgress([]),e.repaintLayer("main")},p.prototype._close=function(e){return e.trigger("lc-polygon-stopped"),e.setShapesInProgress([]),2<this.points.length&&e.saveShape(this._getShape(e,!1)),this.maybePoint=null,this.points=null},p.prototype._getShapes=function(e,t){var o;return null==t&&(t=!0),(o=this._getShape(e,t))?[o]:[]},p.prototype._getShape=function(e,t){var o;return null==t&&(t=!0),o=[],this.points&&(o=o.concat(this.points)),!t&&o.length<3?null:(t&&this.maybePoint&&o.push(this.maybePoint),1<o.length?n("Polygon",{isClosed:this._getWillClose(),strokeColor:e.getColor("primary"),fillColor:e.getColor("secondary"),strokeWidth:this.strokeWidth,points:o.map(function(e){return n("Point",e)})}):null)},p.prototype.optionsStyle="polygon-and-stroke-width",p}()},{"../core/shapes":13,"./base":29}],26:[function(e,t,o){var i,n,a={}.hasOwnProperty;i=e("./base").ToolWithStroke,n=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Rectangle",t.prototype.iconName="rectangle",t.prototype.begin=function(e,t,o){return this.currentShape=n("Rectangle",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},t.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},t}()},{"../core/shapes":13,"./base":29}],27:[function(e,t,o){var i,l,n={}.hasOwnProperty;i=e("./base").Tool,l=e("../core/shapes").createShape,t.exports=function(e){function t(e){this.selectCanvas=document.createElement("canvas"),this.selectCanvas.style["background-color"]="transparent",this.selectCtx=this.selectCanvas.getContext("2d")}return function(e,t){for(var o in t)n.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="SelectShape",t.prototype.usesSimpleAPI=!1,t.prototype.didBecomeActive=function(a){var e,t,o,n,r,i,s;return n=[],this._selectShapeUnsubscribe=function(){var e,t,o,i;for(i=[],t=0,o=n.length;t<o;t++)e=n[t],i.push(e());return i},e=function(e){var t,o,i,n;if(i=e.x,n=e.y,r.didDrag=!1,o=r._getPixel(i,n,a,r.selectCtx),r.selectedShape=a.shapes[o],null!=r.selectedShape)return a.trigger("shapeSelected",{selectedShape:r.selectedShape}),a.setShapesInProgress([r.selectedShape,l("SelectionBox",{shape:r.selectedShape,handleSize:0})]),a.repaintLayer("main"),t=r.selectedShape.getBoundingRect(),r.dragOffset={x:i-t.x,y:n-t.y}},t=function(e){var t,o;if(t=e.x,o=e.y,null!=i.selectedShape)return i.didDrag=!0,i.selectedShape.setUpperLeft({x:t-i.dragOffset.x,y:o-i.dragOffset.y}),a.setShapesInProgress([i.selectedShape,l("SelectionBox",{shape:i.selectedShape,handleSize:0})]),a.repaintLayer("main")},s=i=r=this,o=function(e){if(e.x,e.y,s.didDrag)return s.didDrag=!1,a.trigger("shapeMoved",{shape:s.selectedShape}),a.trigger("drawingChange",{}),a.repaintLayer("main"),s._drawSelectCanvas(a)},n.push(a.on("lc-pointerdown",e)),n.push(a.on("lc-pointerdrag",t)),n.push(a.on("lc-pointerup",o)),this._drawSelectCanvas(a)},t.prototype.willBecomeInactive=function(e){return this._selectShapeUnsubscribe(),e.setShapesInProgress([])},t.prototype._drawSelectCanvas=function(e){var t,o;return this.selectCanvas.width=e.canvas.width,this.selectCanvas.height=e.canvas.height,this.selectCtx.clearRect(0,0,this.selectCanvas.width,this.selectCanvas.height),t=e.shapes.map((o=this,function(e,t){return l("SelectionBox",{shape:e,handleSize:0,backgroundColor:"#"+o._intToHex(t)})})),e.draw(t,this.selectCtx)},t.prototype._intToHex=function(e){return("000000"+e.toString(16)).slice(-6)},t.prototype._getPixel=function(e,t,o,i){var n,a;return n=o.drawingCoordsToClientCoords(e,t),(a=i.getImageData(n.x,n.y,1,1).data)[3]?parseInt(this._rgbToHex(a[0],a[1],a[2]),16):null},t.prototype._componentToHex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype._rgbToHex=function(e,t,o){return""+this._componentToHex(e)+this._componentToHex(t)+this._componentToHex(o)},t}()},{"../core/shapes":13,"./base":29}],28:[function(e,t,o){var i,r,s,n={}.hasOwnProperty;i=e("./base").Tool,r=e("../core/shapes").createShape,s=function(e,t){return!(e.x<t.x)&&(!(e.y<t.y)&&(!(e.x>t.x+t.width)&&!(e.y>t.y+t.height)))},t.exports=function(e){function t(){this.text="",this.font="bold 18px sans-serif",this.currentShape=null,this.currentShapeState=null,this.initialShapeBoundingRect=null,this.dragAction=null,this.didDrag=!1}return function(e,t){for(var o in t)n.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.name="Text",t.prototype.iconName="text",t.prototype.didBecomeActive=function(t){var n,e,o,i,a,r,s;return n=[],this.unsubscribe=function(){var e,t,o,i;for(i=[],t=0,o=n.length;t<o;t++)e=n[t],i.push(e());return i},function(){return o._ensureNotEditing(t),o._clearCurrentShape(t),t.repaintLayer("main")},i=o=this,e=function(){return i._updateInputEl(t)},n.push(t.on("zoom",e)),n.push(t.on("imageSizeChange",e)),n.push(t.on("snapshotLoad",(a=this,function(){return a._clearCurrentShape(t),t.repaintLayer("main")}))),n.push(t.on("primaryColorChange",(r=this,function(e){if(r.currentShape)return r.currentShape.color=e,r._updateInputEl(t),t.repaintLayer("main")}))),n.push(t.on("setFont",(s=this,function(e){if(s.currentShape)return s.font=e,s.currentShape.setFont(e),s._setShapesInProgress(t),s._updateInputEl(t),t.repaintLayer("main")})))},t.prototype.willBecomeInactive=function(e){return this.currentShape&&(this._ensureNotEditing(e),this.commit(e)),this.unsubscribe()},t.prototype.setText=function(e){return this.text=e},t.prototype._ensureNotEditing=function(e){if("editing"===this.currentShapeState)return this._exitEditingState(e)},t.prototype._clearCurrentShape=function(e){return this.currentShape=null,this.initialShapeBoundingRect=null,this.currentShapeState=null,e.setShapesInProgress([])},t.prototype.commit=function(e){return this.currentShape.text&&e.saveShape(this.currentShape),this._clearCurrentShape(e),e.repaintLayer("main")},t.prototype._getSelectionShape=function(e,t){return null==t&&(t=null),r("SelectionBox",{shape:this.currentShape,ctx:e,backgroundColor:t})},t.prototype._setShapesInProgress=function(e){switch(this.currentShapeState){case"selected":return e.setShapesInProgress([this._getSelectionShape(e.ctx),this.currentShape]);case"editing":return e.setShapesInProgress([this._getSelectionShape(e.ctx,"#fff")]);default:return e.setShapesInProgress([this.currentShape])}},t.prototype.begin=function(e,t,o){var i,n,a;if(this.dragAction="none",this.didDrag=!1,"selected"===this.currentShapeState||"editing"===this.currentShapeState?(i=this.currentShape.getBoundingRect(o.ctx),(a=this._getSelectionShape(o.ctx)).getBoundingRect(),s(n={x:e,y:t},i)&&(this.dragAction="move"),s(n,a.getBottomRightHandleRect())&&(this.dragAction="resizeBottomRight"),s(n,a.getTopLeftHandleRect())&&(this.dragAction="resizeTopLeft"),s(n,a.getBottomLeftHandleRect())&&(this.dragAction="resizeBottomLeft"),s(n,a.getTopRightHandleRect())&&(this.dragAction="resizeTopRight"),"none"===this.dragAction&&"editing"===this.currentShapeState&&(this.dragAction="stop-editing",this._exitEditingState(o))):(this.color=o.getColor("primary"),this.currentShape=r("Text",{x:e,y:t,text:this.text,color:this.color,font:this.font,v:1}),this.dragAction="place",this.currentShapeState="selected"),"none"!==this.dragAction)return this.initialShapeBoundingRect=this.currentShape.getBoundingRect(o.ctx),this.dragOffset={x:e-this.initialShapeBoundingRect.x,y:t-this.initialShapeBoundingRect.y},this._setShapesInProgress(o),o.repaintLayer("main");this.commit(o)},t.prototype.continue=function(e,t,o){var i,n,a;if("none"!==this.dragAction){switch(a=(i=this.initialShapeBoundingRect).x+i.width,n=i.y+i.height,this.dragAction){case"place":this.currentShape.x=e,this.currentShape.y=t,this.didDrag=!0;break;case"move":this.currentShape.x=e-this.dragOffset.x,this.currentShape.y=t-this.dragOffset.y,this.didDrag=!0;break;case"resizeBottomRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-i.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-i.y);break;case"resizeTopLeft":this.currentShape.setSize(a-e+this.dragOffset.x,n-t+this.dragOffset.y),this.currentShape.setPosition(e-this.dragOffset.x,t-this.dragOffset.y);break;case"resizeBottomLeft":this.currentShape.setSize(a-e+this.dragOffset.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-i.y),this.currentShape.setPosition(e-this.dragOffset.x,this.currentShape.y);break;case"resizeTopRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-i.x,n-t+this.dragOffset.y),this.currentShape.setPosition(this.currentShape.x,t-this.dragOffset.y)}return this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)}},t.prototype.end=function(e,t,o){if(this.currentShape)return this.currentShape.setSize(this.currentShape.forcedWidth,0),"selected"===this.currentShapeState&&("place"===this.dragAction||"move"===this.dragAction&&!this.didDrag)&&this._enterEditingState(o),this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)},t.prototype._enterEditingState=function(t){var e,o,i;if(this.currentShapeState="editing",this.inputEl)throw"State error";return this.inputEl=document.createElement("textarea"),this.inputEl.className="text-tool-input",this.inputEl.style.position="absolute",this.inputEl.style.transformOrigin="0px 0px",this.inputEl.style.backgroundColor="transparent",this.inputEl.style.border="none",this.inputEl.style.outline="none",this.inputEl.style.margin="0",this.inputEl.style.padding="4px",this.inputEl.style.zIndex="1000",this.inputEl.style.overflow="hidden",this.inputEl.style.resize="none",this.inputEl.value=this.currentShape.text,this.inputEl.addEventListener("mousedown",function(e){return e.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(e){return e.stopPropagation()}),e=function(e){return o.currentShape.setText(e.target.value),o.currentShape.enforceMaxBoundingRect(t),o._setShapesInProgress(t),t.repaintLayer("main"),o._updateInputEl(t),e.stopPropagation()},(o=this).inputEl.addEventListener("keydown",(i=this,function(){return i._updateInputEl(t,!0)})),this.inputEl.addEventListener("keyup",e),this.inputEl.addEventListener("change",e),this._updateInputEl(t),t.containerEl.appendChild(this.inputEl),this.inputEl.focus(),this._setShapesInProgress(t)},t.prototype._exitEditingState=function(e){return this.currentShapeState="selected",e.containerEl.removeChild(this.inputEl),this.inputEl=null,this._setShapesInProgress(e),e.repaintLayer("main")},t.prototype._updateInputEl=function(e,t){var o,i;if(null==t&&(t=!1),this.inputEl)return o=this.currentShape.getBoundingRect(e.ctx,!0),this.inputEl.style.font=this.currentShape.font,this.inputEl.style.color=this.currentShape.color,this.inputEl.style.left=e.position.x/e.backingScale+o.x*e.scale-4+"px",this.inputEl.style.top=e.position.y/e.backingScale+o.y*e.scale-4+"px",t&&!this.currentShape.forcedWidth?this.inputEl.style.width=o.width+10+this.currentShape.renderer.emDashWidth+"px":this.inputEl.style.width=o.width+12+"px",this.inputEl.style.height=t?o.height+10+this.currentShape.renderer.metrics.leading+"px":o.height+10+"px",i="scale("+e.scale+")",this.inputEl.style.transform=i,this.inputEl.style.webkitTransform=i,this.inputEl.style.MozTransform=i,this.inputEl.style.msTransform=i,this.inputEl.style.OTransform=i},t.prototype.optionsStyle="font",t}()},{"../core/shapes":13,"./base":29}],29:[function(e,t,o){var i,n,a={}.hasOwnProperty;(n={}).Tool=i=function(){function e(){}return e.prototype.name=null,e.prototype.iconName=null,e.prototype.usesSimpleAPI=!0,e.prototype.begin=function(e,t,o){},e.prototype.continue=function(e,t,o){},e.prototype.end=function(e,t,o){},e.prototype.optionsStyle=null,e.prototype.didBecomeActive=function(e){},e.prototype.willBecomeInactive=function(e){},e}(),n.ToolWithStroke=function(e){function t(e){this.strokeWidth=e.opts.defaultStrokeWidth}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,i),t.prototype.optionsStyle="stroke-width",t.prototype.didBecomeActive=function(t){var n,o;return n=[],this.unsubscribe=function(){var e,t,o,i;for(i=[],t=0,o=n.length;t<o;t++)e=n[t],i.push(e());return i},n.push(t.on("setStrokeWidth",(o=this,function(e){return o.strokeWidth=e,t.trigger("toolDidUpdateOptions")})))},t.prototype.willBecomeInactive=function(e){return this.unsubscribe()},t}(),t.exports=n},{}]},{},[18])(18)}),window.TalkSlider=function(m){var e={},f="",p="",g="",t="",o="",i="",h=!1,v=100,a=100,n=document.getElementById(m.sliderContainer.id);n.classList.add("custom-tk-volume-slider-container"),m.sliderContainer&&"vertikal"===m.sliderContainer.direction&&n.classList.add("vertikal"),(p=document.createElement("div")).classList.add("custom-tk-rc-slider","custom-tk-slider","custom-tk-detection-device"),"vertikal"===m.sliderContainer.direction&&p.classList.add("vertikal"),(i=document.createElement("div")).classList.add("custom-tk-rc-slider-rail"),"vertikal"===m.sliderContainer.direction&&i.classList.add("vertikal"),(g=document.createElement("div")).classList.add("custom-tk-rc-slider-track"),"vertikal"===m.sliderContainer.direction&&g.classList.add("vertikal"),(t=document.createElement("div")).classList.add("custom-tk-rc-slider-step"),"vertikal"===m.sliderContainer.direction&&t.classList.add("vertikal"),(f=document.createElement("div")).classList.add("custom-tk-rc-slider-handle"),"vertikal"===m.sliderContainer.direction&&f.classList.add("vertikal"),(o=document.createElement("div")).classList.add("custom-tk-rc-slider-mark"),"vertikal"===m.sliderContainer.direction&&o.classList.add("vertikal"),p.appendChild(i),p.appendChild(g),p.appendChild(t),p.appendChild(f),p.appendChild(o),n.appendChild(p);var y=document,b=window,_=Math;return p.onmousedown=function(e){if(h=!0,"vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(a);var t=(e||b.event).clientY,o=p.offsetHeight;100<(a=_.round((p.getBoundingClientRect().bottom-t)/o*100))?a=100:a<0&&(a=0),f.style.bottom=a+"%",g.style.height=a+"%",p.onmouseup=function(e){return h&&m.onAfterChange&&m.onAfterChange(a),e&&(e.preventDefault(),e.stopPropagation()),!1}}else{m.onBeforeChange&&m.onBeforeChange(a);var i=(e||b.event).clientX,n=p.offsetWidth;100<(a=_.round((i-p.getBoundingClientRect().left)/n*100))?a=100:a<0&&(a=0),f.style.left=a+"%",g.style.width=a+"%",p.onmouseup=function(){h&&m.onAfterChange&&m.onAfterChange(a)}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.onclick=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.onmousedown=function(e){var i=!1;if("vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(v);var n=(e||b.event).clientY,a=f.offsetTop,r=p.offsetHeight,s=f.offsetHeight,l=r-(h=r-s);document.onmousemove=function(e){var t=(e||b.event).clientY,o=_.min(h,_.max(-s,a+(t-n)));100<(v=100-_.round((o+l)/r*100))?v=100:v<0&&(v=0),f.style.bottom="calc(("+v+"%) - 3px)",g.style.height=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty(),i=!0},document.onmouseup=function(){document.onmousemove=null,m.onAfterChange&&m.onAfterChange(v),document.onmouseup=null}}else{m.onBeforeChange&&i&&m.onBeforeChange(v);var d=(e||b.event).clientX,c=(a=f.offsetLeft,p.offsetWidth),u=f.offsetWidth,h=p.offsetWidth-this.offsetWidth;l=c-h;document.onmousemove=function(e){var t=(e||b.event).clientX,o=_.min(h,_.max(-u,a+(t-d)));100<(v=_.round((o+l)/c*100))?v=100:v<0&&(v=0),f.style.left=v+"%",g.style.width=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty(),i=!0},document.onmouseup=function(){document.onmousemove=null,i&&m.onAfterChange&&m.onAfterChange(v),document.onmouseup=null}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.ontouchstart=function(e){if(h=!1,"vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(v);var i=(e||b.event).touches[0].clientY,n=f.offsetTop,a=p.offsetHeight,r=f.offsetHeight,s=a-(u=a-r);document.ontouchmove=function(e){var t=(e||b.event).touches[0].clientY,o=_.min(u,_.max(-r,n+(t-i)));100<(v=100-_.round((o+s)/a*100))?v=100:v<0&&(v=0),f.style.bottom="calc(("+v+"%) - 3px)",g.style.height=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty()},document.ontouchend=function(){document.ontouchmove=null,m.onAfterChange&&m.onAfterChange(v),document.ontouchend=null}}else{m.onBeforeChange&&m.onBeforeChange(v);var l=(e||b.event).touches[0].clientX,d=(n=f.offsetLeft,p.offsetWidth),c=f.offsetWidth,u=p.offsetWidth-this.offsetWidth;s=d-u;f.ontouchmove=function(e){var t=(e||b.event).touches[0].clientX,o=_.min(u,_.max(-c,n+(t-l)));100<(v=_.round((o+s)/d*100))?v=100:v<0&&(v=0),f.style.left=v+"%",g.style.width=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty()},document.ontouchend=function(){document.ontouchmove=null,m.onAfterChange&&m.onAfterChange(v),document.ontouchend=null}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},e.setProgress=function(e){void 0!==e&&("vertikal"===m.sliderContainer.direction?(f.style.bottom=e+"%",g.style.height=e+"%"):(f.style.left=e+"%",g.style.width=e+"%"))},e},window.TalkDrag=function(e,l){var d=this;if((l=l||{}).containerData=l.containerData||{},d.flag=!1,d.element=e,d.leftPercent=void 0!==l.containerData.left?l.containerData.left/100:0,d.topPercent=void 0!==l.containerData.top?l.containerData.top/100:0,d.disabled=void 0!==l.disabled&&l.disabled,"string"==typeof e&&(d.element=document.getElementById(e)),d.element)return void 0!==l.containerData.parentNodeID?(d.containerElement=l.containerData.parentNodeID,"string"==typeof l.containerData.parentNodeID&&(d.containerElement=document.getElementById(l.containerData.parentNodeID))):d.containerElement=d.element.parentNode,d.containerElement&&(d.containerElement.className=d.containerElement.className.replace("talk-cloud-drag-parent-container","")+" talk-cloud-drag-parent-container "),d.cur={x:0,y:0},d.updateDisabled=function(e){d.disabled=e},d.destroy=function(){window.removeEventListener("resize",d.resizeCallback,!1),d.element.removeEventListener("mousedown",d.mousedownOrTouchstartCallback,!1),d.element.removeEventListener("touchstart",d.mousedownOrTouchstartCallback,!1),d.element.removeEventListener("touchmove",d.mousemoveOrTouchmoveEventCallback,!1),d.element.removeEventListener("touchend",d.mouseupOrTouchendEventCallback,!1),document.documentElement.removeEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1)},d.resize=function(){d.element.style.left=(d.containerElement.offsetWidth-d.element.offsetWidth)*d.leftPercent+"px",d.element.style.top=(d.containerElement.offsetHeight-d.element.offsetHeight)*d.topPercent+"px"},d.setPosition=function(e,t){d.leftPercent=e/100,d.topPercent=t/100,d.element.style.left=(d.containerElement.offsetWidth-d.element.offsetWidth)*d.leftPercent+"px",d.element.style.top=(d.containerElement.offsetHeight-d.element.offsetHeight)*d.topPercent+"px"},d.down=function(e){var t;"mousedown"===e.type&&(document.documentElement.addEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.addEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1)),d.element.setAttribute("talkDragState","onBeforeDrag"),d.containerElement&&d.containerElement.setAttribute("talkDragParentState","onBeforeDrag"),d.flag=!0,t=e.touches?e.touches[0]:e,d.cur.x=t.clientX,d.cur.y=t.clientY,d.dx=d.element.offsetLeft,d.dy=d.element.offsetTop,"mousedown"===e.type?l.onBeforeDrag&&l.onBeforeDrag(100*d.leftPercent,100*d.topPercent):"touchstart"===e.type&&(d.flag=!1,clearTimeout(d.downTimer),d.downTimer=setTimeout(function(){d.flag=!0,d.element.style.pointerEvents="none",d.element.style.boxShadow="0 0 0.2rem 0.05rem #222",d.element.style.transform="scale(1.05)",l.onBeforeDrag&&l.onBeforeDrag(100*d.leftPercent,100*d.topPercent)},500))},d.move=function(e){if("touchmove"===e.type){var t=Math.abs(e.touches[0].clientX-d.cur.x),o=Math.abs(e.touches[0].clientY-d.cur.y);40<=Math.hypot(t,o)&&(clearTimeout(d.downTimer),d.downTimer=void 0)}if(d.flag){var i;d.element.setAttribute("talkDragState","onDrag"),d.containerElement&&d.containerElement.setAttribute("talkDragParentState","onDrag"),i=e.touches?e.touches[0]:e,l.onDrag&&l.onDrag(100*d.leftPercent,100*d.topPercent);var n=d.containerElement.offsetWidth-d.element.offsetWidth,a=d.containerElement.offsetHeight-d.element.offsetHeight;d.nx=i.clientX-d.cur.x,d.ny=i.clientY-d.cur.y;var r=d.dx+d.nx,s=d.dy+d.ny;r=Math.min(Math.max(0,r),n),s=Math.min(Math.max(0,s),a);d.element.style.left=r+"px",d.element.style.top=s+"px",d.leftPercent=r/(d.containerElement.offsetWidth-d.element.offsetWidth),d.topPercent=s/(d.containerElement.offsetHeight-d.element.offsetHeight)}},d.end=function(e){"mouseup"===e.type&&(document.documentElement.removeEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1)),"touchend"===e.type&&(clearTimeout(d.downTimer),d.downTimer=void 0,d.flag=!1,d.element.style.pointerEvents="auto",d.element.style.boxShadow="0 0 0 0 #222",d.element.style.transform="scale(1)"),d.flag&&(d.element.setAttribute("talkDragState","onAfterDrag"),d.containerElement&&d.containerElement.setAttribute("talkDragParentState","onAfterDrag"),d.flag=!1,l.onAfterDrag&&l.onAfterDrag(100*d.leftPercent,100*d.topPercent))},d.resizeCallback=function(e){d.resize()},d.mousedownOrTouchstartCallback=function(e){if(d.flag||!d.disabled){try{d.down(e)}catch(e){console.error(e)}return!1}},d.mousemoveOrTouchmoveEventCallback=function(e){if(d.flag||!d.disabled){try{d.move(e)}catch(e){console.error(e)}return!1}},d.mouseupOrTouchendEventCallback=function(e){if(d.flag||!d.disabled){try{d.end(e)}catch(e){console.error(e)}return!1}},window.addEventListener("resize",d.resizeCallback,!1),d.element.addEventListener("mousedown",d.mousedownOrTouchstartCallback,!1),d.element.addEventListener("touchstart",d.mousedownOrTouchstartCallback,!1),d.element.addEventListener("touchmove",d.mousemoveOrTouchmoveEventCallback,!1),d.element.addEventListener("touchend",d.mouseupOrTouchendEventCallback,!1),d.element.setAttribute("talkDrag","true"),d.resize(),d;console.error("parameter elementId cannot find a node!")},function a(r,s,l){function d(t,e){if(!s[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[t]={exports:{}};r[t][0].call(n.exports,function(e){return d(r[t][1][e]||e)},n,n.exports,a,r,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(o,e,t){(function(e){if(o("core-js/shim"),o("regenerator-runtime/runtime"),o("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,o){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:o})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":3,"core-js/shim":326,"regenerator-runtime/runtime":2}],2:[function(e,W,t){(function(e){!function(e){var l,t=Object.prototype,d=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",r="object"==typeof W,s=e.regeneratorRuntime;if(s)r&&(W.exports=s);else{(s=e.regeneratorRuntime=r?W.exports:{}).wrap=b;var u="suspendedStart",h="suspendedYield",m="executing",f="completed",p={},c={};c[n]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(D([])));v&&v!==t&&d.call(v,n)&&(c=v);var y=k.prototype=w.prototype=Object.create(c);S.prototype=y.constructor=k,k.constructor=S,k[a]=S.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(y),e},s.awrap=function(e){return{__await:e}},I(P.prototype),P.prototype[i]=function(){return this},s.AsyncIterator=P,s.async=function(e,t,o,i){var n=new P(b(e,t,o,i));return s.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},I(y),y[a]="Generator",y[n]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(o){var i=[];for(var e in o)i.push(e);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in o)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=D,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&d.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function e(e,t){return a.type="throw",a.arg=o,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],a=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var r=d.call(n,"catchLoc"),s=d.call(n,"finallyLoc");if(r&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(r){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&d.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=e,a.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),T(o),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var i=o.completion;if("throw"===i.type){var n=i.arg;T(o)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:D(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=l),p}}}function b(e,t,o,i){var a,r,s,l,n=t&&t.prototype instanceof w?t:w,d=Object.create(n.prototype),c=new E(i||[]);return d._invoke=(a=e,r=o,s=c,l=u,function(e,t){if(l===m)throw new Error("Generator is already running");if(l===f){if("throw"===e)throw t;return L()}for(s.method=e,s.arg=t;;){var o=s.delegate;if(o){var i=C(o,s);if(i){if(i===p)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===u)throw l=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=m;var n=_(a,r,s);if("normal"===n.type){if(l=s.done?f:h,n.arg===p)continue;return{value:n.arg,done:s.done}}"throw"===n.type&&(l=f,s.method="throw",s.arg=n.arg)}}),d}function _(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function k(){}function I(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function P(s){function l(e,t,o,i){var n=_(s[e],s,t);if("throw"!==n.type){var a=n.arg,r=a.value;return r&&"object"==typeof r&&d.call(r,"__await")?Promise.resolve(r.__await).then(function(e){l("next",e,o,i)},function(e){l("throw",e,o,i)}):Promise.resolve(r).then(function(e){a.value=e,o(a)},i)}i(n.arg)}var t;"object"==typeof e.process&&e.process.domain&&(l=e.process.domain.bind(l)),this._invoke=function(o,i){function e(){return new Promise(function(e,t){l(o,i,e,t)})}return t=t?t.then(e,e):e()}}function C(e,t){var o=e.iterator[t.method];if(o===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,C(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=_(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var n=i.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(d.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=l,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:l,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":24,"../../modules/core.regexp.escape":129}],4:[function(e,t,o){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],5:[function(e,t,o){var i=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},{"./_cof":19}],6:[function(e,t,o){var i=e("./_wks")("unscopables"),n=Array.prototype;null==n[i]&&e("./_hide")(n,i,{}),t.exports=function(e){n[i][e]=!0}},{"./_hide":43,"./_wks":127}],7:[function(e,t,o){t.exports=function(e,t,o,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(o+": incorrect invocation!");return e}},{}],8:[function(e,t,o){var i=e("./_is-object");t.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":52}],9:[function(e,t,o){var d=e("./_to-object"),c=e("./_to-absolute-index"),u=e("./_to-length");t.exports=[].copyWithin||function(e,t){var o=d(this),i=u(o.length),n=c(e,i),a=c(t,i),r=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===r?i:c(r,i))-a,i-n),l=1;for(a<n&&n<a+s&&(l=-1,a+=s-1,n+=s-1);0<s--;)a in o?o[n]=o[a]:delete o[n],n+=l,a+=l;return o}},{"./_to-absolute-index":112,"./_to-length":116,"./_to-object":117}],10:[function(e,t,o){var s=e("./_to-object"),l=e("./_to-absolute-index"),d=e("./_to-length");t.exports=function(e){for(var t=s(this),o=d(t.length),i=arguments.length,n=l(1<i?arguments[1]:void 0,o),a=2<i?arguments[2]:void 0,r=void 0===a?o:l(a,o);n<r;)t[n++]=e;return t}},{"./_to-absolute-index":112,"./_to-length":116,"./_to-object":117}],11:[function(e,t,o){var i=e("./_for-of");t.exports=function(e,t){var o=[];return i(e,!1,o.push,o,t),o}},{"./_for-of":40}],12:[function(e,t,o){var l=e("./_to-iobject"),d=e("./_to-length"),c=e("./_to-absolute-index");t.exports=function(s){return function(e,t,o){var i,n=l(e),a=d(n.length),r=c(o,a);if(s&&t!=t){for(;r<a;)if((i=n[r++])!=i)return!0}else for(;r<a;r++)if((s||r in n)&&n[r]===t)return s||r||0;return!s&&-1}}},{"./_to-absolute-index":112,"./_to-iobject":115,"./_to-length":116}],13:[function(e,t,o){var b=e("./_ctx"),_=e("./_iobject"),w=e("./_to-object"),S=e("./_to-length"),i=e("./_array-species-create");t.exports=function(u,e){var h=1==u,m=2==u,f=3==u,p=4==u,g=6==u,v=5==u||g,y=e||i;return function(e,t,o){for(var i,n,a=w(e),r=_(a),s=b(t,o,3),l=S(r.length),d=0,c=h?y(e,l):m?y(e,0):void 0;d<l;d++)if((v||d in r)&&(n=s(i=r[d],d,a),u))if(h)c[d]=n;else if(n)switch(u){case 3:return!0;case 5:return i;case 6:return d;case 2:c.push(i)}else if(p)return!1;return g?-1:f||p?p:c}}},{"./_array-species-create":16,"./_ctx":26,"./_iobject":48,"./_to-length":116,"./_to-object":117}],14:[function(e,t,o){var c=e("./_a-function"),u=e("./_to-object"),h=e("./_iobject"),m=e("./_to-length");t.exports=function(e,t,o,i,n){c(t);var a=u(e),r=h(a),s=m(a.length),l=n?s-1:0,d=n?-1:1;if(o<2)for(;;){if(l in r){i=r[l],l+=d;break}if(l+=d,n?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;n?0<=l:l<s;l+=d)l in r&&(i=t(i,r[l],l,a));return i}},{"./_a-function":4,"./_iobject":48,"./_to-length":116,"./_to-object":117}],15:[function(e,t,o){var i=e("./_is-object"),n=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),i(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":50,"./_is-object":52,"./_wks":127}],16:[function(e,t,o){var i=e("./_array-species-constructor");t.exports=function(e,t){return new(i(e))(t)}},{"./_array-species-constructor":15}],17:[function(e,t,o){var a=e("./_a-function"),r=e("./_is-object"),s=e("./_invoke"),l=[].slice,d={};t.exports=Function.bind||function(t){var o=a(this),i=l.call(arguments,1),n=function(){var e=i.concat(l.call(arguments));return this instanceof n?function(e,t,o){if(!(t in d)){for(var i=[],n=0;n<t;n++)i[n]="a["+n+"]";d[t]=Function("F,a","return new F("+i.join(",")+")")}return d[t](e,o)}(o,e.length,e):s(o,e,t)};return r(o.prototype)&&(n.prototype=o.prototype),n}},{"./_a-function":4,"./_invoke":47,"./_is-object":52}],18:[function(e,t,o){var n=e("./_cof"),a=e("./_wks")("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,o,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?o:r?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},{"./_cof":19,"./_wks":127}],19:[function(e,t,o){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],20:[function(e,t,o){var r=e("./_object-dp").f,s=e("./_object-create"),l=e("./_redefine-all"),d=e("./_ctx"),c=e("./_an-instance"),u=e("./_for-of"),i=e("./_iter-define"),n=e("./_iter-step"),a=e("./_set-species"),h=e("./_descriptors"),m=e("./_meta").fastKey,f=e("./_validate-collection"),p=h?"_s":"size",g=function(e,t){var o,i=m(t);if("F"!==i)return e._i[i];for(o=e._f;o;o=o.n)if(o.k==t)return o};t.exports={getConstructor:function(e,a,o,i){var n=e(function(e,t){c(e,n,a,"_i"),e._t=a,e._i=s(null),e._f=void 0,e._l=void 0,e[p]=0,null!=t&&u(t,o,e[i],e)});return l(n.prototype,{clear:function(){for(var e=f(this,a),t=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete t[o.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var t=f(this,a),o=g(t,e);if(o){var i=o.n,n=o.p;delete t._i[o.i],o.r=!0,n&&(n.n=i),i&&(i.p=n),t._f==o&&(t._f=i),t._l==o&&(t._l=n),t[p]--}return!!o},forEach:function(e){f(this,a);for(var t,o=d(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(o(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!g(f(this,a),e)}}),h&&r(n.prototype,"size",{get:function(){return f(this,a)[p]}}),n},def:function(e,t,o){var i,n,a=g(e,t);return a?a.v=o:(e._l=a={i:n=m(t,!0),k:t,v:o,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[p]++,"F"!==n&&(e._i[n]=a)),e},getEntry:g,setStrong:function(e,o,t){i(e,o,function(e,t){this._t=f(e,o),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,o=e._l;o&&o.r;)o=o.p;return e._t&&(e._l=o=o?o.n:e._t._f)?n(0,"keys"==t?o.k:"values"==t?o.v:[o.k,o.v]):(e._t=void 0,n(1))},t?"entries":"values",!t,!0),a(o)}}},{"./_an-instance":7,"./_ctx":26,"./_descriptors":30,"./_for-of":40,"./_iter-define":56,"./_iter-step":58,"./_meta":66,"./_object-create":71,"./_object-dp":72,"./_redefine-all":91,"./_set-species":98,"./_validate-collection":124}],21:[function(e,t,o){var i=e("./_classof"),n=e("./_array-from-iterable");t.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},{"./_array-from-iterable":11,"./_classof":18}],22:[function(e,t,o){var r=e("./_redefine-all"),s=e("./_meta").getWeak,n=e("./_an-object"),l=e("./_is-object"),d=e("./_an-instance"),c=e("./_for-of"),i=e("./_array-methods"),u=e("./_has"),h=e("./_validate-collection"),a=i(5),m=i(6),f=0,p=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return a(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var o=v(this,e);o?o[1]=t:this.a.push([e,t])},delete:function(t){var e=m(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(e,o,i,n){var a=e(function(e,t){d(e,a,o,"_i"),e._t=o,e._i=f++,e._l=void 0,null!=t&&c(t,i,e[n],e)});return r(a.prototype,{delete:function(e){if(!l(e))return!1;var t=s(e);return!0===t?p(h(this,o)).delete(e):t&&u(t,this._i)&&delete t[this._i]},has:function(e){if(!l(e))return!1;var t=s(e);return!0===t?p(h(this,o)).has(e):t&&u(t,this._i)}}),a},def:function(e,t,o){var i=s(n(t),!0);return!0===i?p(e).set(t,o):i[e._i]=o,e},ufstore:p}},{"./_an-instance":7,"./_an-object":8,"./_array-methods":13,"./_for-of":40,"./_has":42,"./_is-object":52,"./_meta":66,"./_redefine-all":91,"./_validate-collection":124}],23:[function(e,t,o){var v=e("./_global"),y=e("./_export"),b=e("./_redefine"),_=e("./_redefine-all"),w=e("./_meta"),S=e("./_for-of"),k=e("./_an-instance"),I=e("./_is-object"),P=e("./_fails"),C=e("./_iter-detect"),x=e("./_set-to-string-tag"),T=e("./_inherit-if-required");t.exports=function(i,e,t,o,n,a){var r=v[i],s=r,l=n?"set":"add",d=s&&s.prototype,c={},u=function(e){var o=d[e];b(d,e,"delete"==e?function(e){return!(a&&!I(e))&&o.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!I(e))&&o.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!I(e)?void 0:o.call(this,0===e?0:e)}:"add"==e?function(e){return o.call(this,0===e?0:e),this}:function(e,t){return o.call(this,0===e?0:e,t),this})};if("function"==typeof s&&(a||d.forEach&&!P(function(){(new s).entries().next()}))){var h=new s,m=h[l](a?{}:-0,1)!=h,f=P(function(){h.has(1)}),p=C(function(e){new s(e)}),g=!a&&P(function(){for(var e=new s,t=5;t--;)e[l](t,t);return!e.has(-0)});p||(((s=e(function(e,t){k(e,s,i);var o=T(new r,e,s);return null!=t&&S(t,n,o[l],o),o})).prototype=d).constructor=s),(f||g)&&(u("delete"),u("has"),n&&u("get")),(g||m)&&u(l),a&&d.clear&&delete d.clear}else s=o.getConstructor(e,i,n,l),_(s.prototype,t),w.NEED=!0;return x(s,i),c[i]=s,y(y.G+y.W+y.F*(s!=r),c),a||o.setStrong(s,i,n),s}},{"./_an-instance":7,"./_export":34,"./_fails":36,"./_for-of":40,"./_global":41,"./_inherit-if-required":46,"./_is-object":52,"./_iter-detect":57,"./_meta":66,"./_redefine":92,"./_redefine-all":91,"./_set-to-string-tag":99}],24:[function(e,t,o){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},{}],25:[function(e,t,o){var i=e("./_object-dp"),n=e("./_property-desc");t.exports=function(e,t,o){t in e?i.f(e,t,n(0,o)):e[t]=o}},{"./_object-dp":72,"./_property-desc":90}],26:[function(e,t,o){var a=e("./_a-function");t.exports=function(i,n,e){if(a(i),void 0===n)return i;switch(e){case 1:return function(e){return i.call(n,e)};case 2:return function(e,t){return i.call(n,e,t)};case 3:return function(e,t,o){return i.call(n,e,t,o)}}return function(){return i.apply(n,arguments)}}},{"./_a-function":4}],27:[function(e,t,o){var i=e("./_fails"),n=Date.prototype.getTime,a=Date.prototype.toISOString,r=function(e){return 9<e?e:"0"+e};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!i(function(){a.call(new Date(NaN))})?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),o=e.getUTCMilliseconds(),i=t<0?"-":9999<t?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"."+(99<o?o:"0"+r(o))+"Z"}:a},{"./_fails":36}],28:[function(e,t,o){var i=e("./_an-object"),n=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return n(i(this),"number"!=e)}},{"./_an-object":8,"./_to-primitive":118}],29:[function(e,t,o){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],30:[function(e,t,o){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":36}],31:[function(e,t,o){var i=e("./_is-object"),n=e("./_global").document,a=i(n)&&i(n.createElement);t.exports=function(e){return a?n.createElement(e):{}}},{"./_global":41,"./_is-object":52}],32:[function(e,t,o){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],33:[function(e,t,o){var s=e("./_object-keys"),l=e("./_object-gops"),d=e("./_object-pie");t.exports=function(e){var t=s(e),o=l.f;if(o)for(var i,n=o(e),a=d.f,r=0;n.length>r;)a.call(e,i=n[r++])&&t.push(i);return t}},{"./_object-gops":78,"./_object-keys":81,"./_object-pie":82}],34:[function(e,t,o){var p=e("./_global"),g=e("./_core"),v=e("./_hide"),y=e("./_redefine"),b=e("./_ctx"),_="prototype",w=function(e,t,o){var i,n,a,r,s=e&w.F,l=e&w.G,d=e&w.S,c=e&w.P,u=e&w.B,h=l?p:d?p[t]||(p[t]={}):(p[t]||{})[_],m=l?g:g[t]||(g[t]={}),f=m[_]||(m[_]={});for(i in l&&(o=t),o)a=((n=!s&&h&&void 0!==h[i])?h:o)[i],r=u&&n?b(a,p):c&&"function"==typeof a?b(Function.call,a):a,h&&y(h,i,a,e&w.U),m[i]!=a&&v(m,i,r),c&&f[i]!=a&&(f[i]=a)};p.core=g,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},{"./_core":24,"./_ctx":26,"./_global":41,"./_hide":43,"./_redefine":92}],35:[function(e,t,o){var i=e("./_wks")("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[i]=!1,!"/./"[t](o)}catch(e){}}return!0}},{"./_wks":127}],36:[function(e,t,o){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],37:[function(e,t,o){var s=e("./_hide"),l=e("./_redefine"),d=e("./_fails"),c=e("./_defined"),u=e("./_wks");t.exports=function(t,e,o){var i=u(t),n=o(c,i,""[t]),a=n[0],r=n[1];d(function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})&&(l(String.prototype,t,a),s(RegExp.prototype,i,2==e?function(e,t){return r.call(e,this,t)}:function(e){return r.call(e,this)}))}},{"./_defined":29,"./_fails":36,"./_hide":43,"./_redefine":92,"./_wks":127}],38:[function(e,t,o){var i=e("./_an-object");t.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":8}],39:[function(e,t,o){var f=e("./_is-array"),p=e("./_is-object"),g=e("./_to-length"),v=e("./_ctx"),y=e("./_wks")("isConcatSpreadable");t.exports=function e(t,o,i,n,a,r,s,l){for(var d,c,u=a,h=0,m=!!s&&v(s,l,3);h<n;){if(h in i){if(d=m?m(i[h],h,o):i[h],c=!1,p(d)&&(c=void 0!==(c=d[y])?!!c:f(d)),c&&0<r)u=e(t,o,d,g(d.length),u,r-1)-1;else{if(9007199254740991<=u)throw TypeError();t[u]=d}u++}h++}return u}},{"./_ctx":26,"./_is-array":50,"./_is-object":52,"./_to-length":116,"./_wks":127}],40:[function(e,t,o){var h=e("./_ctx"),m=e("./_iter-call"),f=e("./_is-array-iter"),p=e("./_an-object"),g=e("./_to-length"),v=e("./core.get-iterator-method"),y={},b={};(o=t.exports=function(e,t,o,i,n){var a,r,s,l,d=n?function(){return e}:v(e),c=h(o,i,t?2:1),u=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(f(d)){for(a=g(e.length);u<a;u++)if((l=t?c(p(r=e[u])[0],r[1]):c(e[u]))===y||l===b)return l}else for(s=d.call(e);!(r=s.next()).done;)if((l=m(s,c,r.value,t))===y||l===b)return l}).BREAK=y,o.RETURN=b},{"./_an-object":8,"./_ctx":26,"./_is-array-iter":49,"./_iter-call":54,"./_to-length":116,"./core.get-iterator-method":128}],41:[function(e,t,o){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],42:[function(e,t,o){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],43:[function(e,t,o){var i=e("./_object-dp"),n=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,o){return i.f(e,t,n(1,o))}:function(e,t,o){return e[t]=o,e}},{"./_descriptors":30,"./_object-dp":72,"./_property-desc":90}],44:[function(e,t,o){var i=e("./_global").document;t.exports=i&&i.documentElement},{"./_global":41}],45:[function(e,t,o){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":30,"./_dom-create":31,"./_fails":36}],46:[function(e,t,o){var a=e("./_is-object"),r=e("./_set-proto").set;t.exports=function(e,t,o){var i,n=t.constructor;return n!==o&&"function"==typeof n&&(i=n.prototype)!==o.prototype&&a(i)&&r&&r(e,i),e}},{"./_is-object":52,"./_set-proto":97}],47:[function(e,t,o){t.exports=function(e,t,o){var i=void 0===o;switch(t.length){case 0:return i?e():e.call(o);case 1:return i?e(t[0]):e.call(o,t[0]);case 2:return i?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3])}return e.apply(o,t)}},{}],48:[function(e,t,o){var i=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./_cof":19}],49:[function(e,t,o){var i=e("./_iterators"),n=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||a[n]===e)}},{"./_iterators":59,"./_wks":127}],50:[function(e,t,o){var i=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==i(e)}},{"./_cof":19}],51:[function(e,t,o){var i=e("./_is-object"),n=Math.floor;t.exports=function(e){return!i(e)&&isFinite(e)&&n(e)===e}},{"./_is-object":52}],52:[function(e,t,o){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],53:[function(e,t,o){var i=e("./_is-object"),n=e("./_cof"),a=e("./_wks")("match");t.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==n(e))}},{"./_cof":19,"./_is-object":52,"./_wks":127}],54:[function(e,t,o){var a=e("./_an-object");t.exports=function(t,e,o,i){try{return i?e(a(o)[0],o[1]):e(o)}catch(e){var n=t.return;throw void 0!==n&&a(n.call(t)),e}}},{"./_an-object":8}],55:[function(e,t,o){var i=e("./_object-create"),n=e("./_property-desc"),a=e("./_set-to-string-tag"),r={};e("./_hide")(r,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,o){e.prototype=i(r,{next:n(1,o)}),a(e,t+" Iterator")}},{"./_hide":43,"./_object-create":71,"./_property-desc":90,"./_set-to-string-tag":99,"./_wks":127}],56:[function(e,t,o){var b=e("./_library"),_=e("./_export"),w=e("./_redefine"),S=e("./_hide"),k=e("./_iterators"),I=e("./_iter-create"),P=e("./_set-to-string-tag"),C=e("./_object-gpo"),x=e("./_wks")("iterator"),T=!([].keys&&"next"in[].keys()),E="values",D=function(){return this};t.exports=function(e,t,o,i,n,a,r){I(o,t,i);var s,l,d,c=function(e){if(!T&&e in f)return f[e];switch(e){case"keys":case E:return function(){return new o(this,e)}}return function(){return new o(this,e)}},u=t+" Iterator",h=n==E,m=!1,f=e.prototype,p=f[x]||f["@@iterator"]||n&&f[n],g=p||c(n),v=n?h?c("entries"):g:void 0,y="Array"==t&&f.entries||p;if(y&&(d=C(y.call(new e)))!==Object.prototype&&d.next&&(P(d,u,!0),b||"function"==typeof d[x]||S(d,x,D)),h&&p&&p.name!==E&&(m=!0,g=function(){return p.call(this)}),b&&!r||!T&&!m&&f[x]||S(f,x,g),k[t]=g,k[u]=D,n)if(s={values:h?g:c(E),keys:a?g:c("keys"),entries:v},r)for(l in s)l in f||w(f,l,s[l]);else _(_.P+_.F*(T||m),t,s);return s}},{"./_export":34,"./_hide":43,"./_iter-create":55,"./_iterators":59,"./_library":60,"./_object-gpo":79,"./_redefine":92,"./_set-to-string-tag":99,"./_wks":127}],57:[function(e,t,o){var a=e("./_wks")("iterator"),r=!1;try{var i=[7][a]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var i=[7],n=i[a]();n.next=function(){return{done:o=!0}},i[a]=function(){return n},e(i)}catch(e){}return o}},{"./_wks":127}],58:[function(e,t,o){t.exports=function(e,t){return{value:t,done:!!e}}},{}],59:[function(e,t,o){t.exports={}},{}],60:[function(e,t,o){t.exports=!1},{}],61:[function(e,t,o){var i=Math.expm1;t.exports=!i||22025.465794806718<i(10)||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:i},{}],62:[function(e,t,o){var a=e("./_math-sign"),i=Math.pow,r=i(2,-52),s=i(2,-23),l=i(2,127)*(2-s),d=i(2,-126);t.exports=Math.fround||function(e){var t,o,i=Math.abs(e),n=a(e);return i<d?n*(i/d/s+1/r-1/r)*d*s:l<(o=(t=(1+s/r)*i)-(t-i))||o!=o?n*(1/0):n*o}},{"./_math-sign":65}],63:[function(e,t,o){t.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],64:[function(e,t,o){t.exports=Math.scale||function(e,t,o,i,n){return 0===arguments.length||e!=e||t!=t||o!=o||i!=i||n!=n?NaN:e===1/0||e===-1/0?e:(e-t)*(n-i)/(o-t)+i}},{}],65:[function(e,t,o){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],66:[function(e,t,o){var i=e("./_uid")("meta"),n=e("./_is-object"),a=e("./_has"),r=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},d=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(e){r(e,i,{value:{i:"O"+ ++s,w:{}}})},u=t.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return d&&u.NEED&&l(e)&&!a(e,i)&&c(e),e}}},{"./_fails":36,"./_has":42,"./_is-object":52,"./_object-dp":72,"./_uid":122}],67:[function(e,t,o){var a=e("./es6.map"),i=e("./_export"),n=e("./_shared")("metadata"),r=n.store||(n.store=new(e("./es6.weak-map"))),s=function(e,t,o){var i=r.get(e);if(!i){if(!o)return;r.set(e,i=new a)}var n=i.get(t);if(!n){if(!o)return;i.set(t,n=new a)}return n};t.exports={store:r,map:s,has:function(e,t,o){var i=s(t,o,!1);return void 0!==i&&i.has(e)},get:function(e,t,o){var i=s(t,o,!1);return void 0===i?void 0:i.get(e)},set:function(e,t,o,i){s(o,i,!0).set(e,t)},keys:function(e,t){var o=s(e,t,!1),i=[];return o&&o.forEach(function(e,t){i.push(t)}),i},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},{"./_export":34,"./_shared":101,"./es6.map":159,"./es6.weak-map":265}],68:[function(e,t,o){var s=e("./_global"),l=e("./_task").set,d=s.MutationObserver||s.WebKitMutationObserver,c=s.process,u=s.Promise,h="process"==e("./_cof")(c);t.exports=function(){var o,i,n,e=function(){var e,t;for(h&&(e=c.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?n():i=void 0,e}}i=void 0,e&&e.enter()};if(h)n=function(){c.nextTick(e)};else if(!d||s.navigator&&s.navigator.standalone)if(u&&u.resolve){var t=u.resolve(void 0);n=function(){t.then(e)}}else n=function(){l.call(s,e)};else{var a=!0,r=document.createTextNode("");new d(e).observe(r,{characterData:!0}),n=function(){r.data=a=!a}}return function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,n()),i=t}}},{"./_cof":19,"./_global":41,"./_task":111}],69:[function(e,t,o){var n=e("./_a-function");function i(e){var o,i;this.promise=new e(function(e,t){if(void 0!==o||void 0!==i)throw TypeError("Bad Promise constructor");o=e,i=t}),this.resolve=n(o),this.reject=n(i)}t.exports.f=function(e){return new i(e)}},{"./_a-function":4}],70:[function(e,t,o){var h=e("./_object-keys"),m=e("./_object-gops"),f=e("./_object-pie"),p=e("./_to-object"),g=e("./_iobject"),n=Object.assign;t.exports=!n||e("./_fails")(function(){var e={},t={},o=Symbol(),i="abcdefghijklmnopqrst";return e[o]=7,i.split("").forEach(function(e){t[e]=e}),7!=n({},e)[o]||Object.keys(n({},t)).join("")!=i})?function(e,t){for(var o=p(e),i=arguments.length,n=1,a=m.f,r=f.f;n<i;)for(var s,l=g(arguments[n++]),d=a?h(l).concat(a(l)):h(l),c=d.length,u=0;u<c;)r.call(l,s=d[u++])&&(o[s]=l[s]);return o}:n},{"./_fails":36,"./_iobject":48,"./_object-gops":78,"./_object-keys":81,"./_object-pie":82,"./_to-object":117}],71:[function(i,e,t){var n=i("./_an-object"),a=i("./_object-dps"),r=i("./_enum-bug-keys"),s=i("./_shared-key")("IE_PROTO"),l=function(){},d="prototype",c=function(){var e,t=i("./_dom-create")("iframe"),o=r.length;for(t.style.display="none",i("./_html").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;o--;)delete c[d][r[o]];return c()};e.exports=Object.create||function(e,t){var o;return null!==e?(l[d]=n(e),o=new l,l[d]=null,o[s]=e):o=c(),void 0===t?o:a(o,t)}},{"./_an-object":8,"./_dom-create":31,"./_enum-bug-keys":32,"./_html":44,"./_object-dps":73,"./_shared-key":100}],72:[function(e,t,o){var i=e("./_an-object"),n=e("./_ie8-dom-define"),a=e("./_to-primitive"),r=Object.defineProperty;o.f=e("./_descriptors")?Object.defineProperty:function(e,t,o){if(i(e),t=a(t,!0),i(o),n)try{return r(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e}},{"./_an-object":8,"./_descriptors":30,"./_ie8-dom-define":45,"./_to-primitive":118}],73:[function(e,t,o){var r=e("./_object-dp"),s=e("./_an-object"),l=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var o,i=l(t),n=i.length,a=0;a<n;)r.f(e,o=i[a++],t[o]);return e}},{"./_an-object":8,"./_descriptors":30,"./_object-dp":72,"./_object-keys":81}],74:[function(t,e,o){e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":36,"./_global":41,"./_library":60}],75:[function(e,t,o){var i=e("./_object-pie"),n=e("./_property-desc"),a=e("./_to-iobject"),r=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),d=Object.getOwnPropertyDescriptor;o.f=e("./_descriptors")?d:function(e,t){if(e=a(e),t=r(t,!0),l)try{return d(e,t)}catch(e){}if(s(e,t))return n(!i.f.call(e,t),e[t])}},{"./_descriptors":30,"./_has":42,"./_ie8-dom-define":45,"./_object-pie":82,"./_property-desc":90,"./_to-iobject":115,"./_to-primitive":118}],76:[function(e,t,o){var i=e("./_to-iobject"),n=e("./_object-gopn").f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return r&&"[object Window]"==a.call(e)?function(e){try{return n(e)}catch(e){return r.slice()}}(e):n(i(e))}},{"./_object-gopn":77,"./_to-iobject":115}],77:[function(e,t,o){var i=e("./_object-keys-internal"),n=e("./_enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},{"./_enum-bug-keys":32,"./_object-keys-internal":80}],78:[function(e,t,o){o.f=Object.getOwnPropertySymbols},{}],79:[function(e,t,o){var i=e("./_has"),n=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=n(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},{"./_has":42,"./_shared-key":100,"./_to-object":117}],80:[function(e,t,o){var r=e("./_has"),s=e("./_to-iobject"),l=e("./_array-includes")(!1),d=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var o,i=s(e),n=0,a=[];for(o in i)o!=d&&r(i,o)&&a.push(o);for(;t.length>n;)r(i,o=t[n++])&&(~l(a,o)||a.push(o));return a}},{"./_array-includes":12,"./_has":42,"./_shared-key":100,"./_to-iobject":115}],81:[function(e,t,o){var i=e("./_object-keys-internal"),n=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return i(e,n)}},{"./_enum-bug-keys":32,"./_object-keys-internal":80}],82:[function(e,t,o){o.f={}.propertyIsEnumerable},{}],83:[function(e,t,o){var n=e("./_export"),a=e("./_core"),r=e("./_fails");t.exports=function(e,t){var o=(a.Object||{})[e]||Object[e],i={};i[e]=t(o),n(n.S+n.F*r(function(){o(1)}),"Object",i)}},{"./_core":24,"./_export":34,"./_fails":36}],84:[function(e,t,o){var l=e("./_object-keys"),d=e("./_to-iobject"),c=e("./_object-pie").f;t.exports=function(s){return function(e){for(var t,o=d(e),i=l(o),n=i.length,a=0,r=[];a<n;)c.call(o,t=i[a++])&&r.push(s?[t,o[t]]:o[t]);return r}}},{"./_object-keys":81,"./_object-pie":82,"./_to-iobject":115}],85:[function(e,t,o){var i=e("./_object-gopn"),n=e("./_object-gops"),a=e("./_an-object"),r=e("./_global").Reflect;t.exports=r&&r.ownKeys||function(e){var t=i.f(a(e)),o=n.f;return o?t.concat(o(e)):t}},{"./_an-object":8,"./_global":41,"./_object-gopn":77,"./_object-gops":78}],86:[function(e,t,o){var i=e("./_global").parseFloat,n=e("./_string-trim").trim;t.exports=1/i(e("./_string-ws")+"-0")!=-1/0?function(e){var t=n(String(e),3),o=i(t);return 0===o&&"-"==t.charAt(0)?-0:o}:i},{"./_global":41,"./_string-trim":109,"./_string-ws":110}],87:[function(e,t,o){var i=e("./_global").parseInt,n=e("./_string-trim").trim,a=e("./_string-ws"),r=/^[-+]?0[xX]/;t.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(e,t){var o=n(String(e),3);return i(o,t>>>0||(r.test(o)?16:10))}:i},{"./_global":41,"./_string-trim":109,"./_string-ws":110}],88:[function(e,t,o){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],89:[function(e,t,o){var i=e("./_an-object"),n=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(i(e),n(t)&&t.constructor===e)return t;var o=a.f(e);return(0,o.resolve)(t),o.promise}},{"./_an-object":8,"./_is-object":52,"./_new-promise-capability":69}],90:[function(e,t,o){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],91:[function(e,t,o){var n=e("./_redefine");t.exports=function(e,t,o){for(var i in t)n(e,i,t[i],o);return e}},{"./_redefine":92}],92:[function(e,t,o){var a=e("./_global"),r=e("./_hide"),s=e("./_has"),l=e("./_uid")("src"),i="toString",n=Function[i],d=(""+n).split(i);e("./_core").inspectSource=function(e){return n.call(e)},(t.exports=function(e,t,o,i){var n="function"==typeof o;n&&(s(o,"name")||r(o,"name",t)),e[t]!==o&&(n&&(s(o,l)||r(o,l,e[t]?""+e[t]:d.join(String(t)))),e===a?e[t]=o:i?e[t]?e[t]=o:r(e,t,o):(delete e[t],r(e,t,o)))})(Function.prototype,i,function(){return"function"==typeof this&&this[l]||n.call(this)})},{"./_core":24,"./_global":41,"./_has":42,"./_hide":43,"./_uid":122}],93:[function(e,t,o){t.exports=function(t,o){var i=o===Object(o)?function(e){return o[e]}:o;return function(e){return String(e).replace(t,i)}}},{}],94:[function(e,t,o){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],95:[function(e,t,o){var i=e("./_export"),r=e("./_a-function"),s=e("./_ctx"),l=e("./_for-of");t.exports=function(e){i(i.S,e,{from:function(e){var t,o,i,n,a=arguments[1];return r(this),(t=void 0!==a)&&r(a),null==e?new this:(o=[],t?(i=0,n=s(a,arguments[2],2),l(e,!1,function(e){o.push(n(e,i++))})):l(e,!1,o.push,o),new this(o))}})}},{"./_a-function":4,"./_ctx":26,"./_export":34,"./_for-of":40}],96:[function(e,t,o){var i=e("./_export");t.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":34}],97:[function(t,e,o){var i=t("./_is-object"),n=t("./_an-object"),a=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,o,i){try{(i=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),o=!(e instanceof Array)}catch(e){o=!0}return function(e,t){return a(e,t),o?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},{"./_an-object":8,"./_ctx":26,"./_is-object":52,"./_object-gopd":75}],98:[function(e,t,o){var i=e("./_global"),n=e("./_object-dp"),a=e("./_descriptors"),r=e("./_wks")("species");t.exports=function(e){var t=i[e];a&&t&&!t[r]&&n.f(t,r,{configurable:!0,get:function(){return this}})}},{"./_descriptors":30,"./_global":41,"./_object-dp":72,"./_wks":127}],99:[function(e,t,o){var i=e("./_object-dp").f,n=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!n(e=o?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},{"./_has":42,"./_object-dp":72,"./_wks":127}],100:[function(e,t,o){var i=e("./_shared")("keys"),n=e("./_uid");t.exports=function(e){return i[e]||(i[e]=n(e))}},{"./_shared":101,"./_uid":122}],101:[function(e,t,o){var i=e("./_core"),n=e("./_global"),a="__core-js_shared__",r=n[a]||(n[a]={});(t.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:e("./_library")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},{"./_core":24,"./_global":41,"./_library":60}],102:[function(e,t,o){var n=e("./_an-object"),a=e("./_a-function"),r=e("./_wks")("species");t.exports=function(e,t){var o,i=n(e).constructor;return void 0===i||null==(o=n(i)[r])?t:a(o)}},{"./_a-function":4,"./_an-object":8,"./_wks":127}],103:[function(e,t,o){var i=e("./_fails");t.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":36}],104:[function(e,t,o){var l=e("./_to-integer"),d=e("./_defined");t.exports=function(s){return function(e,t){var o,i,n=String(d(e)),a=l(t),r=n.length;return a<0||r<=a?s?"":void 0:(o=n.charCodeAt(a))<55296||56319<o||a+1===r||(i=n.charCodeAt(a+1))<56320||57343<i?s?n.charAt(a):o:s?n.slice(a,a+2):i-56320+(o-55296<<10)+65536}}},{"./_defined":29,"./_to-integer":114}],105:[function(e,t,o){var i=e("./_is-regexp"),n=e("./_defined");t.exports=function(e,t,o){if(i(t))throw TypeError("String#"+o+" doesn't accept regex!");return String(n(e))}},{"./_defined":29,"./_is-regexp":53}],106:[function(e,t,o){var i=e("./_export"),n=e("./_fails"),r=e("./_defined"),s=/"/g,a=function(e,t,o,i){var n=String(r(e)),a="<"+t;return""!==o&&(a+=" "+o+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+n+"</"+t+">"};t.exports=function(t,e){var o={};o[t]=e(a),i(i.P+i.F*n(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",o)}},{"./_defined":29,"./_export":34,"./_fails":36}],107:[function(e,t,o){var c=e("./_to-length"),u=e("./_string-repeat"),h=e("./_defined");t.exports=function(e,t,o,i){var n=String(h(e)),a=n.length,r=void 0===o?" ":String(o),s=c(t);if(s<=a||""==r)return n;var l=s-a,d=u.call(r,Math.ceil(l/r.length));return d.length>l&&(d=d.slice(0,l)),i?d+n:n+d}},{"./_defined":29,"./_string-repeat":108,"./_to-length":116}],108:[function(e,t,o){var n=e("./_to-integer"),a=e("./_defined");t.exports=function(e){var t=String(a(this)),o="",i=n(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(o+=t);return o}},{"./_defined":29,"./_to-integer":114}],109:[function(e,t,o){var r=e("./_export"),i=e("./_defined"),s=e("./_fails"),l=e("./_string-ws"),n="["+l+"]",a=RegExp("^"+n+n+"*"),d=RegExp(n+n+"*$"),c=function(e,t,o){var i={},n=s(function(){return!!l[e]()||"​"!="​"[e]()}),a=i[e]=n?t(u):l[e];o&&(i[o]=a),r(r.P+r.F*n,"String",i)},u=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(a,"")),2&t&&(e=e.replace(d,"")),e};t.exports=c},{"./_defined":29,"./_export":34,"./_fails":36,"./_string-ws":110}],110:[function(e,t,o){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],111:[function(e,t,o){var i,n,a,r=e("./_ctx"),s=e("./_invoke"),l=e("./_html"),d=e("./_dom-create"),c=e("./_global"),u=c.process,h=c.setImmediate,m=c.clearImmediate,f=c.MessageChannel,p=c.Dispatch,g=0,v={},y="onreadystatechange",b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){b.call(e.data)};h&&m||(h=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},m=function(e){delete v[e]},"process"==e("./_cof")(u)?i=function(e){u.nextTick(r(b,e,1))}:p&&p.now?i=function(e){p.now(r(b,e,1))}:f?(a=(n=new f).port2,n.port1.onmessage=_,i=r(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",_,!1)):i=y in d("script")?function(e){l.appendChild(d("script"))[y]=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(r(b,e,1),0)}),t.exports={set:h,clear:m}},{"./_cof":19,"./_ctx":26,"./_dom-create":31,"./_global":41,"./_html":44,"./_invoke":47}],112:[function(e,t,o){var i=e("./_to-integer"),n=Math.max,a=Math.min;t.exports=function(e,t){return(e=i(e))<0?n(e+t,0):a(e,t)}},{"./_to-integer":114}],113:[function(e,t,o){var i=e("./_to-integer"),n=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=i(e),o=n(t);if(t!==o)throw RangeError("Wrong length!");return o}},{"./_to-integer":114,"./_to-length":116}],114:[function(e,t,o){var i=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?n:i)(e)}},{}],115:[function(e,t,o){var i=e("./_iobject"),n=e("./_defined");t.exports=function(e){return i(n(e))}},{"./_defined":29,"./_iobject":48}],116:[function(e,t,o){var i=e("./_to-integer"),n=Math.min;t.exports=function(e){return 0<e?n(i(e),9007199254740991):0}},{"./_to-integer":114}],117:[function(e,t,o){var i=e("./_defined");t.exports=function(e){return Object(i(e))}},{"./_defined":29}],118:[function(e,t,o){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var o,i;if(t&&"function"==typeof(o=e.toString)&&!n(i=o.call(e)))return i;if("function"==typeof(o=e.valueOf)&&!n(i=o.call(e)))return i;if(!t&&"function"==typeof(o=e.toString)&&!n(i=o.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":52}],119:[function(e,t,o){if(e("./_descriptors")){var v=e("./_library"),y=e("./_global"),b=e("./_fails"),_=e("./_export"),w=e("./_typed"),i=e("./_typed-buffer"),h=e("./_ctx"),S=e("./_an-instance"),n=e("./_property-desc"),k=e("./_hide"),a=e("./_redefine-all"),r=e("./_to-integer"),I=e("./_to-length"),P=e("./_to-index"),s=e("./_to-absolute-index"),l=e("./_to-primitive"),d=e("./_has"),C=e("./_classof"),x=e("./_is-object"),m=e("./_to-object"),f=e("./_is-array-iter"),T=e("./_object-create"),E=e("./_object-gpo"),D=e("./_object-gopn").f,p=e("./core.get-iterator-method"),c=e("./_uid"),u=e("./_wks"),g=e("./_array-methods"),L=e("./_array-includes"),W=e("./_species-constructor"),A=e("./es6.array.iterator"),M=e("./_iterators"),R=e("./_iter-detect"),j=e("./_set-species"),N=e("./_array-fill"),V=e("./_array-copy-within"),O=e("./_object-dp"),B=e("./_object-gopd"),F=O.f,z=B.f,U=y.RangeError,H=y.TypeError,J=y.Uint8Array,K="ArrayBuffer",q="Shared"+K,G="BYTES_PER_ELEMENT",Y="prototype",X=Array[Y],Z=i.ArrayBuffer,$=i.DataView,Q=g(0),ee=g(2),te=g(3),oe=g(4),ie=g(5),ne=g(6),ae=L(!0),re=L(!1),se=A.values,le=A.keys,de=A.entries,ce=X.lastIndexOf,ue=X.reduce,he=X.reduceRight,me=X.join,fe=X.sort,pe=X.slice,ge=X.toString,ve=X.toLocaleString,ye=u("iterator"),be=u("toStringTag"),_e=c("typed_constructor"),we=c("def_constructor"),Se=w.CONSTR,ke=w.TYPED,Ie=w.VIEW,Pe="Wrong length!",Ce=g(1,function(e,t){return Le(W(e,e[we]),t)}),xe=b(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Te=!!J&&!!J[Y].set&&b(function(){new J(1).set({})}),Ee=function(e,t){var o=r(e);if(o<0||o%t)throw U("Wrong offset!");return o},De=function(e){if(x(e)&&ke in e)return e;throw H(e+" is not a typed array!")},Le=function(e,t){if(!(x(e)&&_e in e))throw H("It is not a typed array constructor!");return new e(t)},We=function(e,t){return Ae(W(e,e[we]),t)},Ae=function(e,t){for(var o=0,i=t.length,n=Le(e,i);o<i;)n[o]=t[o++];return n},Me=function(e,t,o){F(e,t,{get:function(){return this._d[o]}})},Re=function(e){var t,o,i,n,a,r,s=m(e),l=arguments.length,d=1<l?arguments[1]:void 0,c=void 0!==d,u=p(s);if(null!=u&&!f(u)){for(r=u.call(s),i=[],t=0;!(a=r.next()).done;t++)i.push(a.value);s=i}for(c&&2<l&&(d=h(d,arguments[2],2)),t=0,o=I(s.length),n=Le(this,o);t<o;t++)n[t]=c?d(s[t],t):s[t];return n},je=function(){for(var e=0,t=arguments.length,o=Le(this,t);e<t;)o[e]=arguments[e++];return o},Ne=!!J&&b(function(){ve.call(new J(1))}),Ve=function(){return ve.apply(Ne?pe.call(De(this)):De(this),arguments)},Oe={copyWithin:function(e,t){return V.call(De(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return oe(De(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return N.apply(De(this),arguments)},filter:function(e){return We(this,ee(De(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return ie(De(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ne(De(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){Q(De(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return re(De(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return ae(De(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return me.apply(De(this),arguments)},lastIndexOf:function(e){return ce.apply(De(this),arguments)},map:function(e){return Ce(De(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return ue.apply(De(this),arguments)},reduceRight:function(e){return he.apply(De(this),arguments)},reverse:function(){for(var e,t=this,o=De(t).length,i=Math.floor(o/2),n=0;n<i;)e=t[n],t[n++]=t[--o],t[o]=e;return t},some:function(e){return te(De(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return fe.call(De(this),e)},subarray:function(e,t){var o=De(this),i=o.length,n=s(e,i);return new(W(o,o[we]))(o.buffer,o.byteOffset+n*o.BYTES_PER_ELEMENT,I((void 0===t?i:s(t,i))-n))}},Be=function(e,t){return We(this,pe.call(De(this),e,t))},Fe=function(e){De(this);var t=Ee(arguments[1],1),o=this.length,i=m(e),n=I(i.length),a=0;if(o<n+t)throw U(Pe);for(;a<n;)this[t+a]=i[a++]},ze={entries:function(){return de.call(De(this))},keys:function(){return le.call(De(this))},values:function(){return se.call(De(this))}},Ue=function(e,t){return x(e)&&e[ke]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},He=function(e,t){return Ue(e,t=l(t,!0))?n(2,e[t]):z(e,t)},Je=function(e,t,o){return!(Ue(e,t=l(t,!0))&&x(o)&&d(o,"value"))||d(o,"get")||d(o,"set")||o.configurable||d(o,"writable")&&!o.writable||d(o,"enumerable")&&!o.enumerable?F(e,t,o):(e[t]=o.value,e)};Se||(B.f=He,O.f=Je),_(_.S+_.F*!Se,"Object",{getOwnPropertyDescriptor:He,defineProperty:Je}),b(function(){ge.call({})})&&(ge=ve=function(){return me.call(this)});var Ke=a({},Oe);a(Ke,ze),k(Ke,ye,ze.values),a(Ke,{slice:Be,set:Fe,constructor:function(){},toString:ge,toLocaleString:Ve}),Me(Ke,"buffer","b"),Me(Ke,"byteOffset","o"),Me(Ke,"byteLength","l"),Me(Ke,"length","e"),F(Ke,be,{get:function(){return this[ke]}}),t.exports=function(e,u,t,a){var h=e+((a=!!a)?"Clamped":"")+"Array",o="get"+e,r="set"+e,m=y[h],s=m||{},i=m&&E(m),n=!m||!w.ABV,l={},d=m&&m[Y],f=function(e,n){F(e,n,{get:function(){return e=n,(t=this._d).v[o](e*u+t.o,xe);var e,t},set:function(e){return t=n,o=e,i=this._d,a&&(o=(o=Math.round(o))<0?0:255<o?255:255&o),void i.v[r](t*u+i.o,o,xe);var t,o,i},enumerable:!0})};n?(m=t(function(e,t,o,i){S(e,m,h,"_d");var n,a,r,s,l=0,d=0;if(x(t)){if(!(t instanceof Z||(s=C(t))==K||s==q))return ke in t?Ae(m,t):Re.call(m,t);n=t,d=Ee(o,u);var c=t.byteLength;if(void 0===i){if(c%u)throw U(Pe);if((a=c-d)<0)throw U(Pe)}else if(c<(a=I(i)*u)+d)throw U(Pe);r=a/u}else r=P(t),n=new Z(a=r*u);for(k(e,"_d",{b:n,o:d,l:a,e:r,v:new $(n)});l<r;)f(e,l++)}),d=m[Y]=T(Ke),k(d,"constructor",m)):b(function(){m(1)})&&b(function(){new m(-1)})&&R(function(e){new m,new m(null),new m(1.5),new m(e)},!0)||(m=t(function(e,t,o,i){var n;return S(e,m,h),x(t)?t instanceof Z||(n=C(t))==K||n==q?void 0!==i?new s(t,Ee(o,u),i):void 0!==o?new s(t,Ee(o,u)):new s(t):ke in t?Ae(m,t):Re.call(m,t):new s(P(t))}),Q(i!==Function.prototype?D(s).concat(D(i)):D(s),function(e){e in m||k(m,e,s[e])}),m[Y]=d,v||(d.constructor=m));var c=d[ye],p=!!c&&("values"==c.name||null==c.name),g=ze.values;k(m,_e,!0),k(d,ke,h),k(d,Ie,!0),k(d,we,m),(a?new m(1)[be]==h:be in d)||F(d,be,{get:function(){return h}}),l[h]=m,_(_.G+_.W+_.F*(m!=s),l),_(_.S,h,{BYTES_PER_ELEMENT:u}),_(_.S+_.F*b(function(){s.of.call(m,1)}),h,{from:Re,of:je}),G in d||k(d,G,u),_(_.P,h,Oe),j(h),_(_.P+_.F*Te,h,{set:Fe}),_(_.P+_.F*!p,h,ze),v||d.toString==ge||(d.toString=ge),_(_.P+_.F*b(function(){new m(1).slice()}),h,{slice:Be}),_(_.P+_.F*(b(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!b(function(){d.toLocaleString.call([1,2])})),h,{toLocaleString:Ve}),M[h]=p?c:g,v||p||k(d,ye,g)}}else t.exports=function(){}},{"./_an-instance":7,"./_array-copy-within":9,"./_array-fill":10,"./_array-includes":12,"./_array-methods":13,"./_classof":18,"./_ctx":26,"./_descriptors":30,"./_export":34,"./_fails":36,"./_global":41,"./_has":42,"./_hide":43,"./_is-array-iter":49,"./_is-object":52,"./_iter-detect":57,"./_iterators":59,"./_library":60,"./_object-create":71,"./_object-dp":72,"./_object-gopd":75,"./_object-gopn":77,"./_object-gpo":79,"./_property-desc":90,"./_redefine-all":91,"./_set-species":98,"./_species-constructor":102,"./_to-absolute-index":112,"./_to-index":113,"./_to-integer":114,"./_to-length":116,"./_to-object":117,"./_to-primitive":118,"./_typed":121,"./_typed-buffer":120,"./_uid":122,"./_wks":127,"./core.get-iterator-method":128,"./es6.array.iterator":140}],120:[function(e,t,o){var i=e("./_global"),n=e("./_descriptors"),a=e("./_library"),r=e("./_typed"),s=e("./_hide"),l=e("./_redefine-all"),d=e("./_fails"),c=e("./_an-instance"),u=e("./_to-integer"),h=e("./_to-length"),m=e("./_to-index"),f=e("./_object-gopn").f,p=e("./_object-dp").f,g=e("./_array-fill"),v=e("./_set-to-string-tag"),y="ArrayBuffer",b="DataView",_="prototype",w="Wrong index!",S=i[y],k=i[b],I=i.Math,P=i.RangeError,C=i.Infinity,x=S,T=I.abs,E=I.pow,D=I.floor,L=I.log,W=I.LN2,A="byteLength",M="byteOffset",R=n?"_b":"buffer",j=n?"_l":A,N=n?"_o":M;function V(e,t,o){var i,n,a,r=new Array(o),s=8*o-t-1,l=(1<<s)-1,d=l>>1,c=23===t?E(2,-24)-E(2,-77):0,u=0,h=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===C?(n=e!=e?1:0,i=l):(i=D(L(e)/W),e*(a=E(2,-i))<1&&(i--,a*=2),2<=(e+=1<=i+d?c/a:c*E(2,1-d))*a&&(i++,a/=2),l<=i+d?(n=0,i=l):1<=i+d?(n=(e*a-1)*E(2,t),i+=d):(n=e*E(2,d-1)*E(2,t),i=0));8<=t;r[u++]=255&n,n/=256,t-=8);for(i=i<<t|n,s+=t;0<s;r[u++]=255&i,i/=256,s-=8);return r[--u]|=128*h,r}function O(e,t,o){var i,n=8*o-t-1,a=(1<<n)-1,r=a>>1,s=n-7,l=o-1,d=e[l--],c=127&d;for(d>>=7;0<s;c=256*c+e[l],l--,s-=8);for(i=c&(1<<-s)-1,c>>=-s,s+=t;0<s;i=256*i+e[l],l--,s-=8);if(0===c)c=1-r;else{if(c===a)return i?NaN:d?-C:C;i+=E(2,t),c-=r}return(d?-1:1)*i*E(2,c-t)}function B(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function F(e){return[255&e]}function z(e){return[255&e,e>>8&255]}function U(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function H(e){return V(e,52,8)}function J(e){return V(e,23,4)}function K(e,t,o){p(e[_],t,{get:function(){return this[o]}})}function q(e,t,o,i){var n=m(+o);if(n+t>e[j])throw P(w);var a=e[R]._b,r=n+e[N],s=a.slice(r,r+t);return i?s:s.reverse()}function G(e,t,o,i,n,a){var r=m(+o);if(r+t>e[j])throw P(w);for(var s=e[R]._b,l=r+e[N],d=i(+n),c=0;c<t;c++)s[l+c]=d[a?c:t-c-1]}if(r.ABV){if(!d(function(){S(1)})||!d(function(){new S(-1)})||d(function(){return new S,new S(1.5),new S(NaN),S.name!=y})){for(var Y,X=(S=function(e){return c(this,S),new x(m(e))})[_]=x[_],Z=f(x),$=0;Z.length>$;)(Y=Z[$++])in S||s(S,Y,x[Y]);a||(X.constructor=S)}var Q=new k(new S(2)),ee=k[_].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||l(k[_],{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else S=function(e){c(this,S,y);var t=m(e);this._b=g.call(new Array(t),0),this[j]=t},k=function(e,t,o){c(this,k,b),c(e,S,b);var i=e[j],n=u(t);if(n<0||i<n)throw P("Wrong offset!");if(i<n+(o=void 0===o?i-n:h(o)))throw P("Wrong length!");this[R]=e,this[N]=n,this[j]=o},n&&(K(S,A,"_l"),K(k,"buffer","_b"),K(k,A,"_l"),K(k,M,"_o")),l(k[_],{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e){var t=q(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=q(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return B(q(this,4,e,arguments[1]))},getUint32:function(e){return B(q(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return O(q(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return O(q(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){G(this,1,e,F,t)},setUint8:function(e,t){G(this,1,e,F,t)},setInt16:function(e,t){G(this,2,e,z,t,arguments[2])},setUint16:function(e,t){G(this,2,e,z,t,arguments[2])},setInt32:function(e,t){G(this,4,e,U,t,arguments[2])},setUint32:function(e,t){G(this,4,e,U,t,arguments[2])},setFloat32:function(e,t){G(this,4,e,J,t,arguments[2])},setFloat64:function(e,t){G(this,8,e,H,t,arguments[2])}});v(S,y),v(k,b),s(k[_],r.VIEW,!0),o[y]=S,o[b]=k},{"./_an-instance":7,"./_array-fill":10,"./_descriptors":30,"./_fails":36,"./_global":41,"./_hide":43,"./_library":60,"./_object-dp":72,"./_object-gopn":77,"./_redefine-all":91,"./_set-to-string-tag":99,"./_to-index":113,"./_to-integer":114,"./_to-length":116,"./_typed":121}],121:[function(e,t,o){for(var i,n=e("./_global"),a=e("./_hide"),r=e("./_uid"),s=r("typed_array"),l=r("view"),d=!(!n.ArrayBuffer||!n.DataView),c=d,u=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(i=n[h[u++]])?(a(i.prototype,s,!0),a(i.prototype,l,!0)):c=!1;t.exports={ABV:d,CONSTR:c,TYPED:s,VIEW:l}},{"./_global":41,"./_hide":43,"./_uid":122}],122:[function(e,t,o){var i=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},{}],123:[function(e,t,o){var i=e("./_global").navigator;t.exports=i&&i.userAgent||""},{"./_global":41}],124:[function(e,t,o){var i=e("./_is-object");t.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":52}],125:[function(e,t,o){var i=e("./_global"),n=e("./_core"),a=e("./_library"),r=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=n.Symbol||(n.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},{"./_core":24,"./_global":41,"./_library":60,"./_object-dp":72,"./_wks-ext":126}],126:[function(e,t,o){o.f=e("./_wks")},{"./_wks":127}],127:[function(e,t,o){var i=e("./_shared")("wks"),n=e("./_uid"),a=e("./_global").Symbol,r="function"==typeof a;(t.exports=function(e){return i[e]||(i[e]=r&&a[e]||(r?a:n)("Symbol."+e))}).store=i},{"./_global":41,"./_shared":101,"./_uid":122}],128:[function(e,t,o){var i=e("./_classof"),n=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||a[i(e)]}},{"./_classof":18,"./_core":24,"./_iterators":59,"./_wks":127}],129:[function(e,t,o){var i=e("./_export"),n=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return n(e)}})},{"./_export":34,"./_replacer":93}],130:[function(e,t,o){var i=e("./_export");i(i.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":6,"./_array-copy-within":9,"./_export":34}],131:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(4);i(i.P+i.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":103}],132:[function(e,t,o){var i=e("./_export");i(i.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":6,"./_array-fill":10,"./_export":34}],133:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(2);i(i.P+i.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":103}],134:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(6),a="findIndex",r=!0;a in[]&&Array(1)[a](function(){r=!1}),i(i.P+i.F*r,"Array",{findIndex:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")(a)},{"./_add-to-unscopables":6,"./_array-methods":13,"./_export":34}],135:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":6,"./_array-methods":13,"./_export":34}],136:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(0),a=e("./_strict-method")([].forEach,!0);i(i.P+i.F*!a,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":103}],137:[function(e,t,o){var h=e("./_ctx"),i=e("./_export"),m=e("./_to-object"),f=e("./_iter-call"),p=e("./_is-array-iter"),g=e("./_to-length"),v=e("./_create-property"),y=e("./core.get-iterator-method");i(i.S+i.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,i,n,a=m(e),r="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,d=void 0!==l,c=0,u=y(a);if(d&&(l=h(l,2<s?arguments[2]:void 0,2)),null==u||r==Array&&p(u))for(o=new r(t=g(a.length));c<t;c++)v(o,c,d?l(a[c],c):a[c]);else for(n=u.call(a),o=new r;!(i=n.next()).done;c++)v(o,c,d?f(n,l,[i.value,c],!0):i.value);return o.length=c,o}})},{"./_create-property":25,"./_ctx":26,"./_export":34,"./_is-array-iter":49,"./_iter-call":54,"./_iter-detect":57,"./_to-length":116,"./_to-object":117,"./core.get-iterator-method":128}],138:[function(e,t,o){var i=e("./_export"),n=e("./_array-includes")(!1),a=[].indexOf,r=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(r||!e("./_strict-method")(a)),"Array",{indexOf:function(e){return r?a.apply(this,arguments)||0:n(this,e,arguments[1])}})},{"./_array-includes":12,"./_export":34,"./_strict-method":103}],139:[function(e,t,o){var i=e("./_export");i(i.S,"Array",{isArray:e("./_is-array")})},{"./_export":34,"./_is-array":50}],140:[function(e,t,o){var i=e("./_add-to-unscopables"),n=e("./_iter-step"),a=e("./_iterators"),r=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?o:"values"==t?e[o]:[o,e[o]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},{"./_add-to-unscopables":6,"./_iter-define":56,"./_iter-step":58,"./_iterators":59,"./_to-iobject":115}],141:[function(e,t,o){var i=e("./_export"),n=e("./_to-iobject"),a=[].join;i(i.P+i.F*(e("./_iobject")!=Object||!e("./_strict-method")(a)),"Array",{join:function(e){return a.call(n(this),void 0===e?",":e)}})},{"./_export":34,"./_iobject":48,"./_strict-method":103,"./_to-iobject":115}],142:[function(e,t,o){var i=e("./_export"),n=e("./_to-iobject"),a=e("./_to-integer"),r=e("./_to-length"),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!e("./_strict-method")(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=n(this),o=r(t.length),i=o-1;for(1<arguments.length&&(i=Math.min(i,a(arguments[1]))),i<0&&(i=o+i);0<=i;i--)if(i in t&&t[i]===e)return i||0;return-1}})},{"./_export":34,"./_strict-method":103,"./_to-integer":114,"./_to-iobject":115,"./_to-length":116}],143:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(1);i(i.P+i.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":103}],144:[function(e,t,o){var i=e("./_export"),n=e("./_create-property");i(i.S+i.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,o=new("function"==typeof this?this:Array)(t);e<t;)n(o,e,arguments[e++]);return o.length=t,o}})},{"./_create-property":25,"./_export":34,"./_fails":36}],145:[function(e,t,o){var i=e("./_export"),n=e("./_array-reduce");i(i.P+i.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":14,"./_export":34,"./_strict-method":103}],146:[function(e,t,o){var i=e("./_export"),n=e("./_array-reduce");i(i.P+i.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":14,"./_export":34,"./_strict-method":103}],147:[function(e,t,o){var i=e("./_export"),n=e("./_html"),d=e("./_cof"),c=e("./_to-absolute-index"),u=e("./_to-length"),h=[].slice;i(i.P+i.F*e("./_fails")(function(){n&&h.call(n)}),"Array",{slice:function(e,t){var o=u(this.length),i=d(this);if(t=void 0===t?o:t,"Array"==i)return h.call(this,e,t);for(var n=c(e,o),a=c(t,o),r=u(a-n),s=new Array(r),l=0;l<r;l++)s[l]="String"==i?this.charAt(n+l):this[n+l];return s}})},{"./_cof":19,"./_export":34,"./_fails":36,"./_html":44,"./_to-absolute-index":112,"./_to-length":116}],148:[function(e,t,o){var i=e("./_export"),n=e("./_array-methods")(3);i(i.P+i.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":13,"./_export":34,"./_strict-method":103}],149:[function(e,t,o){var i=e("./_export"),n=e("./_a-function"),a=e("./_to-object"),r=e("./_fails"),s=[].sort,l=[1,2,3];i(i.P+i.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!e("./_strict-method")(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),n(e))}})},{"./_a-function":4,"./_export":34,"./_fails":36,"./_strict-method":103,"./_to-object":117}],150:[function(e,t,o){e("./_set-species")("Array")},{"./_set-species":98}],151:[function(e,t,o){var i=e("./_export");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":34}],152:[function(e,t,o){var i=e("./_export"),n=e("./_date-to-iso-string");i(i.P+i.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},{"./_date-to-iso-string":27,"./_export":34}],153:[function(e,t,o){var i=e("./_export"),n=e("./_to-object"),a=e("./_to-primitive");i(i.P+i.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=n(this),o=a(t);return"number"!=typeof o||isFinite(o)?t.toISOString():null}})},{"./_export":34,"./_fails":36,"./_to-object":117,"./_to-primitive":118}],154:[function(e,t,o){var i=e("./_wks")("toPrimitive"),n=Date.prototype;i in n||e("./_hide")(n,i,e("./_date-to-primitive"))},{"./_date-to-primitive":28,"./_hide":43,"./_wks":127}],155:[function(e,t,o){var i=Date.prototype,n="Invalid Date",a=i.toString,r=i.getTime;new Date(NaN)+""!=n&&e("./_redefine")(i,"toString",function(){var e=r.call(this);return e==e?a.call(this):n})},{"./_redefine":92}],156:[function(e,t,o){var i=e("./_export");i(i.P,"Function",{bind:e("./_bind")})},{"./_bind":17,"./_export":34}],157:[function(e,t,o){var i=e("./_is-object"),n=e("./_object-gpo"),a=e("./_wks")("hasInstance"),r=Function.prototype;a in r||e("./_object-dp").f(r,a,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":52,"./_object-dp":72,"./_object-gpo":79,"./_wks":127}],158:[function(e,t,o){var i=e("./_object-dp").f,n=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in n||e("./_descriptors")&&i(n,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},{"./_descriptors":30,"./_object-dp":72}],159:[function(e,t,o){var i=e("./_collection-strong"),n=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(n(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(n(this,"Map"),0===e?0:e,t)}},i,!0)},{"./_collection":23,"./_collection-strong":20,"./_validate-collection":124}],160:[function(e,t,o){var i=e("./_export"),n=e("./_math-log1p"),a=Math.sqrt,r=Math.acosh;i(i.S+i.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&r(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:n(e-1+a(e-1)*a(e+1))}})},{"./_export":34,"./_math-log1p":63}],161:[function(e,t,o){var i=e("./_export"),n=Math.asinh;i(i.S+i.F*!(n&&0<1/n(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{"./_export":34}],162:[function(e,t,o){var i=e("./_export"),n=Math.atanh;i(i.S+i.F*!(n&&1/n(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":34}],163:[function(e,t,o){var i=e("./_export"),n=e("./_math-sign");i(i.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":34,"./_math-sign":65}],164:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":34}],165:[function(e,t,o){var i=e("./_export"),n=Math.exp;i(i.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},{"./_export":34}],166:[function(e,t,o){var i=e("./_export"),n=e("./_math-expm1");i(i.S+i.F*(n!=Math.expm1),"Math",{expm1:n})},{"./_export":34,"./_math-expm1":61}],167:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{fround:e("./_math-fround")})},{"./_export":34,"./_math-fround":62}],168:[function(e,t,o){var i=e("./_export"),l=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var o,i,n=0,a=0,r=arguments.length,s=0;a<r;)s<(o=l(arguments[a++]))?(n=n*(i=s/o)*i+1,s=o):n+=0<o?(i=o/s)*i:o;return s===1/0?1/0:s*Math.sqrt(n)}})},{"./_export":34}],169:[function(e,t,o){var i=e("./_export"),n=Math.imul;i(i.S+i.F*e("./_fails")(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function(e,t){var o=+e,i=+t,n=65535&o,a=65535&i;return 0|n*a+((65535&o>>>16)*a+n*(65535&i>>>16)<<16>>>0)}})},{"./_export":34,"./_fails":36}],170:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":34}],171:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":34,"./_math-log1p":63}],172:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":34}],173:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{sign:e("./_math-sign")})},{"./_export":34,"./_math-sign":65}],174:[function(e,t,o){var i=e("./_export"),n=e("./_math-expm1"),a=Math.exp;i(i.S+i.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(n(e)-n(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},{"./_export":34,"./_fails":36,"./_math-expm1":61}],175:[function(e,t,o){var i=e("./_export"),n=e("./_math-expm1"),a=Math.exp;i(i.S,"Math",{tanh:function(e){var t=n(e=+e),o=n(-e);return t==1/0?1:o==1/0?-1:(t-o)/(a(e)+a(-e))}})},{"./_export":34,"./_math-expm1":61}],176:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},{"./_export":34}],177:[function(e,t,o){var i=e("./_global"),n=e("./_has"),a=e("./_cof"),r=e("./_inherit-if-required"),c=e("./_to-primitive"),s=e("./_fails"),l=e("./_object-gopn").f,d=e("./_object-gopd").f,u=e("./_object-dp").f,h=e("./_string-trim").trim,m="Number",f=i[m],p=f,g=f.prototype,v=a(e("./_object-create")(g))==m,y="trim"in String.prototype,b=function(e){var t=c(e,!1);if("string"==typeof t&&2<t.length){var o,i,n,a=(t=y?t.trim():h(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(o=t.charCodeAt(2))||120===o)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+t}for(var r,s=t.slice(2),l=0,d=s.length;l<d;l++)if((r=s.charCodeAt(l))<48||n<r)return NaN;return parseInt(s,i)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof f&&(v?s(function(){g.valueOf.call(o)}):a(o)!=m)?r(new p(b(t)),o,f):b(t)};for(var _,w=e("./_descriptors")?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)n(p,_=w[S])&&!n(f,_)&&u(f,_,d(p,_));(f.prototype=g).constructor=f,e("./_redefine")(i,m,f)}},{"./_cof":19,"./_descriptors":30,"./_fails":36,"./_global":41,"./_has":42,"./_inherit-if-required":46,"./_object-create":71,"./_object-dp":72,"./_object-gopd":75,"./_object-gopn":77,"./_redefine":92,"./_string-trim":109,"./_to-primitive":118}],178:[function(e,t,o){var i=e("./_export");i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":34}],179:[function(e,t,o){var i=e("./_export"),n=e("./_global").isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},{"./_export":34,"./_global":41}],180:[function(e,t,o){var i=e("./_export");i(i.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":34,"./_is-integer":51}],181:[function(e,t,o){var i=e("./_export");i(i.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":34}],182:[function(e,t,o){var i=e("./_export"),n=e("./_is-integer"),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return n(e)&&a(e)<=9007199254740991}})},{"./_export":34,"./_is-integer":51}],183:[function(e,t,o){var i=e("./_export");i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":34}],184:[function(e,t,o){var i=e("./_export");i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":34}],185:[function(e,t,o){var i=e("./_export"),n=e("./_parse-float");i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},{"./_export":34,"./_parse-float":86}],186:[function(e,t,o){var i=e("./_export"),n=e("./_parse-int");i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},{"./_export":34,"./_parse-int":87}],187:[function(e,t,o){var i=e("./_export"),d=e("./_to-integer"),c=e("./_a-number-value"),u=e("./_string-repeat"),n=1..toFixed,a=Math.floor,r=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",m=function(e,t){for(var o=-1,i=t;++o<6;)i+=e*r[o],r[o]=i%1e7,i=a(i/1e7)},f=function(e){for(var t=6,o=0;0<=--t;)o+=r[t],r[t]=a(o/e),o=o%e*1e7},p=function(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==r[e]){var o=String(r[e]);t=""===t?o:t+u.call("0",7-o.length)+o}return t},g=function(e,t,o){return 0===t?o:t%2==1?g(e,t-1,o*e):g(e*e,t/2,o)};i(i.P+i.F*(!!n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e("./_fails")(function(){n.call({})})),"Number",{toFixed:function(e){var t,o,i,n,a=c(this,h),r=d(e),s="",l="0";if(r<0||20<r)throw RangeError(h);if(a!=a)return"NaN";if(a<=-1e21||1e21<=a)return String(a);if(a<0&&(s="-",a=-a),1e-21<a)if(o=(t=function(e){for(var t=0,o=e;4096<=o;)t+=12,o/=4096;for(;2<=o;)t+=1,o/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),o*=4503599627370496,0<(t=52-t)){for(m(0,o),i=r;7<=i;)m(1e7,0),i-=7;for(m(g(10,i,1),0),i=t-1;23<=i;)f(1<<23),i-=23;f(1<<i),m(1,1),f(2),l=p()}else m(0,o),m(1<<-t,0),l=p()+u.call("0",r);return l=0<r?s+((n=l.length)<=r?"0."+u.call("0",r-n)+l:l.slice(0,n-r)+"."+l.slice(n-r)):s+l}})},{"./_a-number-value":5,"./_export":34,"./_fails":36,"./_string-repeat":108,"./_to-integer":114}],188:[function(e,t,o){var i=e("./_export"),n=e("./_fails"),a=e("./_a-number-value"),r=1..toPrecision;i(i.P+i.F*(n(function(){return"1"!==r.call(1,void 0)})||!n(function(){r.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?r.call(t):r.call(t,e)}})},{"./_a-number-value":5,"./_export":34,"./_fails":36}],189:[function(e,t,o){var i=e("./_export");i(i.S+i.F,"Object",{assign:e("./_object-assign")})},{"./_export":34,"./_object-assign":70}],190:[function(e,t,o){var i=e("./_export");i(i.S,"Object",{create:e("./_object-create")})},{"./_export":34,"./_object-create":71}],191:[function(e,t,o){var i=e("./_export");i(i.S+i.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":30,"./_export":34,"./_object-dps":73}],192:[function(e,t,o){var i=e("./_export");i(i.S+i.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":30,"./_export":34,"./_object-dp":72}],193:[function(e,t,o){var i=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(t){return function(e){return t&&i(e)?t(n(e)):e}})},{"./_is-object":52,"./_meta":66,"./_object-sap":83}],194:[function(e,t,o){var i=e("./_to-iobject"),n=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return n(i(e),t)}})},{"./_object-gopd":75,"./_object-sap":83,"./_to-iobject":115}],195:[function(e,t,o){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":76,"./_object-sap":83}],196:[function(e,t,o){var i=e("./_to-object"),n=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return n(i(e))}})},{"./_object-gpo":79,"./_object-sap":83,"./_to-object":117}],197:[function(e,t,o){var i=e("./_is-object");e("./_object-sap")("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},{"./_is-object":52,"./_object-sap":83}],198:[function(e,t,o){var i=e("./_is-object");e("./_object-sap")("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},{"./_is-object":52,"./_object-sap":83}],199:[function(e,t,o){var i=e("./_is-object");e("./_object-sap")("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},{"./_is-object":52,"./_object-sap":83}],200:[function(e,t,o){var i=e("./_export");i(i.S,"Object",{is:e("./_same-value")})},{"./_export":34,"./_same-value":94}],201:[function(e,t,o){var i=e("./_to-object"),n=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return n(i(e))}})},{"./_object-keys":81,"./_object-sap":83,"./_to-object":117}],202:[function(e,t,o){var i=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(t){return function(e){return t&&i(e)?t(n(e)):e}})},{"./_is-object":52,"./_meta":66,"./_object-sap":83}],203:[function(e,t,o){var i=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("seal",function(t){return function(e){return t&&i(e)?t(n(e)):e}})},{"./_is-object":52,"./_meta":66,"./_object-sap":83}],204:[function(e,t,o){var i=e("./_export");i(i.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":34,"./_set-proto":97}],205:[function(e,t,o){var i=e("./_classof"),n={};n[e("./_wks")("toStringTag")]="z",n+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},{"./_classof":18,"./_redefine":92,"./_wks":127}],206:[function(e,t,o){var i=e("./_export"),n=e("./_parse-float");i(i.G+i.F*(parseFloat!=n),{parseFloat:n})},{"./_export":34,"./_parse-float":86}],207:[function(e,t,o){var i=e("./_export"),n=e("./_parse-int");i(i.G+i.F*(parseInt!=n),{parseInt:n})},{"./_export":34,"./_parse-int":87}],208:[function(o,e,t){var i,n,a,r,s=o("./_library"),l=o("./_global"),d=o("./_ctx"),c=o("./_classof"),u=o("./_export"),h=o("./_is-object"),m=o("./_a-function"),f=o("./_an-instance"),p=o("./_for-of"),g=o("./_species-constructor"),v=o("./_task").set,y=o("./_microtask")(),b=o("./_new-promise-capability"),_=o("./_perform"),w=o("./_user-agent"),S=o("./_promise-resolve"),k="Promise",I=l.TypeError,P=l.process,C=P&&P.versions,x=C&&C.v8||"",T=l[k],E="process"==c(P),D=function(){},L=n=b.f,W=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[o("./_wks")("species")]=function(e){e(D,D)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(D)instanceof t&&0!==x.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),A=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(c,o){if(!c._n){c._n=!0;var i=c._c;y(function(){for(var l=c._v,d=1==c._s,e=0,t=function(e){var t,o,i,n=d?e.ok:e.fail,a=e.resolve,r=e.reject,s=e.domain;try{n?(d||(2==c._h&&N(c),c._h=1),!0===n?t=l:(s&&s.enter(),t=n(l),s&&(s.exit(),i=!0)),t===e.promise?r(I("Promise-chain cycle")):(o=A(t))?o.call(t,a,r):a(t)):r(l)}catch(e){s&&!i&&s.exit(),r(e)}};i.length>e;)t(i[e++]);c._c=[],c._n=!1,o&&!c._h&&R(c)})}},R=function(a){v.call(l,function(){var e,t,o,i=a._v,n=j(a);if(n&&(e=_(function(){E?P.emit("unhandledRejection",i,a):(t=l.onunhandledrejection)?t({promise:a,reason:i}):(o=l.console)&&o.error&&o.error("Unhandled promise rejection",i)}),a._h=E||j(a)?2:1),a._a=void 0,n&&e.e)throw e.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(t){v.call(l,function(){var e;E?P.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},V=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},O=function(e){var o,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw I("Promise can't be resolved itself");(o=A(e))?y(function(){var t={_w:i,_d:!1};try{o.call(e,d(O,t,1),d(V,t,1))}catch(e){V.call(t,e)}}):(i._v=e,i._s=1,M(i,!1))}catch(e){V.call({_w:i,_d:!1},e)}}};W||(T=function(e){f(this,T,k,"_h"),m(e),i.call(this);try{e(d(O,this,1),d(V,this,1))}catch(e){V.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("./_redefine-all")(T.prototype,{then:function(e,t){var o=L(g(this,T));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=E?P.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&M(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i;this.promise=e,this.resolve=d(O,e,1),this.reject=d(V,e,1)},b.f=L=function(e){return e===T||e===r?new a(e):n(e)}),u(u.G+u.W+u.F*!W,{Promise:T}),o("./_set-to-string-tag")(T,k),o("./_set-species")(k),r=o("./_core")[k],u(u.S+u.F*!W,k,{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!W),k,{resolve:function(e){return S(s&&this===r?T:this,e)}}),u(u.S+u.F*!(W&&o("./_iter-detect")(function(e){T.all(e).catch(D)})),k,{all:function(e){var r=this,t=L(r),s=t.resolve,l=t.reject,o=_(function(){var i=[],n=0,a=1;p(e,!1,function(e){var t=n++,o=!1;i.push(void 0),a++,r.resolve(e).then(function(e){o||(o=!0,i[t]=e,--a||s(i))},l)}),--a||s(i)});return o.e&&l(o.v),t.promise},race:function(e){var t=this,o=L(t),i=o.reject,n=_(function(){p(e,!1,function(e){t.resolve(e).then(o.resolve,i)})});return n.e&&i(n.v),o.promise}})},{"./_a-function":4,"./_an-instance":7,"./_classof":18,"./_core":24,"./_ctx":26,"./_export":34,"./_for-of":40,"./_global":41,"./_is-object":52,"./_iter-detect":57,"./_library":60,"./_microtask":68,"./_new-promise-capability":69,"./_perform":88,"./_promise-resolve":89,"./_redefine-all":91,"./_set-species":98,"./_set-to-string-tag":99,"./_species-constructor":102,"./_task":111,"./_user-agent":123,"./_wks":127}],209:[function(e,t,o){var i=e("./_export"),a=e("./_a-function"),r=e("./_an-object"),s=(e("./_global").Reflect||{}).apply,l=Function.apply;i(i.S+i.F*!e("./_fails")(function(){s(function(){})}),"Reflect",{apply:function(e,t,o){var i=a(e),n=r(o);return s?s(i,t,n):l.call(i,t,n)}})},{"./_a-function":4,"./_an-object":8,"./_export":34,"./_fails":36,"./_global":41}],210:[function(e,t,o){var i=e("./_export"),s=e("./_object-create"),l=e("./_a-function"),d=e("./_an-object"),c=e("./_is-object"),n=e("./_fails"),u=e("./_bind"),h=(e("./_global").Reflect||{}).construct,m=n(function(){function e(){}return!(h(function(){},[],e)instanceof e)}),f=!n(function(){h(function(){})});i(i.S+i.F*(m||f),"Reflect",{construct:function(e,t){l(e),d(t);var o=arguments.length<3?e:l(arguments[2]);if(f&&!m)return h(e,t,o);if(e==o){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(u.apply(e,i))}var n=o.prototype,a=s(c(n)?n:Object.prototype),r=Function.apply.call(e,a,t);return c(r)?r:a}})},{"./_a-function":4,"./_an-object":8,"./_bind":17,"./_export":34,"./_fails":36,"./_global":41,"./_is-object":52,"./_object-create":71}],211:[function(e,t,o){var i=e("./_object-dp"),n=e("./_export"),a=e("./_an-object"),r=e("./_to-primitive");n(n.S+n.F*e("./_fails")(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,o){a(e),t=r(t,!0),a(o);try{return i.f(e,t,o),!0}catch(e){return!1}}})},{"./_an-object":8,"./_export":34,"./_fails":36,"./_object-dp":72,"./_to-primitive":118}],212:[function(e,t,o){var i=e("./_export"),n=e("./_object-gopd").f,a=e("./_an-object");i(i.S,"Reflect",{deleteProperty:function(e,t){var o=n(a(e),t);return!(o&&!o.configurable)&&delete e[t]}})},{"./_an-object":8,"./_export":34,"./_object-gopd":75}],213:[function(e,t,o){var i=e("./_export"),n=e("./_an-object"),a=function(e){this._t=n(e),this._i=0;var t,o=this._k=[];for(t in e)o.push(t)};e("./_iter-create")(a,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new a(e)}})},{"./_an-object":8,"./_export":34,"./_iter-create":55}],214:[function(e,t,o){var i=e("./_object-gopd"),n=e("./_export"),a=e("./_an-object");n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(a(e),t)}})},{"./_an-object":8,"./_export":34,"./_object-gopd":75}],215:[function(e,t,o){var i=e("./_export"),n=e("./_object-gpo"),a=e("./_an-object");i(i.S,"Reflect",{getPrototypeOf:function(e){return n(a(e))}})},{"./_an-object":8,"./_export":34,"./_object-gpo":79}],216:[function(e,t,o){var r=e("./_object-gopd"),s=e("./_object-gpo"),l=e("./_has"),i=e("./_export"),d=e("./_is-object"),c=e("./_an-object");i(i.S,"Reflect",{get:function e(t,o){var i,n,a=arguments.length<3?t:arguments[2];return c(t)===a?t[o]:(i=r.f(t,o))?l(i,"value")?i.value:void 0!==i.get?i.get.call(a):void 0:d(n=s(t))?e(n,o,a):void 0}})},{"./_an-object":8,"./_export":34,"./_has":42,"./_is-object":52,"./_object-gopd":75,"./_object-gpo":79}],217:[function(e,t,o){var i=e("./_export");i(i.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":34}],218:[function(e,t,o){var i=e("./_export"),n=e("./_an-object"),a=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return n(e),!a||a(e)}})},{"./_an-object":8,"./_export":34}],219:[function(e,t,o){var i=e("./_export");i(i.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":34,"./_own-keys":85}],220:[function(e,t,o){var i=e("./_export"),n=e("./_an-object"),a=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){n(e);try{return a&&a(e),!0}catch(e){return!1}}})},{"./_an-object":8,"./_export":34}],221:[function(e,t,o){var i=e("./_export"),n=e("./_set-proto");n&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(e){return!1}}})},{"./_export":34,"./_set-proto":97}],222:[function(e,t,o){var l=e("./_object-dp"),d=e("./_object-gopd"),c=e("./_object-gpo"),u=e("./_has"),i=e("./_export"),h=e("./_property-desc"),m=e("./_an-object"),f=e("./_is-object");i(i.S,"Reflect",{set:function e(t,o,i){var n,a,r=arguments.length<4?t:arguments[3],s=d.f(m(t),o);if(!s){if(f(a=c(t)))return e(a,o,i,r);s=h(0)}if(u(s,"value")){if(!1===s.writable||!f(r))return!1;if(n=d.f(r,o)){if(n.get||n.set||!1===n.writable)return!1;n.value=i,l.f(r,o,n)}else l.f(r,o,h(0,i));return!0}return void 0!==s.set&&(s.set.call(r,i),!0)}})},{"./_an-object":8,"./_export":34,"./_has":42,"./_is-object":52,"./_object-dp":72,"./_object-gopd":75,"./_object-gpo":79,"./_property-desc":90}],223:[function(e,t,o){var i=e("./_global"),a=e("./_inherit-if-required"),n=e("./_object-dp").f,r=e("./_object-gopn").f,s=e("./_is-regexp"),l=e("./_flags"),d=i.RegExp,c=d,u=d.prototype,h=/a/g,m=/a/g,f=new d(h)!==h;if(e("./_descriptors")&&(!f||e("./_fails")(function(){return m[e("./_wks")("match")]=!1,d(h)!=h||d(m)==m||"/a/i"!=d(h,"i")}))){d=function(e,t){var o=this instanceof d,i=s(e),n=void 0===t;return!o&&i&&e.constructor===d&&n?e:a(f?new c(i&&!n?e.source:e,t):c((i=e instanceof d)?e.source:e,i&&n?l.call(e):t),o?this:u,d)};for(var p=function(t){t in d||n(d,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},g=r(c),v=0;g.length>v;)p(g[v++]);(u.constructor=d).prototype=u,e("./_redefine")(i,"RegExp",d)}e("./_set-species")("RegExp")},{"./_descriptors":30,"./_fails":36,"./_flags":38,"./_global":41,"./_inherit-if-required":46,"./_is-regexp":53,"./_object-dp":72,"./_object-gopn":77,"./_redefine":92,"./_set-species":98,"./_wks":127}],224:[function(e,t,o){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":30,"./_flags":38,"./_object-dp":72}],225:[function(e,t,o){e("./_fix-re-wks")("match",1,function(i,n,e){return[function(e){var t=i(this),o=null==e?void 0:e[n];return void 0!==o?o.call(e,t):new RegExp(e)[n](String(t))},e]})},{"./_fix-re-wks":37}],226:[function(e,t,o){e("./_fix-re-wks")("replace",2,function(n,a,r){return[function(e,t){var o=n(this),i=null==e?void 0:e[a];return void 0!==i?i.call(e,o,t):r.call(String(o),e,t)},r]})},{"./_fix-re-wks":37}],227:[function(e,t,o){e("./_fix-re-wks")("search",1,function(i,n,e){return[function(e){var t=i(this),o=null==e?void 0:e[n];return void 0!==o?o.call(e,t):new RegExp(e)[n](String(t))},e]})},{"./_fix-re-wks":37}],228:[function(t,e,o){t("./_fix-re-wks")("split",2,function(n,a,r){var m=t("./_is-regexp"),f=r,p=[].push,e="split",g="length";if("c"=="abbc"[e](/(b)*/)[1]||4!="test"[e](/(?:)/,-1)[g]||2!="ab"[e](/(?:ab)*/)[g]||4!="."[e](/(.?)(.?)/)[g]||1<"."[e](/()()/)[g]||""[e](/.?/)[g]){var v=void 0===/()??/.exec("")[1];r=function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!m(e))return f.call(o,e,t);var i,n,a,r,s,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,u=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,d+"g");for(v||(i=new RegExp("^"+h.source+"$(?!\\s)",d));(n=h.exec(o))&&!(c<(a=n.index+n[0][g])&&(l.push(o.slice(c,n.index)),!v&&1<n[g]&&n[0].replace(i,function(){for(s=1;s<arguments[g]-2;s++)void 0===arguments[s]&&(n[s]=void 0)}),1<n[g]&&n.index<o[g]&&p.apply(l,n.slice(1)),r=n[0][g],c=a,l[g]>=u));)h.lastIndex===n.index&&h.lastIndex++;return c===o[g]?!r&&h.test("")||l.push(""):l.push(o.slice(c)),l[g]>u?l.slice(0,u):l}}else"0"[e](void 0,0)[g]&&(r=function(e,t){return void 0===e&&0===t?[]:f.call(this,e,t)});return[function(e,t){var o=n(this),i=null==e?void 0:e[a];return void 0!==i?i.call(e,o,t):r.call(String(o),e,t)},r]})},{"./_fix-re-wks":37,"./_is-regexp":53}],229:[function(t,e,o){t("./es6.regexp.flags");var i=t("./_an-object"),n=t("./_flags"),a=t("./_descriptors"),r="toString",s=/./[r],l=function(e){t("./_redefine")(RegExp.prototype,r,e,!0)};t("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?n.call(e):void 0)}):s.name!=r&&l(function(){return s.call(this)})},{"./_an-object":8,"./_descriptors":30,"./_fails":36,"./_flags":38,"./_redefine":92,"./es6.regexp.flags":224}],230:[function(e,t,o){var i=e("./_collection-strong"),n=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return i.def(n(this,"Set"),e=0===e?0:e,e)}},i)},{"./_collection":23,"./_collection-strong":20,"./_validate-collection":124}],231:[function(e,t,o){e("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":106}],232:[function(e,t,o){e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":106}],233:[function(e,t,o){e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":106}],234:[function(e,t,o){e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":106}],235:[function(e,t,o){var i=e("./_export"),n=e("./_string-at")(!1);i(i.P,"String",{codePointAt:function(e){return n(this,e)}})},{"./_export":34,"./_string-at":104}],236:[function(e,t,o){var i=e("./_export"),r=e("./_to-length"),s=e("./_string-context"),l="endsWith",d=""[l];i(i.P+i.F*e("./_fails-is-regexp")(l),"String",{endsWith:function(e){var t=s(this,e,l),o=1<arguments.length?arguments[1]:void 0,i=r(t.length),n=void 0===o?i:Math.min(r(o),i),a=String(e);return d?d.call(t,a,n):t.slice(n-a.length,n)===a}})},{"./_export":34,"./_fails-is-regexp":35,"./_string-context":105,"./_to-length":116}],237:[function(e,t,o){e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":106}],238:[function(e,t,o){e("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":106}],239:[function(e,t,o){e("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":106}],240:[function(e,t,o){var i=e("./_export"),a=e("./_to-absolute-index"),r=String.fromCharCode,n=String.fromCodePoint;i(i.S+i.F*(!!n&&1!=n.length),"String",{fromCodePoint:function(e){for(var t,o=[],i=arguments.length,n=0;n<i;){if(t=+arguments[n++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");o.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return o.join("")}})},{"./_export":34,"./_to-absolute-index":112}],241:[function(e,t,o){var i=e("./_export"),n=e("./_string-context");i(i.P+i.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e){return!!~n(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},{"./_export":34,"./_fails-is-regexp":35,"./_string-context":105}],242:[function(e,t,o){e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":106}],243:[function(e,t,o){var i=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=i(t,o),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":56,"./_string-at":104}],244:[function(e,t,o){e("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":106}],245:[function(e,t,o){var i=e("./_export"),r=e("./_to-iobject"),s=e("./_to-length");i(i.S,"String",{raw:function(e){for(var t=r(e.raw),o=s(t.length),i=arguments.length,n=[],a=0;a<o;)n.push(String(t[a++])),a<i&&n.push(String(arguments[a]));return n.join("")}})},{"./_export":34,"./_to-iobject":115,"./_to-length":116}],246:[function(e,t,o){var i=e("./_export");i(i.P,"String",{repeat:e("./_string-repeat")})},{"./_export":34,"./_string-repeat":108}],247:[function(e,t,o){e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":106}],248:[function(e,t,o){var i=e("./_export"),n=e("./_to-length"),a=e("./_string-context"),r="startsWith",s=""[r];i(i.P+i.F*e("./_fails-is-regexp")(r),"String",{startsWith:function(e){var t=a(this,e,r),o=n(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),i=String(e);return s?s.call(t,i,o):t.slice(o,o+i.length)===i}})},{"./_export":34,"./_fails-is-regexp":35,"./_string-context":105,"./_to-length":116}],249:[function(e,t,o){e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":106}],250:[function(e,t,o){e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":106}],251:[function(e,t,o){e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":106}],252:[function(e,t,o){e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":109}],253:[function(e,t,o){var i=e("./_global"),r=e("./_has"),n=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,d=e("./_fails"),c=e("./_shared"),u=e("./_set-to-string-tag"),h=e("./_uid"),m=e("./_wks"),f=e("./_wks-ext"),p=e("./_wks-define"),g=e("./_enum-keys"),v=e("./_is-array"),y=e("./_an-object"),b=e("./_is-object"),_=e("./_to-iobject"),w=e("./_to-primitive"),S=e("./_property-desc"),k=e("./_object-create"),I=e("./_object-gopn-ext"),P=e("./_object-gopd"),C=e("./_object-dp"),x=e("./_object-keys"),T=P.f,E=C.f,D=I.f,L=i.Symbol,W=i.JSON,A=W&&W.stringify,M="prototype",R=m("_hidden"),j=m("toPrimitive"),N={}.propertyIsEnumerable,V=c("symbol-registry"),O=c("symbols"),B=c("op-symbols"),F=Object[M],z="function"==typeof L,U=i.QObject,H=!U||!U[M]||!U[M].findChild,J=n&&d(function(){return 7!=k(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,o){var i=T(F,t);i&&delete F[t],E(e,t,o),i&&e!==F&&E(F,t,i)}:E,K=function(e){var t=O[e]=k(L[M]);return t._k=e,t},q=z&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},G=function(e,t,o){return e===F&&G(B,t,o),y(e),t=w(t,!0),y(o),r(O,t)?(o.enumerable?(r(e,R)&&e[R][t]&&(e[R][t]=!1),o=k(o,{enumerable:S(0,!1)})):(r(e,R)||E(e,R,S(1,{})),e[R][t]=!0),J(e,t,o)):E(e,t,o)},Y=function(e,t){y(e);for(var o,i=g(t=_(t)),n=0,a=i.length;n<a;)G(e,o=i[n++],t[o]);return e},X=function(e){var t=N.call(this,e=w(e,!0));return!(this===F&&r(O,e)&&!r(B,e))&&(!(t||!r(this,e)||!r(O,e)||r(this,R)&&this[R][e])||t)},Z=function(e,t){if(e=_(e),t=w(t,!0),e!==F||!r(O,t)||r(B,t)){var o=T(e,t);return!o||!r(O,t)||r(e,R)&&e[R][t]||(o.enumerable=!0),o}},$=function(e){for(var t,o=D(_(e)),i=[],n=0;o.length>n;)r(O,t=o[n++])||t==R||t==l||i.push(t);return i},Q=function(e){for(var t,o=e===F,i=D(o?B:_(e)),n=[],a=0;i.length>a;)!r(O,t=i[a++])||o&&!r(F,t)||n.push(O[t]);return n};z||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=h(0<arguments.length?arguments[0]:void 0),o=function(e){this===F&&o.call(B,e),r(this,R)&&r(this[R],t)&&(this[R][t]=!1),J(this,t,S(1,e))};return n&&H&&J(F,t,{configurable:!0,set:o}),K(t)})[M],"toString",function(){return this._k}),P.f=Z,C.f=G,e("./_object-gopn").f=I.f=$,e("./_object-pie").f=X,e("./_object-gops").f=Q,n&&!e("./_library")&&s(F,"propertyIsEnumerable",X,!0),f.f=function(e){return K(m(e))}),a(a.G+a.W+a.F*!z,{Symbol:L});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)m(ee[te++]);for(var oe=x(m.store),ie=0;oe.length>ie;)p(oe[ie++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return r(V,e+="")?V[e]:V[e]=L(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!z,"Object",{create:function(e,t){return void 0===t?k(e):Y(k(e),t)},defineProperty:G,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),W&&a(a.S+a.F*(!z||d(function(){var e=L();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,o,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(o=t=i[1],(b(t)||void 0!==e)&&!q(e))return v(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!q(t))return t}),i[1]=t,A.apply(W,i)}}),L[M][j]||e("./_hide")(L[M],j,L[M].valueOf),u(L,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},{"./_an-object":8,"./_descriptors":30,"./_enum-keys":33,"./_export":34,"./_fails":36,"./_global":41,"./_has":42,"./_hide":43,"./_is-array":50,"./_is-object":52,"./_library":60,"./_meta":66,"./_object-create":71,"./_object-dp":72,"./_object-gopd":75,"./_object-gopn":77,"./_object-gopn-ext":76,"./_object-gops":78,"./_object-keys":81,"./_object-pie":82,"./_property-desc":90,"./_redefine":92,"./_set-to-string-tag":99,"./_shared":101,"./_to-iobject":115,"./_to-primitive":118,"./_uid":122,"./_wks":127,"./_wks-define":125,"./_wks-ext":126}],254:[function(e,t,o){var i=e("./_export"),n=e("./_typed"),a=e("./_typed-buffer"),d=e("./_an-object"),c=e("./_to-absolute-index"),u=e("./_to-length"),r=e("./_is-object"),s=e("./_global").ArrayBuffer,h=e("./_species-constructor"),m=a.ArrayBuffer,f=a.DataView,l=n.ABV&&s.isView,p=m.prototype.slice,g=n.VIEW,v="ArrayBuffer";i(i.G+i.W+i.F*(s!==m),{ArrayBuffer:m}),i(i.S+i.F*!n.CONSTR,v,{isView:function(e){return l&&l(e)||r(e)&&g in e}}),i(i.P+i.U+i.F*e("./_fails")(function(){return!new m(2).slice(1,void 0).byteLength}),v,{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(d(this),e);for(var o=d(this).byteLength,i=c(e,o),n=c(void 0===t?o:t,o),a=new(h(this,m))(u(n-i)),r=new f(this),s=new f(a),l=0;i<n;)s.setUint8(l++,r.getUint8(i++));return a}}),e("./_set-species")(v)},{"./_an-object":8,"./_export":34,"./_fails":36,"./_global":41,"./_is-object":52,"./_set-species":98,"./_species-constructor":102,"./_to-absolute-index":112,"./_to-length":116,"./_typed":121,"./_typed-buffer":120}],255:[function(e,t,o){var i=e("./_export");i(i.G+i.W+i.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":34,"./_typed":121,"./_typed-buffer":120}],256:[function(e,t,o){e("./_typed-array")("Float32",4,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],257:[function(e,t,o){e("./_typed-array")("Float64",8,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],258:[function(e,t,o){e("./_typed-array")("Int16",2,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],259:[function(e,t,o){e("./_typed-array")("Int32",4,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],260:[function(e,t,o){e("./_typed-array")("Int8",1,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],261:[function(e,t,o){e("./_typed-array")("Uint16",2,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],262:[function(e,t,o){e("./_typed-array")("Uint32",4,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],263:[function(e,t,o){e("./_typed-array")("Uint8",1,function(i){return function(e,t,o){return i(this,e,t,o)}})},{"./_typed-array":119}],264:[function(e,t,o){e("./_typed-array")("Uint8",1,function(i){return function(e,t,o){return i(this,e,t,o)}},!0)},{"./_typed-array":119}],265:[function(e,t,o){var a,i=e("./_array-methods")(0),r=e("./_redefine"),n=e("./_meta"),s=e("./_object-assign"),l=e("./_collection-weak"),d=e("./_is-object"),c=e("./_fails"),u=e("./_validate-collection"),h="WeakMap",m=n.getWeak,f=Object.isExtensible,p=l.ufstore,g={},v=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},y={get:function(e){if(d(e)){var t=m(e);return!0===t?p(u(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(u(this,h),e,t)}},b=t.exports=e("./_collection")(h,v,y,l,!0,!0);c(function(){return 7!=(new b).set((Object.freeze||Object)(g),7).get(g)})&&(s((a=l.getConstructor(v,h)).prototype,y),n.NEED=!0,i(["delete","has","get","set"],function(i){var e=b.prototype,n=e[i];r(e,i,function(e,t){if(!d(e)||f(e))return n.call(this,e,t);this._f||(this._f=new a);var o=this._f[i](e,t);return"set"==i?this:o})}))},{"./_array-methods":13,"./_collection":23,"./_collection-weak":22,"./_fails":36,"./_is-object":52,"./_meta":66,"./_object-assign":70,"./_redefine":92,"./_validate-collection":124}],266:[function(e,t,o){var i=e("./_collection-weak"),n=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return i.def(n(this,"WeakSet"),e,!0)}},i,!1,!0)},{"./_collection":23,"./_collection-weak":22,"./_validate-collection":124}],267:[function(e,t,o){var i=e("./_export"),n=e("./_flatten-into-array"),a=e("./_to-object"),r=e("./_to-length"),s=e("./_a-function"),l=e("./_array-species-create");i(i.P,"Array",{flatMap:function(e){var t,o,i=a(this);return s(e),t=r(i.length),o=l(i,0),n(o,i,i,t,0,1,e,arguments[1]),o}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":4,"./_add-to-unscopables":6,"./_array-species-create":16,"./_export":34,"./_flatten-into-array":39,"./_to-length":116,"./_to-object":117}],268:[function(e,t,o){var i=e("./_export"),n=e("./_flatten-into-array"),a=e("./_to-object"),r=e("./_to-length"),s=e("./_to-integer"),l=e("./_array-species-create");i(i.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),o=r(t.length),i=l(t,0);return n(i,t,t,o,0,void 0===e?1:s(e)),i}}),e("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":6,"./_array-species-create":16,"./_export":34,"./_flatten-into-array":39,"./_to-integer":114,"./_to-length":116,"./_to-object":117}],269:[function(e,t,o){var i=e("./_export"),n=e("./_array-includes")(!0);i(i.P,"Array",{includes:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":6,"./_array-includes":12,"./_export":34}],270:[function(e,t,o){var i=e("./_export"),n=e("./_microtask")(),a=e("./_global").process,r="process"==e("./_cof")(a);i(i.G,{asap:function(e){var t=r&&a.domain;n(t?t.bind(e):e)}})},{"./_cof":19,"./_export":34,"./_global":41,"./_microtask":68}],271:[function(e,t,o){var i=e("./_export"),n=e("./_cof");i(i.S,"Error",{isError:function(e){return"Error"===n(e)}})},{"./_cof":19,"./_export":34}],272:[function(e,t,o){var i=e("./_export");i(i.G,{global:e("./_global")})},{"./_export":34,"./_global":41}],273:[function(e,t,o){e("./_set-collection-from")("Map")},{"./_set-collection-from":95}],274:[function(e,t,o){e("./_set-collection-of")("Map")},{"./_set-collection-of":96}],275:[function(e,t,o){var i=e("./_export");i(i.P+i.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":21,"./_export":34}],276:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{clamp:function(e,t,o){return Math.min(o,Math.max(t,e))}})},{"./_export":34}],277:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":34}],278:[function(e,t,o){var i=e("./_export"),n=180/Math.PI;i(i.S,"Math",{degrees:function(e){return e*n}})},{"./_export":34}],279:[function(e,t,o){var i=e("./_export"),a=e("./_math-scale"),r=e("./_math-fround");i(i.S,"Math",{fscale:function(e,t,o,i,n){return r(a(e,t,o,i,n))}})},{"./_export":34,"./_math-fround":62,"./_math-scale":64}],280:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{iaddh:function(e,t,o,i){var n=e>>>0,a=o>>>0;return(t>>>0)+(i>>>0)+((n&a|(n|a)&~(n+a>>>0))>>>31)|0}})},{"./_export":34}],281:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{imulh:function(e,t){var o=+e,i=+t,n=65535&o,a=65535&i,r=o>>16,s=i>>16,l=(r*a>>>0)+(n*a>>>16);return r*s+(l>>16)+((n*s>>>0)+(65535&l)>>16)}})},{"./_export":34}],282:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{isubh:function(e,t,o,i){var n=e>>>0,a=o>>>0;return(t>>>0)-(i>>>0)-((~n&a|~(n^a)&n-a>>>0)>>>31)|0}})},{"./_export":34}],283:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":34}],284:[function(e,t,o){var i=e("./_export"),n=Math.PI/180;i(i.S,"Math",{radians:function(e){return e*n}})},{"./_export":34}],285:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{scale:e("./_math-scale")})},{"./_export":34,"./_math-scale":64}],286:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},{"./_export":34}],287:[function(e,t,o){var i=e("./_export");i(i.S,"Math",{umulh:function(e,t){var o=+e,i=+t,n=65535&o,a=65535&i,r=o>>>16,s=i>>>16,l=(r*a>>>0)+(n*a>>>16);return r*s+(l>>>16)+((n*s>>>0)+(65535&l)>>>16)}})},{"./_export":34}],288:[function(e,t,o){var i=e("./_export"),n=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&i(i.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){r.f(n(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":4,"./_descriptors":30,"./_export":34,"./_object-dp":72,"./_object-forced-pam":74,"./_to-object":117}],289:[function(e,t,o){var i=e("./_export"),n=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&i(i.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){r.f(n(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":4,"./_descriptors":30,"./_export":34,"./_object-dp":72,"./_object-forced-pam":74,"./_to-object":117}],290:[function(e,t,o){var i=e("./_export"),n=e("./_object-to-array")(!0);i(i.S,"Object",{entries:function(e){return n(e)}})},{"./_export":34,"./_object-to-array":84}],291:[function(e,t,o){var i=e("./_export"),l=e("./_own-keys"),d=e("./_to-iobject"),c=e("./_object-gopd"),u=e("./_create-property");i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,o,i=d(e),n=c.f,a=l(i),r={},s=0;a.length>s;)void 0!==(o=n(i,t=a[s++]))&&u(r,t,o);return r}})},{"./_create-property":25,"./_export":34,"./_object-gopd":75,"./_own-keys":85,"./_to-iobject":115}],292:[function(e,t,o){var i=e("./_export"),n=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&i(i.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,o=n(this),i=a(e,!0);do{if(t=s(o,i))return t.get}while(o=r(o))}})},{"./_descriptors":30,"./_export":34,"./_object-forced-pam":74,"./_object-gopd":75,"./_object-gpo":79,"./_to-object":117,"./_to-primitive":118}],293:[function(e,t,o){var i=e("./_export"),n=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&i(i.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,o=n(this),i=a(e,!0);do{if(t=s(o,i))return t.set}while(o=r(o))}})},{"./_descriptors":30,"./_export":34,"./_object-forced-pam":74,"./_object-gopd":75,"./_object-gpo":79,"./_to-object":117,"./_to-primitive":118}],294:[function(e,t,o){var i=e("./_export"),n=e("./_object-to-array")(!1);i(i.S,"Object",{values:function(e){return n(e)}})},{"./_export":34,"./_object-to-array":84}],295:[function(e,t,o){var i=e("./_export"),a=e("./_global"),r=e("./_core"),n=e("./_microtask")(),s=e("./_wks")("observable"),l=e("./_a-function"),d=e("./_an-object"),c=e("./_an-instance"),u=e("./_redefine-all"),h=e("./_hide"),m=e("./_for-of"),f=m.RETURN,p=function(e){return null==e?void 0:l(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return void 0===e._o},y=function(e){v(e)||(e._o=void 0,g(e))},b=function(t,e){d(t),this._c=void 0,this._o=t,t=new _(this);try{var o=e(t),i=o;null!=o&&("function"==typeof o.unsubscribe?o=function(){i.unsubscribe()}:l(o),this._c=o)}catch(e){return void t.error(e)}v(this)&&g(this)};b.prototype=u({},{unsubscribe:function(){y(this)}});var _=function(e){this._s=e};_.prototype=u({},{next:function(e){var t=this._s;if(!v(t)){var o=t._o;try{var i=p(o.next);if(i)return i.call(o,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(v(t))throw e;var o=t._o;t._o=void 0;try{var i=p(o.error);if(!i)throw e;e=i.call(o,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!v(t)){var o=t._o;t._o=void 0;try{var i=p(o.complete);e=i?i.call(o,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var w=function(e){c(this,w,"Observable","_f")._f=l(e)};u(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(i){var n=this;return new(r.Promise||a.Promise)(function(e,t){l(i);var o=n.subscribe({next:function(e){try{return i(e)}catch(e){t(e),o.unsubscribe()}},error:t,complete:e})})}}),u(w,{from:function(e){var t="function"==typeof this?this:w,o=p(d(e)[s]);if(o){var i=d(o.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var o=!1;return n(function(){if(!o){try{if(m(e,!1,function(e){if(t.next(e),o)return f})===f)return}catch(e){if(o)throw e;return void t.error(e)}t.complete()}}),function(){o=!0}})},of:function(){for(var e=0,t=arguments.length,i=new Array(t);e<t;)i[e]=arguments[e++];return new("function"==typeof this?this:w)(function(t){var o=!1;return n(function(){if(!o){for(var e=0;e<i.length;++e)if(t.next(i[e]),o)return;t.complete()}}),function(){o=!0}})}}),h(w.prototype,s,function(){return this}),i(i.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":4,"./_an-instance":7,"./_an-object":8,"./_core":24,"./_export":34,"./_for-of":40,"./_global":41,"./_hide":43,"./_microtask":68,"./_redefine-all":91,"./_set-species":98,"./_wks":127}],296:[function(e,t,o){var i=e("./_export"),n=e("./_core"),a=e("./_global"),r=e("./_species-constructor"),s=e("./_promise-resolve");i(i.P+i.R,"Promise",{finally:function(t){var o=r(this,n.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return s(o,t()).then(function(){return e})}:t,e?function(e){return s(o,t()).then(function(){throw e})}:t)}})},{"./_core":24,"./_export":34,"./_global":41,"./_promise-resolve":89,"./_species-constructor":102}],297:[function(e,t,o){var i=e("./_export"),n=e("./_new-promise-capability"),a=e("./_perform");i(i.S,"Promise",{try:function(e){var t=n.f(this),o=a(e);return(o.e?t.reject:t.resolve)(o.v),t.promise}})},{"./_export":34,"./_new-promise-capability":69,"./_perform":88}],298:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=i.key,r=i.set;i.exp({defineMetadata:function(e,t,o,i){r(e,t,n(o),a(i))}})},{"./_an-object":8,"./_metadata":67}],299:[function(e,t,o){var i=e("./_metadata"),a=e("./_an-object"),r=i.key,s=i.map,l=i.store;i.exp({deleteMetadata:function(e,t){var o=arguments.length<3?void 0:r(arguments[2]),i=s(a(t),o,!1);if(void 0===i||!i.delete(e))return!1;if(i.size)return!0;var n=l.get(t);return n.delete(o),!!n.size||l.delete(t)}})},{"./_an-object":8,"./_metadata":67}],300:[function(e,t,o){var a=e("./es6.set"),r=e("./_array-from-iterable"),i=e("./_metadata"),n=e("./_an-object"),s=e("./_object-gpo"),l=i.keys,d=i.key,c=function(e,t){var o=l(e,t),i=s(e);if(null===i)return o;var n=c(i,t);return n.length?o.length?r(new a(o.concat(n))):n:o};i.exp({getMetadataKeys:function(e){return c(n(e),arguments.length<2?void 0:d(arguments[1]))}})},{"./_an-object":8,"./_array-from-iterable":11,"./_metadata":67,"./_object-gpo":79,"./es6.set":230}],301:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=e("./_object-gpo"),r=i.has,s=i.get,l=i.key,d=function(e,t,o){if(r(e,t,o))return s(e,t,o);var i=a(t);return null!==i?d(e,i,o):void 0};i.exp({getMetadata:function(e,t){return d(e,n(t),arguments.length<3?void 0:l(arguments[2]))}})},{"./_an-object":8,"./_metadata":67,"./_object-gpo":79}],302:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=i.keys,r=i.key;i.exp({getOwnMetadataKeys:function(e){return a(n(e),arguments.length<2?void 0:r(arguments[1]))}})},{"./_an-object":8,"./_metadata":67}],303:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=i.get,r=i.key;i.exp({getOwnMetadata:function(e,t){return a(e,n(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":8,"./_metadata":67}],304:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=e("./_object-gpo"),r=i.has,s=i.key,l=function(e,t,o){if(r(e,t,o))return!0;var i=a(t);return null!==i&&l(e,i,o)};i.exp({hasMetadata:function(e,t){return l(e,n(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":8,"./_metadata":67,"./_object-gpo":79}],305:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=i.has,r=i.key;i.exp({hasOwnMetadata:function(e,t){return a(e,n(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":8,"./_metadata":67}],306:[function(e,t,o){var i=e("./_metadata"),n=e("./_an-object"),a=e("./_a-function"),r=i.key,s=i.set;i.exp({metadata:function(o,i){return function(e,t){s(o,i,(void 0!==t?n:a)(e),r(t))}}})},{"./_a-function":4,"./_an-object":8,"./_metadata":67}],307:[function(e,t,o){e("./_set-collection-from")("Set")},{"./_set-collection-from":95}],308:[function(e,t,o){e("./_set-collection-of")("Set")},{"./_set-collection-of":96}],309:[function(e,t,o){var i=e("./_export");i(i.P+i.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":21,"./_export":34}],310:[function(e,t,o){var i=e("./_export"),n=e("./_string-at")(!0);i(i.P,"String",{at:function(e){return n(this,e)}})},{"./_export":34,"./_string-at":104}],311:[function(e,t,o){var i=e("./_export"),n=e("./_defined"),a=e("./_to-length"),r=e("./_is-regexp"),s=e("./_flags"),l=RegExp.prototype,d=function(e,t){this._r=e,this._s=t};e("./_iter-create")(d,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(n(this),!r(e))throw TypeError(e+" is not a regexp!");var t=String(this),o="flags"in l?String(e.flags):s.call(e),i=new RegExp(e.source,~o.indexOf("g")?o:"g"+o);return i.lastIndex=a(e.lastIndex),new d(i,t)}})},{"./_defined":29,"./_export":34,"./_flags":38,"./_is-regexp":53,"./_iter-create":55,"./_to-length":116}],312:[function(e,t,o){var i=e("./_export"),n=e("./_string-pad"),a=e("./_user-agent");i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},{"./_export":34,"./_string-pad":107,"./_user-agent":123}],313:[function(e,t,o){var i=e("./_export"),n=e("./_string-pad"),a=e("./_user-agent");i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},{"./_export":34,"./_string-pad":107,"./_user-agent":123}],314:[function(e,t,o){e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":109}],315:[function(e,t,o){e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":109}],316:[function(e,t,o){e("./_wks-define")("asyncIterator")},{"./_wks-define":125}],317:[function(e,t,o){e("./_wks-define")("observable")},{"./_wks-define":125}],318:[function(e,t,o){var i=e("./_export");i(i.S,"System",{global:e("./_global")})},{"./_export":34,"./_global":41}],319:[function(e,t,o){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":95}],320:[function(e,t,o){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":96}],321:[function(e,t,o){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":95}],322:[function(e,t,o){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":96}],323:[function(e,t,o){for(var i=e("./es6.array.iterator"),n=e("./_object-keys"),a=e("./_redefine"),r=e("./_global"),s=e("./_hide"),l=e("./_iterators"),d=e("./_wks"),c=d("iterator"),u=d("toStringTag"),h=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(m),p=0;p<f.length;p++){var g,v=f[p],y=m[v],b=r[v],_=b&&b.prototype;if(_&&(_[c]||s(_,c,h),_[u]||s(_,u,v),l[v]=h,y))for(g in i)_[g]||a(_,g,i[g],!0)}},{"./_global":41,"./_hide":43,"./_iterators":59,"./_object-keys":81,"./_redefine":92,"./_wks":127,"./es6.array.iterator":140}],324:[function(e,t,o){var i=e("./_export"),n=e("./_task");i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},{"./_export":34,"./_task":111}],325:[function(e,t,o){var i=e("./_global"),n=e("./_export"),a=e("./_user-agent"),r=[].slice,s=/MSIE .\./.test(a),l=function(n){return function(e,t){var o=2<arguments.length,i=!!o&&r.call(arguments,2);return n(o?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,t)}};n(n.G+n.B+n.F*s,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},{"./_export":34,"./_global":41,"./_user-agent":123}],326:[function(e,t,o){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.array.flat-map"),e("./modules/es7.array.flatten"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.map.of"),e("./modules/es7.set.of"),e("./modules/es7.weak-map.of"),e("./modules/es7.weak-set.of"),e("./modules/es7.map.from"),e("./modules/es7.set.from"),e("./modules/es7.weak-map.from"),e("./modules/es7.weak-set.from"),e("./modules/es7.global"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.clamp"),e("./modules/es7.math.deg-per-rad"),e("./modules/es7.math.degrees"),e("./modules/es7.math.fscale"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.rad-per-deg"),e("./modules/es7.math.radians"),e("./modules/es7.math.scale"),e("./modules/es7.math.umulh"),e("./modules/es7.math.signbit"),e("./modules/es7.promise.finally"),e("./modules/es7.promise.try"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":24,"./modules/es6.array.copy-within":130,"./modules/es6.array.every":131,"./modules/es6.array.fill":132,"./modules/es6.array.filter":133,"./modules/es6.array.find":135,"./modules/es6.array.find-index":134,"./modules/es6.array.for-each":136,"./modules/es6.array.from":137,"./modules/es6.array.index-of":138,"./modules/es6.array.is-array":139,"./modules/es6.array.iterator":140,"./modules/es6.array.join":141,"./modules/es6.array.last-index-of":142,"./modules/es6.array.map":143,"./modules/es6.array.of":144,"./modules/es6.array.reduce":146,"./modules/es6.array.reduce-right":145,"./modules/es6.array.slice":147,"./modules/es6.array.some":148,"./modules/es6.array.sort":149,"./modules/es6.array.species":150,"./modules/es6.date.now":151,"./modules/es6.date.to-iso-string":152,"./modules/es6.date.to-json":153,"./modules/es6.date.to-primitive":154,"./modules/es6.date.to-string":155,"./modules/es6.function.bind":156,"./modules/es6.function.has-instance":157,"./modules/es6.function.name":158,"./modules/es6.map":159,"./modules/es6.math.acosh":160,"./modules/es6.math.asinh":161,"./modules/es6.math.atanh":162,"./modules/es6.math.cbrt":163,"./modules/es6.math.clz32":164,"./modules/es6.math.cosh":165,"./modules/es6.math.expm1":166,"./modules/es6.math.fround":167,"./modules/es6.math.hypot":168,"./modules/es6.math.imul":169,"./modules/es6.math.log10":170,"./modules/es6.math.log1p":171,"./modules/es6.math.log2":172,"./modules/es6.math.sign":173,"./modules/es6.math.sinh":174,"./modules/es6.math.tanh":175,"./modules/es6.math.trunc":176,"./modules/es6.number.constructor":177,"./modules/es6.number.epsilon":178,"./modules/es6.number.is-finite":179,"./modules/es6.number.is-integer":180,"./modules/es6.number.is-nan":181,"./modules/es6.number.is-safe-integer":182,"./modules/es6.number.max-safe-integer":183,"./modules/es6.number.min-safe-integer":184,"./modules/es6.number.parse-float":185,"./modules/es6.number.parse-int":186,"./modules/es6.number.to-fixed":187,"./modules/es6.number.to-precision":188,"./modules/es6.object.assign":189,"./modules/es6.object.create":190,"./modules/es6.object.define-properties":191,"./modules/es6.object.define-property":192,"./modules/es6.object.freeze":193,"./modules/es6.object.get-own-property-descriptor":194,"./modules/es6.object.get-own-property-names":195,"./modules/es6.object.get-prototype-of":196,"./modules/es6.object.is":200,"./modules/es6.object.is-extensible":197,"./modules/es6.object.is-frozen":198,"./modules/es6.object.is-sealed":199,"./modules/es6.object.keys":201,"./modules/es6.object.prevent-extensions":202,"./modules/es6.object.seal":203,"./modules/es6.object.set-prototype-of":204,"./modules/es6.object.to-string":205,"./modules/es6.parse-float":206,"./modules/es6.parse-int":207,"./modules/es6.promise":208,"./modules/es6.reflect.apply":209,"./modules/es6.reflect.construct":210,"./modules/es6.reflect.define-property":211,"./modules/es6.reflect.delete-property":212,"./modules/es6.reflect.enumerate":213,"./modules/es6.reflect.get":216,"./modules/es6.reflect.get-own-property-descriptor":214,"./modules/es6.reflect.get-prototype-of":215,"./modules/es6.reflect.has":217,"./modules/es6.reflect.is-extensible":218,"./modules/es6.reflect.own-keys":219,"./modules/es6.reflect.prevent-extensions":220,"./modules/es6.reflect.set":222,"./modules/es6.reflect.set-prototype-of":221,"./modules/es6.regexp.constructor":223,"./modules/es6.regexp.flags":224,"./modules/es6.regexp.match":225,"./modules/es6.regexp.replace":226,"./modules/es6.regexp.search":227,"./modules/es6.regexp.split":228,"./modules/es6.regexp.to-string":229,"./modules/es6.set":230,"./modules/es6.string.anchor":231,"./modules/es6.string.big":232,"./modules/es6.string.blink":233,"./modules/es6.string.bold":234,"./modules/es6.string.code-point-at":235,"./modules/es6.string.ends-with":236,"./modules/es6.string.fixed":237,"./modules/es6.string.fontcolor":238,"./modules/es6.string.fontsize":239,"./modules/es6.string.from-code-point":240,"./modules/es6.string.includes":241,"./modules/es6.string.italics":242,"./modules/es6.string.iterator":243,"./modules/es6.string.link":244,"./modules/es6.string.raw":245,"./modules/es6.string.repeat":246,"./modules/es6.string.small":247,"./modules/es6.string.starts-with":248,"./modules/es6.string.strike":249,"./modules/es6.string.sub":250,"./modules/es6.string.sup":251,"./modules/es6.string.trim":252,"./modules/es6.symbol":253,"./modules/es6.typed.array-buffer":254,"./modules/es6.typed.data-view":255,"./modules/es6.typed.float32-array":256,"./modules/es6.typed.float64-array":257,"./modules/es6.typed.int16-array":258,"./modules/es6.typed.int32-array":259,"./modules/es6.typed.int8-array":260,"./modules/es6.typed.uint16-array":261,"./modules/es6.typed.uint32-array":262,"./modules/es6.typed.uint8-array":263,"./modules/es6.typed.uint8-clamped-array":264,"./modules/es6.weak-map":265,"./modules/es6.weak-set":266,"./modules/es7.array.flat-map":267,"./modules/es7.array.flatten":268,"./modules/es7.array.includes":269,"./modules/es7.asap":270,"./modules/es7.error.is-error":271,"./modules/es7.global":272,"./modules/es7.map.from":273,"./modules/es7.map.of":274,"./modules/es7.map.to-json":275,"./modules/es7.math.clamp":276,"./modules/es7.math.deg-per-rad":277,"./modules/es7.math.degrees":278,"./modules/es7.math.fscale":279,"./modules/es7.math.iaddh":280,"./modules/es7.math.imulh":281,"./modules/es7.math.isubh":282,"./modules/es7.math.rad-per-deg":283,"./modules/es7.math.radians":284,"./modules/es7.math.scale":285,"./modules/es7.math.signbit":286,"./modules/es7.math.umulh":287,"./modules/es7.object.define-getter":288,"./modules/es7.object.define-setter":289,"./modules/es7.object.entries":290,"./modules/es7.object.get-own-property-descriptors":291,"./modules/es7.object.lookup-getter":292,"./modules/es7.object.lookup-setter":293,"./modules/es7.object.values":294,"./modules/es7.observable":295,"./modules/es7.promise.finally":296,"./modules/es7.promise.try":297,"./modules/es7.reflect.define-metadata":298,"./modules/es7.reflect.delete-metadata":299,"./modules/es7.reflect.get-metadata":301,"./modules/es7.reflect.get-metadata-keys":300,"./modules/es7.reflect.get-own-metadata":303,"./modules/es7.reflect.get-own-metadata-keys":302,"./modules/es7.reflect.has-metadata":304,"./modules/es7.reflect.has-own-metadata":305,"./modules/es7.reflect.metadata":306,"./modules/es7.set.from":307,"./modules/es7.set.of":308,"./modules/es7.set.to-json":309,"./modules/es7.string.at":310,"./modules/es7.string.match-all":311,"./modules/es7.string.pad-end":312,"./modules/es7.string.pad-start":313,"./modules/es7.string.trim-left":314,"./modules/es7.string.trim-right":315,"./modules/es7.symbol.async-iterator":316,"./modules/es7.symbol.observable":317,"./modules/es7.system.global":318,"./modules/es7.weak-map.from":319,"./modules/es7.weak-map.of":320,"./modules/es7.weak-set.from":321,"./modules/es7.weak-set.of":322,"./modules/web.dom.iterable":323,"./modules/web.immediate":324,"./modules/web.timers":325}],327:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TKWhiteBoardManager=void 0;var j=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),V=i(e("./utils/Global")),a=i(e("./utils/Constant")),O=i(e("./utils/Utils")),B=i(e("./utils/Configuration")),x=i(e("./intermediateLayer/WhiteboardIntermediateLayer")),c=i(e("./view/containers/WhiteboardView"));i(e("./view/containers/AudioPlayer")),i(e("./view/containers/VideoPlayer")),i(e("./view/containers/DocumentToolbar")),i(e("./view/containers/WhiteboardToolbar")),i(e("./view/containers/DocumentRemark"));function i(e){return e&&e.__esModule?e:{default:e}}function F(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var h=function(){function i(e,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.className="TKWhiteBoardManagerInner",this.isInner=o,this.room=e,this.sdkReceiveActionCommand=t,this.whiteboardViewMap=new Map,this.awitWhiteboardConfigrationMap=new Map,this.randomCreateExtendWhiteboardNumber=0,this.audioPlayerView=void 0,this.videoPlayerView=void 0,this.documentRemarkViewList={},this.documentToolbarViewList={},this.whiteboardToolbarViewList={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.pureWhiteboardFileinfoList={},this.saveMsglistData={},this.savePubmsgData={},this._registerEvent(),this._addRoomEvent()}return n(i,[{key:"getVersion",value:function(){return a.default.WHITEBOARD_SDK_VERSION}},{key:"createMainWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createMainWhiteboard method cannot be performed , element id is "+o+".")}var a="default";L.Logger.debug("[whiteboarrd-sdk]createMainWhiteboard  parentNode and configration and receiveActionCommand:",e,t,n),this._createWhiteboard(e,a,t,function(){var e,t;i.documentToolbarViewList[a]&&i.documentToolbarViewList[a].receiveActionCommand&&(e=i.documentToolbarViewList[a]).receiveActionCommand.apply(e,arguments);i.documentRemarkViewList[a]&&i.documentRemarkViewList[a].receiveActionCommand&&(t=i.documentRemarkViewList[a]).receiveActionCommand.apply(t,arguments);if("function"==typeof n)if(i.isInner)n.apply(void 0,arguments);else{var o=arguments.length<=0?void 0:arguments[0];"viewStateUpdate"!==o&&"mediaPlayerNotice"!==o||n.apply(void 0,arguments)}});var r=this.whiteboardViewMap.get(a);if(r&&r.getConfigration().isLoadDocumentToolBar){var s=r.getConfigration().documentToolBarConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentToolBar(s,r.getConfigration().documentToolBarConfig,a)}if(r&&r.getConfigration().isLoadDocumentRemark){var l=r.getConfigration().documentRemarkConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentRemark(l,r.getConfigration().documentRemarkConfig,a)}if(r&&r.getConfigration().isLoadAudioPlayer){var d=r.getConfigration().audioPlayerConfig.parentNode||r.getWhiteboardRootElement();this.createAudioPlayer(d,r.getConfigration().audioPlayerConfig)}if(r&&r.getConfigration().isLoadVideoPlayer){var c=r.getConfigration().videoPlayerConfig.parentNode||r.getWhiteboardRootElement();this.createVideoPlayer(c,r.getConfigration().videoPlayerConfig)}this._executeSaveMsglistData(a),this._executeSavePubmsgData(a)}},{key:"createExtendWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3];if(L.Logger.debug("[whiteboarrd-sdk]createExtendWhiteboard  parentNode  instanceId  configration and receiveActionCommand:",e,i,t,a),null!=i){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createExtendWhiteboard method cannot be performed , element id is "+o+".")}i||(this.randomCreateExtendWhiteboardNumber++,i="randomWhiteboard"+this.randomCreateExtendWhiteboardNumber),this._createWhiteboard(e,i,t,function(){var e,t;n.documentToolbarViewList[i]&&n.documentToolbarViewList[i].receiveActionCommand&&(e=n.documentToolbarViewList[i]).receiveActionCommand.apply(e,arguments);n.documentRemarkViewList[i]&&n.documentRemarkViewList[i].receiveActionCommand&&(t=n.documentRemarkViewList[i]).receiveActionCommand.apply(t,arguments);if("function"==typeof a)if(n.isInner)a.apply(void 0,arguments);else{var o=arguments.length<=0?void 0:arguments[0];"viewStateUpdate"!==o&&"mediaPlayerNotice"!==o||a.apply(void 0,arguments)}});var r=this.whiteboardViewMap.get(i);if(r&&r.getConfigration().isLoadDocumentToolBar&&r.getConfigration().hasExtendDocument){var s=r.getConfigration().documentToolBarConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentToolBar(s,r.getConfigration().documentToolBarConfig,i)}if(r&&r.getConfigration().isLoadDocumentRemark&&r.getConfigration().hasExtendDocument){var l=r.getConfigration().documentRemarkConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentRemark(l,r.getConfigration().documentRemarkConfig,i)}this._executeSaveMsglistData(i),this._executeSavePubmsgData(i)}}},{key:"destroyMainWhiteboard",value:function(){L.Logger.debug("[whiteboarrd-sdk]destroyMainWhiteboard");this._destroyWhiteboard("default")}},{key:"destroyExtendWhiteboard",value:function(e){L.Logger.debug("[whiteboarrd-sdk]destroyExtendWhiteboard  instanceId:",e),null!=e&&this._destroyWhiteboard(e)}},{key:"changeDocument",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if("mobile"!==TK.SDKTYPE)if(null!=e&&null!=e){if(this.room&&this.whiteboardViewMap.has(o)){var i=this.whiteboardViewMap.get(o),n=void 0;if(0==e)n=this.pureWhiteboardFileinfoList[o];else{var a=this.room.getFileList(),r=!0,s=!1,l=void 0;try{for(var d,c=a[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value;if(u.fileid==e){n=u;break}}}catch(e){s=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}}if(n)if(/(mp3|mp4|webm)/g.test(n.filetype)){var h=n.swfpath,m=h.lastIndexOf("."),f=h.substring(m),p=h.replace(f,"-1"+f),g=V.default.nowUseDocAddress+p,v=/(mp4|webm)/g.test(n.filetype),y=i.getConfigration().mediaShareToID,b={source:"mediaFileList",filename:n.filename,fileid:n.fileid,pauseWhenOver:v&&i.getConfigration().mediaSharePauseWhenOver};this.startShareMedia(g,v,y,b)}else{var _=Number(n.fileprop),w=1===_||2===_,S=3===_,k=!w&&!S;if(w||S||k){k&&t>n.pagenum&&(t=n.pagenum),t<1&&(t=1);var I={name:"default"===o?"ShowPage":"ExtendShowPage",id:"default"===o?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+o,toID:"__all",data:{sourceInstanceId:o,isGeneralFile:k,isMedia:!1,isDynamicPPT:w,isH5Document:S,action:"show",mediaType:"",filedata:{currpage:t,pptslide:w?t:1,pptstep:0,steptotal:0,fileid:n.fileid,pagenum:n.pagenum,filename:n.filename,filetype:n.filetype,isContentDocument:n.isContentDocument,swfpath:w||S?n.downloadpath:n.swfpath}},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},I)},o),i.getConfigration().synchronization&&i.getConfigration().isConnectedRoom&&this.pubMsg(I)}else L.Logger.info("[whiteboarrd-sdk]changeDocument:you open file type is not support , filetype is "+n.filetype+" , fileid is "+e+" , toPage is "+t+".")}else L.Logger.info("[whiteboarrd-sdk]changeDocument:you can't find the file by fileid , fileid is "+e+" , toPage is "+t+".")}}else L.Logger.error("changeDocument method parameter error: fileid can't be empty! ");else L.Logger.error("changeDocument method is not allowed in the mobile environment!")}},{key:"openRemoteDocument",value:function(e,t,o,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(!function(e,t,o,i){return n=e,1!=new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(n)?(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: url invalid"),"function"==typeof i&&i("url invalid"),!1):-1==["generalDocument","dynamicPPT","h5Document","mediaFile"].indexOf(t)?(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: type invalid"),"function"==typeof i&&i("type invalid"),!1):!!o||(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: id is empty"),"function"==typeof i&&i("id is empty"),!1);var n}(e,o,t,i)||!this.room)return!1;if(this.whiteboardViewMap.has("default")){var a=this.whiteboardViewMap.get("default"),r="unknown",s="unknown";try{var l=e.split(/(\/|\\)/g);if(l&&1<l.length){var d=l[l.length-1];if(d&&"string"==typeof d){var c=d.split(".");c&&2==c.length&&(r=c[0],s=c[1])}}}catch(e){L.Logger.error("[whiteboarrd-sdk]openRemoteDocument err:",e)}if("mediaFile"===o){var u=a.getConfigration().mediaShareToID,h="unknown"===s?/(.mp4|.webm)/g.test(e):/(mp4|webm)/g.test(s),m={source:"mediaFileList",filename:r,fileid:t,pauseWhenOver:h&&a.getConfigration().mediaSharePauseWhenOver};this.startShareMedia(e,h,u,m)}else{var f={name:"ShowPage",id:"DocumentFilePage_ShowPage",toID:"__all",data:{isGeneralFile:"generalDocument"==o,isMedia:!1,isDynamicPPT:"dynamicPPT"==o,isH5Document:"h5Document"==o,action:"show",mediaType:"",filedata:{currpage:void 0!==n.toPage&&"number"==typeof n.toPage?n.toPage:1,pptslide:void 0!==n.toPage&&"number"==typeof n.toPage?n.toPage:1,pptstep:0,steptotal:0,fileid:t,pagenum:1,filename:r,filetype:s,isContentDocument:1,swfpath:e}},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},f)}),a.getConfigration().synchronization&&a.getConfigration().isConnectedRoom&&this.pubMsg(f)}}}},{key:"changeWhiteBoardConfigration",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o={};for(var i in e)B.default.commonWhiteboard.hasOwnProperty(i)&&(o[i]=e[i],delete e[i]);if(Object.keys(o).length&&this.changeCommonWhiteBoardConfigration(o),Object.keys(e).length){if(L.Logger.debug("[whiteboarrd-sdk]changeWhiteBoardConfigration  configration and instanceId:",e,t),this.whiteboardViewMap.has(t)?(this.awitWhiteboardConfigrationMap.has(t)&&this.awitWhiteboardConfigrationMap.delete(t),this.whiteboardViewMap.get(t).changeWhiteBoardConfigration(e)):this.awitWhiteboardConfigrationMap.has(t)?Object.deepAssign(this.awitWhiteboardConfigrationMap.get(t),e):this.awitWhiteboardConfigrationMap.set(t,Object.deepAssign({},B.default.defaultWhiteboard,B.default.commonWhiteboard,e)),void 0!==e.isLoadDocumentToolBar&&"default"===t||e.hasExtendDocument){var n=this.whiteboardViewMap.get(t);if(e.isLoadDocumentToolBar&&!this.documentToolbarViewList[t]){if(n){var a=n.getConfigration().documentToolBarConfig.parentNode||n.getWhiteboardRootElement();this.createDocumentToolBar(a,n.getConfigration().documentToolBarConfig,t)}}else!e.isLoadDocumentToolBar&&this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].destroyView&&(this.documentToolbarViewList[t].destroyView(),this.documentToolbarViewList[t]=void 0)}if(void 0!==e.isLoadDocumentRemark&&"default"===t||e.hasExtendDocument){var r=this.whiteboardViewMap.get(t);if(e.isLoadDocumentRemark&&!this.documentRemarkViewList[t]){if(r){var s=r.getConfigration().documentRemarkConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentRemark(s,r.getConfigration().documentRemarkConfig,t)}}else!e.isLoadDocumentRemark&&this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].destroyView&&(this.documentRemarkViewList[t].destroyView(),this.documentRemarkViewList[t]=void 0)}if(void 0!==e.isLoadWhiteboardToolBar){var l=this.whiteboardViewMap.get(t);if(e.isLoadWhiteboardToolBar&&!this.whiteboardToolbarViewList[t]){if(l){var d=l.getConfigration().whiteboardToolBarConfig.parentNode||l.getWhiteboardRootElement();this.createWhiteboardToolBar(d,l.getConfigration().whiteboardToolBarConfig,t)}}else!e.isLoadWhiteboardToolBar&&this.whiteboardToolbarViewList[t]&&this.whiteboardToolbarViewList[t].destroyView&&(this.whiteboardToolbarViewList[t].destroyView(),this.whiteboardToolbarViewList[t]=void 0,delete this.whiteboardToolbarViewList[t])}if(void 0!==e.isLoadAudioPlayer&&"default"===t){var c=this.whiteboardViewMap.get(t);if(e.isLoadAudioPlayer&&!this.audioPlayerView){if(c){var u=c.getConfigration().audioPlayerConfig.parentNode||c.getWhiteboardRootElement();this.createAudioPlayer(u,c.getConfigration().audioPlayerConfig)}}else!e.isLoadAudioPlayer&&this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0)}if(void 0!==e.isLoadVideoPlayer&&"default"===t){var h=this.whiteboardViewMap.get(t);if(e.isLoadVideoPlayer&&!this.videoPlayerView){if(h){var m=h.getConfigration().videoPlayerConfig.parentNode||h.getWhiteboardRootElement();this.createVideoPlayer(m,h.getConfigration().videoPlayerConfig)}}else!e.isLoadVideoPlayer&&this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0)}if(void 0!==e.languageType&&(("default"===t||e.hasExtendDocument)&&(this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].setProps({languageType:e.languageType}),this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].setProps({languageType:e.languageType})),this.whiteboardToolbarViewList[t]&&this.whiteboardToolbarViewList[t].setProps({languageType:e.languageType})),void 0!==e.isMobile&&(("default"===t||e.hasExtendDocument)&&(this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].setProps({isMobile:e.isMobile}),this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].setProps({isMobile:e.isMobile})),this.whiteboardToolbarViewList[t]&&this.whiteboardToolbarViewList[t].setProps({isMobile:e.isMobile})),void 0!==e.canRemark&&("default"===t||e.hasExtendDocument)&&(this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].setProps({canRemark:e.canRemark}),this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].setProps({canRemark:e.canRemark})),void 0!==e.whiteboardToolBarConfig&&this.whiteboardToolbarViewList[t]){if(e.whiteboardToolBarConfig.hasOwnProperty("parentNode")&&"function"==typeof this.whiteboardToolbarViewList[t].changeParentNode){var f=this.whiteboardViewMap.get(t),p=e.whiteboardToolBarConfig.parentNode||(f?f.getWhiteboardRootElement():void 0);if("string"==typeof p){var g=p;if(!(p=document.getElementById(g)))return void L.Logger.warning("The node id cannot be found by node id, and  whiteboardToolBarConfig.parentNode cannot update config, element id is "+g+".")}this.whiteboardToolbarViewList[t].changeParentNode(p)}for(var v in e.whiteboardToolBarConfig){var y=e.whiteboardToolBarConfig[v];"object"===(void 0===y?"undefined":N(y))&&(e.whiteboardToolBarConfig[v]=Object.deepAssign({},this.whiteboardToolbarViewList[t].props[v],y))}this.whiteboardToolbarViewList[t].setProps(Object.deepAssign({},e.whiteboardToolBarConfig))}if(void 0!==e.documentToolBarConfig&&("default"===t||e.hasExtendDocument)&&this.documentToolbarViewList[t]){if(e.documentToolBarConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentToolbarViewList[t].changeParentNode){var b=this.whiteboardViewMap.get(t),_=e.documentToolBarConfig.parentNode||(b?b.getWhiteboardRootElement():void 0);if("string"==typeof _){var w=_;if(!(_=document.getElementById(w)))return void L.Logger.warning("The node id cannot be found by node id, and  documentToolBarConfig.parentNode cannot update config, element id is "+w+".")}this.documentToolbarViewList[t].changeParentNode(_)}for(var S in e.documentToolBarConfig){var k=e.documentToolBarConfig[S];"object"===(void 0===k?"undefined":N(k))&&(e.documentToolBarConfig[S]=Object.deepAssign({},this.documentToolbarViewList[t].props[S],k))}this.documentToolbarViewList[t].setProps(Object.deepAssign({},e.documentToolBarConfig))}if(void 0!==e.documentRemarkConfig&&("default"===t||e.hasExtendDocument)&&this.documentRemarkViewList[t]){if(e.documentRemarkConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentRemarkViewList[t].changeParentNode){var I=this.whiteboardViewMap.get(t),P=e.documentRemarkConfig.parentNode||(I?I.getWhiteboardRootElement():void 0);if("string"==typeof P){var C=P;if(!(P=document.getElementById(C)))return void L.Logger.warning("The node id cannot be found by node id, and  documentRemarkConfig.parentNode cannot update config, element id is "+C+".")}this.documentRemarkViewList[t].changeParentNode(P)}for(var x in e.documentRemarkConfig){var T=e.documentRemarkConfig[x];"object"===(void 0===T?"undefined":N(T))&&(e.documentRemarkConfig[x]=Object.deepAssign({},this.documentRemarkViewList[t].props[x],T))}this.documentRemarkViewList[t].setProps(Object.deepAssign({},e.documentRemarkConfig))}if(void 0!==e.audioPlayerConfig&&this.audioPlayerView){for(var E in e.audioPlayerConfig){var D=e.audioPlayerConfig[E];"object"===(void 0===D?"undefined":N(D))&&(e.audioPlayerConfig[E]=Object.deepAssign({},this.audioPlayerView.props[E],D))}this.audioPlayerView.setProps(Object.deepAssign({},e.audioPlayerConfig))}if(void 0!==e.videoPlayerConfig&&this.videoPlayerView){for(var W in e.videoPlayerConfig){var A=e.videoPlayerConfig[W];"object"===(void 0===A?"undefined":N(A))&&(e.videoPlayerConfig[W]=Object.deepAssign({},this.videoPlayerView.props[W],A))}this.videoPlayerView.setProps(Object.deepAssign({},e.videoPlayerConfig))}}}},{key:"noticeWhiteboardActionCommand",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";(L.Logger.debug("[whiteboarrd-sdk]noticeWhiteboardActionCommand "),this.whiteboardViewMap.has(o))&&this.whiteboardViewMap.get(o).noticeWhiteboardActionCommand(e,t)}},{key:"changeCommonWhiteBoardConfigration",value:function(e){L.Logger.debug("[whiteboarrd-sdk]changeCommonWhiteBoardConfigration common configration:",e);var t=Object.deepAssign({},e);"object"===N(t.docAddress)&&(V.default.docAddress=e.docAddress,""===V.default.docAddressKey&&(V.default.docAddressKey=e.docAddress.hostname),V.default.protocol=t.docAddress.protocol,V.default.port=t.docAddress.port,t.docAddress=e.docAddress.protocol+"://"+e.docAddress.hostname+":"+e.docAddress.port),"object"===N(t.webAddress)&&(t.webAddress=e.webAddress.protocol+"://"+e.webAddress.hostname+":"+e.webAddress.port),t.backupDocAddressList&&Array.isArray(t.backupDocAddressList)&&(V.default.backupDocAddressList=e.backupDocAddressList,B.default.commonWhiteboard.backupDocAddressList=[]),Object.deepAssign(B.default.commonWhiteboard,t);var o=!0,i=!1,n=void 0;try{for(var a,r=this.awitWhiteboardConfigrationMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;Object.deepAssign(s,t)}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}void 0===e.docAddress&&void 0===e.backupDocAddressList||(V.default.docAddressList=[V.default.docAddress].concat(F(V.default.backupDocAddressList),F(V.default.laterAddressList)),V.default.hasGetDocAddressIndexByLocalStorage?(V.default.localStorageDocAddressKey&&""===O.default.getItem(V.default.docAddressList,V.default.localStorageDocAddressKey)&&""===O.default.getItem(V.default.laterAddressList,V.default.localStorageDocAddressKey)&&(V.default.protocol&&V.default.port&&(V.default.laterAddressList=[{protocol:V.default.protocol,hostname:V.default.localStorageDocAddressKey,port:V.default.port}]),V.default.docAddressList=[V.default.docAddress].concat(F(V.default.backupDocAddressList),F(V.default.laterAddressList))),V.default.nowUseDocAddress=O.default.getItem(V.default.docAddressList,V.default.docAddressKey)||B.default.commonWhiteboard.docAddress):(V.default.nowUseDocAddress=O.default.getItem(V.default.docAddressList,V.default.docAddressKey)||B.default.commonWhiteboard.docAddress,this.getLocalStorageItem("tkDocAddressKey",function(e){V.default.hasGetDocAddressIndexByLocalStorage=(V.default.nowUseDocAddress=(e&&void 0!==e&&"string"==typeof e&&"undefined"!==e&&(V.default.docAddressKey=e,V.default.localStorageDocAddressKey=e),V.default.localStorageDocAddressKey&&""===O.default.getItem(V.default.docAddressList,V.default.localStorageDocAddressKey)&&""===O.default.getItem(V.default.laterAddressList,V.default.localStorageDocAddressKey)&&(V.default.protocol&&V.default.port&&(V.default.laterAddressList=[{protocol:V.default.protocol,hostname:V.default.localStorageDocAddressKey,port:V.default.port}]),V.default.docAddressList=[V.default.docAddress].concat(F(V.default.backupDocAddressList),F(V.default.laterAddressList))),O.default.getItem(V.default.docAddressList,V.default.docAddressKey)||B.default.commonWhiteboard.docAddress),!0)})));var l=!0,d=!1,c=void 0;try{for(var u,h=this.whiteboardViewMap[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value,f=j(m,2),p=f[0],g=f[1];this.awitWhiteboardConfigrationMap.has(p)&&this.awitWhiteboardConfigrationMap.delete(p),g.changeWhiteBoardConfigration(t)}}catch(e){d=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw c}}var v=!0,y=!1,b=void 0;try{for(var _,w=Object.values(this.whiteboardToolbarViewList)[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var S=_.value;S&&S.setProps(Object.deepAssign({},t))}}catch(e){y=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(y)throw b}}var k=!0,I=!1,P=void 0;try{for(var C,x=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(k=(C=x.next()).done);k=!0){var T=C.value;T&&T.setProps(Object.deepAssign({},t))}}catch(e){I=!0,P=e}finally{try{!k&&x.return&&x.return()}finally{if(I)throw P}}var E=!0,D=!1,W=void 0;try{for(var A,M=Object.values(this.documentRemarkViewList)[Symbol.iterator]();!(E=(A=M.next()).done);E=!0){var R=A.value;R&&R.setProps(Object.deepAssign({},t))}}catch(e){D=!0,W=e}finally{try{!E&&M.return&&M.return()}finally{if(D)throw W}}this.audioPlayerView&&this.audioPlayerView.setProps(Object.deepAssign({},t)),this.videoPlayerView&&this.videoPlayerView.setProps(Object.deepAssign({},t))}},{key:"useWhiteboardTool",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]useWhiteboardTool toolKey and instanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).useWhiteboardTool(e)}},{key:"addPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]addPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).addPage()}},{key:"nextPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]nextPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).nextPage()}},{key:"prevPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]prevPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).prevPage()}},{key:"skipPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]skipPage  page :",e),"number"==typeof e?this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).skipPage(e):L.Logger.warning("skipPage page must is number!")}},{key:"nextStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]nextStep "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).nextStep()}},{key:"prevStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]prevStep "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).prevStep()}},{key:"enlargeWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]enlargeWhiteboard  instanceId:",e);this.executeZoomWhiteaord("zoom_big",e)}},{key:"narrowWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]narrowWhiteboard  instanceId:",e);this.executeZoomWhiteaord("zoom_small",e)}},{key:"clear",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]clear  instanceId:",e);this.executeWhiteboardAction("action_clear",e)}},{key:"undo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]undo  instanceId:",e);this.executeWhiteboardAction("action_undo",e)}},{key:"redo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]redo  instanceId:",e);this.executeWhiteboardAction("action_redo",e)}},{key:"fullScreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";if(L.Logger.debug("[whiteboarrd-sdk]fullScreen "),this.whiteboardViewMap.has(e)&&this.room){var t=this.whiteboardViewMap.get(e);if(t.getConfigration().isMobile)this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!0);else{O.default.isFullScreenStatus()&&O.default.exitFullscreen();var o=t.getWhiteboardRootElement(),i=t.getConfigration().documentToolBarConfig.fullScreenElementId;i&&("string"==typeof i?document.getElementById(i)&&(o=document.getElementById(i)):o=i),O.default.launchFullscreen(o)}}}},{key:"exitFullScreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";(L.Logger.debug("[whiteboarrd-sdk]exitFullScreen "),this.whiteboardViewMap.has(e)&&this.room)&&(this.whiteboardViewMap.get(e).getConfigration().isMobile?this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!1):O.default.exitFullscreen())}},{key:"updateWhiteboardSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]updateWhiteboardSize  instanceId:",e);var t={};if(this.whiteboardViewMap.has(e)){var o=this.whiteboardViewMap.get(e);o.resizeWhiteboardHandler(),t=o.getConfigration()}("default"===e||t.hasExtendDocument)&&this.documentRemarkViewList[e]&&O.default.isFunction(this.documentRemarkViewList[e].resize)&&this.documentRemarkViewList[e].resize(),("default"===e||t.hasExtendDocument)&&this.documentToolbarViewList[e]&&O.default.isFunction(this.documentToolbarViewList[e].resize)&&this.documentToolbarViewList[e].resize(),this.whiteboardToolbarViewList[e]&&O.default.isFunction(this.whiteboardToolbarViewList[e].resize)&&this.whiteboardToolbarViewList[e].resize()}},{key:"updateAllWhiteboardSize",value:function(){L.Logger.debug("[whiteboarrd-sdk]updateAllWhiteboardSize ");var e=!0,t=!1,o=void 0;try{for(var i,n=this.whiteboardViewMap.keys()[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;this.updateWhiteboardSize(a)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}}},{key:"resetWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]resetWhiteboardData  instanceId:",e),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).resetWhiteboardData()}},{key:"resetAllWhiteboardData",value:function(){L.Logger.debug("[whiteboarrd-sdk]resetAllWhiteboardData ");var e=!0,t=!1,o=void 0;try{for(var i,n=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){i.value.resetWhiteboardData()}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}}},{key:"resetPureWhiteboardTotalPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]resetPureWhiteboardTotalPage ");var t=this.pureWhiteboardFileinfoList[e]?this.pureWhiteboardFileinfoList[e].pagenum:1;this.pureWhiteboardFileinfoList[e]&&(this.pureWhiteboardFileinfoList[e].pagenum=1);var o=this.whiteboardViewMap.get(e);o&&O.default.isFunction(o.resetPureWhiteboardTotalPage)&&o.resetPureWhiteboardTotalPage(t)}},{key:"changeDynamicPptVolume",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if(L.Logger.debug("[whiteboarrd-sdk]changeDynamicPptVolume volume:",e),"number"==typeof e&&this.whiteboardViewMap.has(t)){var o=this.whiteboardViewMap.get(t);e<0?e=0:100<e&&(e=100);var i={name:"default"===t?"PptVolumeControl":"ExtendPptVolumeControl",id:"default"===t?"PptVolumeControl":"PptVolumeControl_"+t,toID:"__allExceptSender",data:{sourceInstanceId:t,volume:e/100},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:i}),o.getConfigration().pptVolumeSynchronization&&o.getConfigration().isConnectedRoom&&this.pubMsg(i)}}},{key:"openDocumentRemark",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";(L.Logger.debug("[whiteboarrd-sdk]openDocumentRemark "),this.whiteboardViewMap.has(e))&&this.whiteboardViewMap.get(e).changeDocumentRemarkState(!0)}},{key:"closeDocumentRemark",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";(L.Logger.debug("[whiteboarrd-sdk]closeDocumentRemark "),this.whiteboardViewMap.has(e))&&this.whiteboardViewMap.get(e).changeDocumentRemarkState(!1)}},{key:"executeWhiteboardAction",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]executeWhiteboardAction actionKey and\tinstanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).executeWhiteboardAction(e)}},{key:"executeZoomWhiteaord",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]executeZoomWhiteaord \tzoomKey and\tinstanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).executeZoomWhiteaord(e)}},{key:"receiveEventRoomPubmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomPubmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name))if("SharpsChange"===t.name)t.data&&t.data.nickname?t.remindContent=t.data.nickname:this.room&&O.default.isFunction(this.room.getUser)&&this.room.getUser(t.fromID)&&"object"===N(this.room.getUser(t.fromID))&&this.room.getUser(t.fromID).nickname&&(t.remindContent=this.room.getUser(t.fromID).nickname),x.default.handlerPubmsg_SharpsChange(t);else if("WBPageCount"===t.name)this.pureWhiteboardFileinfoList.default&&(this.pureWhiteboardFileinfoList.default.pagenum=t.data.totalPage);else if("ExtendWBPageCount"===t.name)t.data&&this.pureWhiteboardFileinfoList[t.data.sourceInstanceId]&&(this.pureWhiteboardFileinfoList[t.data.sourceInstanceId].pagenum=t.data.totalPage);else if("ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name||"ExtendShowPage"===t.name||"ExtendWhiteboardMarkTool"===t.name||"ExtendH5DocumentAction"===t.name||"ExtendPptVolumeControl"===t.name||"ExtendNewPptTriggerActionClick"===t.name)"ShowPage"!==t.name&&"ExtendShowPage"!==t.name||("string"==typeof t.data&&(t.data=O.default.toJsonParse(t.data)),t.data.isGeneralFile&&t.data.filedata&&0==t.data.filedata.fileid&&("ShowPage"===t.name&&this.pureWhiteboardFileinfoList.default?t.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===t.name&&this.pureWhiteboardFileinfoList[t.data.sourceInstanceId]&&(t.data.filedata.pagenum=this.pureWhiteboardFileinfoList[t.data.sourceInstanceId].pagenum))),"ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name?this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomPubmsg(e):this.savePubmsgData.default&&Array.isArray(this.savePubmsgData.default)?this.savePubmsgData.default.push(e):this.savePubmsgData.default=[e]:"ExtendShowPage"!==t.name&&"ExtendWhiteboardMarkTool"!==t.name&&"ExtendPptVolumeControl"!==t.name&&"ExtendH5DocumentAction"!==t.name&&"ExtendNewPptTriggerActionClick"!==t.name||t.data&&(this.whiteboardViewMap.has(t.data.sourceInstanceId)?this.whiteboardViewMap.get(t.data.sourceInstanceId).receiveEventRoomPubmsg(e):this.savePubmsgData[t.data.sourceInstanceId]&&Array.isArray(this.savePubmsgData[t.data.sourceInstanceId])?this.savePubmsgData[t.data.sourceInstanceId].push(e):this.savePubmsgData[t.data.sourceInstanceId]=[e]);else{var o=!0,i=!1,n=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){a.value.receiveEventRoomPubmsg(e)}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}}},{key:"receiveEventRoomConnected",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomConnected \trecvEventData:",e),this.saveMsglistData={},this.savePubmsgData={},this.resetAllWhiteboardData(),this.resetPureWhiteboardTotalPage();var t=e.message;this.receiveEventRoomMsglist(JSON.stringify({type:"room-msglist",message:t}))}},{key:"receiveEventRoomDisconnected",value:function(){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDisconnected "),V.default.laterAddressList=[];var e=!(V.default.hasGetDocAddressIndexByLocalStorage=!1),t=!1,o=void 0;try{for(var i,n=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;a&&a.getConfigration()&&a.getConfigration().isDisconnectedClearWhiteboardData&&O.default.isFunction(a.resetWhiteboardData)&&a.resetWhiteboardData()}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}}},{key:"receiveEventRoomDelmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDelmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name))if("SharpsChange"===t.name)x.default.handlerDelmsg_SharpsChange(t);else{var o=!0,i=!1,n=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){a.value.receiveEventRoomDelmsg(e)}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}}},{key:"receiveEventRoomMsglist",value:function(e){var o=this;L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomMsglist \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t={},i=e.message;for(var n in i)this._isWhiteboardCorrelationSignalling(i[n].name)&&(i[n].data&&"string"==typeof i[n].data&&(i[n].data=JSON.parse(i[n].data)),(null===t[i[n].name]||void 0===t[i[n].name])&&(t[i[n].name]=[]),t[i[n].name].push(i[n]));var a=t.WBPageCount;null!=a&&0<a.length&&this.pureWhiteboardFileinfoList.default&&(this.pureWhiteboardFileinfoList.default.pagenum=a[a.length-1].data.totalPage),t.WBPageCount=null,delete t.WBPageCount;var r=t.ExtendWBPageCount;null!=r&&0<r.length&&r.forEach(function(e,t){e.data&&o.pureWhiteboardFileinfoList[e.data.sourceInstanceId]&&(o.pureWhiteboardFileinfoList[e.data.sourceInstanceId].pagenum=e.data.totalPage)}),t.ExtendWBPageCount=null,delete t.ExtendWBPageCount;var s=!0,l=!1,d=void 0;try{for(var c,u=["ShowPage","whiteboardMarkTool","NewPptTriggerActionClick","PptVolumeControl","H5DocumentAction","ExtendShowPage","ExtendWhiteboardMarkTool","ExtendPptVolumeControl","ExtendH5DocumentAction","ExtendNewPptTriggerActionClick"][Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value,m=t[h];if(("ShowPage"===h||"ExtendShowPage"===h)&&m&&m.length){var f=!0,p=!1,g=void 0;try{for(var v,y=m[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;"ShowPage"!==b.name&&"ExtendShowPage"!==b.name||("string"==typeof b.data&&(b.data=O.default.toJsonParse(b.data)),b.data.isGeneralFile&&b.data.filedata&&0==b.data.filedata.fileid&&("ShowPage"===b.name&&this.pureWhiteboardFileinfoList.default?b.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===b.name&&this.pureWhiteboardFileinfoList[b.data.sourceInstanceId]&&(b.data.filedata.pagenum=this.pureWhiteboardFileinfoList[b.data.sourceInstanceId].pagenum)))}}catch(e){p=!0,g=e}finally{try{!f&&y.return&&y.return()}finally{if(p)throw g}}}if(null!=m&&0<m.length)if("ShowPage"===h||"whiteboardMarkTool"===h||"NewPptTriggerActionClick"===h||"PptVolumeControl"===h||"H5DocumentAction"===h)this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomMsglist(h,m[m.length-1]):this.saveMsglistData.default&&Array.isArray(this.saveMsglistData.default)?this.saveMsglistData.default.push(m[m.length-1]):this.saveMsglistData.default=[m[m.length-1]];else if("ExtendShowPage"===h||"ExtendWhiteboardMarkTool"===h||"ExtendPptVolumeControl"===h||"ExtendH5DocumentAction"===h||"ExtendNewPptTriggerActionClick"===h){var _=!0,w=!1,S=void 0;try{for(var k,I=m[Symbol.iterator]();!(_=(k=I.next()).done);_=!0){var P=k.value;P.data&&(this.whiteboardViewMap.has(P.data.sourceInstanceId)?this.whiteboardViewMap.get(P.data.sourceInstanceId).receiveEventRoomMsglist(h,P):this.saveMsglistData[P.data.sourceInstanceId]&&Array.isArray(this.saveMsglistData[P.data.sourceInstanceId])?this.saveMsglistData[P.data.sourceInstanceId].push(P):this.saveMsglistData[P.data.sourceInstanceId]=[P])}}catch(e){w=!0,S=e}finally{try{!_&&I.return&&I.return()}finally{if(w)throw S}}}t[h]=null,delete t[h]}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var C=t.SharpsChange;null!=C&&0<C.length&&x.default.handlerMsglist_SharpsChange(C),t.SharpsChange=null,delete t.SharpsChange,t=null}},{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfilestateChanged recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfilestateChanged",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfileattributesUpdate recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfileattributesUpdate",e)}},{key:"receiveEventRoomErrorNotice",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomErrorNotice recvEventData:",e),this._forwardingStreamEvents("receiveEventRoomErrorNotice",e)}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomReceiveActionCommand \trecvEventData:",e);var t=e.message,o=t.action,i=t.cmd;switch(o){case"transmitWindowSize":this._windowResizeCallback()}var n=!0,a=!1,r=void 0;try{for(var s,l=this.whiteboardViewMap.values()[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){s.value.reveiveEventRoomReceiveActionCommand(o,i)}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"registerRoomDelegate",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]registerRoomDelegate \troom and  sdkReceiveActionCommand:",e,t),this.room=e,this.sdkReceiveActionCommand=t,this._addRoomEvent()}},{key:"getRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getRoomDelegate "),this.room}},{key:"hasRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]hasRoomDelegate "),!!this.room}},{key:"sendActionCommandToSdk",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]sendActionCommandToSdk \taction and\tcmd:",e,t),this.sdkReceiveActionCommand&&"function"==typeof this.sdkReceiveActionCommand&&(void 0!==t&&!N(t)||Array.isArray(t)||(t=JSON.parse(JSON.stringify(t))),this.sdkReceiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]pubMsg \tparams :",e),this.room&&this.room.pubMsg&&("string"==typeof e&&(e=JSON.parse(e)),"WBPageCount"===e.name&&this.pureWhiteboardFileinfoList.default&&(this.pureWhiteboardFileinfoList.default.pagenum=e.data.totalPage),"ExtendWBPageCount"===e.name&&this.pureWhiteboardFileinfoList[e.data.sourceInstanceId]&&(this.pureWhiteboardFileinfoList[e.data.sourceInstanceId].pagenum=e.data.totalPage),e.data&&"object"===N(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.pubMsg(e))}},{key:"delMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]delMsg params :",e),this.room&&this.room.delMsg&&(e.data&&"object"===N(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.delMsg(e))}},{key:"startShareMedia",value:function(e,t,o){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(L.Logger.debug("[whiteboarrd-sdk]startShareMedia url  isVideo  toID  and  attrs:",e,t,o,i),this.stopShareMedia(),this.stopShareLocalMedia(),this.room&&this.room.startShareMedia){var n=this.whiteboardViewMap.get("default");t&&n&&n.getConfigration()&&n.getConfigration().mediaSharePauseWhenOver&&(i.pauseWhenOver=n.getConfigration().mediaSharePauseWhenOver),n&&n.getConfigration()&&void 0!==n.getConfigration().myUserId&&!n.getConfigration().synchronization&&(o=n.getConfigration().myUserId),"mobile"!==TK.SDKTYPE?this.room.startShareMedia(e,t,function(e){L.Logger.warning("[whiteboard-sdk]startShareMedia fail , fail info:"+e)},{toID:o,attrs:i}):this.room.startShareMedia(e,t,o,i)}}},{key:"stopShareMedia",value:function(){L.Logger.debug("[whiteboarrd-sdk]stopShareMedia "),this.room&&this.room.stopShareMedia&&this.room.stopShareMedia()}},{key:"stopShareLocalMedia",value:function(){"mobile"!==TK.SDKTYPE&&this.room&&this.room.stopShareLocalMedia&&(L.Logger.debug("[whiteboarrd-sdk]stopShareLocalMedia "),this.room.stopShareLocalMedia())}},{key:"createAudioPlayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(L.Logger.debug("[whiteboarrd-sdk]createAudioPlayer parentNode and config :",e,t),window.TalkAudioPlayer){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createAudioPlayer method cannot be performed , element id is "+o+".")}var i=this.whiteboardViewMap.get("default"),n=e||(i?i.getWhiteboardRootElement():document.body);this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0),this.audioPlayerView=new window.TalkAudioPlayer(n,"default",this,Object.deepAssign({},t,{languageType:i?i.getConfigration().languageType:"ch",isMobile:!!i&&i.getConfigration().isMobile},B.default.commonWhiteboard),i?i.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createAudioPlayer methods.")}},{key:"createVideoPlayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(L.Logger.debug("[whiteboarrd-sdk]createVideoPlayer parentNode and config :",e,t),window.TalkVideoPlayer){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createVideoPlayer method cannot be performed , element id is "+o+".")}var i=this.whiteboardViewMap.get("default"),n=e||(i?i.getWhiteboardRootElement():document.body);this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0),this.videoPlayerView=new window.TalkVideoPlayer(n,"default",this,Object.deepAssign({},t,{languageType:i?i.getConfigration().languageType:"ch",isMobile:!!i&&i.getConfigration().isMobile},B.default.commonWhiteboard),i?i.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createVideoPlayer methods.")}},{key:"createDocumentRemark",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];if(L.Logger.debug("[whiteboarrd-sdk]createDocumentRemark parentNode and config :",e,t),window.TalkDocumentRemark){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentRemark method cannot be performed , element id is "+i+".")}var n=this.whiteboardViewMap.get(o),a=e||(n?n.getWhiteboardRootElement():document.body);if(this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].destroyView&&(this.documentRemarkViewList[o].destroyView(),delete this.documentRemarkViewList[o]),this.documentRemarkViewList[o]=new window.TalkDocumentRemark(a,o,this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile,canRemark:!!n&&n.getConfigration().canRemark},B.default.commonWhiteboard),n?n.getConfigration():void 0),n){var r=this.getWhiteboardViewState(o);if(this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].receiveActionCommand&&r&&Object.keys(r.page).length&&Object.keys(r.zoom).length){var s={viewState:r,updateViewState:{}};this.documentRemarkViewList[o].receiveActionCommand("viewStateUpdate",s)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentRemark methods.")}},{key:"createDocumentToolBar",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if(L.Logger.debug("[whiteboarrd-sdk]createDocumentToolBar parentNode and config :",e,t),window.TalkDocumentToolbar){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentToolBar method cannot be performed , element id is "+i+".")}var n=this.whiteboardViewMap.get(o),a=e||(n?n.getWhiteboardRootElement():document.body);if(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].destroyView&&(this.documentToolbarViewList[o].destroyView(),delete this.documentToolbarViewList[o]),this.documentToolbarViewList[o]=new window.TalkDocumentToolbar(a,o,this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile,canRemark:!!n&&n.getConfigration().canRemark},B.default.commonWhiteboard),n?n.getConfigration():void 0),n){var r=this.getWhiteboardViewState(o);if(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].receiveActionCommand&&r&&Object.keys(r.page).length&&Object.keys(r.zoom).length){var s={viewState:r,updateViewState:{}};this.documentToolbarViewList[o].receiveActionCommand("viewStateUpdate",s)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentToolBar methods.")}},{key:"createWhiteboardToolBar",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if(L.Logger.debug("[whiteboarrd-sdk]createWhiteboardToolBar parentNode  config  and instanceId :",e,t,o),window.TalkWhiteboardToolbar){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))return void L.Logger.warning("The node id cannot be found by node id, and TalkWhiteboardToolbar method cannot be performed , element id is "+i+".")}var n=this.whiteboardViewMap.get(o),a=e||(n?n.getWhiteboardRootElement():document.body);if(this.whiteboardToolbarViewList[o]&&this.whiteboardToolbarViewList[o].destroyView&&(this.whiteboardToolbarViewList[o].destroyView(),delete this.whiteboardToolbarViewList[o]),this.whiteboardToolbarViewList[o]=new window.TalkWhiteboardToolbar(a,o,this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile},B.default.commonWhiteboard),n?n.getConfigration():void 0),n){var r=this.getWhiteboardViewState(o);if(this.whiteboardToolbarViewList[o]&&this.whiteboardToolbarViewList[o].receiveActionCommand&&r&&Object.keys(r.page).length&&Object.keys(r.zoom).length){var s={viewState:r,updateViewState:{}};this.whiteboardToolbarViewList[o].receiveActionCommand("viewStateUpdate",s)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with TalkWhiteboardToolbar methods.")}},{key:"getWhiteboardViewState",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]getWhiteboardViewState ");var t=this.whiteboardViewMap.get(e);return t?t.getWhiteboardViewState():void 0}},{key:"getWhiteboardIntermediateLayerInstance",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getWhiteboardIntermediateLayerInstance "),x.default}},{key:"switchDocAddress",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"default";if(L.Logger.debug("[whiteboarrd-sdk]call switchDocAddress method , docAddressKey is "+e),e&&"string"==typeof e){if(V.default.localStorageDocAddressKey=e,V.default.localStorageDocAddressKey&&""===O.default.getItem(V.default.docAddressList,V.default.localStorageDocAddressKey)&&""===O.default.getItem(V.default.laterAddressList,V.default.localStorageDocAddressKey)&&(V.default.protocol&&V.default.port&&(V.default.laterAddressList=[{protocol:V.default.protocol,hostname:V.default.localStorageDocAddressKey,port:V.default.port}]),V.default.docAddressList=[V.default.docAddress].concat(F(V.default.backupDocAddressList),F(V.default.laterAddressList))),V.default.docAddressKey!==e){var n=O.default.getItem(V.default.docAddressList,V.default.docAddressKey);V.default.docAddressKey=e,V.default.nowUseDocAddress=O.default.getItem(V.default.docAddressList,V.default.docAddressKey)||B.default.commonWhiteboard.docAddress,t&&this.setLocalStorageItem("tkDocAddressKey",V.default.docAddressKey);var a=this.whiteboardViewMap.get(i);a&&(a.reloadCurrentDocument(),a.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(F(V.default.docAddressList)),docAddressKey:V.default.docAddressKey,oldDocAddress:n,nowDocAddress:V.default.docAddressList[V.default.docAddressKey]||B.default.commonWhiteboard.docAddress}))}else if(o){var r=this.whiteboardViewMap.get(i);r&&r.reloadCurrentDocument()}}else if(o){var s=this.whiteboardViewMap.get(i);s&&s.reloadCurrentDocument()}}},{key:"setLocalStorageItem",value:function(e,t){"mobile"===TK.SDKTYPE?this.room&&O.default.isFunction(this.room.setLocalStorageItem)&&this.room.setLocalStorageItem(e,t):O.default.setLocalStorageItem(e,t)}},{key:"getLocalStorageItem",value:function(e,t){if(O.default.isFunction(t))if("mobile"===TK.SDKTYPE){if(this.room&&O.default.isFunction(this.room.getLocalStorageItem))try{this.room.getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("[whiteboard-sdk]getLocalStorageItem error:",e)}}else t(O.default.getLocalStorageItem("tkDocAddressKey"))}},{key:"_executeSaveMsglistData",value:function(o){var i=this;this.saveMsglistData[o]&&this.whiteboardViewMap.get(o)&&(this.saveMsglistData[o].forEach(function(e,t){i.whiteboardViewMap.get(o).receiveEventRoomMsglist(e.name,e)}),delete this.saveMsglistData[o])}},{key:"_executeSavePubmsgData",value:function(o){var i=this;this.savePubmsgData[o]&&this.whiteboardViewMap.get(o)&&(this.savePubmsgData[o].forEach(function(e,t){i.whiteboardViewMap.get(o).receiveEventRoomPubmsg(e)}),delete this.savePubmsgData[o])}},{key:"_createWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];if(L.Logger.debug("[whiteboarrd-sdk]_createWhiteboard  parentNode  instanceId  configration  and\treceiveActionCommand:",e,t,i,n),"string"==typeof e){var a=e;if(!(e=document.getElementById(a)))return void L.Logger.warning("The node id cannot be found by node id, and createWhiteboard method cannot be performed , element id is "+a+".")}this.pureWhiteboardFileinfoList[t]={fileid:0,companyid:"",filename:"whiteboard",uploaduserid:"",uploadusername:"",downloadpath:"",swfpath:"",filetype:"whiteboard",pagenum:1,dynamicppt:0,filecategory:0,fileprop:0};var r=void 0;this.awitWhiteboardConfigrationMap.has(t)?(r=this.awitWhiteboardConfigrationMap.get(t),this.awitWhiteboardConfigrationMap.delete(t)):r=Object.deepAssign({},B.default.defaultWhiteboard,B.default.commonWhiteboard);var s=Object.deepAssign({},r,i);this.whiteboardViewMap.has(t)&&this._destroyWhiteboard(t),this.whiteboardViewMap.set(t,new c.default(e,t,s,function(){var e;o.whiteboardToolbarViewList[t]&&o.whiteboardToolbarViewList[t].receiveActionCommand&&(e=o.whiteboardToolbarViewList[t]).receiveActionCommand.apply(e,arguments);"function"==typeof n&&n.apply(void 0,arguments)},this)),O.default.onElementResize(e,function(){o.updateWhiteboardSize(t)});var l=this.whiteboardViewMap.get(t);if(l&&l.getConfigration().isLoadWhiteboardToolBar){var d=l.getConfigration().whiteboardToolBarConfig.parentNode||l.getWhiteboardRootElement();this.createWhiteboardToolBar(d,l.getConfigration().whiteboardToolBarConfig,t)}}},{key:"_destroyWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]_destroyWhiteboard    instanceId  :",e),this.whiteboardViewMap.has(e)&&(this.whiteboardViewMap.get(e).destroyWhiteboardView(),this.whiteboardViewMap.delete(e)),this.awitWhiteboardConfigrationMap.has(e)&&this.awitWhiteboardConfigrationMap.delete(e)}},{key:"_isWhiteboardCorrelationSignalling",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_isWhiteboardCorrelationSignalling    name  :",e);var t=!1;switch(e){case"SharpsChange":case"ShowPage":case"ExtendShowPage":case"WBPageCount":case"ExtendWBPageCount":case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":case"PptVolumeControl":case"ExtendPptVolumeControl":case"H5DocumentAction":case"ExtendH5DocumentAction":case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t=!0}return t}},{key:"_windowResizeCallback",value:function(){var e=this;return L.Logger.debug("[whiteboarrd-sdk]_windowResizeCallback "),this.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1}},{key:"_windowMessageCallback",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_windowMessageCallback"),e=e||window.event;var t=!0,o=!1,i=void 0;try{for(var n,a=this.whiteboardViewMap.values()[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){n.value.receiveWindowMessageEvent(e)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}var r=!0,s=!1,l=void 0;try{for(var d,c=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value;u&&u.receiveWindowMessageEvent(e)}}catch(e){s=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}return!1}},{key:"_documentKeydownCallback",value:function(e){var t=this;switch(L.Logger.debug("[whiteboarrd-sdk]_documentKeydownCallback"),(e=e||window.event).keyCode){case 27:O.default.isFullScreenStatus()&&O.default.exitFullscreen()}var o=function(){if(!V.default.isSkipPageing&&t.whiteboardViewMap.has("default")&&t.whiteboardViewMap.get("default").getConfigration().isUseKeyboardPage&&!t.whiteboardViewMap.get("default").isWhiteboardTextEditing())switch(e.keyCode){case 37:t.whiteboardViewMap.get("default").prevPage();break;case 38:t.whiteboardViewMap.get("default").prevStep();break;case 39:t.whiteboardViewMap.get("default").nextPage();break;case 40:t.whiteboardViewMap.get("default").nextStep()}};return clearTimeout(this.documentKeydownTimer),this.documentKeydownDateTime&&500<(new Date).getTime()-this.documentKeydownDateTime?o():this.documentKeydownTimer=setTimeout(function(){o()},300),this.documentKeydownDateTime=(new Date).getTime(),!1}},{key:"_documentFullscreenchangeCallback",value:function(e){var t=this;L.Logger.debug("[whiteboarrd-sdk]_documentFullscreenchangeCallback");var o=!0,i=!1,n=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;if(O.default.isFullScreenStatus()){var l=s.getWhiteboardRootElement(),d=s.getConfigration().documentToolBarConfig.fullScreenElementId;d&&("string"==typeof d?document.getElementById(d)&&(l=document.getElementById(d)):l=d),O.default.getFullscreenElement()&&O.default.getFullscreenElement().id===l.id?s.changeFullScreenState(!0):s.changeFullScreenState(!1)}else s.changeFullScreenState(!1)}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}return this.videoPlayerView&&this.videoPlayerView.receiveEventFullScreenChange&&this.videoPlayerView.receiveEventFullScreenChange(e),this.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize()},250)},50),!1}},{key:"_registerEvent",value:function(){var e=this;L.Logger.debug("[whiteboarrd-sdk]_registerEvent");O.default.addEvent(window,"resize",this._windowResizeCallback.bind(this)),O.default.addEvent(window,"message",this._windowMessageCallback.bind(this)),O.default.addEvent(document,"keyup",this._documentKeydownCallback.bind(this)),O.default.addFullscreenchange(this._documentFullscreenchangeCallback.bind(this));var t,o,i,n=((i=o=t=void 0)!==document.hidden?(t="hidden",i="visibilitychange",o="visibilityState"):void 0!==document.mozHidden?(t="mozHidden",i="mozvisibilitychange",o="mozVisibilityState"):void 0!==document.msHidden?(t="msHidden",i="msvisibilitychange",o="msVisibilityState"):void 0!==document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange",o="webkitVisibilityState"),{hidden:t,state:o,visibilityChange:i}),a=n.state,r=n.visibilityChange;O.default.addEvent(document,r,function(){if("visible"===document[a])return e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1},!1)}},{key:"_addRoomEvent",value:function(){L.Logger.debug("[whiteboarrd-sdk]_addRoomEvent"),this.room&&(this.room.removeBackupListerner&&this.room.removeBackupListerner(this.listernerBackupid),this.room.addEventListener("room-receiveActionCommand",this.reveiveEventRoomReceiveActionCommand.bind(this),this.listernerBackupid),this.room.addEventListener("room-pubmsg",this.receiveEventRoomPubmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-delmsg",this.receiveEventRoomDelmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-connected",this.receiveEventRoomConnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-disconnected",this.receiveEventRoomDisconnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-msglist",this.receiveEventRoomMsglist.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediastate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfilestate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediaattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfileattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-error-notice",this.receiveEventRoomErrorNotice.bind(this),this.listernerBackupid))}},{key:"_forwardingStreamEvents",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]_forwardingStreamEvents handlerName and recvEventData:",e,t),this.audioPlayerView&&this.audioPlayerView[e]&&O.default.isFunction(this.audioPlayerView[e])&&this.audioPlayerView[e](t),this.videoPlayerView&&this.videoPlayerView[e]&&O.default.isFunction(this.videoPlayerView[e])&&this.videoPlayerView[e](t)}}]),i}(),m=["createMainWhiteboard","destroyMainWhiteboard","createExtendWhiteboard","destroyExtendWhiteboard","changeWhiteBoardConfigration","useWhiteboardTool","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","updateWhiteboardSize","updateAllWhiteboardSize","resetAllWhiteboardData","resetPureWhiteboardTotalPage","changeDynamicPptVolume","openDocumentRemark","closeDocumentRemark","getWhiteboardIntermediateLayerInstance","changeCommonWhiteBoardConfigration","registerRoomDelegate","changeDocument","stopShareLocalMedia","switchDocAddress","getVersion","openRemoteDocument","noticeWhiteboardActionCommand"],f=["createMainWhiteboard","destroyMainWhiteboard","changeDocument","changeWhiteBoardConfigration","useWhiteboardTool","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","registerRoomDelegate","changeCommonWhiteBoardConfigration","getVersion","openRemoteDocument","noticeWhiteboardActionCommand"];function r(e,t,o){var i={className:"TKWhiteBoardManager"},n=new h(e,t,o),a=o?m:f,r=function(e){i[e]=function(){return n[e].apply(n,arguments)}},s=!0,l=!1,d=void 0;try{for(var c,u=a[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){r(c.value)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}return i}window.TKWhiteBoardManager=r,o.TKWhiteBoardManager=r,o.default=r},{"./intermediateLayer/WhiteboardIntermediateLayer":330,"./utils/Configuration":331,"./utils/Constant":332,"./utils/Global":334,"./utils/Utils":338,"./view/containers/AudioPlayer":344,"./view/containers/DocumentRemark":345,"./view/containers/DocumentToolbar":346,"./view/containers/VideoPlayer":348,"./view/containers/WhiteboardToolbar":349,"./view/containers/WhiteboardView":350}],328:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var _=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}();var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultProductionOptions={synchronizationDynamicPpt:!0,dynamicPptActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.dynamicPptInstanceIDPrefix="dynamicPpt_",this.dynamicPptInstanceDefaultID="dynamicPpt_default",this.dynamicPptInstanceStore={},this.uniqueDynamicPpt=!1,this.specialDynamicPptInstanceIDPrefix="specialDynamicPptInstanceIDPrefix_"}return i(e,[{key:"productionDynamicPpt",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.dynamicPptElementId,i=t.productionOptions,n=void 0===i?{}:i,a=t.handler,r=void 0===a?{}:a,s=t.id;if(o){var l=this._getDynamicPptInstanceID(s),d=this.getDynamicPptInstanceByID(l);if(d)return L.Logger.error("The production dynamicPpt(dynamicPptInstanceID:"+l+") fails, the dynamicPpt already exists!"),d;d={},n=Object.deepAssign({},this.defaultProductionOptions,n);var c=document.getElementById(o);if(!c)return L.Logger.error("DynamicPpt elements do not exist , element id is:"+o+"!"),d;var u=document.createElement("div"),h=o+"_dynamicPptInstance";u.className="dynamicPpt-instance-element",u.id=h,u.style.width="100%",u.style.height="100%";var m=document.createElement("iframe"),f=o+"_dynamicPptIframe";m.className="dynamicPpt-iframe-element",m.id=f,m.name=o+"_dynamicPptIframeName",m.allowFullScreen=!0,m.frameborder=0,m.scrolling="no",m.allow="autoplay",m.width="100%",m.height="100%",m.style.width="100%",m.style.height="100%",m.style.border="none",m.style.padding="0",m.style.margin="0",u.appendChild(m);var p=document.createElement("div"),g=o+"_dynamicPptLoading";p.className="dynamicPpt-loading-element talkcloud-loading",p.id=g;var v=document.createElement("span");v.className="tk-loading-reload-number",v.style.display="none",p.appendChild(v),u.appendChild(p);var y=document.createElement("div"),b=o+"_dynamicPptAction";return y.className="dynamicPpt-action-element talkcloud-action",y.style.width="100%",y.style.height="100%",y.style.zIndex=98,y.style.display=n.dynamicPptActionClick?"none":"block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.id=b,u.appendChild(y),u.appendChild(y),c.appendChild(u),(this.dynamicPptInstanceStore[l]=d).dynamicPptInstanceID=l,d.handler={},d.handler.sendSignallingToServer=r.sendSignallingToServer,d.handler.delSignallingToServer=r.delSignallingToServer,d.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,d.dynamicPptElementId=o,d.dynamicPptElement=c,d.dynamicPptInstanceElementId=h,d.dynamicPptInstanceElement=u,d.dynamicPptIframeElementId=f,d.dynamicPptIframeElement=m,d.dynamicPptLoadingElementId=g,d.dynamicPptLoadingElement=p,d.dynamicPptReloadNumberElement=v,d.dynamicPptActionElementId=b,d.dynamicPptActionElement=y,d.id=s,d.remoteData={},d.awitExecutePostMessageArray=[],d.dynamicPptActionJson={},d.associatedMsgID=n.associatedMsgID,d.associatedUserID=n.associatedUserID,d.synchronizationDynamicPpt=n.synchronizationDynamicPpt,d.dynamicPptActionClick=n.dynamicPptActionClick,d.forceReloadNumber=0,d.maxForceReloadNumber=n.maxForceReloadNumber,d.forceReloadInterval=n.forceReloadInterval,d.isShowReloadFileTip=n.isShowReloadFileTip,d.languageType=n.languageType,d.againreconnectNum=0,n.againreconnectElementParentNode&&(d.againreconnectElementParentNode=n.againreconnectElementParentNode),d.dynamicPptIframeElement.onload=function(){clearTimeout(d.forceReloadNumberTimer),d.forceReloadNumberTimer=null,d.iframeSrc&&!d.isLoadFinished&&d.forceReloadNumber<d.maxForceReloadNumber&&e._iframeReloadMonitor(d,"dynamicPptLoaded")},d}L.Logger.error("dynamicPptElementId is required!")}},{key:"destroyDynamicPptInstance",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?this._destroyDynamicPptInstance(t):L.Logger.error("[destroy]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?t.source===o.dynamicPptIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"changeDynamicPptSize",value:function(e){var t=this,o=this.getDynamicPptInstanceByID(e);if(o){var i={action:"resizeHandler",width:o.dynamicPptElement.clientWidth,height:o.dynamicPptElement.clientHeight};this._postMessage(o,i),setTimeout(function(){var e={action:"resizeHandler",width:o.dynamicPptElement.clientWidth,height:o.dynamicPptElement.clientHeight};t._postMessage(o,e)},250)}else L.Logger.error("[changeDynamicPptSize]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"hasDynamicPptById",value:function(e){var t=this.getDynamicPptInstanceByID(e);return null!=t}},{key:"setDynamicPptIframeSrc",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=this.getDynamicPptInstanceByID(e);if(a){var r="";a.isLoadFinished=!1,a.awitExecutePostMessageArray.length=0,clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.forceReloadNumber=n.forceReloadNumber||0;var s=i.fileid,l=i.pptslide,d=i.pptstep;if(a.playback=n.playback,a.againreconnectElement&&(a.againreconnectElement.parentNode&&a.againreconnectElement.parentNode.removeChild(a.againreconnectElement),a.againreconnectElement=void 0),s==a.fileid&&t&&n.isAgainreconnect||(a.againreconnectNum=0),a.fileid=s,a.awitJumpToAnimPptslide=l,a.awitJumpToAnimPptstep=d,t){r=t;var c=!1,u=!0,h=!1,m=void 0;try{for(var f,p=Object.entries(o)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var g=f.value,v=_(g,2),y=v[0],b=v[1];null!=b&&(c?r+="&"+y+"="+b:(c=!0,r+=(/\?/g.test(r)?"&":"?")+y+"="+b))}}catch(e){h=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(h)throw m}}a.iframeSrc=r,this._showLoading(a),this._iframeReloadMonitor(a,"setDynamicPptIframeSrc")}else a.iframeSrc=r;n.isAgainreconnect&&(a.dynamicPptIframeElement.src=""),a.dynamicPptIframeElement.src=r,L.Logger.debug("set dynamic ppt src:",r)}else L.Logger.error("[setDynamicPptIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"jumpToAnimation",value:function(e,t,o,i,n,a){var r=this.getDynamicPptInstanceByID(e);r?this._jumpToAnimation(r,t,o,i,n,a):L.Logger.error("[jumpToAnimation]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide>=o.remoteData.pptslidesCount?L.Logger.warning("[nextPage]dynamic ppt is on the last page , cannot execute nextPage method."):this._postMessage(o,{action:"gotoNextSlide",autoStart:t}):L.Logger.info("[nextPage]dynamic ppt is not load finished  , cannot execute nextPage method"):L.Logger.error("[nextPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide<=1?L.Logger.warning("[prevPage]dynamic ppt is  on page 1 , cannot execute prevPage method."):this._postMessage(o,{action:"gotoPreviousSlide",autoStart:t}):L.Logger.info("[prevPage]dynamic ppt is not load finished  , cannot execute prevPage method"):L.Logger.error("[prevPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoNextStep"}):L.Logger.info("[nextStep]dynamic ppt is not load finished  , cannot execute nextStep method"):L.Logger.error("[nextStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoPreviousStep"}):L.Logger.info("[prevStep]dynamic ppt is not load finished  , cannot execute prevStep method"):L.Logger.error("[prevStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"updateDynamicPptProperty",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationDynamicPpt&&(o.synchronizationDynamicPpt=t.synchronizationDynamicPpt,this._postMessage(o,{action:"changePublishDynamicPptMediaPermission_video",publishDynamicPptMediaPermission_video:o.synchronizationDynamicPpt})),void 0!==t.dynamicPptActionClick&&(o.dynamicPptActionClick=t.dynamicPptActionClick,o.dynamicPptActionElement.style.display=o.dynamicPptActionClick?"none":"block",this._postMessage(o,{action:"changeDynamicPptActionClick",dynamicPptActionClick:o.dynamicPptActionClick})),void 0!==t.canPage&&this._postMessage(o,{action:"changeNewpptPagingPage",newpptPagingPage:t.canPage}),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o),o.againreconnectElement&&this._setAgainreconnectInfo(o))):L.Logger.error("[updateDynamicPptProperty]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessageDynamicPptTriggerAction",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);if(o){var i=t.slide,n=t.fileid;o.fileid!=n||o.remoteData.pptslide!==i+1?(o.dynamicPptActionJson[i+1]=o.dynamicPptActionJson[i+1]||[],o.dynamicPptActionJson[i+1].push(t)):this._postMessage(o,t)}else L.Logger.error("[postMessageDynamicPptTriggerAction]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getDynamicPptInstanceByID",value:function(e){var t=this._getDynamicPptInstanceID(e);return this.dynamicPptInstanceStore[t]}},{key:"_jumpToAnimation",value:function(e,t,o,i,n,a){e.isLoadFinished&&(e.remoteData.pptslide>e.remoteData.pptslidesCount||e.remoteData.pptslide<1)&&(e.remoteData.pptslide>e.remoteData.pptslidesCount&&(t=e.remoteData.pptslidesCount,e.remoteData.pptslide=e.remoteData.pptslidesCount),e.remoteData.pptslide<1&&(t=1,e.remoteData.pptslide=1),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}));var r={action:"jumpToAnim",data:{slide:t,step:o,timeOffset:n,autoStart:a,initiative:i}};this._postMessage(e,r)}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{if(e.dynamicPptIframeElement&&e.dynamicPptIframeElement.src){var o={source:"tk_dynamicPPT",data:t};o=JSON.stringify(o),e.dynamicPptIframeElement&&e.dynamicPptIframeElement.contentWindow&&e.dynamicPptIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]dynamic ppt postMessage instanceId is "+e.id+",sendData:"+o),e.dynamicPptIframeElement.contentWindow.postMessage(o,"*"))}}catch(e){L.Logger.error("[_postMessage] dynamic ppt postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.dynamicPptLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.dynamicPptLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getDynamicPptInstanceID",value:function(e){var t=this.uniqueDynamicPpt||null==e?this.dynamicPptInstanceDefaultID:this.dynamicPptInstanceIDPrefix+e;e&&"string"==typeof e&&(new RegExp(this.specialDynamicPptInstanceIDPrefix,"g").test(e)&&(t=e));return t}},{key:"_destroyDynamicPptInstance",value:function(e){var t=e.dynamicPptInstanceID,o=e.dynamicPptElement;o?o.innerHTML="":L.Logger.warning("[destroy] dynamicPpt elements do not exist , element id is:"+e.dynamicPptElementId+"!");var i=!0,n=!1,a=void 0;try{for(var r,s=Object.keys(e)[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;e[l]=null,delete e[l]}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}this.dynamicPptInstanceStore[t]=null,delete this.dynamicPptInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){var i=this;if(o.data){var n=void 0,a=void 0;try{n=(a=JSON.parse(o.data)).data}catch(e){return void L.Logger.warning("dynamic ppt receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(a&&"tk_dynamicPPT"===a.source){L.Logger.debug("[dynamicPpt]receive remote iframe data form "+o.origin+":",o);switch(n.action){case"initEvent":this._handleIframeMessage_initEvent(t,n);break;case"slideChangeEvent":case"stepChangeEvent":this._handleIframeMessage_slideOrStepChangeEvent(t,n,n.action);break;case"autoPlayVideoInNewPpt":this._handleIframeMessage_autoPlayVideoInNewPpt(t,n);break;case"clickNewpptTriggerEvent":this._handleIframeMessage_clickNewpptTriggerEvent(e,t,n);break;case"allVideoAndAudio":case"clickLink":break;case"againReconnect":if(L.Logger.warning("[dynamic ppt]again reconnect info from dynamic ppt inner, again reconnect number is "+t.againreconnectNum),t.againreconnectNum++,t.againreconnectNum<=1)t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("reloadCurrentDocument",{id:t.id,iframeSrc:t.iframeSrc,fileid:t.fileid,forceReloadNumber:t.forceReloadNumber,isAgainreconnect:!0});else{if(t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.playback)return;t.againreconnectElement=document.createElement("div"),t.againreconnectElement.className="againreconnect-container";var r=document.createElement("div");r.className="againreconnect-box";var s=document.createElement("span");s.className="top-box title";var l=document.createElement("span");l.className="middle-box point-icon";var d=document.createElement("span");d.className="bottom-box ok-container";var c=document.createElement("button");c.className="ok-btn",c.onclick=function(){i._postMessage(t,{action:"userTriggerAudio"}),t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.againreconnectElement=void 0},c.ontouchend=function(){i._postMessage(t,{action:"userTriggerAudio"}),t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.againreconnectElement=void 0},d.appendChild(c),r.appendChild(s),r.appendChild(l),r.appendChild(d),t.againreconnectElement.appendChild(r),(t.againreconnectElementParentNode||t.dynamicPptInstanceElement).appendChild(t.againreconnectElement),this._setAgainreconnectInfo(t)}}}}}},{key:"_handleIframeMessage_initEvent",value:function(e,t){if(clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.remoteData.pptview=t.view,e.remoteData.pptslidesCount=t.slidesCount,e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&(e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),e.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height}),e.handler.receiveActionCommandCallback("dynamicPptLoadEnd",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height})),e.isLoadFinished||(e.isLoadFinished=!0,void 0!==e.awitJumpToAnimPptslide&&(this._jumpToAnimation(e,e.awitJumpToAnimPptslide,e.awitJumpToAnimPptstep),e.awitJumpToAnimPptslide=void 0,e.awitJumpToAnimPptstep=void 0,delete e.awitJumpToAnimPptslide,delete e.awitJumpToAnimPptstep)),e.awitExecutePostMessageArray&&0<e.awitExecutePostMessageArray.length){var o=!0,i=!1,n=void 0;try{for(var a,r=e.awitExecutePostMessageArray[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;this._postMessage(e,s)}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}e.awitExecutePostMessageArray.length=0,this._hideLoading(e)}},{key:"_handleIframeMessage_slideOrStepChangeEvent",value:function(e,t,o){if(e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("slideChangeEvent"===o?"dynamicPptSlideChange":"dynamicPptStepChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),0<Object.keys(e.dynamicPptActionJson).length&&e.dynamicPptActionJson[e.remoteData.pptslide]&&0!==e.dynamicPptActionJson[e.remoteData.pptslide].length){var i=!0,n=!1,a=void 0;try{for(var r,s=e.dynamicPptActionJson[e.remoteData.pptslide][Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;this._postMessage(e,l)}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}e.dynamicPptActionJson[e.remoteData.pptslide].length=0,delete e.dynamicPptActionJson[e.remoteData.pptslide]}t.externalData&&t.externalData.initiative&&(this._sendSignalling_ShowPage(e,{data:{action:"slideChangeEvent"===o?"slide":"step"}}),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("closeAllSelectBox",{id:e.id}))}},{key:"_handleIframeMessage_autoPlayVideoInNewPpt",value:function(e,t){if(e.handler&&e.handler.receiveActionCommandCallback){var o=t.isvideo,i=t.url,n=t.fileid,a={id:e.id,url:i,video:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:n}};e.handler.receiveActionCommandCallback("publishDymanicPptNetworkMedia",a)}}},{key:"_handleIframeMessage_clickNewpptTriggerEvent",value:function(e,t,o){o.externalData&&o.externalData.initiative&&(o.fileid=t.fileid,o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"NewPptTriggerActionClick":"ExtendNewPptTriggerActionClick",id:"default"===e?"NewPptTriggerActionClick":"NewPptTriggerActionClick_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id}))}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,i=t.id,n=t.toID,a=void 0===n?"__all":n,r=t.data,s=t.do_not_save,l=t.expiresabs,d=t.associatedMsgID,c=t.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(d=d||e.associatedMsgID,c=c||e.associatedUserID,e.handler.sendSignallingToServer(o,i,a,r,s,l,d,c))}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval))}},{key:"_sendSignalling_ShowPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:t})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.dynamicPptReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"ja":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.dynamicPptReloadNumberElement.innerHTML=t||""}},{key:"_setAgainreconnectInfo",value:function(e){if(e.againreconnectElement){var t=e.againreconnectElement.getElementsByClassName("top-box")[0],o=e.againreconnectElement.getElementsByClassName("ok-btn")[0];if(t||o){var i="加载有点慢......",n="点此继续";switch(e.languageType){case"tw":i="加載有點慢......",n="點此繼續";break;case"en":i="Loading a bit slow...",n="Click to continue";break;case"ja":i="インストールに時間がかかっています。...",n="続行する"}t&&(t.innerHTML=i),o&&(o.innerHTML=n)}}}}]),e}());o.default=n},{}],329:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var y=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}();var n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultProductionOptions={synchronizationH5Document:!0,h5DocumentActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.h5DocumentInstanceIDPrefix="h5Document_",this.h5DocumentInstanceDefaultID="h5Document_default",this.h5DocumentInstanceStore={},this.uniqueH5Document=!1,this.specialH5DocumentInstanceIDPrefix="specialH5DocumentInstanceIDPrefix_"}return i(e,[{key:"productionH5Document",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.h5DocumentElementId,i=t.productionOptions,n=void 0===i?{}:i,a=t.handler,r=void 0===a?{}:a,s=t.id;if(o){var l=this._getH5DocumentInstanceID(s),d=this.getH5DocumentInstanceByID(l);if(d)return L.Logger.error("The production h5Document(h5DocumentInstanceID:"+l+") fails, the h5Document already exists!"),d;d={},n=Object.deepAssign({},this.defaultProductionOptions,n);var c=document.getElementById(o);if(!c)return L.Logger.error("H5Document elements do not exist , element id is:"+o+"!"),d;var u=document.createElement("div"),h=o+"_h5DocumentInstance";u.className="h5Document-instance-element",u.id=h,u.style.width="100%",u.style.height="100%";var m=document.createElement("iframe"),f=o+"_h5DocumentIframe";m.className="h5Document-iframe-element",m.id=f,m.name=o+"_h5DocumentIframeName",m.allowFullScreen=!0,m.allow="autoplay",m.frameborder=0,m.scrolling="no",m.width="100%",m.height="100%",m.style.width="100%",m.style.height="100%",m.style.border="none",m.style.padding="0",m.style.margin="0",u.appendChild(m);var p=document.createElement("div"),g=o+"_h5DocumentLoading";p.className="h5Document-loading-element talkcloud-loading",p.id=g;var v=document.createElement("span");v.className="tk-loading-reload-number",v.style.display="none",p.appendChild(v),u.appendChild(p);var y=document.createElement("div"),b=o+"_h5DocumentAction";return y.className="h5Document-action-element talkcloud-action",y.style.width="100%",y.style.height="100%",y.style.zIndex=98,y.style.display=n.h5DocumentActionClick?"none":"block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.id=b,u.appendChild(y),u.appendChild(y),c.appendChild(u),(this.h5DocumentInstanceStore[l]=d).h5DocumentInstanceID=l,d.handler={},d.handler.sendSignallingToServer=r.sendSignallingToServer,d.handler.delSignallingToServer=r.delSignallingToServer,d.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,d.h5DocumentElementId=o,d.h5DocumentElement=c,d.h5DocumentInstanceElementId=h,d.h5DocumentInstanceElement=u,d.h5DocumentIframeElementId=f,d.h5DocumentIframeElement=m,d.h5DocumentLoadingElementId=g,d.h5DocumentLoadingElement=p,d.h5DocumentReloadNumberElement=v,d.h5DocumentActionElementId=b,d.h5DocumentActionElement=y,d.id=s,d.awitExecutePostMessageArray=[],d.h5DocumentActionJson={},d.associatedMsgID=n.associatedMsgID,d.associatedUserID=n.associatedUserID,d.synchronizationH5Document=n.synchronizationH5Document,d.h5DocumentActionClick=n.h5DocumentActionClick,d.forceReloadNumber=0,d.maxForceReloadNumber=n.maxForceReloadNumber,d.forceReloadInterval=n.forceReloadInterval,d.isShowReloadFileTip=n.isShowReloadFileTip,d.languageType=n.languageType,d.h5DocumentIframeElement.onload=function(){clearTimeout(d.forceReloadNumberTimer),d.forceReloadNumberTimer=null,d.iframeSrc&&!d.isLoadFinished&&d.forceReloadNumber<d.maxForceReloadNumber&&e._iframeReloadMonitor(d,"h5DocumentLoaded")},d}L.Logger.error("h5DocumentElementId is required!")}},{key:"destroyH5DocumentInstance",value:function(e){var t=this.getH5DocumentInstanceByID(e);t?this._destroyH5DocumentInstance(t):L.Logger.error("[destroy]There are no h5 document Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?t.source===o.h5DocumentIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no h5 document Numbers that belong to id "+e)}},{key:"hasH5DocumentById",value:function(e){var t=this.getH5DocumentInstanceByID(e);return null!=t}},{key:"setH5DocumentIframeSrc",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=this.getH5DocumentInstanceByID(e);if(a){var r="";a.isLoadFinished=!1,a.isReceivePagenum=!1,clearTimeout(a.h5DocumentActionTimer),a.awitExecutePostMessageArray.length=0,clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.forceReloadNumber=n.forceReloadNumber||0;var s=i.fileid;if(a.fileid=s,t){r=t;var l=!1,d=!0,c=!1,u=void 0;try{for(var h,m=Object.entries(o)[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var f=h.value,p=y(f,2),g=p[0],v=p[1];l?r+="&"+g+"="+v:(l=!0,r+=(/\?/g.test(r)?"&":"?")+g+"="+v)}}catch(e){c=!0,u=e}finally{try{!d&&m.return&&m.return()}finally{if(c)throw u}}a.iframeSrc=r,this._showLoading(a),this._iframeReloadMonitor(a,"setH5DocumentIframeSrc")}else a.iframeSrc=r,this._hideLoading(a);a.h5DocumentIframeElement.src=r,L.Logger.debug("set h5 document src:",r)}else L.Logger.error("[setH5DocumentIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"jumpToPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._jumpToPage(o,t):L.Logger.error("[jumpToPage]There are no h5 document Numbers that belong to id "+e)}},{key:"nextPage",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)if(t.isLoadFinished){var o=this._getWhiteboardFiledata(t);if(o&&o.currpage>=o.pagenum)L.Logger.warning("[nextPage]h5 document is on the last page , cannot execute nextPage method.");else{var i={currpage:o.currpage+1};this._postMessage(t,{method:"onJumpPage",toPage:i.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(t,i),this._sendSignalling_ShowPage(t)}}else L.Logger.info("[nextPage]h5 document is not load finished  , cannot execute nextPage method");else L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"prevPage",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)if(t.isLoadFinished){var o=this._getWhiteboardFiledata(t);if(o&&o.currpage<=1)L.Logger.warning("[nextPage]h5 document is on page 1, cannot execute prevPage method.");else{var i={currpage:o.currpage-1};this._postMessage(t,{method:"onJumpPage",toPage:i.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(t,i),this._sendSignalling_ShowPage(t)}}else L.Logger.info("[prevPage]h5 document is not load finished  , cannot execute prevPage method");else L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"skipPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);if(o)if(o.isLoadFinished){var i=this._getWhiteboardFiledata(o);i&&t>i.pagenum&&(L.Logger.info("[skipPage]h5 document skip to page exceeds the maximum number of pages , change skip page  to 5(max page number)."),t=i.pagenum),t<1&&(L.Logger.info("[skipPage]h5 document skip to page less than the minimum page , change skip page  to 1(min page number)."),t=1),this._saveFiledataAndLoadCurrpageWhiteboardData(o,{currpage:t}),this._jumpToPage(o,t),this._sendSignalling_ShowPage(o)}else L.Logger.info("[skipPage]h5 document is not load finished  , cannot execute skipPage method");else L.Logger.error("[skipPage]There are no h5 document Numbers that belong to id "+e)}},{key:"updateH5DocumentProperty",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationH5Document&&(o.synchronizationH5Document=t.synchronizationH5Document),void 0!==t.h5DocumentActionClick&&(o.h5DocumentActionClick=t.h5DocumentActionClick,o.h5DocumentActionElement.style.display=o.h5DocumentActionClick?"none":"block"),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o))):L.Logger.error("[updateH5DocumentProperty]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessageH5DocumentTriggerAction",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);if(o){var i=this._getWhiteboardFiledata(o);!t||null==t.fileid||void 0===t.currpage||i.fileid==t.fileid&&i.currpage===t.currpage?this._postMessage(o,t):(o.h5DocumentActionJson[t.currpage]=o.h5DocumentActionJson[t.currpage]||[],o.h5DocumentActionJson[t.currpage].push(t))}else L.Logger.error("[postMessageH5DocumentTriggerAction]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no h5 document Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no h5 document Numbers that belong to id "+e)}},{key:"getH5DocumentInstanceByID",value:function(e){var t=this._getH5DocumentInstanceID(e);return this.h5DocumentInstanceStore[t]}},{key:"_jumpToPage",value:function(e,t){if(e.isLoadFinished){var o=this._getWhiteboardFiledata(e),i=!1,n=t;if(o&&(o.currpage>o.pagenum&&(o.currpage=o.pagenum,i=!0,t=o.currpage),o.currpage<1&&(o.currpage=1,i=!0,t=o.currpage),n=o.currpage),i){var a={};i&&(a.currpage=n),this._saveFiledataAndLoadCurrpageWhiteboardData(e,a)}if(null!=t&&!isNaN(t)){var r={method:"onJumpPage",toPage:t};this._postMessage(e,r)}}}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{if(e.h5DocumentIframeElement&&e.h5DocumentIframeElement.src){var o=t;o=JSON.stringify(o),e.h5DocumentIframeElement&&e.h5DocumentIframeElement.contentWindow&&e.h5DocumentIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]h5 document postMessage instanceId is "+e.id+",sendData:"+o),e.h5DocumentIframeElement.contentWindow.postMessage(o,"*"))}}catch(e){L.Logger.error("[_postMessage] h5 document postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.h5DocumentLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.h5DocumentLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getH5DocumentInstanceID",value:function(e){var t=this.uniqueH5Document||null==e?this.h5DocumentInstanceDefaultID:this.h5DocumentInstanceIDPrefix+e;e&&"string"==typeof e&&(new RegExp(this.specialH5DocumentInstanceIDPrefix,"g").test(e)&&(t=e));return t}},{key:"_destroyH5DocumentInstance",value:function(e){var t=e.h5DocumentInstanceID,o=e.h5DocumentElement;o?o.innerHTML="":L.Logger.warning("[destroy] h5Document elements do not exist , element id is:"+e.h5DocumentElementId+"!");var i=!0,n=!1,a=void 0;try{for(var r,s=Object.keys(e)[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;e[l]=null,delete e[l]}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}this.h5DocumentInstanceStore[t]=null,delete this.h5DocumentInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){if(o.data){var i=void 0;try{i=JSON.parse(o.data)}catch(e){return void L.Logger.warning("h5 document receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(i.method||"tk_h5Document"===i.source){L.Logger.debug("[h5Document]receive remote iframe data form "+o.origin+":",o);switch(i.method){case"onLoadComplete":this._handleIframeMessage_onLoadComplete(t,i);break;case"onPagenum":this._handleIframeMessage_onPagenum(t,i);break;case"onFileMessage":this._handleIframeMessage_onFileMessage(e,t,i);break;case"onJumpPage":if(!i.toPage||"number"!=typeof i.toPage)return void L.Logger.warning("h5 document toPage is not a number , toPage:",i.toPage);t.handler.receiveActionCommandCallback("h5DocumentOnJumpPage",{id:t.id,toPage:i.toPage})}}}}},{key:"_handleIframeMessage_onLoadComplete",value:function(r,e){var s=this;if(clearTimeout(r.forceReloadNumberTimer),r.forceReloadNumberTimer=null,r.handler&&r.handler.receiveActionCommandCallback&&(r.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:r.id,scale:e.coursewareRatio||16/9}),r.handler.receiveActionCommandCallback("h5DocumentLoadEnd",{id:r.id,scale:e.coursewareRatio||16/9})),!r.isLoadFinished&&(r.isLoadFinished=!0,r.isReceivePagenum)){var l=this._getWhiteboardFiledata(r);l&&(this._jumpToPage(r,l.currpage),clearTimeout(r.h5DocumentActionTimer),r.h5DocumentActionTimer=setTimeout(function(){if(r.isLoadFinished&&(l=s._getWhiteboardFiledata(r),0<Object.keys(r.h5DocumentActionJson).length&&r.h5DocumentActionJson[l.currpage]&&0!==r.h5DocumentActionJson[l.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var i,n=r.h5DocumentActionJson[l.currpage][Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;s._postMessage(r,a)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}r.h5DocumentActionJson[l.currpage].length=0,delete r.h5DocumentActionJson[l.currpage]}},100))}if(r.awitExecutePostMessageArray&&0<r.awitExecutePostMessageArray.length){var t=!0,o=!1,i=void 0;try{for(var n,a=r.awitExecutePostMessageArray[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var d=n.value;this._postMessage(r,d)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}}r.awitExecutePostMessageArray.length=0,this._hideLoading(r)}},{key:"_handleIframeMessage_onPagenum",value:function(r,e){var s=this,t=e.totalPages,o=!1,i=1,l=this._getWhiteboardFiledata(r);l&&(l.pagenum=t,l.currpage>l.pagenum&&(l.currpage=l.pagenum,o=!0),l.currpage<1&&(l.currpage=1,o=!0),i=l.currpage);var n={pagenum:t};o&&(n.currpage=i),o?this._saveFiledataAndLoadCurrpageWhiteboardData(r,n):this._updateWhiteboardFiledata(r,n),r.isLoadFinished&&!r.isReceivePagenum&&(l=this._getWhiteboardFiledata(r))&&(this._jumpToPage(r,l.currpage),clearTimeout(r.h5DocumentActionTimer),r.h5DocumentActionTimer=setTimeout(function(){if(r.isLoadFinished&&(l=s._getWhiteboardFiledata(r),0<Object.keys(r.h5DocumentActionJson).length&&r.h5DocumentActionJson[l.currpage]&&0!==r.h5DocumentActionJson[l.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var i,n=r.h5DocumentActionJson[l.currpage][Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;s._postMessage(r,a)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}r.h5DocumentActionJson[l.currpage].length=0,delete r.h5DocumentActionJson[l.currpage]}},100)),r.isReceivePagenum=!0}},{key:"_handleIframeMessage_onFileMessage",value:function(e,t,o){o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"H5DocumentAction":"ExtendH5DocumentAction",id:"default"===e?"H5DocumentAction":"H5DocumentAction_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id})}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,i=t.id,n=t.toID,a=void 0===n?"__all":n,r=t.data,s=t.do_not_save,l=t.expiresabs,d=t.associatedMsgID,c=t.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(d=d||e.associatedMsgID,c=c||e.associatedUserID,e.handler.sendSignallingToServer(o,i,a,r,s,l,d,c))}},{key:"_getWhiteboardFiledata",value:function(e){var t=void 0;return e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("getWhiteboardFiledata",{id:e.id,callback:function(e){t=e}}),t}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("saveFiledataAndLoadCurrpageWhiteboardData",{id:e.id,updateFileData:t})}},{key:"_updateWhiteboardFiledata",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardFiledata",{id:e.id,updateFileData:t})}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadH5DocumentIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval))}},{key:"_sendSignalling_ShowPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:t})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.h5DocumentReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"en":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.h5DocumentReloadNumberElement.innerHTML=t||""}}]),e}());o.default=n},{}],330:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var y=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(window.L&&window.L.Logger&&window.L.Logger.debug&&window.L.Logger.trace&&window.L.Logger.info&&window.L.Logger.warning&&window.L.Logger.error||(window.L=window.L||{},window.L.Logger=window.L.Logger||{},window.L.Logger.debug=window.L.Logger.debug||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)},window.L.Logger.trace=window.L.Logger.trace||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},window.L.Logger.info=window.L.Logger.info||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},window.L.Logger.warning=window.L.Logger.warning||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},window.L.Logger.error=window.L.Logger.error||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)}),!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var n=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){var o=void 0;try{o=Array.isArray(t)?t.slice(0):JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n&&"object"===(void 0===n?"undefined":f(n)))for(var a in n)o[a]=n[a]}if("object"===(void 0===o?"undefined":f(o)))for(var r in o)t[r]=o[r];return t}};Object&&Object.shallowAssign||(Object.shallowAssign=n),Object&&Object.customAssign||(Object.customAssign=n)}Object&&Object.deepAssign||(Object.deepAssign=function(t){var o=void 0;if("object"!==(void 0===t?"undefined":f(t))||Array.isArray(t))o="object"===(void 0===t?"undefined":f(t))&&Array.isArray(t)?t.slice(0):t;else try{o=JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var e=1;e<arguments.length;e++){var i=arguments[e];if(i&&"object"===(void 0===i?"undefined":f(i)))for(var n in i)void 0===o[n]?"object"===f(i[n])?Array.isArray(i[n])?o[n]=i[n].slice(0):o[n]=JSON.parse(JSON.stringify(i[n])):o[n]=i[n]:"object"===f(i[n])?o[n]=Object.deepAssign(Array.isArray(i[n])?[]:{},"object"===f(o[n])?o[n]:Array.isArray(i[n])?[]:{},i[n]):o[n]=i[n]}if("object"===(void 0===o?"undefined":f(o)))for(var a in o)t[a]=o[a];return t}),String.prototype.colorHex=function(){if(/^(rgb|RGB)/.test(this)){for(var e=this.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),t="#",o=0;o<e.length;o++){var i=Number(e[o]).toString(16);"0"===i&&(i+=i),t+=i}return 7!==t.length&&(t=this),t}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(this))return this;var n=this.replace(/#/,"").split("");if(6===n.length)return this;if(3===n.length){for(var a="#",r=0;r<n.length;r+=1)a+=n[r]+n[r];return a}},String.prototype.colorRgb=function(){var e=this.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",o=1;o<4;o+=1)t+=e.slice(o,o+1).concat(e.slice(o,o+1));e=t}for(var i=[],n=1;n<7;n+=2)i.push(parseInt("0x"+e.slice(n,n+2)));return"RGB("+i.join(",")+")"}return e};var a=function(e,t,o,i){i=null!=i&&null!=i&&i,e.addEventListener?e.addEventListener(t,o,i):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},p=function(e,t,o,i){e.addEventListener?e.removeEventListener(t,o,i):e.attachEvent?e.detachEvent("on"+t,o):e["on"+t]=null},r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,defaultWhiteboardScale:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!0,saveUndoStack:!0,remindContentTime:3e3,showShapeAuthor:!1,showMyselfRemindContent:!1,isOnlyUndoRedoClearMyselfShape:!1,synchronizationWhiteboard:!0},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.historyPenTool=void 0,this.historyShapeTool=void 0,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={}}return i(e,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){/^tool_/.test(e)&&(this.commonActiveTool=e);var t=!0,o=!1,i=void 0;try{for(var n,a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;if(!r.proprietaryTools){var s=r.id;this.activeWhiteboardTool(e,s)}}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"===(void 0===e?"undefined":f(e))&&Object.deepAssign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"===(void 0===e?"undefined":f(e))&&Object.deepAssign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,o=this._getWhiteboardInstanceById(t);if(!o)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,o);else{var i=e.id.substring(e.id.lastIndexOf("###_")+4);if(i){var n=i.split("_");i=n[0]+"_"+n[1]+"_"+n[2];var a=n[1],r=n[2],s=this.getWhiteboardFiledata(t);s.fileid==a&&s.currpage==r&&(this._receiveSnapshot(e,o),e.remindContent=e.data&&e.data.nickname||e.remindContent,o.showShapeAuthor&&e.remindContent&&e.fromID!=o.myselfId&&this._handlerShowRemoteRemindContentFromPubmsgData(o,e)),(null===o.waitingProcessShapeData[i]||void 0===o.waitingProcessShapeData[i])&&(o.waitingProcessShapeData[i]=[]),o.waitingProcessShapeData[i].push(e)}}}}},{key:"handlerDelmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"delmsg");var t=e.data.whiteboardID,o=this._getWhiteboardInstanceById(t);if(!o){e.source="delmsg";for(var i=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;0<=i;i--){if(this.awaitSaveToWhiteboardInstanceSignallingArray[i].id===e.id){this.awaitSaveToWhiteboardInstanceSignallingArray.splice(i,1);break}}return}var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var a=n.split("_");n=a[0]+"_"+a[1]+"_"+a[2];var r=a[1],s=a[2],l=this.getWhiteboardFiledata(t);if(e.source="delmsg",l.fileid==r&&l.currpage==s&&this._receiveSnapshot(e,o),o.waitingProcessShapeData[n]&&Array.isArray(o.waitingProcessShapeData[n])&&0<o.waitingProcessShapeData[n].length)for(var d=o.waitingProcessShapeData[n].length-1;0<=d;d--){if(o.waitingProcessShapeData[n][d].id===e.id){o.waitingProcessShapeData[n].splice(d,1);break}}}}}},{key:"handlerMsglist_SharpsChange",value:function(e){for(var t={},o=0;o<e.length;o++){var i=e[o];i.data&&"string"==typeof i.data&&(i.data=JSON.parse(i.data)),this._saveBasicTemplateWhiteboardSignallingData(i,"msglist");var n=i.data.whiteboardID,a=this._getWhiteboardInstanceById(n);if(a){if(null!=i.data&&("shapeSaveEvent"===i.data.eventType||"clearEvent"===i.data.eventType||"redoEvent"===i.data.eventType)){i.source="msglist";var r=i.id.substring(i.id.lastIndexOf("###_")+4);if(r){var s=r.split("_");r=s[0]+"_"+s[1]+"_"+s[2];var l=s[1],d=s[2],c=this.getWhiteboardFiledata(n);c.fileid==l&&c.currpage==d&&(t[a.id]=!0),(null===a.waitingProcessShapeData[r]||void 0===a.waitingProcessShapeData[r])&&(a.waitingProcessShapeData[r]=[]),a.waitingProcessShapeData[r].push(i)}}}else i.source="msglist",this.awaitSaveToWhiteboardInstanceSignallingArray.push(i)}if(t&&Object.keys(t).length){var u=!0,h=!1,m=void 0;try{for(var f,p=Object.keys(t)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var g=f.value;this.saveWhiteboardStackToStorage(g),this.updateWhiteboardFiledata(g,{}),this.loadCurrpageWhiteboard(g)}}catch(e){h=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(h)throw m}}}}},{key:"preloadWhiteboardImg",value:function(t,e){if(t){var o=new Image;o.onload=function(){e&&"function"==typeof e&&e()},o.onerror=function(e){L.Logger.error("preload img  fail , img url is "+t)},o.src=t}else L.Logger.warning("preload img url is not esixt!")}},{key:"productionWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.whiteboardElementId,o=e.thumbnailId,i=e.productionOptions,n=void 0===i?{}:i,a=e.handler,r=void 0===a?{}:a,s=e.id,l=this;if(t){var d=l._getWhiteboardInstanceID(s),c=l._getWhiteboardInstanceByID(d);if(c)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+d+") fails, the whiteboard already exists!"),c;c={};var u=document.getElementById(t);if(!u)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),c;var h=document.createElement("div"),m=t+"_whiteboardInstance";return h.className="whiteboard-instance-element",h.id=m,u.appendChild(h),n=Object.deepAssign({},l.defaultProductionOptions,n),(l.whiteboardInstanceStore[d]=c).filedata=n.filedata||this.getWhiteboardDefaultFiledata({fileid:"whiteboard_default"===d?0:s}),c.baseWhiteboardWidth=n.baseWhiteboardWidth,c.whiteboardInstanceID=d,c.parcelAncestorElementId=n.parcelAncestorElementId,c.isBaseboard=n.isBaseboard,c.needLooadBaseboard=n.needLooadBaseboard,c.dependenceBaseboardWhiteboardID=n.dependenceBaseboardWhiteboardID,c.defaultWhiteboardScale=n.defaultWhiteboardScale,c.watermarkImageScale=n.defaultWhiteboardScale,c.whiteboardMagnification=n.whiteboardMagnification,c.remindContentTime=n.remindContentTime,c.showShapeAuthor=n.showShapeAuthor,c.showMyselfRemindContent=n.showMyselfRemindContent,c.associatedMsgID=n.associatedMsgID,c.associatedUserID=n.associatedUserID,c.proprietaryTools=n.proprietaryTools,c.minHeight=n.minHeight,c.rotateDeg=n.rotateDeg,c.deawPermission=n.deawPermission,c.tempDeawPermission=n.tempDeawPermission,c.nickname=n.nickname,c.userid=n.userid,c.insertPictureRule=n.insertPictureRule||"default",c.synchronizationWhiteboard=n.synchronizationWhiteboard,c.whiteboardToolsInfo=Object.deepAssign({},l.whiteboardToolsInfo),n.primaryColor&&(c.whiteboardToolsInfo.primaryColor=n.primaryColor),n.secondaryColor&&(c.whiteboardToolsInfo.secondaryColor=n.secondaryColor),n.backgroundColor&&(c.whiteboardToolsInfo.backgroundColor=n.backgroundColor),n.pencilWidth&&(c.whiteboardToolsInfo.pencilWidth=n.pencilWidth),n.shapeWidth&&(c.whiteboardToolsInfo.shapeWidth=n.shapeWidth),n.eraserWidth&&(c.whiteboardToolsInfo.eraserWidth=n.eraserWidth),n.fontSize&&(c.whiteboardToolsInfo.fontSize=n.fontSize),n.fontFamily&&(c.whiteboardToolsInfo.fontFamily=n.fontFamily),n.fontStyle&&(c.whiteboardToolsInfo.fontStyle=n.fontStyle),n.fontWeight&&(c.whiteboardToolsInfo.fontWeight=n.fontWeight),c.saveRedoStack=n.saveRedoStack,c.saveUndoStack=n.saveUndoStack,c.imageThumbnailId=n.imageThumbnailId,c.imageThumbnailTipContent=n.imageThumbnailTipContent,c.registerWhiteboardToolsList={},c.stackStorage={},c.handler={},c.handler.sendSignallingToServer=r.sendSignallingToServer,c.handler.delSignallingToServer=r.delSignallingToServer,c.handler.resizeWhiteboardSizeCallback=r.resizeWhiteboardSizeCallback,c.handler.noticeUpdateToolDescCallback=r.noticeUpdateToolDescCallback,c.handler.noticeUpdateWhiteboardFiledataCallback=r.noticeUpdateWhiteboardFiledataCallback,c.handler.whiteboardWatermarkImageOnloadCallback=r.whiteboardWatermarkImageOnloadCallback,c.handler.whiteboardWatermarkImageOnFailureCallback=r.whiteboardWatermarkImageOnFailureCallback,c.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,c.active=!0,c.containerWidthAndHeight=n.containerWidthAndHeight,c.useImgOriginalSizeToContainerWidthAndHeight=n.useImgOriginalSizeToContainerWidthAndHeight,c.myselfId=n.myselfId,c.isOnlyUndoRedoClearMyselfShape=n.isOnlyUndoRedoClearMyselfShape,c.historyPenTool=this.historyPenTool,c.historyShapeTool=this.historyShapeTool,c.useToolKey=n.useToolKey,c.waitingProcessShapeData={},c.whiteboardElementId=t,c.whiteboardElement=u,c.whiteboardInstanceElementId=m,c.whiteboardInstanceElement=h,c.id=s,c.thumbnailId=o,c.lc=window.LC.init(c.whiteboardInstanceElement),c.lc.backingScale=1,c.lc.setColor("primary",c.whiteboardToolsInfo.primaryColor),c.lc.setColor("secondary",c.whiteboardToolsInfo.secondaryColor),c.lc.setColor("background",c.whiteboardToolsInfo.backgroundColor),c.lc.setWatermarkImageToLcBackground(!1),c.lc.setZoom(1),c.lc.setPan(0,0),c.lc.on("shapeSave",l._handlerShapeSaveEvent.bind(l,c)),c.lc.on("sendUndo",l._handlerUndoEvent.bind(l,c)),c.lc.on("sendRedo",l._handlerRedoEvent.bind(l,c)),c.lc.on("sendClear",l._handlerClearEvent.bind(l,c)),c.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(l,c)),c.activeTool=void 0,c.lc.myselfId=c.myselfId,c.lc.isOnlyUndoRedoClearMyselfShape=c.isOnlyUndoRedoClearMyselfShape,n.whiteboardClear&&l.clearWhiteboardAllDataById(s),l._changeWhiteboardDeawPermission(c.deawPermission,c),l._changeWhiteboardTemporaryDeawPermission(c.tempDeawPermission,c),l._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(c),l.activeWhiteboardTool(c.proprietaryTools?c.useToolKey?c.useToolKey:"tool_pencil":l.commonActiveTool,s),l._zoomIsDisable(c),l._actionIsDisable(c),l._noticeUpdateToolDesc(c),l._resizeWhiteboardHandler(c),l._noticeNpdateWhiteboardToolsInfo(c),c}L.Logger.error("whiteboardElementId is required!")}},{key:"changeWhiteboardExclusiveAttribute",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[changeWhiteboardExclusiveAttribute]There are no white board Numbers that belong to id "+e);for(var i in t)o.hasOwnProperty(i)&&(o[i]=t[i],"myselfId"===i||"isOnlyUndoRedoClearMyselfShape"===i?o.lc&&(o.lc[i]=o[i]):"defaultWhiteboardScale"===i?o.currentWatermarkImageUrl||(o.watermarkImageScale=o.defaultWhiteboardScale,o.lc.watermarkImage=null,this._resizeWhiteboardHandler(o)):"insertPictureRule"===i&&this._resizeWhiteboardHandler(o))}}},{key:"updateImageThumbnailId",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?(o.imageThumbnailId=t,this._saveImageBase64ToImageThumbnail(o)):L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var o=t.saveRedoStack,i=t.saveUndoStack,n=this._getWhiteboardInstanceById(e);n?(n.saveRedoStack=void 0!==o?o:n.saveRedoStack,n.saveUndoStack=void 0!==i?i:n.saveUndoStack):L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"updateIsBaseboard",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.isBaseboard=t:L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e)}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.dependenceBaseboardWhiteboardID=t:L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e)}},{key:"updateShowRemindContent",value:function(e,t,o){var i=this._getWhiteboardInstanceById(e);i?(i.showShapeAuthor=t||i.showShapeAuthor,i.showMyselfRemindContent=o||i.showMyselfRemindContent):L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedMsgID=t:L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedUserID=t:L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e)}},{key:"hasWhiteboardById",value:function(e){var t=this._getWhiteboardInstanceById(e);return null!=t}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._clearWhiteboardAllDataByInstance(t):L.Logger.error("[clear]There are no white board Numbers that belong to id "+e)}},{key:"productionSpecialId",value:function(e){return this.specialWhiteboardInstanceIDPrefix+e}},{key:"destroyWhiteboardInstance",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._destroyWhiteboardInstance(t):L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e)}},{key:"clearRedoAndUndoStack",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._clearRedoAndUndoStack(o,t):L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this._getWhiteboardInstanceById(e);t?(t.whiteboardMagnification=this.defaultProductionOptions.whiteboardMagnification,this._zoomIsDisable(t),this._resizeWhiteboardHandler(t)):L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardMagnification",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.whiteboardMagnification=t:L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardWatermarkImageScale",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultProductionOptions.watermarkImageScale,o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardWatermarkImageScale(o,t):L.Logger.error("[updateWhiteboardWatermarkImageScale]There are no white board Numbers that belong to id "+e)}},{key:"setWhiteboardWatermarkImage",value:function(e,o){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=t.resetDedaultWhiteboardMagnification,n=void 0===i||i,a=t.loadSucceedCallback,r=t.loadFailureCallback,s=this;L.Logger.debug("[setWhiteboardWatermarkImage]setWhiteboardWatermarkImage watermarkImageUrl:"+o);var l=s._getWhiteboardInstanceById(e);l?(l.currentWatermarkImageUrl=o,n&&s.resetDedaultWhiteboardMagnification(e),o?(s.showWhiteboardCanvasBackground(e),s._showWhiteboardLoading(l),clearTimeout(l.setWhiteboardWatermarkImageTimer),l.setWhiteboardWatermarkImageTimer=setTimeout(function(){var t=new Image;t.onload=function(){if(l.currentWatermarkImageUrl){var e=t.width/t.height;l.useImgOriginalSizeToContainerWidthAndHeight&&(l.containerWidthAndHeight={width:t.width,height:t.height}),l.lc.setWatermarkImage(t),s._resizeWhiteboardByScale(l,{watermarkImage:t,watermarkImageScale:e}),l.handler.whiteboardWatermarkImageOnloadCallback&&"function"==typeof l.handler.whiteboardWatermarkImageOnloadCallback&&l.handler.whiteboardWatermarkImageOnloadCallback({width:t.width,height:t.height})}else l.lc.watermarkImage=null,s._resizeWhiteboardHandler(l);s._hideWhiteboardLoading(l),a&&"function"==typeof a&&a(o)},t.onerror=function(e){L.Logger.error("img load fail , img url is "+o),r&&"function"==typeof r&&r(o),l&&l.handler&&l.handler.whiteboardWatermarkImageOnFailureCallback&&l.currentWatermarkImageUrl&&l.currentWatermarkImageUrl===o&&l.handler.whiteboardWatermarkImageOnFailureCallback(o)},t.src=o},150)):(s.hideWhiteboardCanvasBackground(e),l.lc.watermarkScale=1,s._resizeWhiteboardByScale(l,{isChangeWatermarkScale:!1}),s._hideWhiteboardLoading(l),l.lc.watermarkImage=null,l.lc.customCanvasBackgroundElement.style.backgroundImage="")):L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e)}},{key:"resizeWhiteboardHandler",value:function(e){if(void 0===e){var t=!0,o=!1,i=void 0;try{for(var n,a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;this._resizeWhiteboardHandler(r)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}}else{var s=this._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);this._resizeWhiteboardHandler(s)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.width,i=t.height,n=this._getWhiteboardInstanceById(e);n?void 0!==o&&void 0!==i?(n.containerWidthAndHeight={width:o,height:i},this._resizeWhiteboardHandler(n)):L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+o+" , height:"+i+"]!"):L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="none",t.lc.customCanvasBackgroundElement.style.display="none"):L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="",t.lc.customCanvasBackgroundElement.style.display=""):L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboard",value:function(e){var t=this._getWhiteboardInstanceById(e);t&&t.whiteboardElement&&(t.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this._getWhiteboardInstanceById(e);t&&t.whiteboardElement&&(t.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.fontSize,i=t.fontFamily,n=t.fontStyle,a=t.fontWeight,r=this._getWhiteboardInstanceById(e);r?(r.whiteboardToolsInfo.fontSize=void 0!==o?o:r.whiteboardToolsInfo.fontSize,r.whiteboardToolsInfo.fontFamily=void 0!==i?i:r.whiteboardToolsInfo.fontFamily,r.whiteboardToolsInfo.fontStyle=void 0!==n?n:r.whiteboardToolsInfo.fontStyle,r.whiteboardToolsInfo.fontWeight=void 0!==a?a:r.whiteboardToolsInfo.fontWeight,this._noticeNpdateWhiteboardToolsInfo(r),this._updateTextFont(r)):L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e)}},{key:"updateEraserWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eraserWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.eraserWidth=void 0!==t?t:o.whiteboardToolsInfo.eraserWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updateEraserWidth(o)):L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e)}},{key:"updatePencilWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).pencilWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.pencilWidth=void 0!==t?t:o.whiteboardToolsInfo.pencilWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updatePencilWidth(o)):L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?t&&"object"===(void 0===t?"undefined":f(t))&&(Object.deepAssign(o.whiteboardToolsInfo,t),this._noticeNpdateWhiteboardToolsInfo(o)):L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"updateShapeWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).shapeWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.shapeWidth=void 0!==t?t:o.whiteboardToolsInfo.shapeWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updateShapeWidth(o)):L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateColor",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var i={},n=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=s.value,c=y(d,2),u=c[0],h=c[1],m=u.replace(/Color/g,"");i[m]=h,o.whiteboardToolsInfo[m+"Color"]=h,this._noticeNpdateWhiteboardToolsInfo(o)}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}this._updateColor(o,i)}}},{key:"getActiveTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return t.activeTool;L.Logger.error("[getActiveTool]There are no white board Numbers that belong to id "+e)}},{key:"activeWhiteboardTool",value:function(e,t){var o=this;if(void 0!==o.useWhiteboardTool[e])if(null!=t){var i=o._getWhiteboardInstanceById(t);if(i)if(/^tool_/.test(e)){if("tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"===e||"tool_dashed"===e?i.historyPenTool=e:"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||(i.historyShapeTool=e),i.activeTool=e,o._setWhiteboardTools(e,i),o._handlerActiveToolLaser(e,i),"tool_text"===e?o._updateTextFont(i):"tool_eraser"===e?o._updateEraserWidth(i):"tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"==e||"tool_dashed"===e?o._updatePencilWidth(i):"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||o._updateShapeWidth(i),"tool_ellipse_empty"===e||"tool_rectangle_empty"===e?i.lc.setColor("secondary","transparent"):"tool_rectangle"===e||"tool_ellipse"===e||"tool_polygon"===e?i.lc.setColor("secondary",i.whiteboardToolsInfo.primaryColor):i.lc.setColor("secondary",i.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var n=i.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");i.lc.setColor("primary",n)}else i.lc.setColor("primary",i.whiteboardToolsInfo.primaryColor);i.handler.receiveActionCommandCallback&&i.handler.receiveActionCommandCallback("changeWhiteboardActiveTool",{id:i.id,activeTool:i.activeTool}),this._toolIsUse(i)}else if(/^action_/.test(e)){if("action_undo"===e){var a=i.isOnlyUndoRedoClearMyselfShape&&i.myselfId?i.myselfId:void 0;i.synchronizationWhiteboard?i.lc.sendUndo(a):i.lc.undo()}else if("action_redo"===e){var r=i.isOnlyUndoRedoClearMyselfShape&&i.myselfId?i.myselfId:void 0;i.synchronizationWhiteboard?i.lc.sendRedo(r):i.lc.redo()}else if("action_clear"===e){var s=i.isOnlyUndoRedoClearMyselfShape&&i.myselfId?i.myselfId:void 0;i.synchronizationWhiteboard?i.lc.sendClear(s):i.lc.clear()}o._actionIsDisable(i)}else/^zoom_/.test(e)&&("zoom_big"===e?i.whiteboardMagnification<o.maxMagnification&&(i.whiteboardMagnification+=.5):"zoom_small"===e?i.whiteboardMagnification>o.minMagnification&&(i.whiteboardMagnification-=.5):"zoom_default"===e&&(i.whiteboardMagnification=o.defaultProductionOptions.whiteboardMagnification),i.whiteboardMagnification>o.maxMagnification?i.whiteboardMagnification=o.maxMagnification:i.whiteboardMagnification<o.minMagnification&&(i.whiteboardMagnification=o.minMagnification),o._zoomIsDisable(i),o._resizeWhiteboardHandler(i));else L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t)}else L.Logger.error("[activeWhiteboardTool]id is undefined or null ");else L.Logger.error("The whiteboard does not have the "+e+" tool!")}},{key:"useHistoryPenTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t){var o=t.historyPenTool||"tool_pencil";this.activeWhiteboardTool(o,e)}else L.Logger.error("[useHistoryPenTool]There are no white board Numbers that belong to id "+e)}},{key:"useHistoryShapeTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t){var o=t.historyShapeTool||"tool_rectangle";this.activeWhiteboardTool(o,e)}else L.Logger.error("[useHistoryShapeTool]There are no white board Numbers that belong to id "+e)}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardTemporaryDeawPermission(e,o):L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"updateWhiteboardProperty",value:function(e,t){var o=this;if(t&&"object"===(void 0===t?"undefined":f(t))){var i=this._getWhiteboardInstanceById(e);if(!i)return void L.Logger.error("[updateWhiteboardProperty]There are no white board Numbers that belong to id "+e);if(void 0!==t.deawPermission&&o.changeWhiteboardDeawPermission(t.deawPermission,e),void 0!==t.showShapeAuthor&&o.changeWhiteboardExclusiveAttribute(e,{showShapeAuthor:t.showShapeAuthor}),void 0!==t.myselfId&&o.changeWhiteboardExclusiveAttribute(e,{myselfId:t.myselfId}),void 0!==t.isOnlyUndoRedoClearMyselfShape&&o.changeWhiteboardExclusiveAttribute(e,{isOnlyUndoRedoClearMyselfShape:t.isOnlyUndoRedoClearMyselfShape}),void 0!==t.nickname&&o.changeWhiteboardExclusiveAttribute(e,{nickname:t.nickname}),void 0!==t.primary||void 0!==t.secondary||void 0!==t.background||void 0!==t.primaryColor||void 0!==t.secondaryColor||void 0!==t.backgroundColor){var n={};for(var a in t)"primary"!==a&&"secondary"!==a&&"background"!==a&&"primaryColor"!==a&&"secondaryColor"!==a&&"backgroundColor"!==a||(n[a]=t[a]);o.updateColor(e,n)}if(void 0!==t.synchronizationWhiteboard&&o.changeWhiteboardExclusiveAttribute(e,{synchronizationWhiteboard:t.synchronizationWhiteboard}),void 0!==t.defaultWhiteboardScale&&o.changeWhiteboardExclusiveAttribute(e,{defaultWhiteboardScale:t.defaultWhiteboardScale}),void 0!==t.associatedMsgID&&o.updateWhiteboardAssociatedMsgID(e,t.associatedMsgID),void 0!==t.associatedUserID&&o.updateWhiteboardAssociatedUserID(e,t.associatedUserID),void 0!==t.pencilWidth||void 0!==t.shapeWidth||void 0!==t.eraserWidth||void 0!==t.fontSize||void 0!==t.fontFamily){var r={};void 0!==t.pencilWidth&&(r.pencilWidth=Number(t.pencilWidth)),void 0!==t.shapeWidth&&(r.shapeWidth=Number(t.shapeWidth)),void 0!==t.eraserWidth&&(r.eraserWidth=Number(t.eraserWidth)),void 0!==t.fontSize&&(r.fontSize=Number(t.fontSize)),void 0!==t.fontFamily&&(r.fontFamily=t.fontFamily),this.updateWhiteboardToolsInfo(e,r),void 0===t.fontSize&&void 0===t.fontFamily||this.updateTextFont(e),void 0!==t.pencilWidth&&("tool_pencil"!==i.activeTool&&"tool_highlighter"!==i.activeTool&&"tool_line"!==i.activeTool&&"tool_arrow"!==i.activeTool&&"tool_dashed"!==i.activeTool||this.updatePencilWidth(e)),void 0!==t.shapeWidth&&("tool_rectangle"!==i.activeTool&&"tool_rectangle_empty"!==i.activeTool&&"tool_ellipse"!==i.activeTool&&"tool_ellipse_empty"!==i.activeTool&&"tool_polygon"!==i.activeTool||this.updateShapeWidth(e)),void 0!==t.eraserWidth&&"tool_eraser"===i.activeTool&&this.updateEraserWidth(e)}void 0!==t.insertPictureRule&&o.changeWhiteboardExclusiveAttribute(e,{insertPictureRule:t.insertPictureRule})}}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardDeawPermission(e,o):L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"registerWhiteboardTools",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(o){var i={},n=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=s.value,c=y(d,2),u=c[0],h=c[1];void 0!==this.useWhiteboardTool[u]?(i[u]=this._productionToolDesc(u,h),this.useWhiteboardTool[u]=!0):L.Logger.warning("The whiteboard does not have the "+u+" tool!")}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}o.registerWhiteboardToolsList=i,o.isRegisterWhiteboardTool=!0,this._zoomIsDisable(o),this._zoomIsDisable(o),this._noticeUpdateToolDesc(o)}else L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e)}else L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!")}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return!!(t.filedata&&"object"===f(t.filedata)&&0<Object.keys(t.filedata).length);L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardFiledata",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardFiledata(o,t):L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"getRegisterWhiteboardToolsList",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.registerWhiteboardToolsList);L.Logger.error("[getRegisterWhiteboardToolsList]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"number"!=typeof t.filedata.currpage&&(t.filedata.currpage=Number(t.filedata.currpage)),"number"!=typeof t.filedata.pagenum&&(t.filedata.pagenum=Number(t.filedata.pagenum)),"number"!=typeof t.filedata.pptslide&&(t.filedata.pptslide=Number(t.filedata.pptslide)),"number"!=typeof t.filedata.pptstep&&(t.filedata.pptstep=Number(t.filedata.pptstep)),"number"!=typeof t.filedata.steptotal&&(t.filedata.steptotal=Number(t.filedata.steptotal)),Object.deepAssign({},t.filedata);L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"clearWhiteboardDataByFileidAndCurrpage",value:function(e,t,o){var i=this._getWhiteboardInstanceById(e);i?null!=t&&null!==o&&(i.waitingProcessShapeData["SharpsChange_"+t+"_"+o]=void 0,i.stackStorage["redoStack_"+t+"_"+o]=void 0,i.stackStorage["undoStack_"+t+"_"+o]=void 0,delete i.waitingProcessShapeData["SharpsChange_"+t+"_"+o],delete i.stackStorage["redoStack_"+t+"_"+o],delete i.stackStorage["undoStack_"+t+"_"+o]):L.Logger.error("[clearWhiteboardDataByFileidAndCurrpage]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.loadRedoStack,i=void 0===o||o,n=t.callback,a=this._getWhiteboardInstanceById(e);if(a){this._clearRedoAndUndoStack(a),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(a);var r=a.filedata,s=r.fileid,l=r.currpage;if(void 0===a.waitingProcessShapeData||null===a.waitingProcessShapeData)a.waitingProcessShapeData={};else{var d=a.waitingProcessShapeData["SharpsChange_"+s+"_"+l];null!=d&&0<d.length&&this._batchReceiveSnapshot(d,a)}if(i){var c=a.stackStorage["redoStack_"+s+"_"+l];c&&0<c.length&&(a.lc.redoStack=c)}this._actionIsDisable(a),n&&"function"==typeof n&&n()}else L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e)}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.saveRedoStack,i=t.saveUndoStack,n=this._getWhiteboardInstanceById(e);if(n){o=void 0!==o?o:n.saveRedoStack,i=void 0!==i?i:n.saveUndoStack;var a=this.getWhiteboardFiledata(e),r=a.fileid,s=a.currpage;o&&(n.stackStorage["redoStack_"+r+"_"+s]=n.lc.redoStack.slice(0))}else L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._showWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._hideWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState;L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e)}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).isResize,o=void 0!==t&&t,i=this._getWhiteboardInstanceById(e);if(i)return i.lc&&i.lc.canvas?(0===i.lc.canvas.width||0===i.lc.canvas.height)&&(o&&this._resizeWhiteboardHandler(i),!0):void 0;L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"png",o=this._getWhiteboardInstanceById(e);if(o){var i=this._convertCanvasToImageBase64(o,t);!function(e,t){var o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=e,o.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}(i=i.replace("image/"+t.toLocaleLowerCase().replace(/jpg/i,"jpeg").match(/png|jpeg|bmp|gif/)[0],"image/octet-stream"),(o.nickname?o.nickname+"_":"")+o.id+"_"+(new Date).getTime()+"."+t)}else L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardToolsInfo",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.whiteboardToolsInfo);L.Logger.error("[getWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.clear,i=void 0===o||o,n=t.redo,a=void 0===n||n,r=t.undo,s=void 0===r||r,l=this;i&&l._clearLc(e,{triggerEvent:!1}),a&&l._clearLcRedoStack(e),s&&l._clearLcUndoStack(e),l._actionIsDisable(e),setTimeout(function(){l._resizeWhiteboardHandler(e)},0)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"===(void 0===t?"undefined":f(t))&&(void 0!==t.currpage&&(t.currpage=Number(t.currpage)),void 0!==t.pagenum&&(t.pagenum=Number(t.pagenum)),void 0!==t.pptslide&&(t.pptslide=Number(t.pptslide)),void 0!==t.pptstep&&(t.pptstep=Number(t.pptstep)),void 0!==t.steptotal&&(t.steptotal=Number(t.steptotal)),Object.deepAssign(e.filedata,t),e&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler.noticeUpdateWhiteboardFiledataCallback(e.filedata))}},{key:"_batchReceiveSnapshot",value:function(i,n){var a=this;Array.isArray(i)?(i.forEach(function(e,t){var o=!0;t===i.length-1&&(o=!1),a._handlerRemoteDataToWhiteboard(e,o,n)}),a._actionIsDisable(n)):L.Logger.error("shapesArray must be an array!")}},{key:"_receiveSnapshot",value:function(e,t){this._handlerRemoteDataToWhiteboard(e,!1,t),this._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=arguments[2];if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(o.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(o,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&o.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":if(o&&o.lc&&o.lc.undoStack&&0<o.lc.undoStack.length)for(var i=!1,n=o.lc.undoStack.length-1;0<=n;n--){var a=o.lc.undoStack[n];switch(a.actionName){case"AddShapeAction":a.shapeId===e.data.shapeId&&(a.undo&&a.undo(),o.lc.undoStack.splice(n,1),i=!0)}if(i)break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data)),o.lc.saveShape(e.data.data,!1,null,t,e.fromID,e.seq);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(o.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(o,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&o.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var r=!0,s=o.lc.undoStack.length-1;0<=s;s--)if(e.data.shapeId===o.lc.undoStack[s].shapeId){r=!1;break}if(r){for(var l=!1,d=o.lc.redoStack.length-1;0<=d;d--)if(e.data.shapeId===o.lc.redoStack[d].shapeId){l=!0;break}if(l)o.lc.redo(!1,e.data.shapeId);else{e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data));var c=e.data.otherInfo,u=void 0===c?{authorUserId:e.fromID,seq:e.seq}:c;o.lc.saveShape(e.data.data,!1,null,t,u.authorUserId,u.seq)}}}else if(e.data.actionName&&"ClearAction"===e.data.actionName){for(var h=!0,m=o.lc.undoStack.length-1;0<=m;m--)if(e.data.clearActionId===o.lc.undoStack[m].id){h=!1;break}if(h){for(var f=!1,p=o.lc.redoStack.length-1;0<=p;p--)if(e.data.clearActionId===o.lc.redoStack[p].id){f=!0;break}if(f)o.lc.redo(!1,e.data.clearActionId),this._removeAllRemindContent(o);else{var g=e.data.otherInfo,v=void 0===g?{authorUserId:e.fromID,toAuthorUserId:void 0,seq:e.seq}:g;o.lc.clear(!1,e.data.clearActionId,v.authorUserId,v.toAuthorUserId,v.seq),this._removeAllRemindContent(o)}}}break;case"clearEvent":o.lc.clear(!1,e.data.clearActionId,e.fromID,e.data.toAuthorUserId,e.seq),this._removeAllRemindContent(o);break;case"laserMarkEvent":var y=o.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":y.style.display="block";break;case"hide":y.style.display="none";break;case"move":if(e.data&&e.data.laser){var b=e.data.laser.left,_=e.data.laser.top;y.style.left=b+"%",y.style.top=_+"%"}}}}},{key:"_productionToolDesc",value:function(e,t){return{toolKey:e,disabled:!1}}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)}},{key:"_updateToolDesc",value:function(e,t,o){if(e.registerWhiteboardToolsList[t]){var i=!0,n=!1,a=void 0;try{for(var r,s=Object.entries(o)[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value,d=y(l,2),c=d[0],u=d[1];void 0!==e.registerWhiteboardToolsList[t][c]&&(e.registerWhiteboardToolsList[t][c]=u)}}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}}var h=!0,m=!1,f=void 0;try{for(var p,g=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var v=p.value;/tool_/g.test(v)?e.registerWhiteboardToolsList[v].isUse=v===e.activeTool:/zoom_/g.test(v)&&(e.registerWhiteboardToolsList[v].zoom=e.whiteboardMagnification)}}catch(e){m=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw f}}}},{key:"_batchUpdateToolDesc",value:function(e,t){if(Array.isArray(t)){var o=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;Array.isArray(s)&&this._updateToolDesc(e,s[0],s[1])}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}else L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!")}},{key:"_setWhiteboardTools",value:function(o,e){var i=this;i._automaticTraverseWhiteboardInstance(e,function(e){var t=i._productionToolByCore(o,e);e.lc.setTool(t)})}},{key:"_productionToolByCore",value:function(e,t){var o=void 0;if(void 0===this.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),o;switch(e){case"tool_pencil":case"tool_highlighter":o=new window.LC.tools.Pencil(t.lc);break;case"tool_line":o=new window.LC.tools.Line(t.lc);break;case"tool_arrow":(o=new window.LC.tools.Line(t.lc)).hasEndArrow=!0;break;case"tool_dashed":(o=new window.LC.tools.Line(t.lc)).isDashed=!0;break;case"tool_eraser":o=new window.LC.tools.Eraser(t.lc);break;case"tool_text":o=new window.LC.tools.Text(t.lc);break;case"tool_rectangle":case"tool_rectangle_empty":o=new window.LC.tools.Rectangle(t.lc);break;case"tool_ellipse":case"tool_ellipse_empty":o=new window.LC.tools.Ellipse(t.lc);break;case"tool_polygon":o=new window.LC.tools.Polygon(t.lc);break;case"tool_eyedropper":o=new window.LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":o=new window.LC.tools.SelectShape(t.lc);break;case"tool_mouse":case"tool_laser":o=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),o=t.lc.tool}return o}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this.uniqueWhiteboard||null==e?this.whiteboardInstanceDefaultID:this.whiteboardInstanceIDPrefix+e;e&&"string"==typeof e&&(new RegExp(this.specialWhiteboardInstanceIDPrefix,"g").test(e)&&(t=e));return t}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this._getWhiteboardInstanceID(e);return this.whiteboardInstanceStore[t]}},{key:"_getWhiteboardInstanceByID",value:function(e){return this.whiteboardInstanceStore[e]}},{key:"_resizeWhiteboardByScale",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.watermarkImage,i=t.isChangeCanvas,n=void 0===i||i,a=t.isChangeWatermarkScale,r=void 0===a||a,s=t.watermarkImageScale;s=void 0!==s?s:e.watermarkImageScale;var l=e.lc;if(l){var d=e.whiteboardElement,c=e.whiteboardInstanceElement,u=e.containerWidthAndHeight.width,h=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId){var m=document.getElementById(e.parcelAncestorElementId);m&&(u=m.clientWidth,h=m.clientHeight)}var f={},p={},g=0,v=0,y=0,b=0;if(p.height=(p.width=(p.marginLeft=h*s<u?(g=Math.round(h*s*e.whiteboardMagnification),v=Math.round(h*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&o&&o.width<u&&o.height<h&&(g=o.width,v=o.height),d.style.width=g+"px",d.style.height=v+"px",c.style.width=g+"px",c.style.height=v+"px",void 0!==e.minHeight&&null!==e.minHeight&&(y=e.minHeight*s,b=e.minHeight,d.style.minWidth=y+"px",d.style.minHeight=b+"px",c.style.minWidth=y+"px",c.style.minHeight=b+"px",p.minWidth=y+"px",p.minHegiht=b+"px"),p.top="0%",p.left="50%",p.marginTop="0px",-g/2+"px"):(g=Math.round(u*e.whiteboardMagnification),v=Math.round(u/s*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&o&&o.width<u&&o.height<h&&(g=o.width,v=o.height),d.style.width=g+"px",d.style.height=v+"px",c.style.width=g+"px",c.style.height=v+"px",void 0!==e.minHeight&&null!==e.minHeight&&(y=e.minHeight*s,b=e.minHeight,d.style.minWidth=y+"px",d.style.minHeight=b+"px",c.style.minWidth=y+"px",c.style.minHeight=b+"px",p.minWidth=y+"px",p.minHegiht=b+"px"),p.top="50%",p.left="0%",p.marginTop=-v/2+"px","0px"),g+"px"),v+"px"),n){l.respondToSizeChange();var _=c.clientWidth,w=c.clientHeight,S=(_+w)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*s);if(l.setZoom(S),l.setPan(0,0),r&&o){var k=(_/o.width+w/o.height)/2;"relativeOriginalSize"===e.insertPictureRule&&o&&o.width<u&&o.height<h&&(k=1),l.watermarkScale=k,l.setWatermarkImage(o)}}f.style=p,f.addClassName=1<e.whiteboardMagnification?"custom-scroll-bar":"",f.loadScrollBar=1<e.whiteboardMagnification,e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback?e.handler.resizeWhiteboardSizeCallback(f):f=null}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){var t=this;e?(e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},this._removeAllRemindContent(e),setTimeout(function(){t._resizeWhiteboardHandler(e)},0)):L.Logger.error("[_clear]The whiteboard instance does not exist!")}},{key:"_resizeWhiteboardHandler",value:function(e){if(e&&e.lc){var t=e.lc.watermarkImage;if(t&&t.src){var o=t.width/t.height;this._resizeWhiteboardByScale(e,{watermarkImage:t,watermarkImageScale:o})}else this._resizeWhiteboardByScale(e,{isChangeWatermarkScale:!1});this._updateAllRemindContent(e)}}},{key:"_updateWhiteboardWatermarkImageScale",value:function(e,t){e.watermarkImageScale=t,this._resizeWhiteboardHandler(e)}},{key:"_productionWhiteboardRemindContent",value:function(e,t,o,i,n){var a=this;if(e&&i)try{if(e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords){var r=e.lc.drawingCoordsToClientCoords(t,o);if(r){var s=document.createElement("span");s.className="remind-content",s.style.position="absolute",s.style.left=r.x+"px",s.style.top=r.y+"px",s.innerHTML=i;var l=n?"whiteboard_remind_"+n:"whiteboard_remind_"+(new Date).getTime();s.setAttribute("data-position-x",t),s.setAttribute("data-position-y",o),s.setAttribute("id",l),e.lc.containerEl.parentNode.appendChild(s),setTimeout(function(){a._removeRemindContentByElementId(e,l),s=null},e.remindContentTime)}}}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=0;o<t.length;o++){var i=t[o],n=Number(i.getAttribute("data-position-x")),a=Number(i.getAttribute("data-position-y")),r=e.lc.drawingCoordsToClientCoords(n,a);i.style.left=r.x+"px",i.style.top=r.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){if(e&&e.lc&&e.lc.containerEl.parentNode){var o=document.getElementById(t);o&&(o.innerHTML="",e.lc.containerEl.parentNode.removeChild(o),o=null)}}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=t.length-1;0<=o;o--){var i=t[o];i.innerHTML="",e.lc.containerEl.parentNode.removeChild(i),i=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var o=this._convertCanvasToImageBase64(e,"jpg");t.src=o,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname)}}}},{key:"_destroyWhiteboardInstance",value:function(e){clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),this.basicTemplateWhiteboardSignallingList[e.id]&&(this.basicTemplateWhiteboardSignallingList[e.id]=null,delete this.basicTemplateWhiteboardSignallingList[e.id]),this._clearWhiteboardAllDataByInstance(e);var t=e.whiteboardInstanceID,o=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),o?o.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var i=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;i&&(i.innerHTML="");var n=!0,a=!1,r=void 0;try{for(var s,l=Object.keys(e)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=s.value;e[d]=null,delete e[d]}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}this.whiteboardInstanceStore[t]=null,delete this.whiteboardInstanceStore[t]}},{key:"_clearLc",value:function(e){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).triggerEvent;e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(i,e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.lc;if(t.isTmpDrawAble!==i){t.isTmpDrawAble=i;var o=t.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];t.isTmpDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}})}},{key:"_changeWhiteboardDeawPermission",value:function(i,e){this._automaticTraverseWhiteboardInstance(e,function(e){e.deawPermission=i;var t=e.lc;if(t.isDrawAble!==i){t.isDrawAble=i;var o=t.containerEl.parentNode.getElementsByClassName("draw-permission")[0];t.isDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}})}},{key:"_handlerActiveToolLaser",value:function(e,t){var m=this;m._automaticTraverseWhiteboardInstance(t,function(c){var t=c.lc.containerEl.parentNode,u=t.getElementsByClassName("temporary-draw-permission")[0],h=t.getElementsByClassName("laser-mark")[0];"tool_laser"===e?(p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),c._laserEventHandler_mousemove=function(e){if("tool_laser"!==c.activeTool)return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(u,"mousemove",c._laserEventHandler_mousemove),!1;var t=e.pageX,o=e.pageY,i=u.getBoundingClientRect(),n=void 0,a=void 0,r=u.clientWidth,s=u.clientHeight;switch(c.rotateDeg){case 0:n=t-i.left,a=o-i.top;break;case 90:n=o-i.top,a=s-(t-i.left);break;case 180:n=r-(t-i.left),a=s-(o-i.top);break;case 270:n=r-(o-i.top),a=t-i.left;break;default:n=t-i.left,a=o-i.top}var l=n/r*100,d=a/s*100;return h.style.left=l+"%",h.style.top=d+"%",clearTimeout(c.laserTimer),c.laserTimer=setTimeout(function(){if(c.laserPosition&&(.3<Math.abs(l-c.laserPosition.left)||.3<Math.abs(d-c.laserPosition.top))){var e={laser:{left:l,top:d},action:{actionName:"move"}};c.laserPosition=e.laser,m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",e)}},100),!1},c._laserEventHandler_mouseenter=function(e){return"tool_laser"!==c.activeTool?(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(t,"mouseenter",c._laserEventHandler_mouseenter),!1):(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"show"}}),!(h.style.display="block"))},c._laserEventHandler_mouseleave=function(e){return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none","tool_laser"!==c.activeTool&&p(t,"mouseleave",c._laserEventHandler_mouseleave),!1},m._changeWhiteboardTemporaryDeawPermission(!1,c),c.selectLaserTool=!0,p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),u.className+=" cursor-none",c.laserPosition=c.laserPosition||{left:0,top:0},a(u,"mousemove",c._laserEventHandler_mousemove),a(t,"mouseenter",c._laserEventHandler_mouseenter),a(t,"mouseleave",c._laserEventHandler_mouseleave)):(m._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,c),p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),h.style.display="none",c.selectLaserTool&&(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),c.selectLaserTool=!1))})}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.idPrefix,i=t.data,n=t.name,a=t.assignId,r=t.do_not_save,s=t.expiresabs,l=t.associatedMsgID,d=t.associatedUserID;if(e){if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var c=e.filedata,u=c.currpage,h=c.fileid;if(void 0===u||void 0===h)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+u+","+h+"]!");i&&"string"==typeof i&&(i=JSON.parse(i)),i.whiteboardID=e.id,i.isBaseboard=e.isBaseboard,i.nickname=e.nickname,void 0!==e.dependenceBaseboardWhiteboardID&&(i.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),l=l||e.associatedMsgID,d=d||e.associatedUserID;var m=a||o+"###_"+n+"_"+h+"_"+u,f="__allExceptSender";"shapeSaveEvent"!==i.eventType&&"undoEvent"!==i.eventType&&"redoEvent"!==i.eventType&&"clearEvent"!==i.eventType||(f="__all");var p=Object.deepAssign({},i);"__all"!==f&&this._saveBasicTemplateWhiteboardSignallingData({name:n,id:m,toID:f,data:p,do_not_save:r,expiresabs:s,associatedMsgID:l,associatedUserID:d},"pubmsg"),e.handler.sendSignallingToServer(n,m,f,i,r,s,l,d)}}else L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!")}},{key:"_delSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.idPrefix,i=t.data,n=t.name,a=t.assignId;if(e){if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var r=e.filedata,s=r.currpage,l=r.fileid;if(void 0===s||void 0===l)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+s+","+l+"]!");i.whiteboardID=e.id,i.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(i.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var d=a||o+"###_"+n+"_"+l+"_"+s,c="__allExceptSender";"shapeSaveEvent"!==i.eventType&&"undoEvent"!==i.eventType&&"redoEvent"!==i.eventType&&"clearEvent"!==i.eventType||(c="__all");var u=Object.deepAssign({},i);"__all"!==c&&this._saveBasicTemplateWhiteboardSignallingData({name:n,id:d,toID:c,data:u},"delmsg"),e.handler.delSignallingToServer(n,d,c,i)}}else L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!")}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,o){var i=void 0,n=void 0,a=void 0,r=void 0,s=void 0,l=void 0,d=void 0;switch(t){case"shapeSaveEvent":if(null!=(l=window.LC.shapeToJSON(o.shape))&&null!=l.className&&("LinePath"==l.className||"ErasedLinePath"==l.className))l.data.smoothedPointCoordinatePairs=null,delete l.data.smoothedPointCoordinatePairs,l.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])});d={eventType:t,actionName:o.action.actionName,shapeId:o.shapeId,data:l},i=o.shapeId,n=d,a="SharpsChange",s=r=void 0,this._sendSignallingToServer(e,{idPrefix:i,data:n,name:a,assignId:r,do_not_save:s});break;case"undoEvent":if("AddShapeAction"===o.action.actionName){var c=o.action.shapeId;i=c,n=d={eventType:t,actionName:o.action.actionName,shapeId:c},a="SharpsChange",r=void 0,this._delSignallingToServer(e,{idPrefix:i,data:n,name:a,assignId:r})}else if("ClearAction"===o.action.actionName){var u=o.action.id;i=u,n=d={eventType:t,actionName:o.action.actionName,clearActionId:u},a="SharpsChange",r=void 0,this._delSignallingToServer(e,{idPrefix:i,data:n,name:a,assignId:r})}break;case"redoEvent":if("AddShapeAction"===o.action.actionName){if(null!=(l=window.LC.shapeToJSON(o.action.shape))&&null!=l.className&&("LinePath"==l.className||"ErasedLinePath"==l.className))l.data.smoothedPointCoordinatePairs=null,delete l.data.smoothedPointCoordinatePairs,l.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])});var h=o.action.shapeId,m={authorUserId:o.action.authorUserId,seq:o.action.seq},f=h,p=d={eventType:t,actionName:o.action.actionName,shapeId:h,data:l,otherInfo:m};this._sendSignallingToServer(e,{idPrefix:f,data:p,name:"SharpsChange",assignId:void 0,do_not_save:void 0})}else if("ClearAction"===o.action.actionName){var g=o.action.id,v={authorUserId:o.action.authorUserId,seq:o.action.seq,toAuthorUserId:o.action.toAuthorUserId};i=g,n=d={eventType:t,actionName:o.action.actionName,clearActionId:g,otherInfo:v},a="SharpsChange",s=r=void 0,this._sendSignallingToServer(e,{idPrefix:i,data:n,name:a,assignId:r,do_not_save:s})}break;case"clearEvent":var y=o.clearActionId;i=y,n=d={eventType:t,actionName:o.action.actionName,clearActionId:y},a="SharpsChange",s=r=void 0,e&&e.isOnlyUndoRedoClearMyselfShape&&e.myselfId&&(d.toAuthorUserId=e.myselfId),this._sendSignallingToServer(e,{idPrefix:i,data:n,name:a,assignId:r,do_not_save:s});break;case"laserMarkEvent":d={eventType:t,actionName:o.action.actionName},o&&o.laser&&(d.laser=o.laser),i="laserMarkEvent",n=d,a="SharpsChange",s=!(r=void 0),this._sendSignallingToServer(e,{idPrefix:i,data:n,name:a,assignId:r,do_not_save:s})}}},{key:"_updateTextFont",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.fontSize,o=e.whiteboardToolsInfo.fontFamily,i=e.whiteboardToolsInfo.fontStyle,n=e.whiteboardToolsInfo.fontWeight,a=e.lc.tool;"Text"===a.name&&(a.font=i+" "+n+" "+t+"px "+o)})}},{key:"_updateEraserWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updatePencilWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateShapeWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateColor",value:function(e,l){if(l&&"object"===(void 0===l?"undefined":f(l))){this._automaticTraverseWhiteboardInstance(e,function(e){var t=!0,o=!1,i=void 0;try{for(var n,a=Object.keys(l)[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value.replace(/Color/g,"");if(e.lc.setColor(r,e.whiteboardToolsInfo[r+"Color"]),"primary"!==r&&"secondary"!==r||"tool_rectangle"!==e.activeTool&&"tool_rectangle_empty"!==e.activeTool&&"tool_ellipse"!==e.activeTool&&"tool_ellipse_empty"!==e.activeTool&&"tool_polygon"!==e.activeTool||("tool_ellipse_empty"===e.activeTool||"tool_rectangle_empty"===e.activeTool?e.lc.setColor("secondary","transparent"):e.lc.setColor("secondary",e.whiteboardToolsInfo.primaryColor)),"primary"===r&&"tool_highlighter"===e.activeTool){var s=e.whiteboardToolsInfo[r+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(r,s)}}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}})}}},{key:"_actionIsDisable",value:function(e){var i=this;i._automaticTraverseWhiteboardInstance(e,function(e){if(e.active){if(0===e.lc.shapes.length)i._batchUpdateToolDesc(e,[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]]),i._noticeUpdateToolDesc(e);else{var t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];if(e.isOnlyUndoRedoClearMyselfShape&&e.myselfId){t=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];for(var o=0;o<e.lc.shapes.length;o++)if(e.lc.shapes[o].authorUserId==e.myselfId){t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];break}}i._batchUpdateToolDesc(e,t),i._noticeUpdateToolDesc(e)}e.lc.canRedo()?i._updateToolDesc(e,"action_redo",{disabled:!1}):i._updateToolDesc(e,"action_redo",{disabled:!0}),i._noticeUpdateToolDesc(e),e.lc.canUndo()?i._updateToolDesc(e,"action_undo",{disabled:!1}):i._updateToolDesc(e,"action_undo",{disabled:!0}),i._noticeUpdateToolDesc(e)}})}},{key:"_zoomIsDisable",value:function(e){var t=this;t._automaticTraverseWhiteboardInstance(e,function(e){e.active&&(e.whiteboardMagnification<=t.minMagnification?t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]]):t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]]),t._noticeUpdateToolDesc(e),e.whiteboardMagnification>=t.maxMagnification?t._updateToolDesc(e,"zoom_big",{disabled:!0}):t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))})}},{key:"_toolIsUse",value:function(e){var t=!0,o=!1,i=void 0;try{for(var n,a=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;/tool_/g.test(r)?e.registerWhiteboardToolsList[r].isUse=r===e.activeTool:/zoom_/g.test(r)&&(e.registerWhiteboardToolsList[r].zoom=e.whiteboardMagnification)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}this._noticeUpdateToolDesc(e)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){if(e)t&&"function"==typeof t&&t(e);else{var o=!0,i=!1,n=void 0;try{for(var a,r=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;t&&"function"==typeof t&&t(s)}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,o=0;o<this.awaitSaveToWhiteboardInstanceSignallingArray.length;o++){var i=this.awaitSaveToWhiteboardInstanceSignallingArray[o];if(i.data&&"string"==typeof i.data&&(i.data=JSON.parse(i.data)),i.data.whiteboardID===e.id){var n=i.id.substring(i.id.lastIndexOf("###_")+4);if(n){var a=n.split("_");n=a[0]+"_"+a[1]+"_"+a[2],e.waitingProcessShapeData[n]||(e.waitingProcessShapeData[n]=[]),e.waitingProcessShapeData[n].push(i),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(o,1,null)}}}if(t)for(var r=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;0<=r;r--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[r]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(r,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"png";if(e&&e.lc&&e.lc.canvas){var o=e.lc.canvas,i=new Image;return i.src=o.toDataURL("image/"+t),i}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas)return e.lc.canvas.toDataURL("image/"+t)}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var o=void 0,i=void 0,n=void 0;if("pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType)if("LinePath"==t.data.data.className){var a=t.data.data.points.length;0<a&&(o=t.data.data.points[a-1].x,i=t.data.data.points[a-1].y,n=t.remindContent),this._productionWhiteboardRemindContent(e,o,i,n,t.data.shapeId)}else"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(0<t.data.data.width&&0<t.data.data.height?(o=t.data.data.x+t.data.data.width,i=t.data.data.y):0<t.data.data.width&&t.data.data.height<0?(o=t.data.data.x+t.data.data.width,i=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(o=t.data.data.x,i=t.data.data.y+t.data.data.height):t.data.data.width<0&&0<t.data.data.height&&(o=t.data.data.x,i=t.data.data.y),n=t.remindContent,this._productionWhiteboardRemindContent(e,o,i,n,t.data.shapeId)):"Text"==t.data.data.className?(o=t.data.data.x+t.data.data.renderer.metrics.width,i=t.data.data.y+20*t.data.data.renderer.metricses.length,n=t.remindContent,this._productionWhiteboardRemindContent(e,o,i,n,t.data.shapeId)):"Line"==t.data.data.className&&(o=t.data.data.x2,i=t.data.data.y2,n=t.remindContent,this._productionWhiteboardRemindContent(e,o,i,n,t.data.shapeId))}},{key:"_noticeNpdateWhiteboardToolsInfo",value:function(e){e.handler&&"function"==typeof e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardToolsInfo",{id:e.id,whiteboardToolsInfo:Object.deepAssign({},e.whiteboardToolsInfo)})}}]),e}());o.default=r},{}],331:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i={};i.commonWhiteboard={webAddress:/http:/.test(window.location.protocol)?"http://global.talk-cloud.net:80":"https://global.talk-cloud.net:443",docAddress:/http:/.test(window.location.protocol)?"http://global.talk-cloud.net:80":"https://global.talk-cloud.net:443",backupDocAddressList:[],myUserId:void 0,myRole:void 0,myName:void 0,isConnectedRoom:!1,isPlayback:!1,deviceType:void 0,clientType:void 0},i.defaultWhiteboard={isBackEvent:!0,hasExtendDocument:!1,showpageNotice:!1,loadDynamicPptView:!0,loadH5DocumentView:!0,isMobile:!1,mediaShareToID:void 0,associatedMsgID:void 0,associatedUserID:void 0,clientMediaShare:!1,mediaSharePauseWhenOver:!1,isLoadAudioPlayer:!0,isLoadVideoPlayer:!0,isLoadDocumentRemark:!0,canRemark:!1,secondaryColor:"#ffffff",initWhiteboardProductionOptions:{},documentToolBarConfig:{parentNode:void 0,isDrag:!0,isLoadFullScreen:!0,isLoadRemark:!1,isLoadVolume:!1,initDragPosition:{left:50,top:98},fullScreenElementId:void 0},documentRemarkConfig:{parentNode:void 0,isDrag:!0,initDragPosition:{left:50,top:98}},whiteboardToolBarConfig:{parentNode:void 0,isDrag:!0,pencilWidthScale:1,eraserWidthScale:2,initDragPosition:{left:2,top:2},loadWhiteboardTools:{mouse:!0,laser:!0,pen:!0,text:!0,shape:!0,eraser:!0,clear:!0,undo:!0,redo:!0,setting:!0}},isShowReloadFileTip:!0,pptVolumeSynchronization:!1,insertPictureRule:"default",languageType:"ch",rootBackgroundColor:"transparent",primaryColor:"#000000",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",showShapeAuthor:!1,synchronization:!0,isOnlyUndoRedoClearMyselfShape:!1,canDraw:!0,canPage:!0,addPage:!0,actionClick:!0,defaultWhiteboardScale:16/9,isUseKeyboardPage:!0,isLoadDocumentToolBar:!0,isLoadWhiteboardToolBar:!0,isDisconnectedClearWhiteboardData:!1,audioPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}},videoPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}}},o.default=i},{}],332:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),window.WhiteboardGlobalShare=window.WhiteboardGlobalShare||{};var i={WHITEBOARD_SDK_VERSION:"v2.1.0",WHITEBOARD_SDK_TIME:"2018102313",dynamicPptVersions:2017091401,remoteDynamicPptUpdateTime:2018042223,dynamicPptDebugLog:!1};console.info("[whiteboard-sdk]whiteboard sdk version is "+i.WHITEBOARD_SDK_VERSION+" , update time is "+i.WHITEBOARD_SDK_TIME),o.default=i},{}],333:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}();var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"createElement",value:function(e,t,o,i,n){var a=document.createElement(e);if(void 0!==t&&a.setAttribute("id",t),void 0!==o&&(a.className=o),i&&"object"===(void 0===i?"undefined":P(i))){var r=!0,s=!1,l=void 0;try{for(var d,c=Object.entries(i)[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value,h=I(u,2),m=h[0],f=h[1];a.style[m]=f}}catch(e){s=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}}if(n&&"object"===(void 0===n?"undefined":P(n))){var p=!0,g=!1,v=void 0;try{for(var y,b=Object.entries(n)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var _=y.value,w=I(_,2),S=w[0],k=w[1];a.setAttribute(S,k)}}catch(e){g=!0,v=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw v}}}return a}},{key:"appendChild",value:function(e,t){try{e&&t&&e.appendChild&&e.appendChild(t)}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.appendChild error ",e)}}},{key:"removeChild",value:function(e,t){try{e&&(t&&t.removeChild?t.removeChild(e):e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e))}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.removeChild error ",e)}}},{key:"removeAllChild",value:function(e){e&&(e.innerHTML="")}},{key:"hasClass",value:function(e,t){return!(!e||"string"!=typeof t)&&(new RegExp(" "+t+" ").test(e.className)||new RegExp(" "+t).test(e.className)||new RegExp(t+" ").test(e.className))}},{key:"resetClass",value:function(e,t){e&&"string"==typeof t&&(e.className=" "+t)}},{key:"addClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),"")+" "+t:e.className=" "+t;else if(Array.isArray(t)){var o=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;e.className?e.className=e.className.replace(new RegExp(" "+s,"g"),"").replace(new RegExp(s+" ","g"),"")+" "+s:e.className=" "}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}}},{key:"removeClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),""):e.className=" ";else if(Array.isArray(t)){var o=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;e.className?e.className=e.className.replace(new RegExp(" "+s,"g"),"").replace(new RegExp(s+" ","g"),""):e.className=" "}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}}},{key:"updateStyle",value:function(e,t){if(e&&t&&"object"===(void 0===t?"undefined":P(t))){var o=!0,i=!1,n=void 0;try{for(var a,r=Object.entries(t)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=I(s,2),d=l[0],c=l[1];e.style[d]=c}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}}}},{key:"show",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,i=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;this.updateStyle(r,{display:""})}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}}else this.updateStyle(e,{display:""})}},{key:"hide",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,i=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;this.updateStyle(r,{display:"none"})}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}}else this.updateStyle(e,{display:"none"})}}]),e}();o.default=new n},{}],334:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i,n=e("./Utils"),a=(i=n)&&i.__esModule?i:{default:i};var r={newpptVersions:2017091401,remoteNewpptUpdateTime:2018032113,isSkipPageing:!1,isPlayVideoing:!1};r.allDocumentRemarkInfoMap=new Map,r.docAddress=/http:/.test(window.location.protocol)?"http://global.talk-cloud.net:80":"https://global.talk-cloud.net:443",r.laterAddressList=[],r.backupDocAddressList=[],r.docAddressList=[],r.hasGetDocAddressIndexByLocalStorage=!1,r.docAddressKey="",r.localStorageDocAddressKey="",r.nowUseDocAddress=a.default.getItem(r.docAddressList,r.docAddressKey),r.showPageFromId=void 0,r.extendShowPageFromId=void 0,r.protocol="",r.port="",window.WBGlobal=r,o.default=r},{"./Utils":338}],335:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i=new Map;i.set("ch",{documentToolbar:{prevPage:"上一页",nextPage:"下一页",prevStep:"上一页",nextStep:"下一页",addPage:"加页",enlargeWhiteboard:"放大",narrowWhiteboard:"缩小",pptVolume:"音量",onRemark:"打开备注",offRemark:"关闭备注",onGeneralDocumentFullScreen:"绘制区域全屏",offGeneralDocumentFullScreen:"绘制区域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5课件全屏",offH5DocumentFullScreen:"H5课件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字样式",options:{Msyh:"微软雅黑",Ming:"宋体",Arial:"Arial"}},fontSizeText:"号",pencilWidthTitle:"线条宽度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠标",tool_laser:"激光笔",penList:"笔",tool_pencil:"铅笔",tool_highlighter:"荧光笔",tool_line:"线条",tool_arrow:"箭头",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心椭圆",tool_ellipse:"椭圆",tool_eraser:"橡皮檫",action_undo:"撤销",action_redo:"恢复",action_clear:"清屏",settingList:"更多设置"}},documentRemark:{name:"备注",closeTitle:"关闭备注"}}),i.set("tw",{documentToolbar:{prevPage:"上壹頁",nextPage:"下壹頁",prevStep:"上壹頁",nextStep:"下壹頁",addPage:"加頁",enlargeWhiteboard:"放大",narrowWhiteboard:"縮小",pptVolume:"音量",onRemark:"打開備註",offRemark:"關閉備註",onGeneralDocumentFullScreen:"繪制區域全屏",offGeneralDocumentFullScreen:"繪制區域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5課件全屏",offH5DocumentFullScreen:"H5課件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字樣式",options:{Msyh:"微軟雅黑",Ming:"宋體",Arial:"Arial"}},fontSizeText:"號",pencilWidthTitle:"線條寬度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠標",tool_laser:"激光筆",penList:"筆",tool_pencil:"鉛筆",tool_highlighter:"熒光筆",tool_line:"線條",tool_arrow:"箭頭",tool_text:"文字",shapeList:"形狀",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心橢圓",tool_ellipse:"橢圓",tool_eraser:"橡皮檫",action_undo:"撤銷",action_redo:"恢復",action_clear:"清屏",settingList:"更多設置"}},documentRemark:{name:"備註",closeTitle:"關閉備註"}}),i.set("en",{documentToolbar:{prevPage:"Previous Page",nextPage:"Next Page",prevStep:"Previous Page",nextStep:"Next Page",addPage:"Add Page",enlargeWhiteboard:"Zoom In",narrowWhiteboard:"Zoom Out",pptVolume:"Volume",onRemark:"Open Courseware Remarks",offRemark:"Close Courseware Remarks",onGeneralDocumentFullScreen:"Full Screen of Drawing Area",offGeneralDocumentFullScreen:"Cancel Full Screen of Drawing Area",onDynamicPPTFullScreen:"Full Screen  of PPT",offDynamicPPTFullScreen:"Cancel Full Screen  of PPT",onH5DocumentFullScreen:"Full Screen  of Courseware",offH5DocumentFullScreen:"Cancel Full Screen  of Courseware"},whiteboardToolbar:{fontFamily:{title:"Font Format",options:{Msyh:"Microsoft YaHei",Ming:"SimSun",Arial:"Arial"}},fontSizeText:"Font",pencilWidthTitle:"Line Width",eraserWidthTitle:"Eraser Size",toolTextList:{tool_mouse:"Mouse",tool_laser:"Laser Pen",penList:"Pen",tool_pencil:"Pencil",tool_highlighter:"Highlighter",tool_line:"Line",tool_arrow:"Arrow",tool_text:"Text Input",shapeList:"Shape",tool_rectangle_empty:"Square",tool_rectangle:"Solid Square",tool_ellipse_empty:"Circle",tool_ellipse:"Solid Circle",tool_eraser:"Eraser",action_undo:"Undo",action_redo:"Recover",action_clear:"Clear Screen",settingList:"More"}},documentRemark:{name:"Courseware Remarks",closeTitle:"Close Courseware Remarks"}}),i.set("ja",{documentToolbar:{prevPage:"前のページ",nextPage:"次のページ",prevStep:"前のページ",nextStep:"次のページ",addPage:"ページを追加する",enlargeWhiteboard:"拡大",narrowWhiteboard:"縮小",pptVolume:"ボリューム",onRemark:"備考を開く",offRemark:"備考を閉じる",onGeneralDocumentFullScreen:"描画領域全画面",offGeneralDocumentFullScreen:"手書き部分全画面表示の終了",onDynamicPPTFullScreen:"PPT全画面",offDynamicPPTFullScreen:"PPT全画面表示の終了",onH5DocumentFullScreen:"h5教材全画面",offH5DocumentFullScreen:"H5教材全画面の終了"},whiteboardToolbar:{fontFamily:{title:"フォント様式",options:{Msyh:"Microsoft　Yahei",Ming:"宋体",Arial:"Arial"}},fontSizeText:"番号",pencilWidthTitle:"線の太さ",eraserWidthTitle:"消しゴムの大きさ",toolTextList:{tool_mouse:"マウス",tool_laser:"レーザーペン",penList:"鉛筆",tool_pencil:"鉛筆",tool_highlighter:"蛍光ペン",tool_line:"線",tool_arrow:"矢印",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"長方形（塗りつぶしなし）",tool_rectangle:"長方形",tool_ellipse_empty:"楕円（塗りつぶしなし）",tool_ellipse:"楕円",tool_eraser:"消しゴム",action_undo:"キャンセル",action_redo:"元に戻す",action_clear:"クリア",settingList:"詳細設定"}},documentRemark:{name:"備考",closeTitle:"关闭备注"}}),o.default=i},{}],336:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("./Utils"),r=(i=a)&&i.__esModule?i:{default:i};var s=window.Log||{error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},warning:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",i=0;i<e.length;i++)o+="object"===n(e[i])?r.default.toJsonStringify(e[i]):e[i];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.debug.apply(console,e)}};window.Log=s,o.default=s},{"./Utils":338}],337:[function(e,t,o){var i,n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=void 0,n=function(){function n(e){return e||null}function a(e,t,o,i){var n,a,r=["then","catch","always"].reduce(function(t,o){return t[o]=function(e){return t[o]=e,t},t},{}),s=new XMLHttpRequest,l=function(e,t,o){if("get"!==o.toLowerCase()||!t)return e;var i=c(t),n=-1<e.indexOf("?")?"&":"?";return e+n+i}(t,o,e);return s.open(e,l,!0),s.withCredentials=i.hasOwnProperty("withCredentials"),function(t,o){e=o=o||{},Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})||(o["Content-Type"]="application/x-www-form-urlencoded");var e;Object.keys(o).forEach(function(e){o[e]&&t.setRequestHeader(e,o[e])})}(s,i.headers),s.addEventListener("readystatechange",(n=r,a=s,function e(){a.readyState===a.DONE&&(a.removeEventListener("readystatechange",e,!1),n.always.apply(n,d(a)),200<=a.status&&a.status<300?n.then.apply(n,d(a)):n.catch.apply(n,d(a)))}),!1),s.send(c(o)),r.abort=function(){return s.abort()},r}function d(t){var o;try{o=JSON.parse(t.responseText)}catch(e){o=t.responseText}return[o,t]}function c(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)?(i=e,Object.keys(i).reduce(function(e,t){var o=e?e+"&":"";return o+r(t)+"="+r(i[t])},"")):e;var i,t}function r(e){return encodeURIComponent(e)}return function(i){return(i=i||{}).baseUrl=i.baseUrl||"",i.method&&i.url?a(i.method,i.baseUrl+i.url,n(i.data),i):["get","post","put","delete"].reduce(function(e,o){return e[o]=function(e,t){return a(o,i.baseUrl+e,n(t),i)},e},{})}},"function"==typeof define&&define.amd?define("ajax",n):"object"===(void 0===o?"undefined":a(o))?o=t.exports=n():i.ajax=n()},{}],338:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e){return"object"===(void 0===e?"undefined":f(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length};if(!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var n=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){for(var o=t,i=1;i<arguments.length;i++){var n=arguments[i];if(n&&"object"===(void 0===n?"undefined":f(n)))for(var a in n)o[a]=n[a]}return t}};Object&&Object.shallowAssign||(Object.shallowAssign=n),Object&&Object.customAssign||(Object.customAssign=n)}Object&&Object.deepAssign||(Object.deepAssign=function(e){for(var t=e,o=1;o<arguments.length;o++){var i=arguments[o];if(i&&"object"===(void 0===i?"undefined":f(i)))for(var n in i)void 0===t[n]?"object"===f(i[n])&&(Array.isArray(i[n])||a(i[n]))?t[n]=Object.deepAssign(Array.isArray(i[n])?[]:{},i[n]):t[n]=i[n]:"object"===f(i[n])&&(Array.isArray(i[n])||a(i[n]))?t[n]=Object.deepAssign(Array.isArray(i[n])?[]:{},"object"===f(t[n])?t[n]:Array.isArray(i[n])?[]:{},i[n]):t[n]=i[n]}return e});var p=!1;try{var r=Object.defineProperty({},"passive",{get:function(){p={passive:!0}}});window.addEventListener("test",null,r)}catch(e){console.error("[whiteboarrd-sdk]passiveEvents err:",e)}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"addEvent",value:function(t,o,e){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];try{t.addEventListener?t.addEventListener(o,e,i):t.attachEvent?t.attachEvent("on"+o,e):t["on"+o]=e}catch(e){L.Logger.error("add dom event fail , event type is "+o+" , element:",t)}}},{key:"removeEvent",value:function(t,o,e,i){try{t.addEventListener?t.removeEventListener(o,e,i):t.attachEvent?t.detachEvent("on"+o,e):t["on"+o]=null}catch(e){L.Logger.error("remove dom event fail , event type is "+o+" , element:",t)}}},{key:"isEmptyJson",value:function(e){return 0===Object.keys(e).length}},{key:"isFullScreenStatus",value:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1}},{key:"launchFullscreen",value:function(e){e&&(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},{key:"exitFullscreen",value:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()}},{key:"getFullscreenElement",value:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}},{key:"addFullscreenchange",value:function(e){this.addEvent(document,"fullscreenchange",e,!1),this.addEvent(document,"webkitfullscreenchange",e,!1),this.addEvent(document,"mozfullscreenchange",e,!1),this.addEvent(document,"MSFullscreenChange",e,!1),this.addEvent(document,"msfullscreenchange",e,!1),this.addEvent(document,"fullscreeneventchange",e,!1)}},{key:"removeFullscreenchange",value:function(e){this.removeEvent(document,"fullscreenchange",e,!1),this.removeEvent(document,"webkitfullscreenchange",e,!1),this.removeEvent(document,"mozfullscreenchange",e,!1),this.removeEvent(document,"MSFullscreenChange",e,!1),this.removeEvent(document,"msfullscreenchange",e,!1),this.removeEvent(document,"fullscreeneventchange",e,!1)}},{key:"shallowCompareJson",value:function(e,t){return e===t}},{key:"deepCompareJson",value:function(e,t){if("object"!==(void 0===e?"undefined":f(e))||Array.isArray(e)||"object"!==(void 0===e?"undefined":f(e))||Array.isArray(e))return L.Logger.warning("deepCompareJson arguments must is json!"),e===t;var o=Object.deepAssign({},t),i=!0,n=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(e)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=s.value,c=m(d,2),u=c[0],h=c[1];if(!o.hasOwnProperty(u)){i=!1;break}if(h!==o[u]){i=!1,delete o[u];break}delete o[u]}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return i&&!Object.keys(o).length}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isJson",value:function(e){return"object"===(void 0===e?"undefined":f(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}},{key:"setLocalStorageItem",value:function(e,t){try{window.localStorage?window.localStorage.setItem?window.localStorage.setItem(e,t):L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.setItem , key is "+e+" , value is "+t+"!"):this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!"))}catch(e){this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e))}}},{key:"getLocalStorageItem",value:function(e){try{return window.localStorage?window.localStorage.getItem?window.localStorage.getItem(e):(L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.getItem , key is "+e+" !"),""):(this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!")),"")}catch(e){return this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e)),""}}},{key:"toJsonStringify",value:function(e){if(!e)return e;try{if(!a(e))return e;var t=JSON.stringify(e);t&&(e=t)}catch(e){}return e}},{key:"toJsonParse",value:function(e){if(!e)return e;try{if("string"!=typeof e)return e;var t=JSON.parse(e);t&&(e=t)}catch(e){}return e}},{key:"getPcSDKVersion",value:function(){return TK&&TK.getSdkVersion&&TK.getSdkVersion()?Number(TK.getSdkVersion().replace(/./g,"").replace(/v/g,"")):0}},{key:"getItem",value:function(o,i,e){var t,n,a,r=void 0,s=void 0;if(Array.isArray(o))return r=o.find(function(e,t){return s=t+1===o.length?-1:t,e.hostname===i}),e?s&&!isNaN(s)&&o[s+1]?o[s+1].hostname:"":r&&r.protocol&&r.hostname&&r.port?(t=r.protocol,n=r.hostname,a=r.port,t+"://"+n+":"+a):""}},{key:"onElementResize",value:function(e,t){try{if(!(e instanceof HTMLElement))throw new TypeError("Parameter 1 is not instance of 'HTMLElement'.");if(/^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr|script|style|textarea|title)$/i.test(e.tagName))throw new TypeError("Unsupported tag type. Change the tag or wrap it in a supported tag(e.g. div).");if("function"!=typeof t)throw new TypeError("Parameter 2 is not of type 'function'.");var o=e.offsetWidth||1,i=e.offsetHeight||1,n=1e4*o,a=1e4*i,r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;z-index=-10000;overflow:hidden;visibility:hidden;";var s=r.cloneNode(!1),l=document.createElement("div");l.style.cssText="transition:0s;animation:none;";var d=l.cloneNode(!1);l.style.width=n+"px",l.style.height=a+"px",d.style.width="250%",d.style.height="250%",r.appendChild(l),s.appendChild(d),e.appendChild(r),e.appendChild(s),r.offsetParent!==e&&(e.style.position="relative"),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=n;var c=0,u=0,h=function(){c===o&&u===i||(o=c,i=u,t())},m=function(){c=e.offsetWidth||1,u=e.offsetHeight||1,c===o&&u===i||requestAnimationFrame(h),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=n};r.addEventListener("scroll",m,p),s.addEventListener("scroll",m,p)}catch(e){L.Logger.error("[whiteboarrd-sdk]onElementResize err:",e)}}}]),e}();o.default=new s},{}],339:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),e("babel-polyfill"),e("./utils/Log");var i,n=e("./TKWhiteBoardManager"),a=(i=n)&&i.__esModule?i:{default:i};o.default=a.default},{"./TKWhiteBoardManager":327,"./utils/Log":336,"babel-polyfill":1}],340:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),n=a(e("../components/TalkcloudReact")),f=a(e("../../utils/DomUtils")),s=a(e("../../utils/Utils"));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i));return n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.elements={},n.videoDumb=void 0,n._createElements(),n._connectElements(),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n.default),i(a,[{key:"shouldComponentUpdateProps",value:function(e){if(e.streamInfo!==this.props.streamInfo&&e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes){var t=!1,o=!0,i=!1,n=void 0;try{for(var a,r=Object.entries(this.props.streamInfo.attributes)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=u(s,2),d=l[0],c=l[1];if("position"!==d&&c!==e.streamInfo.attributes[d]){t=!0;break}}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}if(e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateProps",value:function(e){var t=this;if(e.streamInfo!==this.props.streamInfo){var o=void 0===e.streamInfo&&this.props.streamInfo,i=!this.props.streamInfo,n=e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes&&e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position;if(o||i||n){var a=(new Date).getTime();!this.updateTime||500<a-this.updateTime?(this.updateTime=a,clearTimeout(this._updateProgressTimer),this._updateProgress()):(clearTimeout(this._updateProgressTimer),this._updateProgressTimer=setTimeout(function(){a=(new Date).getTime(),t.updateTime=a,t._updateProgress()},750))}}e.volume!==this.props.volume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.volume)),e.muteVolume!==this.props.muteVolume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.muteVolume?0:this.props.volume)),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?f.default.addClass(this.elements.mediaTotalControlElement,"tk-playback"):f.default.removeClass(this.elements.mediaTotalControlElement,"tk-playback")),(e.myUserId!==this.props.myUserId||e.streamInfo!==this.props.streamInfo&&!e.streamInfo&&this.props.streamInfo)&&this._updateControlByPermissions(),s.default.deepCompareJson(e.controlPermissions,this.props.controlPermissions)&&this._updateControlByPermissions()}},{key:"destroyView",value:function(){for(var e in f.default.removeChild(this.elements.mediaTotalControlElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"playOrPauseClick",value:function(){"function"==typeof this.props.onPlayOrPauseClick&&this.props.onPlayOrPauseClick()}},{key:"closeClick",value:function(){"function"==typeof this.props.onCloseClick&&this.props.onCloseClick()}},{key:"fullScreenClick",value:function(){"function"==typeof this.props.onFullScreenClick&&this.props.onFullScreenClick()}},{key:"volumeMuteClick",value:function(){"function"==typeof this.props.onVolumeMuteClick&&this.props.onVolumeMuteClick()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),o=Math.round(e%60);return 60===o&&(t+=1,o=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(o/10)&&(o="0"+o),t+":"+o}},{key:"_createElements",value:function(){this.elements.mediaTotalControlElement=f.default.createElement("article",this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"TalkMediaPlayerTotalControl","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control "+(this.props.isVideoPlayer?"video-player-control-container ":"audio-player-control-container ")+(this.props.isPlayback?"tk-playback ":" "))}},{key:"_connectElements",value:function(){var t=this;f.default.appendChild(this.parentNode,this.elements.mediaTotalControlElement);var e=(this.props.streamInfo||{}).attributes,o=void 0===e?{}:e,i=o.filename,n=void 0===i?"":i,a=o.position,r=void 0===a?0:a,s=o.duration,l=void 0===s?0:s,d=o.pause;this.elements.mediaTotalControlElement&&(this.elements.mediaTotalControlElement.innerHTML=' \n                <article class="media-player-box clear-float " >\n                    <span class="media-player-icon add-fl" ></span>\n                    <div class="media-player-control-container add-fl clear-float"> \n                        <button  class="play-pause-btn add-cursor-pointer add-fl '+(d?"play":"pause")+'"  ></button>\n                        <div class="media-player-info-container add-fl"> \n                            <div class="media-player-name-time-container clear-float"> \n                                <span class="media-player-name add-fl add-nowrap" >'+n+'</span>\n                                <span class="media-player-time-container add-fr" > \n                                    <em class="curr-time" >'+this._formatTime(r/1e3)+'</em> / <em class="total-time" >'+this._formatTime(l/1e3)+'</em>\n                                </span>\n                            </div>\n                            <div class="media-player-progress-container" id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerProgressBar" >                              \n                            </div>\n                        </div>\n                        <div class="volume-info-container add-fl clear-float" > \n                            <button  class="volume-icon add-cursor-pointer add-fl" ></button>\n                            <div class="volume-bar-container add-fl"  id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerVolumeBar" ></div>\n                        </div>\n                        <button  class="close-btn add-cursor-pointer add-fl" ></button>\n                        <button  class="full-screen-btn add-cursor-pointer add-fl" ></button>\n                    </div>\n                </article> \n            ',this.elements.playPauseBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("play-pause-btn")[0],this.elements.volumeMuteBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("volume-icon")[0],this.elements.closeBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("close-btn")[0],this.elements.fullScreenBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("full-screen-btn")[0],this.elements.filenameElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-name")[0],this.elements.currTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("curr-time")[0],this.elements.totalTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("total-time")[0],this.elements.mediaPlayerProgressElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-progress-container")[0],this.elements.playPauseBtnElement.onclick=this.playOrPauseClick.bind(this),this.elements.volumeMuteBtnElement.onclick=this.volumeMuteClick.bind(this),this.elements.closeBtnElement.onclick=this.closeClick.bind(this),this.elements.fullScreenBtnElement.onclick=this.fullScreenClick.bind(this),window.TalkSlider&&(this.progressSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerProgressBar",direction:"horizontal"},onBeforeChange:function(e){t.mediaPlayerProgressSlidering=!0},onAfterChange:function(e){t.mediaPlayerProgressSlidering=!1,"function"==typeof t.props.onChangeProgress&&t.props.onChangeProgress(e),t._updateProgress(),t.tempStopUpdatePosition=!0,setTimeout(function(){t.tempStopUpdatePosition=!1},500)}}),this.volumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerVolumeBar",direction:"horizontal"},onAfterChange:function(e){"function"==typeof t.props.onChangeVolume&&t.props.onChangeVolume(e)}})),this._updateControlByPermissions())}},{key:"_updateControlByPermissions",value:function(){var e=!1,t=this.props.streamInfo||{},o=t.streamType,i=t.userid;"file"===o&&i!=this.props.myUserId&&(e=!0),f.default.updateStyle(this.elements.playPauseBtnElement,{display:!this.props.controlPermissions.hasPlayOrPause||e?"none":""}),this.elements.playPauseBtnElement.disabled=!this.props.controlPermissions.hasPlayOrPause||e,f.default.updateStyle(this.elements.closeBtnElement,{display:this.props.controlPermissions.hasClose?"":"none"}),this.elements.closeBtnElement.disabled=!this.props.controlPermissions.hasClose,this.progressSlider&&s.default.isFunction(this.progressSlider.updateDisabled)&&this.progressSlider.updateDisabled(!this.props.controlPermissions.hasChangeProgress||e),!this.props.controlPermissions.hasChangeProgress||e?f.default.addClass(this.elements.mediaPlayerProgressElement,"disabled"):f.default.removeClass(this.elements.mediaPlayerProgressElement,"disabled")}},{key:"_updateProgress",value:function(){if(this.props.streamInfo&&!this.mediaPlayerProgressSlidering&&!this.tempStopUpdatePosition&&this.progressSlider&&"function"==typeof this.progressSlider.setProgress){var e=0,t=this.props.streamInfo&&this.props.streamInfo.attributes?this.props.streamInfo.attributes:{},o=t.position,i=void 0===o?0:o,n=t.duration,a=void 0===n?0:n;0!==a&&(e=i/a*100,isNaN(e)&&(e=0)),e<0?e=0:100<e&&(e=100),this.elements.currTimeElement.innerHTML=this._formatTime(i/1e3),this.progressSlider.setProgress(e)}}},{key:"render",value:function(){var e=this.props,t=e.streamInfo,o=void 0===t?{}:t,i=e.muteVolume,n=e.isFullScreen,a=o.attributes,r=void 0===a?{}:a,s=r.filename,l=void 0===s?"":s,d=r.position,c=void 0===d?0:d,u=r.duration,h=void 0===u?0:u,m=r.pause;this.elements.filenameElement.innerHTML=l,this.elements.currTimeElement.innerHTML=this._formatTime(c/1e3),this.elements.totalTimeElement.innerHTML=this._formatTime(h/1e3),m?(f.default.removeClass(this.elements.playPauseBtnElement,"pause"),f.default.addClass(this.elements.playPauseBtnElement,"play")):(f.default.removeClass(this.elements.playPauseBtnElement,"play"),f.default.addClass(this.elements.playPauseBtnElement,"pause")),i?f.default.addClass(this.elements.volumeMuteBtnElement,"mute"):f.default.removeClass(this.elements.volumeMuteBtnElement,"mute"),n?f.default.addClass(this.elements.fullScreenBtnElement,"yes"):f.default.removeClass(this.elements.fullScreenBtnElement,"yes")}}]),a}();o.default=l},{"../../utils/DomUtils":333,"../../utils/Utils":338,"../components/TalkcloudReact":342}],341:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),a=i(e("./TalkcloudReact")),d=i(e("../../utils/DomUtils"));function i(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return o.parentNode=e,o.elements={},o.state={extendShow:!1},o.listDirection="down",o._createConnectElements(),o.render(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),n(i,[{key:"componentDidUpdateState",value:function(e){e.extendShow!==this.state.extendShow&&this._noticeSelectExtendListShowOrHide(this.state.extendShow)}},{key:"componentDidUpdateProps",value:function(e){if(e.selectOptions!==this.state.selectOptions){var t=this.props,o=t.optionClassName,i=t.selectOptions,n=void 0===i?[]:i,a=t.disabled,r=t.currentValue;d.default.removeAllChild(this.elements.selectListViewElement);for(var s=0;s<n.length;s++){var l=d.default.createElement("li",void 0,"select-option "+(o||" ")+(r===n[s].value?" selected":" "));l.innerHTML=n[s].value,l.onclick=a?void 0:this.optionOnClick.bind(this,n[s].value,s),d.default.appendChild(this.elements.selectListViewElement,l)}}}},{key:"destroyView",value:function(){for(var e in d.default.removeChild(this.elements.selectViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"forceHideSelectExtendList",value:function(){this.setState({extendShow:!1})}},{key:"currentTextOnClick",value:function(e){return this.props.disabled||(this.setState({extendShow:!this.state.extendShow}),e&&(e.preventDefault(),e.stopPropagation())),!1}},{key:"optionOnClick",value:function(e,t,o){return this.props.disabled||(e!==this.props.currentValue&&this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e,t),this.setState({extendShow:!1}),o&&(o.preventDefault(),o.stopPropagation())),!1}},{key:"selectContainerOnMouseLeave",value:function(e){return this.setState({extendShow:!1}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_noticeSelectExtendListShowOrHide",value:function(e){this.props.noticeSelectExtendListShowOrHide&&"function"==typeof this.props.noticeSelectExtendListShowOrHide&&this.props.noticeSelectExtendListShowOrHide(e)}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),o=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:t.top-o,bottom:t.bottom-o,left:t.left-i,right:t.right-i,width:t.width,height:t.height}}},{key:"_createConnectElements",value:function(){this.elements.selectViewRootElement=d.default.createElement("article",this.props.id,void 0,{}),this.elements.currentSelectTextElement=d.default.createElement("button",void 0,void 0,{}),this.elements.arrowElement=d.default.createElement("span"),this.elements.arrowElement.innerHTML='<em class="arrow "></em>',this.elements.selectListViewElement=d.default.createElement("ol"),d.default.appendChild(this.elements.selectViewRootElement,this.elements.currentSelectTextElement),d.default.appendChild(this.elements.selectViewRootElement,this.elements.arrowElement),d.default.appendChild(this.elements.selectViewRootElement,this.elements.selectListViewElement),d.default.appendChild(this.parentNode,this.elements.selectViewRootElement),this.elements.currentSelectTextElement.onclick=this.currentTextOnClick.bind(this),this.elements.selectViewRootElement.onmouseleave=this.selectContainerOnMouseLeave.bind(this)}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.disabled,i=e.currentValue,n=void 0===i?"":i;if(d.default.updateStyle(this.elements.selectListViewElement,{display:o?"none":this.state.extendShow?"block":"none"}),this.listDirection=this.props.listDirection||this.listDirection,d.default.resetClass(this.elements.selectViewRootElement,"talkcloud-sdk-whiteboard  select-root tk-select-container clear-float "+(o?" disabled ":"  ")+(t||"")+(o?" hideExtendList":this.state.extendShow?" showExtendList":" hideExtendList")),d.default.resetClass(this.elements.currentSelectTextElement,"talkcloud-sdk-whiteboard  select-btn current-select-text-btn current-select-text "+(o?"disabled ":" ")),d.default.resetClass(this.elements.arrowElement,"arrow-container "+(o?"disabled ":" ")),d.default.resetClass(this.elements.selectListViewElement,"select-extend-list-container "+(this.props.isMobile?" ":"custom-scroll-bar")+(o?" disabled ":"  ")+(o?" hide":this.state.extendShow?" show":" hide")),o?this.elements.currentSelectTextElement.setAttribute("disabled","true"):this.elements.currentSelectTextElement.removeAttribute("disabled"),this.elements.currentSelectTextElement.value=n,this.elements.currentSelectTextElement.innerText=n,this.props.parentNode&&this.state.extendShow&&!this.props.disabled&&!this.props.listDirection){var a=this._getRect(this.props.parentNode),r=this._getRect(this.elements.selectListViewElement);r.top-a.top>a.height-r.height+5?this.listDirection="up":this.listDirection="down",d.default.removeClass(this.elements.selectViewRootElement,["down","up"]),d.default.removeClass(this.elements.selectListViewElement,["down","up"]),d.default.addClass(this.elements.selectViewRootElement,this.listDirection),d.default.addClass(this.elements.selectListViewElement,this.listDirection)}else d.default.removeClass(this.elements.selectViewRootElement,["down","up"]),d.default.removeClass(this.elements.selectListViewElement,["down","up"]),d.default.addClass(this.elements.selectViewRootElement,this.listDirection),d.default.addClass(this.elements.selectListViewElement,this.listDirection)}}]),i}();o.default=r},{"../../utils/DomUtils":333,"./TalkcloudReact":342}],342:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==(void 0===e?"undefined":i(e))||Array.isArray(e)?this.props={}:this.props=Object.shallowAssign({},e),this.state="object"!==i(this.state)||Array.isArray(this.state)?{}:this.state}return n(t,[{key:"setState",value:function(e){var t=Object.deepAssign({},this.state);Object.shallowAssign(this.state,e);var o=!1;this.shouldComponentUpdateState&&"function"==typeof this.shouldComponentUpdateState&&(o=this.shouldComponentUpdateState(t)),!o&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateState&&"function"==typeof this.componentDidUpdateState&&this.componentDidUpdateState(t)}},{key:"setProps",value:function(e){var t=Object.deepAssign({},this.props);Object.shallowAssign(this.props,e);var o=!1;this.shouldComponentUpdateProps&&"function"==typeof this.shouldComponentUpdateProps&&(o=this.shouldComponentUpdateProps(t)),!o&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateProps&&"function"==typeof this.componentDidUpdateProps&&this.componentDidUpdateProps(t)}}]),t}();o.default=a},{}],343:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),n=a(e("./TalkcloudReact")),r=a(e("../../utils/DomUtils"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i));return n.parentNode=e,n.instanceId=t,n.whiteBoardManagerInstance=o,n.elements={},n.userid=n.props.streamInfo?n.props.streamInfo.userid:void 0,n.streamType=n.props.streamInfo?n.props.streamInfo.streamType:void 0,n._createElements(),n._connectElements(),n._playAV(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n.default),i(a,[{key:"componentDidUpdateProps",value:function(e){this.props.volume===e.volume&&this.props.muteVolume===e.muteVolume||this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"destroyView",value:function(){for(var e in this._unplayAV(),r.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"getElementId",value:function(){return this.elements.rootElement.id}},{key:"_changeVolume",value:function(e){if(void 0!==e&&"number"==typeof e&&this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t=this.props.streamInfo||{},o=t.userid,i=t.streamType;this.whiteBoardManagerInstance.getRoomDelegate().setRemoteAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setRemoteAudioVolume(e,o,void 0,i)}}},{key:"_createElements",value:function(){var e=(this.props.streamInfo||{}).userid;this.elements.rootElement=r.default.createElement("div",this.props.videoDumbElementIdPrefix+e,"tk-audio-or-video-player  tk-audio-player-video-dumb")}},{key:"_connectElements",value:function(){r.default.appendChild(this.parentNode,this.elements.rootElement)}},{key:"_playAV",value:function(){if(this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.elements.rootElement&&this.elements.rootElement.id){var e=this.props.streamInfo||{},t=e.userid;e.video,e.audio;switch(e.streamType){case"media":if(this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia){var o=this.elements.rootElement.id;this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia(t,o)}break;case"file":if(this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile){var i=this.elements.rootElement.id;this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile(t,i)}}}this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"_unplayAV",value:function(){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.streamType){case"media":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia(this.userid);break;case"file":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile(this.userid)}}},{key:"render",value:function(){}}]),a}();o.default=s},{"../../utils/DomUtils":333,"./TalkcloudReact":342}],344:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkAudioPlayer=void 0;var i,n=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),a=e("./MediaPlayer"),r=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,o,i,n,!1))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.default),n(a,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,i=t.userId,n=t.attributes,a=void 0===n?{}:n,r=t.published;if(("media"===o||"file"===o)&&a.audio&&!a.video)if(r){this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:i,streamType:o,audio:a.audio,video:a.video,attributes:a}}),i===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0));var s=a.pause;this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(s?"pause":"play",e)}else this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,i=t.attributes,n=void 0===i?{}:i,a=t.updateAttributes,r=void 0===a?{}:a;"media"!==o&&"file"!==o||!n.audio||n.video||this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:r})}),void 0!==r.pause&&this.sendMediaPlayerNoticeActionCommand(r.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,i=o.type,n=o.userId,a=o.attributes,r=void 0===a?{}:a;if(("media"===i||"file"===i)&&r.audio&&!r.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")){var s=this.whiteBoardManagerInstance.whiteboardViewMap.get("default");if(s&&s.sendActionCommand){var l,d={playerType:"audioPlayer",userid:n,streamType:i,audio:r.audio,video:r.video,attributes:r,isDynamicPptVideo:!1};l=Object.deepAssign({type:e,fileid:d.attributes.fileid},d),s.sendActionCommand("mediaPlayerNotice",l)}}}}]),a}();window.TalkAudioPlayer=s,o.TalkAudioPlayer=s,o.default=s},{"./MediaPlayer":347}],345:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentRemark=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),a=r(e("../components/TalkcloudReact")),d=r(e("../../utils/DomUtils")),c=r(e("../../utils/Utils")),u=r(e("../../utils/Global")),s=r(e("../../utils/Language")),l=r(e("../../utils/TalkAjax"));function r(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,i));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=n,a.elements={},a.documentRemarkTalkDrag=void 0,a.ajaxRequestingList={},a.state={autoOpenRemark:!0,updateState:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}}},a._createConnectElements(),a._updateLanguage(),a.render(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),n(r,[{key:"componentDidUpdateState",value:function(e){this.state.autoOpenRemark&&e.viewState.fileid==this.state.viewState.fileid&&0!=this.state.viewState.fileid&&e.viewState.page.currentPage!==this.state.viewState.page.currentPage&&this.whiteBoardManagerInstance&&c.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),e.viewState.fileid!=this.state.viewState.fileid&&(this.state.autoOpenRemark&&0!=this.state.viewState.fileid&&this.whiteBoardManagerInstance&&c.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),this._ajaxDocumentRemark()),e.viewState.remark!==this.state.viewState.remark&&this._ajaxDocumentRemark()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0)),!c.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,i=void 0===o?50:o,n=t.top,a=void 0===n?100:n;this.documentRemarkTalkDrag.setPosition(i,a)}}},{key:"changeParentNode",value:function(e){e&&(d.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.parentNode=e,d.default.appendChild(this.parentNode,this.elements.remarkViewRootElement))}},{key:"destroyView",value:function(){for(var e in d.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"resize",value:function(){this.documentRemarkTalkDrag&&c.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":i(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentRemark]receive whiteboard view action command（action,cmd）:",e,t),e){case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"closeDocumentRemarkOnClick",value:function(){this.whiteBoardManagerInstance&&c.default.isFunction(this.whiteBoardManagerInstance.closeDocumentRemark)&&this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId)}},{key:"_createConnectElements",value:function(){this.elements.remarkViewRootElement=d.default.createElement("div",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" talk-cloud-remark-container remark-container",{position:"absolute",left:0,top:0,display:"none",zIndex:3}),this.elements.remarkViewRootElement.innerHTML='\n            <div class="remark-head"> \n                <span class="name"></span>\n                <button class="close"></button>\n            </div>\n            <div class="content-container"> \n                <span class="content-text  custom-scroll-bar" >  </span>\n            </div>\n        ',d.default.appendChild(this.parentNode,this.elements.remarkViewRootElement),this.elements.remarkNameElement=this.elements.remarkViewRootElement.getElementsByClassName("name")[0],this.elements.remarkCloseElement=this.elements.remarkViewRootElement.getElementsByClassName("close")[0],this.elements.remarkContentElement=this.elements.remarkViewRootElement.getElementsByClassName("content-text")[0],this.elements.remarkCloseElement.onclick=this.closeDocumentRemarkOnClick.bind(this),this._addTalkDrag()}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var o=s.default.get(t).documentRemark,i=o.name,n=o.closeTitle;this.elements.remarkNameElement.innerHTML=i,this.elements.remarkCloseElement.setAttribute("title",n)}},{key:"_addTalkDrag",value:function(){window.TalkDrag&&this.elements.remarkViewRootElement&&(this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0),this.documentRemarkTalkDrag=new window.TalkDrag(this.elements.remarkViewRootElement,{containerData:{left:50,top:90}}))}},{key:"_ajaxDocumentRemark",value:function(){var n=this,e=this.state.viewState,t=e.remark,a=e.fileid,r=this,o=!1;this.ajaxRequestingList["documentRemark_"+a]&&(new Date).getTime()-this.ajaxRequestingList["documentRemark_"+a].requestTime<5e3&&(o=!0),this.props.isConnectedRoom&&!o&&this.props.canRemark&&t&&0!=a&&!u.default.allDocumentRemarkInfoMap.has("documentRemark_"+a)&&(this.ajaxRequestingList["documentRemark_"+a]&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr&&c.default.isFunction(this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort)&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort(),this.ajaxRequestingList["documentRemark_"+a]={requestTime:(new Date).getTime(),ajaxXhr:void 0},this.ajaxRequestingList["documentRemark_"+a].ajaxXhr=(0,l.default)().post(this.props.webAddress+"/ClientAPI/getfileremark?ts="+(new Date).getTime(),{fileid:a}).then(function(e){if(n.ajaxRequestingList["documentRemark_"+a]=void 0,delete n.ajaxRequestingList["documentRemark_"+a],e&&0===e.result)for(var t in e){var o=e[t];if("result"!==t&&o&&c.default.isJson(o)){u.default.allDocumentRemarkInfoMap.has("documentRemark_"+o.fileid)||u.default.allDocumentRemarkInfoMap.set("documentRemark_"+o.fileid,{});var i=u.default.allDocumentRemarkInfoMap.get("documentRemark_"+o.fileid);i&&(i[o.fileid+"_"+o.pageid]=o.remark),n.whiteBoardManagerInstance&&n.whiteBoardManagerInstance.whiteboardViewMap&&n.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId)&&c.default.isFunction(n.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate)&&n.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate()}}n.setState({updateState:!n.state.updateState})}).catch(function(e,t){L.Logger.error("ajax request fail  error info( response, xhr ):",e,t),n.ajaxRequestingList["documentRemark_"+a]=void 0,delete n.ajaxRequestingList["documentRemark_"+a],n.setState({updateState:!n.state.updateState})}))}},{key:"render",value:function(){var e=this.state.viewState,t=e.remark,o=e.fileid,i=e.page,n=(void 0===i?{}:i).currentPage,a=void 0===n?1:n,r=u.default.allDocumentRemarkInfoMap.get("documentRemark_"+o),s=this.props.canRemark&&t&&0!=o&&r&&r[o+"_"+a],l=!this.isShow&&s;this.isShow=s,d.default.updateStyle(this.elements.remarkViewRootElement,{display:s?"block":"none"}),s&&r&&r[o+"_"+a]&&(this.elements.remarkContentElement.innerHTML=r[o+"_"+a]),l&&this.documentRemarkTalkDrag&&c.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}}]),r}();window.TalkDocumentRemark=h,o.TalkDocumentRemark=h,o.default=h},{"../../utils/DomUtils":333,"../../utils/Global":334,"../../utils/Language":335,"../../utils/TalkAjax":337,"../../utils/Utils":338,"../components/TalkcloudReact":342}],346:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentToolbar=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),a=r(e("../components/TalkcloudReact")),I=r(e("../../utils/DomUtils")),s=r(e("../../utils/Utils")),l=r(e("../components/Select")),P=r(e("../../utils/Language")),d=r(e("../../utils/Global"));function r(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,i));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=n,a.elements={},a.elementsViewClass={},a.documentToolbarTalkDrag=void 0,a.state={updateState:!1,dynamicPptAVSize:0,tempDisabledDrag:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,remarkText:"",other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}}},a._createConnectElements(),a._updateSelectInfo(),a._updateLanguage(),a.render(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),i(r,[{key:"componentDidUpdateState",value:function(e){if(e.viewState!==this.state.viewState){var t=e.viewState.page.currentPage===this.state.viewState.page.currentPage,o=e.viewState.page.totalPage===this.state.viewState.page.totalPage,i=e.viewState.page.skipPage&&this.state.viewState.page.skipPage?s.default.deepCompareJson(e.viewState.page.skipPage,this.state.viewState.page.skipPage):e.viewState.page.skipPage===this.state.viewState.page.skipPage;t&&o&&i||(this._isShowRemarkBtn(),this._updateSelectInfo()),e.viewState.fileid==this.state.viewState.fileid&&e.viewState.remarkText===this.state.viewState.remarkText||this._isShowRemarkBtn(),e.viewState.dynamicPptVolume!==this.state.viewState.dynamicPptVolume&&!this.pageVolumeSlidering&&this.pageVolumeSlider&&"function"==typeof this.pageVolumeSlider.setProgress&&this.pageVolumeSlider.setProgress(this.state.viewState.dynamicPptVolume)}e.tempDisabledDrag!==this.state.tempDisabledDrag&&this.documentToolbarTalkDrag&&n(this.documentToolbarTalkDrag.updateDisabled)&&this.documentToolbarTalkDrag.updateDisabled(this.state.tempDisabledDrag),e.viewState.documentType===this.state.viewState.documentType&&e.viewState.fullScreen===this.state.viewState.fullScreen&&e.viewState.remark===this.state.viewState.remark||this._updateLanguage(),e.updateState!==this.state.updateState&&this._isShowRemarkBtn()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isMobile!==this.props.isMobile&&(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.props.isMobile?I.default.addClass(this.elements.documentToolbarViewRootElement,"app-mobile"):I.default.removeClass(this.elements.documentToolbarViewRootElement,"app-mobile"),this.elementsViewClass.selectPageView&&this.elementsViewClass.selectPageView.setProps({isMobile:this.props.isMobile})),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0)),!s.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,i=void 0===o?50:o,n=t.top,a=void 0===n?100:n;this.documentToolbarTalkDrag.setPosition(i,a)}e.isLoadRemark===this.props.isLoadRemark&&e.canRemark===this.props.canRemark||!this.elements.remarkElement||this._isShowRemarkBtn(),e.isLoadFullScreen!==this.props.isLoadFullScreen&&this.elements.fullScreenElement&&I.default.updateStyle(this.elements.fullScreenElement,{display:this.props.isLoadFullScreen?"":"none"})}},{key:"resize",value:function(){this.documentToolbarTalkDrag&&s.default.isFunction(this.documentToolbarTalkDrag.resizeCallback)&&this.documentToolbarTalkDrag.resizeCallback()}},{key:"forceRender",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"changeParentNode",value:function(e){e&&(I.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.parentNode=e,I.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement))}},{key:"destroyView",value:function(){var e=!0,t=!1,o=void 0;try{for(var i,n=Object.values(this.elementsViewClass)[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;a&&a.destroyView&&a.destroyView()}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}for(var r in this.elementsViewClass={},I.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.elements)this.elements[r]=void 0,delete this.elements[r]}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":n(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentToolbar]receive whiteboard view action command（action,cmd）:",e,t),e){case"closeAllSelectBox":I.default.removeClass(this.elements.volumeElement,"open");break;case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"changeSelectPageOnChange",value:function(e){this.skipPage(e)}},{key:"changeSelectPageNoticeSelectExtendListShowOrHide",value:function(e){this.setState({tempDisabledDrag:e})}},{key:"prevPage",value:function(){switch(this.state.viewState.documentType){case"dynamicPPT":this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevStep(this.instanceId);break;default:this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevPage(this.instanceId)}return!1}},{key:"nextPage",value:function(){switch(this.state.viewState.documentType){case"dynamicPPT":this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextStep(this.instanceId);break;default:this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextPage(this.instanceId)}return!1}},{key:"addPage",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.addPage(this.instanceId),!1}},{key:"fullScreen",value:function(){return this.whiteBoardManagerInstance&&(this.state.viewState.fullScreen?this.whiteBoardManagerInstance.exitFullScreen(this.instanceId):this.whiteBoardManagerInstance.fullScreen(this.instanceId)),!1}},{key:"openDynamicPptVolumeOnClick",value:function(){return I.default.hasClass(this.elements.volumeElement,"open")?I.default.removeClass(this.elements.volumeElement,"open"):I.default.addClass(this.elements.volumeElement,"open"),!1}},{key:"closeDynamicPptVolumeOnMouseLeave",value:function(){return I.default.removeClass(this.elements.volumeElement,"open"),!1}},{key:"openOrCloseRemarkOnClick",value:function(){var e=this.state.viewState.remark;this.whiteBoardManagerInstance&&(e?this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId):this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId))}},{key:"changeDynamicPptVolume",value:function(e){this.whiteBoardManagerInstance&&"function"==typeof this.whiteBoardManagerInstance.changeDynamicPptVolume&&this.whiteBoardManagerInstance.changeDynamicPptVolume(e,this.instanceId)}},{key:"skipPage",value:function(e){return"number"==typeof(e=Number(e))&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.skipPage(e,this.instanceId),!1}},{key:"sendActionCommand",value:function(e,t){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)){var o=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId);o&&o.sendActionCommand&&o.sendActionCommand(e,t)}}},{key:"changePageOnFocus",value:function(e){return d.default.isSkipPageing=!0,e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnClick",value:function(){return this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.elements.skipPageCurrpageElement.focus(),event&&(event.preventDefault(),event.stopPropagation()),!1}},{key:"changePageOnBlur",value:function(e){return d.default.isSkipPageing=!1,this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnKeyDown",value:function(e){switch(e.keyCode){case 13:return this.elements.skipPageCurrpageElement&&"function"==typeof this.elements.skipPageCurrpageElement.blur?(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!1),this.elements.skipPageCurrpageElement.blur()):this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}}},{key:"enlargeWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.enlargeWhiteboard(this.instanceId),!1}},{key:"narrowWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.narrowWhiteboard(this.instanceId),!1}},{key:"receiveWindowMessageEvent",value:function(t){var e={};if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)&&(e=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId)),t.data){var o=void 0,i=void 0;try{o=(i=JSON.parse(t.data)).data}catch(e){return void L.Logger.warning("document tool bar receive iframe message data can't be converted to JSON , iframe data:",t.data)}if("tk_dynamicPPT"===i.source&&e.getDynamicPptInstanceByID&&"function"==typeof e.getDynamicPptInstanceByID&&e.getDynamicPptInstanceByID().dynamicPptIframeElement&&t.source===e.getDynamicPptInstanceByID().dynamicPptIframeElement.contentWindow){L.Logger.debug("[document tool bar]receive remote iframe data form "+t.origin+":",t);switch(o.action){case"allVideoAndAudio":this.setState({dynamicPptAVSize:void 0!==o.allVideoAndAudioLength?o.allVideoAndAudioLength:0})}}}}},{key:"stopEvent",value:function(e){return e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_changePage",value:function(){var e=Number(this.elements.skipPageCurrpageElement.innerHTML),t=this.state.viewState.page,o=void 0===t?{}:t,i=o.totalPage,n=void 0===i?1:i,a=o.currentPage,r=void 0===a?1:a;if("number"!=typeof e||isNaN(e)){var s={type:"pageTypeNotNumber",currentPage:r,totalPage:n,toPage:this.elements.skipPageCurrpageElement.innerHTML};this.sendActionCommand("skipPageFailureBouncedNotice",s),this.elements.skipPageCurrpageElement.innerHTML=r}else{if(e===r)return;if(e<1||n<e){var l={type:"overPageRange",currentPage:r,totalPage:n,toPage:e};this.sendActionCommand("skipPageFailureBouncedNotice",l),this.elements.skipPageCurrpageElement.innerHTML=r}else this.skipPage(e)}}},{key:"_createConnectElements",value:function(){var t=this;this.elements.documentToolbarViewRootElement=I.default.createElement("article",this.instanceId+"DocumentToolViewRoot","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-root "+(this.props.isMobile?"app-mobile ":" "),{zIndex:5}),this.elements.previousPageElement=I.default.createElement("button",this.instanceId+"TalkcloudPreviousPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn previous-page-btn",{}),this.elements.skipPageElement=I.default.createElement("div",this.instanceId+"TalkcloudSkipPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-select skip-page-select",{}),this.elements.nextPageElement=I.default.createElement("button",this.instanceId+"TalkcloudNextPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn next-page-btn",{}),this.elements.addPageElement=I.default.createElement("button",this.instanceId+"TalkcloudAddPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn add-page-btn",{display:"none"}),this.elements.fullScreenElement=I.default.createElement("button",this.instanceId+"TalkcloudFullScreen","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn full-screen-btn",{display:this.props.isLoadFullScreen?"":"none"}),this.elements.volumeElement=I.default.createElement("button",this.instanceId+"TalkcloudVolume","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn volume-btn",{display:this.props.isLoadVolume?"":"none"}),this.elements.remarkElement=I.default.createElement("button",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn remark-btn",{display:this.props.isLoadRemark&&this.props.canRemark?"":"none"}),this.elements.enlargeWhiteboardElement=I.default.createElement("button",this.instanceId+"TalkcloudZoomBig","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-big-btn",{}),this.elements.narrowWhiteboardElement=I.default.createElement("button",this.instanceId+"TalkcloudZoomSmall","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-small-btn",{}),this.elements.volumeElement.innerHTML='\n            <span class="volume-slider-container" onclick="return false;" id="'+this.instanceId+'PageVolumeSlider" ></span>\n        ',this.elements.skipPageElement.innerHTML='\n            <div class="page-info-container" > \n                <span contenteditable="'+!this.props.isMobile+'" class="curr-page">1</span><em>/</em><span class="total-page">1</span>\n            </div>\n        ',this.elements.skipPageCurrpageElement=this.elements.skipPageElement.getElementsByClassName("curr-page")[0],this.elements.skipPageTotalpageElement=this.elements.skipPageElement.getElementsByClassName("total-page")[0],this.elements.skipPageCurrpageElement.oninput=function(e){var t=e.target.innerHTML;(!Number(t)||5<t.length)&&(e.target.innerHTML=t.substr(0,5))},this.elements.skipPageCurrpageElement.onclick=this.changePageOnClick.bind(this),this.elements.skipPageCurrpageElement.onfocus=this.changePageOnFocus.bind(this),this.elements.skipPageCurrpageElement.onblur=this.changePageOnBlur.bind(this),this.elements.skipPageCurrpageElement.onkeydown=this.changePageOnKeyDown.bind(this),this.elements.previousPageElement.onclick=this.prevPage.bind(this),this.elements.nextPageElement.onclick=this.nextPage.bind(this),this.elements.addPageElement.onclick=this.addPage.bind(this),this.elements.fullScreenElement.onclick=this.fullScreen.bind(this),this.elements.volumeElement.onclick=this.openDynamicPptVolumeOnClick.bind(this),this.elements.volumeElement.getElementsByClassName("volume-slider-container")[0].onclick=this.stopEvent.bind(this),this.elements.volumeElement.onmouseleave=this.closeDynamicPptVolumeOnMouseLeave.bind(this),this.elements.remarkElement.onclick=this.openOrCloseRemarkOnClick.bind(this),this.elements.enlargeWhiteboardElement.onclick=this.enlargeWhiteboard.bind(this),this.elements.narrowWhiteboardElement.onclick=this.narrowWhiteboard.bind(this),this.elementsViewClass.selectPageView=new l.default(this.elements.skipPageElement,{parentNode:this.parentNode,isMobile:this.props.isMobile,onChange:this.changeSelectPageOnChange.bind(this),noticeSelectExtendListShowOrHide:this.changeSelectPageNoticeSelectExtendListShowOrHide.bind(this)}),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.previousPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.skipPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.nextPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.addPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.enlargeWhiteboardElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.narrowWhiteboardElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.fullScreenElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.volumeElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.remarkElement),I.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement),window.TalkSlider&&(this.pageVolumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+"PageVolumeSlider",direction:"vertikal"},onBeforeChange:function(e){t.pageVolumeSlidering=!0},onAfterChange:function(e){t.pageVolumeSlidering=!1,t.changeDynamicPptVolume(e)}})),this._addTalkDrag()}},{key:"_addTalkDrag",value:function(){if(this.props.isDrag&&window.TalkDrag&&this.elements.documentToolbarViewRootElement){this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0);var e=this.props.initDragPosition||{},t=e.left,o=void 0===t?50:t,i=e.top,n=void 0===i?100:i;this.documentToolbarTalkDrag=new window.TalkDrag(this.elements.documentToolbarViewRootElement,{containerData:{left:o,top:n}})}}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e,o=this.state.viewState,i=o.remark,n=o.fullScreen,a=o.documentType;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var r=P.default.get(t).documentToolbar,s=r.prevPage,l=r.nextPage,d=r.prevStep,c=r.nextStep,u=r.addPage,h=r.enlargeWhiteboard,m=r.narrowWhiteboard,f=r.pptVolume,p=r.onRemark,g=r.offRemark,v=r.onGeneralDocumentFullScreen,y=r.offGeneralDocumentFullScreen,b=r.onDynamicPPTFullScreen,_=r.offDynamicPPTFullScreen,w=r.onH5DocumentFullScreen,S=r.offH5DocumentFullScreen,k=n?y:v;"dynamicPPT"===a?k=n?_:b:"h5Document"===a&&(k=n?S:w),this.elements.previousPageElement.title="dynamicPPT"===a?d:s,this.elements.nextPageElement.title="dynamicPPT"===a?c:l,this.elements.addPageElement.title=u,this.elements.fullScreenElement.title=k,this.elements.volumeElement.title=f,this.elements.remarkElement.title=i?g:p,this.elements.enlargeWhiteboardElement.title=h,this.elements.narrowWhiteboardElement.title=m}},{key:"_updateSelectInfo",value:function(){if(this.elementsViewClass.selectPageView){var e=this.state.viewState.page,t=void 0===e?{}:e,o=t.totalPage,i=void 0===o?1:o,n=t.currentPage,a=void 0===n?1:n,r=t.skipPage,s=void 0===r?{}:r,l=[];i<1&&(i=1),a<1&&(a=1);for(var d=1;d<=i;d++)l.push({label:d,value:d});this.elementsViewClass.selectPageView.setProps({selectOptions:l,currentValue:a,disabled:s.disabled,isMobile:this.props.isMobile}),this.elements.skipPageCurrpageElement.innerHTML=a,this.elements.skipPageTotalpageElement.innerHTML=i}}},{key:"_isShowRemarkBtn",value:function(){if(this.elements.remarkElement){var e=this.props.isLoadRemark&&this.props.canRemark&&this.state.viewState.remarkText;I.default.updateStyle(this.elements.remarkElement,{display:e?"":"none"})}}},{key:"render",value:function(){var e=this.state.viewState,t=e.page,o=void 0===t?{}:t,i=e.zoom,n=void 0===i?{}:i,a=e.documentType,r=e.fullScreen,s=e.remark,l=(e.fileid,o.prevPage),d=void 0===l?{}:l,c=o.nextPage,u=void 0===c?{}:c,h=o.prevStep,m=void 0===h?{}:h,f=o.nextStep,p=void 0===f?{}:f,g=o.addPage,v=void 0===g?{}:g,y=o.skipPage,b=void 0===y?{}:y,_=(o.currentPage,n.zoom_big),w=void 0===_?{}:_,S=n.zoom_small,k=void 0===S?{}:S;this.elements.previousPageElement.disabled="dynamicPPT"===a?m.disabled:d.disabled,this.elements.nextPageElement.disabled="dynamicPPT"===a?p.disabled:u.disabled,this.elements.addPageElement.disabled=v.disabled,this.elements.enlargeWhiteboardElement.disabled=w.disabled,this.elements.narrowWhiteboardElement.disabled=k.disabled,b.disabled?I.default.addClass(this.elements.skipPageElement,"disabled"):I.default.removeClass(this.elements.skipPageElement,"disabled"),I.default.updateStyle(this.elements.nextPageElement,{display:v.disabled?"":"none"}),I.default.updateStyle(this.elements.addPageElement,{display:v.disabled?"none":""}),r?I.default.addClass(this.elements.fullScreenElement,"yes"):I.default.removeClass(this.elements.fullScreenElement,"yes"),I.default.updateStyle(this.elements.volumeElement,{display:this.props.isLoadVolume&&"dynamicPPT"===a&&0<this.state.dynamicPptAVSize?"":"none"}),s?I.default.addClass(this.elements.remarkElement,"yes"):I.default.removeClass(this.elements.remarkElement,"yes")}}]),r}();window.TalkDocumentToolbar=c,o.TalkDocumentToolbar=c,o.default=c},{"../../utils/DomUtils":333,"../../utils/Global":334,"../../utils/Language":335,"../../utils/Utils":338,"../components/Select":341,"../components/TalkcloudReact":342}],347:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),n=s(e("../components/TalkcloudReact")),h=s(e("../../utils/DomUtils")),m=s(e("../../utils/Utils")),a=s(e("../components/VideoDumb")),r=s(e("../components/MediaPlayerController"));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,i));return r.isVideoPlayer=a,r.parentNode=e,r.instanceId=t,r.whiteBoardManagerInstance=o,r.configration=n,r.state={streamInfo:void 0,volume:100,muteVolume:!1,isFullScreen:!1},r.progressIntervalDuration=1e3,r.elements={},r.videoDumb=void 0,r._createElements(),r._connectElements(),r.render(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,n.default),i(s,[{key:"shouldComponentUpdateState",value:function(e){if(e.streamInfo!==this.state.streamInfo&&e.streamInfo&&this.state.streamInfo&&e.streamInfo.attributes&&this.state.streamInfo.attributes){var t=!1,o=!0,i=!1,n=void 0;try{for(var a,r=Object.entries(this.state.streamInfo.attributes)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=u(s,2),d=l[0],c=l[1];if("position"!==d&&c!==e.streamInfo.attributes[d]){t=!0;break}}}catch(e){i=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(i)throw n}}if(e.streamInfo.attributes.position!==this.state.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateState",value:function(e){if(e.streamInfo&&!this.state.streamInfo){var t=this.elements.rootElement;m.default.getFullscreenElement()&&m.default.getFullscreenElement().id===t.id&&m.default.exitFullscreen()}if(this.elements.closeVideoPlayerElement&&!e.streamInfo&&this.state.streamInfo){var o=!1,i=this.state.streamInfo||{},n=i.streamType,a=i.userid;"file"===n&&a!=this.props.myUserId&&(o=!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||o?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||o}this.state.streamInfo&&this.state.streamInfo.attributes?!this.progressTimer||"media"!==this.state.streamInfo.streamType||this.state.streamInfo.userid!=this.props.myUserId&&0!=this.props.myRole&&1!=this.props.myRole?this.progressTimer&&this.state.streamInfo.attributes.pause?this._stopProgressTimer():this.progressTimer||this.state.streamInfo.attributes.pause||this._startProgressTimer():this._stopProgressTimer():this.progressTimer&&this._stopProgressTimer(),this.videoDumb&&(e.volume!==this.state.volume&&this.videoDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.videoDumb.setProps({muteVolume:this.state.muteVolume}),e.streamInfo!==this.state.streamInfo&&this.videoDumb.setProps({streamInfo:this.state.streamInfo})),this.mediaPlayerControllerDumb&&(e.streamInfo!==this.state.streamInfo&&this.mediaPlayerControllerDumb.setProps({streamInfo:this.state.streamInfo}),e.volume!==this.state.volume&&this.mediaPlayerControllerDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.mediaPlayerControllerDumb.setProps({muteVolume:this.state.muteVolume}),e.isFullScreen!==this.state.isFullScreen&&this.mediaPlayerControllerDumb.setProps({isFullScreen:this.state.isFullScreen}))}},{key:"componentDidUpdateProps",value:function(e){if(e.isLoadControl!==this.props.isLoadControl&&(!this.mediaPlayerControllerDumb&&this.props.isLoadControl?this._loadMediaPlayerController():this.mediaPlayerControllerDumb&&!this.props.isLoadControl&&(this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=void 0)),this.elements.closeVideoPlayerElement&&e.controlPermissions.hasClose!==this.props.controlPermissions.hasClose){var t=!1,o=this.state.streamInfo||{},i=o.streamType,n=o.userid;"file"===i&&n!=this.props.myUserId&&(t=!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||t?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||t}this.mediaPlayerControllerDumb&&(e.myUserId!==this.props.myUserId&&this.mediaPlayerControllerDumb.setProps({myUserId:this.props.myUserId}),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?h.default.addClass(this.elements.rootElement,"tk-playback"):h.default.removeClass(this.elements.rootElement,"tk-playback"),this.mediaPlayerControllerDumb.setProps({isPlayback:this.props.isPlayback})),e.controlPermissions!==this.props.controlPermissions&&this.mediaPlayerControllerDumb.setProps({controlPermissions:this.props.controlPermissions})),this.videoDumb&&e.myUserId!==this.props.myUserId&&this.videoDumb.setProps({myUserId:this.props.myUserId})}},{key:"destroyView",value:function(){for(var e in h.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"receiveEventFullScreenChange",value:function(e){if(m.default.isFullScreenStatus()){var t=this.elements.rootElement;m.default.getFullscreenElement()&&m.default.getFullscreenElement().id===t.id?this._changeFullScreenState(!0):this._changeFullScreenState(!1)}else this._changeFullScreenState(!1)}},{key:"onPlayOrPauseClick",value:function(){var e=this;if("pc"===TK.SDKTYPE&&this.state.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t=this.whiteBoardManagerInstance.getRoomDelegate();switch(this.state.streamInfo.streamType){case"media":if(this.state.streamInfo.attributes.pause){var o=this.state.streamInfo.attributes,i=o.position,n=void 0===i?0:i,a=o.duration;(void 0===a?0:a)<=n&&t.seekMedia(0),t.pauseShareMedia(!1),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:""}),this.props.controlCallback&&this.props.controlCallback.play&&m.default.isFunction(this.props.controlCallback.play)&&this.props.controlCallback.play()}else t.pauseShareMedia(!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}),this.props.controlCallback&&this.props.controlCallback.pause&&m.default.isFunction(this.props.controlCallback.pause)&&this.props.controlCallback.pause();break;case"file":if(this.state.streamInfo.userid===this.props.myUserId&&t.getNativeInterface()){var r=t.getNativeInterface();if(this.state.streamInfo.attributes.pause){var s=this.state.streamInfo.attributes,l=s.position,d=void 0===l?0:l,c=s.duration,u=void 0===c?0:c;this._updateLocalFileStreamInfoPlayerPosition(function(){u<=d+1e3&&r.seekMediaFile(0),r.pauseShareMediaFile(!1),e.props.controlCallback&&e.props.controlCallback.play&&m.default.isFunction(e.props.controlCallback.play)&&(e.props.controlCallback.play(),h.default.updateStyle(e.elements.closeVideoPlayerElement,{display:""}))})}else r.pauseShareMediaFile(!0),this.props.controlCallback&&this.props.controlCallback.pause&&m.default.isFunction(this.props.controlCallback.pause)&&(this.props.controlCallback.pause(),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}))}}}}},{key:"onChangeVolume",value:function(e){var t={volume:e};0!==e||this.state.muteVolume?0!==e&&this.state.muteVolume&&(t.muteVolume=!1):t.muteVolume=!0,this.setState(t)}},{key:"onChangeProgress",value:function(e){if("mobile"!==TK.SDKTYPE&&this.state.streamInfo&&this.state.streamInfo.attributes&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.state.streamInfo.streamType){case"media":var t=e/100;t<0&&(t=0),1<t&&(t=1);var o=this.state.streamInfo.attributes.duration*t;this._updateStreamInfoAttributes("position",o),this.whiteBoardManagerInstance.getRoomDelegate().seekMedia(t);break;case"file":if(this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()){var i=e/100;i<0&&(i=0),1<i&&(i=1);var n=this.state.streamInfo.attributes.duration*i;this._updateStreamInfoAttributes("position",n),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(i)}}}},{key:"onVolumeMuteClick",value:function(){var e={muteVolume:!this.state.muteVolume};!e.muteVolume&&this.state.volume<=0&&(e.volume=100),this.setState(e)}},{key:"onCloseClick",value:function(){if(this.state.streamInfo&&this.whiteBoardManagerInstance)switch(this.state.streamInfo.streamType){case"media":this.whiteBoardManagerInstance.stopShareMedia();break;case"file":this.whiteBoardManagerInstance.stopShareLocalMedia()}}},{key:"onFullScreenClick",value:function(){if(this.state.isFullScreen)m.default.exitFullscreen();else{m.default.isFullScreenStatus()&&m.default.exitFullscreen();var e=this.elements.rootElement;m.default.launchFullscreen(e)}}},{key:"_createElements",value:function(){this.elements.rootElement=h.default.createElement("section",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-container "+(this.isVideoPlayer?"tk-video-player-container ":"tk-audio-player-container ")+(this.props.isPlayback?"tk-playback ":" "),{display:this.state.streamInfo?"":"none"}),this.elements.mediaSourceElement=h.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerSourceBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-source",{display:this.isVideoPlayer?"":"none"});var e=!1,t=this.state.streamInfo||{},o=t.streamType,i=t.userid;"file"===o&&i!=this.props.myUserId&&(e=!0),this.isVideoPlayer&&(this.elements.closeVideoPlayerElement=h.default.createElement("button",void 0,"talkcloud-sdk-whiteboard add-cursor-pointer tk-video-player-close-btn ",{display:!this.props.controlPermissions.hasClose||e?"none":""})),this.elements.mediaTotalControlElement=h.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerTotalControlBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control-box",{}),this.isVideoPlayer&&(this.elements.rootElement.onmouseover=this._videoMouseover.bind(this),this.elements.rootElement.onmouseout=this._videoMouseout.bind(this),this.elements.rootElement.onclick=this._videoClick.bind(this),this.elements.mediaTotalControlElement.onmouseover=this._videoControlMouseover.bind(this),this.elements.mediaTotalControlElement.onclick=this._videoControlClick.bind(this))}},{key:"_videoMouseover",value:function(){var e=this;h.default.addClass(this.elements.rootElement,"show-controller"),clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){h.default.removeClass(e.elements.rootElement,"show-controller")},2e3)}},{key:"_videoMouseout",value:function(){h.default.removeClass(this.elements.rootElement,"show-controller")}},{key:"_videoClick",value:function(e){var t=this;this.elements.rootElement.classList.toggle("show-controller")&&(clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){h.default.removeClass(t.elements.rootElement,"show-controller")},2e3))}},{key:"_videoControlMouseover",value:function(e){clearTimeout(this.showControllerTimer),h.default.addClass(this.elements.rootElement,"show-controller"),e.stopPropagation()}},{key:"_videoControlClick",value:function(e){e.stopPropagation()}},{key:"_connectElements",value:function(){h.default.appendChild(this.elements.rootElement,this.elements.mediaSourceElement),h.default.appendChild(this.elements.rootElement,this.elements.mediaTotalControlElement),this.elements.closeVideoPlayerElement&&h.default.appendChild(this.elements.rootElement,this.elements.closeVideoPlayerElement),h.default.appendChild(this.parentNode,this.elements.rootElement),this.props.isLoadControl&&this._loadMediaPlayerController(),this.elements.closeVideoPlayerElement&&(this.elements.closeVideoPlayerElement.onclick=this.onCloseClick.bind(this))}},{key:"_loadMediaPlayerController",value:function(){this.props.isLoadControl?(this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=new r.default(this.elements.mediaTotalControlElement,this.instanceId,this.whiteBoardManagerInstance,{streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,isFullScreen:this.state.isFullScreen,isPlayback:this.props.isPlayback,myUserId:this.props.myUserId,controlPermissions:this.props.controlPermissions,isVideoPlayer:this.isVideoPlayer,onCloseClick:this.onCloseClick.bind(this),onPlayOrPauseClick:this.onPlayOrPauseClick.bind(this),onChangeVolume:this.onChangeVolume.bind(this),onVolumeMuteClick:this.onVolumeMuteClick.bind(this),onChangeProgress:this.onChangeProgress.bind(this),onFullScreenClick:this.onFullScreenClick.bind(this)})):this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),o=Math.round(e%60);return 60===o&&(t+=1,o=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(o/10)&&(o="0"+o),t+":"+o}},{key:"_startProgressTimer",value:function(){var m=this;if(this.props.isPlayback)this._stopProgressTimer();else if(this._stopProgressTimer(),this.state.streamInfo){if("media"===this.state.streamInfo.streamType&&(this.state.streamInfo.userid==this.props.myUserId||0==this.props.myRole||1==this.props.myRole))return void this._stopProgressTimer();this.progressTimer=setInterval(function(){if(m.state.streamInfo){var e=m.state.streamInfo,t=e.userid,o=e.streamType,i=e.attributes,n=void 0===i?{}:i;switch(o){case"media":if("media"===m.state.streamInfo.streamType&&(m.state.streamInfo.userid==m.props.myUserId||0==m.props.myRole||1==m.props.myRole))return void m._stopProgressTimer();var a=n.position,r=void 0===a?0:a,s=n.duration,l=void 0===s?0:s;l<(r+=m.progressIntervalDuration)&&(r=l,m._stopProgressTimer()),m._updateStreamInfoAttributes("position",r);break;case"file":if(t!==m.props.myUserId){var d=n.position,c=void 0===d?0:d,u=n.duration,h=void 0===u?0:u;h<(c+=m.progressIntervalDuration)&&(c=h,m._stopProgressTimer()),m._updateStreamInfoAttributes("position",c)}else m._updateLocalFileStreamInfoPlayerPosition()}}else m._stopProgressTimer()},this.progressIntervalDuration)}}},{key:"_stopProgressTimer",value:function(){clearInterval(this.progressTimer),this.progressTimer=null}},{key:"_updateStreamInfoAttributes",value:function(e,t){if(this.state.streamInfo){var o={};o[e]=t,this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:o})})}}},{key:"_updateLocalFileStreamInfoPlayerPosition",value:function(a){var r=this;this.state.streamInfo&&"file"===this.state.streamInfo.streamType&&this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().getMediaFileProgress(function(e){if("object"===(void 0===e?"undefined":l(e))){var t=e.position,o=void 0===t?0:t,i=e.duration,n=void 0===i?0:i;n<o&&(o=n,r._stopProgressTimer()),r._updateStreamInfoAttributes("position",o),m.default.isFunction(a)&&a(e)}})}},{key:"_changeFullScreenState",value:function(e){this.setState({isFullScreen:e})}},{key:"getVideoDumbElementId",value:function(){if(this.videoDumb)return this.videoDumb.getElementId()}},{key:"render",value:function(){this.state.streamInfo&&!this.videoDumb?this.videoDumb=new a.default(this.elements.mediaSourceElement,this.instanceId,this.whiteBoardManagerInstance,{videoDumbElementIdPrefix:this.instanceId,streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,myUserId:this.props.myUserId}):!this.state.streamInfo&&this.videoDumb&&(this.videoDumb.destroyView(),this.videoDumb=void 0),h.default.updateStyle(this.elements.rootElement,{display:this.state.streamInfo?"":"none"})}}]),s}();o.default=d},{"../../utils/DomUtils":333,"../../utils/Utils":338,"../components/MediaPlayerController":340,"../components/TalkcloudReact":342,"../components/VideoDumb":343}],348:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkVideoPlayer=void 0;var i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),l=a(e("../../utils/Global")),c=a(e("../../utils/Utils")),n=a(e("./MediaPlayer"));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,o,i,n,!0));return a.configration=n,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n.default),i(r,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,i=t.userId,n=t.attributes,a=void 0===n?{}:n,r=t.published;if(("media"===o||"file"===o)&&a.audio&&a.video)if(r){l.default.isPlayVideoing=!0,this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:i,streamType:o,audio:a.audio,video:a.video,attributes:a}}),i===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0));var s=a.pause;this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(s?"pause":"play",e),this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand({type:"room-receiveActionCommand",message:{action:"closeDynamicPptWebPlay"}})}else l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,i=t.attributes,n=void 0===i?{}:i,a=t.updateAttributes,r=void 0===a?{}:a;("media"===o||"file"===o)&&n.audio&&n.video&&this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:r})}),void 0!==r.pause&&this.sendMediaPlayerNoticeActionCommand(r.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,i=o.type,n=o.userId,a=o.attributes,r=void 0===a?{}:a;if(("media"===i||"file"===i)&&r.audio&&r.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")){var s=this.whiteBoardManagerInstance.whiteboardViewMap.get("default");if(s&&s.sendActionCommand){var l,d={playerType:"videoPlayer",userid:n,streamType:i,audio:r.audio,video:r.video,attributes:r};d.isDynamicPptVideo="dynamicPPT"===d.attributes.source||"videoPlayer"===d.playerType&&""===d.attributes.filename,l=Object.deepAssign({type:e,fileid:d.attributes.fileid},d),s.sendActionCommand("mediaPlayerNotice",l),c.default.isFunction(s.forceViewStateUpdate)&&s.forceViewStateUpdate()}}}}]),r}();window.TalkVideoPlayer=r,o.TalkVideoPlayer=r,o.default=r},{"../../utils/Global":334,"../../utils/Utils":338,"./MediaPlayer":347}],349:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkWhiteboardToolbar=void 0;var ke=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),a=r(e("../components/TalkcloudReact")),Ie=r(e("../../utils/DomUtils")),v=r(e("../../utils/Utils")),Pe=r(e("../../utils/Language"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,i));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=n,a.elements={},a.whiteboardToolbarTalkDrag=void 0,a.state={tempDisabledDrag:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}},useColor:""},a.fileTypeMark="general",a._createConnectElements(),a._addEvent(),a._updateLanguage(),a.render(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),n(r,[{key:"componentDidUpdateState",value:function(e){e.tempDisabledDrag!==this.state.tempDisabledDrag&&this.whiteboardToolbarTalkDrag&&i(this.whiteboardToolbarTalkDrag.updateDisabled)&&this.whiteboardToolbarTalkDrag.updateDisabled(this.state.tempDisabledDrag),e.viewState.other.pencilWidth!==this.state.viewState.other.pencilWidth&&this._setPencilWidthToSlider(),e.viewState.other.eraserWidth!==this.state.viewState.other.eraserWidth&&this._setEraserWidthToSlider()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.whiteboardToolbarTalkDrag&&"function"==typeof this.whiteboardToolbarTalkDrag.destroy&&(this.whiteboardToolbarTalkDrag.destroy(),this.whiteboardToolbarTalkDrag=void 0)),!v.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.whiteboardToolbarTalkDrag&&"function"==typeof this.whiteboardToolbarTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,i=void 0===o?0:o,n=t.top,a=void 0===n?0:n;this.whiteboardToolbarTalkDrag.setPosition(i,a)}if(this.elements&&(!v.default.deepCompareJson(e.loadWhiteboardTools,this.props.loadWhiteboardTools)||e.isMobile!==this.props.isMobile)){var r=this.props.loadWhiteboardTools||{},s=r.mouse,l=r.laser,d=r.pen,c=r.text,u=r.shape,h=r.eraser,m=r.clear,f=r.undo,p=r.redo,g=r.setting;Ie.default.updateStyle(this.elements.tool_mouse,{display:s?"":"none"}),Ie.default.updateStyle(this.elements.tool_laser,{display:!l||this.props.isMobile?"none":""}),Ie.default.updateStyle(this.elements.penList,{display:d?"":"none"}),Ie.default.updateStyle(this.elements.tool_text,{display:c?"":"none"}),Ie.default.updateStyle(this.elements.shapeList,{display:u?"":"none"}),Ie.default.updateStyle(this.elements.tool_eraser,{display:h?"":"none"}),Ie.default.updateStyle(this.elements.action_clear,{display:m?"":"none"}),Ie.default.updateStyle(this.elements.action_undo,{display:f?"":"none"}),Ie.default.updateStyle(this.elements.action_redo,{display:p?"":"none"}),Ie.default.updateStyle(this.elements.settingList,{display:g?"":"none"})}e.pencilWidthScale!==this.props.pencilWidthScale&&this._setPencilWidthToSlider(),e.eraserWidthScale!==this.props.eraserWidthScale&&this._setEraserWidthToSlider()}},{key:"changeParentNode",value:function(e){e&&(Ie.default.removeChild(this.elements.whiteboardToolbarViewRootElement,this.parentNode),this.parentNode=e,Ie.default.appendChild(this.parentNode,this.elements.whiteboardToolbarViewRootElement))}},{key:"destroyView",value:function(){for(var e in Ie.default.removeChild(this.elements.whiteboardToolbarViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":i(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[WhiteboardToolbar]receive whiteboard view action command（action,cmd）:",e,t),e){case"closeAllSelectBox":this._closeList();break;case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"whiteboardToolbarViewRootMouseLeave",value:function(e){return this._closeList(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"listOpenOrCloseOnClick",value:function(e,t){if(this.elements[e])if(this._closeList(e),Ie.default.hasClass(this.elements[e],"open"))Ie.default.removeClass(this.elements[e],"open"),Ie.default.removeClass(this.elements[e],"left-show-list");else{Ie.default.addClass(this.elements[e],"open");var o=void 0,i=void 0;switch(e){case"penList":(o=this.elements.penList.getAttribute("data-current-pen"))&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.useWhiteboardTool(o,this.instanceId),i=this._getRect(this.elements.penListExtend);break;case"shapeList":(o=this.elements.shapeList.getAttribute("data-current-shape"))&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.useWhiteboardTool(o,this.instanceId),i=this._getRect(this.elements.shapeListExtend);break;case"settingList":i=this._getRect(this.elements.settingListExtend)}if(i){var n=this._getRect(this.elements.whiteboardToolbarViewRootElement),a=this._getRect(this.parentNode);n.left-a.left>a.width-(n.width+i.width+5)?Ie.default.addClass(this.elements[e],"left-show-list"):Ie.default.removeClass(this.elements[e],"left-show-list")}}return t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"listOpenOrCloseOnMouseLeave",value:function(e,t){return this.elements[e]&&Ie.default.removeClass(this.elements[e],"open"),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"useWhiteboardToolOnClick",value:function(e,t){return this.whiteBoardManagerInstance&&e&&this.whiteBoardManagerInstance.useWhiteboardTool(e,this.instanceId),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"executeWhiteboardAction",value:function(e,t){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.executeWhiteboardAction(e,this.instanceId),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"changeColorOnClick",value:function(e,t){return this._changeWhiteBoardConfigration("primaryColor",e),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"changeFontFamilyOnClick",value:function(e,t,o){return this._changeWhiteBoardConfigration("fontFamily",e),o&&(o.preventDefault(),o.stopPropagation()),!1}},{key:"changeFontSizeOnClick",value:function(e,t){return this._changeWhiteBoardConfigration("fontSize",e),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"sendActionCommand",value:function(e,t){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)){var o=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId);o&&o.sendActionCommand&&o.sendActionCommand(e,t)}}},{key:"resize",value:function(){this.whiteboardToolbarTalkDrag&&v.default.isFunction(this.whiteboardToolbarTalkDrag.resizeCallback)&&this.whiteboardToolbarTalkDrag.resizeCallback()}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),o=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:t.top-o,bottom:t.bottom-o,left:t.left-i,right:t.right-i,width:t.width,height:t.height}}},{key:"_createConnectElements",value:function(){var i=this,e=this.props.loadWhiteboardTools||{},t=e.mouse,o=e.laser,n=e.pen,a=e.text,r=e.shape,s=e.eraser,l=e.clear,d=e.undo,c=e.redo,u=e.setting;this.elements.whiteboardToolbarViewRootElement=Ie.default.createElement("article",this.instanceId+"WhiteboardToolViewRoot","talkcloud-sdk-whiteboard "+this.instanceId+" whiteboard-toolbar-root",{zIndex:6}),Ie.default.appendChild(this.parentNode,this.elements.whiteboardToolbarViewRootElement),this.elements.whiteboardToolbarViewRootElement.innerHTML='\n            <ul class="whiteboard-tool-list-container" > \n                <li class="tool-option tool_mouse"  style="display:'+(t?"":"none")+'" >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option tool_laser" style="display:'+(!o||this.props.isMobile?"none":"")+'" >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option pen-list"  data-current-pen=\'tool_pencil\' style="display:'+(n?"":"none")+'" > \n                    <em class="icon"></em>\n                    <div class="tool-pen-list-extend" >\n                         <ol class="tool-pen-container" > \n                             <em class="arrow" ></em>\n                            <li class="pen-option tool_pencil" >\n                                <em class="pen-icon "></em>\n                            </li>\n                            <li class="pen-option tool_highlighter" >\n                                <em class="pen-icon"></em>\n                            </li>\n                            <li class="pen-option tool_line" >\n                                 <em class="pen-icon"></em>\n                            </li>\n                            <li class="pen-option tool_arrow" >\n                                 <em class="pen-icon"></em>\n                            </li>\n                        </ol>\n                    </div>                \n                </li>\n                <li class="tool-option tool_text" style="display:'+(a?"":"none")+'" >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option shape-list" data-current-shape=\'tool_rectangle_empty\'  style="display:'+(r?"":"none")+'"  > \n                    <em class="icon"></em>\n                     <div class="tool-shape-list-extend" >\n                         <ol class="tool-shape-container" > \n                            <em class="arrow" ></em>\n                            <li class="shape-option tool_rectangle_empty" >\n                                <em class="shape-icon"></em>\n                            </li>\n                            <li class="shape-option tool_rectangle" >\n                                <em class="shape-icon"></em>\n                            </li>\n                            <li class="shape-option tool_ellipse_empty" >\n                                <em class="shape-icon"></em>\n                            </li>\n                            <li class="shape-option tool_ellipse" >\n                                <em class="shape-icon"></em>\n                            </li>\n                        </ol>\n                     </div>\n                </li>\n                <li class="tool-option tool_eraser"  style="display:'+(s?"":"none")+'" >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option tool_undo" style="display:'+(d?"":"none")+'"  >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option tool_redo" style="display:'+(c?"":"none")+'" >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option tool_clear" style="display:'+(l?"":"none")+'"  >\n                    <em class="icon"></em>\n                </li>\n                <li class="tool-option setting-list" style="display:'+(u?"":"none")+'" > \n                    <em class="icon"></em>\n                    <div class="setting-list-extend" title=""  >\n                        <div class="setting-container" > \n                            <em class="arrow" ></em>\n                            <div class="colors-container" >                         \n                            </div>\n                            <div class="font-container">\n                                <span class="font-title title"></span>\n                                <div class="font-content-container" > \n                                    <div class="font-family-container"> \n                                    </div>\n                                    <div class="font-size-container" >\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="pencil-width-container" >\n                                <span class="pencil-width-title title"  ></span>\n                                <div class="slider-container pencil-slider-container" id="'+this.instanceId+'PencilWidthSlider" ></div>\n                            </div> \n                            <div class="eraser-width-container" >\n                                <span class="eraser-width-title title"></span>\n                                <div class="slider-container eraser-slider-container"  id="'+this.instanceId+'EraserWidthSlider" ></div>\n                            </div> \n                        </div>\n                    </div>\n                  \n                </li>\n            </ul>\n        ',this.elements.tool_mouse=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_mouse")[0],this.elements.tool_laser=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_laser")[0],this.elements.tool_text=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_text")[0],this.elements.tool_eraser=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_eraser")[0],this.elements.tool_pencil=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_pencil")[0],this.elements.tool_highlighter=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_highlighter")[0],this.elements.tool_line=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_line")[0],this.elements.tool_arrow=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_arrow")[0],this.elements.tool_ellipse=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_ellipse")[0],this.elements.tool_ellipse_empty=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_ellipse_empty")[0],this.elements.tool_rectangle=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_rectangle")[0],this.elements.tool_rectangle_empty=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_rectangle_empty")[0],this.elements.action_undo=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_undo")[0],this.elements.action_redo=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_redo")[0],this.elements.action_clear=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool_clear")[0],this.elements.penList=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("pen-list")[0],this.elements.shapeList=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("shape-list")[0],this.elements.settingList=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("setting-list")[0],this.elements.penListExtend=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool-pen-list-extend")[0],this.elements.shapeListExtend=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("tool-shape-list-extend")[0],this.elements.settingListExtend=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("setting-list-extend")[0],this.elements.colorsContainer=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("colors-container")[0],this.elements.fontTitle=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("font-title")[0],this.elements.fontFamilyContainer=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("font-family-container")[0],this.elements.fontSizeContainer=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("font-size-container")[0],this.elements.pencilWidthTitle=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("pencil-width-title")[0],this.elements.eraserWidthTitle=document.getElementById(this.instanceId+"WhiteboardToolViewRoot").getElementsByClassName("eraser-width-title")[0],window.TalkSlider&&(this.pencilWidthSlider=new window.TalkSlider({sliderContainer:{id:i.instanceId+"PencilWidthSlider",direction:"horizontal"},onChange:function(e){var t=i.props.pencilWidthScale,o=void 0===t?1:t;i.sendActionCommand("pencilWidthChange",{pencilWidthPercentage:e,pencilWidth:e*o})},onAfterChange:function(e){e=e<1?1:e;var t=i.props.pencilWidthScale,o=void 0===t?1:t;i._changeWhiteBoardConfigration("pencilWidth",e*o),i._changeWhiteBoardConfigration("shapeWidth",e*o),i.sendActionCommand("pencilWidthChange",{pencilWidthPercentage:e,pencilWidth:e*o})}}),this.eraserWidthSlider=new window.TalkSlider({sliderContainer:{id:i.instanceId+"EraserWidthSlider",direction:"horizontal"},onChange:function(e){var t=i.props.eraserWidthScale,o=void 0===t?1:t;i.sendActionCommand("eraserWidthChange",{eraserWidth:e*o,eraserWidthPercentage:e/100})},onAfterChange:function(e){e=e<1?1:e;var t=i.props.eraserWidthScale,o=void 0===t?1:t;i._changeWhiteBoardConfigration("eraserWidth",e*o),i.sendActionCommand("eraserWidthChange",{eraserWidth:e*o,eraserWidthPercentage:e/100})}}),this._setPencilWidthToSlider(),this._setEraserWidthToSlider()),this._addTalkDrag()}},{key:"_addTalkDrag",value:function(){if(this.props.isDrag&&window.TalkDrag&&this.elements.whiteboardToolbarViewRootElement){this.whiteboardToolbarTalkDrag&&"function"==typeof this.whiteboardToolbarTalkDrag.destroy&&(this.whiteboardToolbarTalkDrag.destroy(),this.whiteboardToolbarTalkDrag=void 0);var e=this.props.initDragPosition||{},t=e.left,o=void 0===t?0:t,i=e.top,n=void 0===i?0:i;this.whiteboardToolbarTalkDrag=new window.TalkDrag(this.elements.whiteboardToolbarViewRootElement,{containerData:{left:o,top:n}})}}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var o=Pe.default.get(t).whiteboardToolbar,i=o.fontSizeText,n=o.fontFamily,a=void 0===n?{}:n,r=o.pencilWidthTitle,s=o.eraserWidthTitle,l=o.toolTextList,d=void 0===l?{}:l,c=a.title,u=a.options,h=void 0===u?{}:u;this.elements.fontTitle.innerHTML=c,this.elements.pencilWidthTitle.innerHTML=r,this.elements.eraserWidthTitle.innerHTML=s,Ie.default.removeAllChild(this.elements.fontFamilyContainer);var m=!0,f=!1,p=void 0;try{for(var g,v=Object.entries(h)[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var y=g.value,b=ke(y,2),_=b[0],w=b[1];(E=Ie.default.createElement("button",void 0,"font-family-option "+_)).innerHTML=w,E.setAttribute("data-font-family-key",_),E.setAttribute("data-font-family-value",w),E.onclick=this.changeFontFamilyOnClick.bind(this,w,_),Ie.default.appendChild(this.elements.fontFamilyContainer,E)}}catch(e){f=!0,p=e}finally{try{!m&&v.return&&v.return()}finally{if(f)throw p}}Ie.default.removeAllChild(this.elements.fontSizeContainer);var S=0,k=void 0,I=!0,P=!1,C=void 0;try{for(var x,T=[12,14,18,24,26,36,48,72][Symbol.iterator]();!(I=(x=T.next()).done);I=!0){var E,D=x.value;(E=Ie.default.createElement("button",void 0,"font-size-option font-size-"+D)).innerHTML=D+i,E.setAttribute("data-font-size",D),E.onclick=this.changeFontSizeOnClick.bind(this,D),2<S&&(S=0),0===S&&(k=Ie.default.createElement("span",void 0,"font-size-list"),Ie.default.appendChild(this.elements.fontSizeContainer,k)),k&&Ie.default.appendChild(k,E),++S}}catch(e){P=!0,C=e}finally{try{!I&&T.return&&T.return()}finally{if(P)throw C}}var L=!0,W=!1,A=void 0;try{for(var M,R=Object.entries(d)[Symbol.iterator]();!(L=(M=R.next()).done);L=!0){var j=M.value,N=ke(j,2),V=N[0],O=N[1];this.elements[V]&&(this.elements[V].title=O)}}catch(e){W=!0,A=e}finally{try{!L&&R.return&&R.return()}finally{if(W)throw A}}this.render()}},{key:"_changeWhiteBoardConfigration",value:function(e,t){if(this.whiteBoardManagerInstance){var o={};o[e]=t,this.whiteBoardManagerInstance.changeWhiteBoardConfigration(o,this.instanceId)}}},{key:"_closeList",value:function(e){"penList"!==e&&Ie.default.removeClass(this.elements.penList,"open"),"shapeList"!==e&&Ie.default.removeClass(this.elements.shapeList,"open"),"settingList"!==e&&Ie.default.removeClass(this.elements.settingList,"open")}},{key:"_addEvent",value:function(){Ie.default.removeAllChild(this.elements.colorsContainer);var e=!0,t=!1,o=void 0;try{for(var i,n=["#5AC9FA","#FFCC00","#ED3E3A","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"][Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value,r=Ie.default.createElement("button",void 0,"color-option color-"+a.replace(/#/g,""),{backgroundColor:a});r.innerHTML='<span style="border-color: '+a+'"></span>',r.setAttribute("data-color",a),r.onclick=this.changeColorOnClick.bind(this,a),Ie.default.appendChild(this.elements.colorsContainer,r)}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}this.elements.whiteboardToolbarViewRootElement.onmouseleave=this.whiteboardToolbarViewRootMouseLeave.bind(this);var s=!0,l=!(this.elements.settingListExtend.onclick=function(e){return e&&(e.preventDefault(),e.stopPropagation()),!1}),d=void 0;try{for(var c,u=["penList","shapeList","settingList"][Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;this.elements[h]&&(this.elements[h].onclick=this.listOpenOrCloseOnClick.bind(this,h),this.elements[h].onmouseleave=this.listOpenOrCloseOnMouseLeave.bind(this,h))}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var m=!0,f=!1,p=void 0;try{for(var g,v=["tool_mouse","tool_laser","tool_text","tool_eraser","tool_pencil","tool_highlighter","tool_line","tool_arrow","tool_ellipse","tool_ellipse_empty","tool_rectangle","tool_rectangle_empty"][Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var y=g.value;this.elements[y]&&(this.elements[y].onclick=this.useWhiteboardToolOnClick.bind(this,y))}}catch(e){f=!0,p=e}finally{try{!m&&v.return&&v.return()}finally{if(f)throw p}}var b=!0,_=!1,w=void 0;try{for(var S,k=["action_clear","action_redo","action_undo"][Symbol.iterator]();!(b=(S=k.next()).done);b=!0){var I=S.value;this.elements[I]&&(this.elements[I].onclick=this.executeWhiteboardAction.bind(this,I))}}catch(e){_=!0,w=e}finally{try{!b&&k.return&&k.return()}finally{if(_)throw w}}}},{key:"_setPencilWidthToSlider",value:function(){if(this.pencilWidthSlider&&this.pencilWidthSlider.setProgress){var e=this.props.pencilWidthScale,t=void 0===e?1:e;this.pencilWidthSlider.setProgress(this.state.viewState.other.pencilWidth/t),this.sendActionCommand("pencilWidthChange",{pencilWidth:this.state.viewState.other.pencilWidth,pencilWidthPercentage:this.state.viewState.other.pencilWidth/t/100})}}},{key:"_setEraserWidthToSlider",value:function(){if(this.eraserWidthSlider&&this.eraserWidthSlider.setProgress){var e=this.props.eraserWidthScale,t=void 0===e?1:e;this.eraserWidthSlider.setProgress(this.state.viewState.other.eraserWidth/t),this.sendActionCommand("eraserWidthChange",{eraserWidth:this.state.viewState.other.eraserWidth,eraserWidthPercentage:this.state.viewState.other.eraserWidth/t/100})}}},{key:"render",value:function(){var e=this.state.viewState,t=e.tool,o=void 0===t?{}:t,i=e.action,n=void 0===i?{}:i,a=e.other,r=void 0===a?{}:a,s=r.primaryColor,l=r.fontFamily,d=r.fontSize,c={},u={},h=!0,m=!1,f=void 0;try{for(var p,g=Object.entries(o)[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var v=p.value,y=ke(v,2),b=y[0],_=y[1];if(this.elements[b]){switch(b){case"tool_pencil":case"tool_highlighter":case"tool_line":case"tool_arrow":_.isUse&&(c[b]=_);break;case"tool_rectangle":case"tool_rectangle_empty":case"tool_ellipse_empty":case"tool_ellipse":_.isUse&&(u[b]=_)}_.isUse?Ie.default.addClass(this.elements[b],"active"):Ie.default.removeClass(this.elements[b],"active"),_.disabled?Ie.default.addClass(this.elements[b],"disabled"):Ie.default.removeClass(this.elements[b],"disabled"),this.elements[b].disabled=_.disabled}}}catch(e){m=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw f}}if(Object.keys(c).length){var w=!0,S=!1,k=void 0;try{for(var I,P=Object.keys(c)[Symbol.iterator]();!(w=(I=P.next()).done);w=!0){var C=I.value;this.elements.penList.setAttribute("data-current-pen",C),Ie.default.addClass(this.elements.penList,"active")}}catch(e){S=!0,k=e}finally{try{!w&&P.return&&P.return()}finally{if(S)throw k}}}else Ie.default.removeClass(this.elements.penList,"active");if(Object.keys(u).length){var x=!0,T=!1,E=void 0;try{for(var D,L=Object.keys(u)[Symbol.iterator]();!(x=(D=L.next()).done);x=!0){var W=D.value;this.elements.shapeList.setAttribute("data-current-shape",W),Ie.default.addClass(this.elements.shapeList,"active")}}catch(e){T=!0,E=e}finally{try{!x&&L.return&&L.return()}finally{if(T)throw E}}}else Ie.default.removeClass(this.elements.shapeList,"active");var A=!0,M=!1,R=void 0;try{for(var j,N=Object.entries(n)[Symbol.iterator]();!(A=(j=N.next()).done);A=!0){var V=j.value,O=ke(V,2),B=O[0],F=O[1];this.elements[B]&&(F.disabled?Ie.default.addClass(this.elements[B],"disabled"):Ie.default.removeClass(this.elements[B],"disabled"),this.elements[B].disabled=F.disabled)}}catch(e){M=!0,R=e}finally{try{!A&&N.return&&N.return()}finally{if(M)throw R}}var z=this.elements.colorsContainer.getElementsByClassName("color-option"),U=!0,H=!1,J=void 0;try{for(var K,q=z[Symbol.iterator]();!(U=(K=q.next()).done);U=!0){var G=K.value;G.getAttribute("data-color")===s?Ie.default.addClass(G,"active"):Ie.default.removeClass(G,"active")}}catch(e){H=!0,J=e}finally{try{!U&&q.return&&q.return()}finally{if(H)throw J}}var Y=this.elements.fontFamilyContainer.getElementsByClassName("font-family-option"),X=!0,Z=!1,$=void 0;try{for(var Q,ee=Y[Symbol.iterator]();!(X=(Q=ee.next()).done);X=!0){for(var te=Q.value,oe=void 0,ie=["ch","tw","en"],ne=0;ne<ie.length;ne++){var ae=ie[ne],re=Pe.default.get(ae).whiteboardToolbar.fontFamily.options,se=void 0===re?{}:re,le=!0,de=!1,ce=void 0;try{for(var ue,he=Object.entries(se)[Symbol.iterator]();!(le=(ue=he.next()).done);le=!0){var me=ue.value,fe=ke(me,2),pe=fe[0];if(fe[1]===l){oe=pe;break}}}catch(e){de=!0,ce=e}finally{try{!le&&he.return&&he.return()}finally{if(de)throw ce}}if(oe)break}te.getAttribute("data-font-family-key")===oe?Ie.default.addClass(te,"active"):Ie.default.removeClass(te,"active")}}catch(e){Z=!0,$=e}finally{try{!X&&ee.return&&ee.return()}finally{if(Z)throw $}}var ge=this.elements.fontSizeContainer.getElementsByClassName("font-size-option"),ve=!0,ye=!1,be=void 0;try{for(var _e,we=ge[Symbol.iterator]();!(ve=(_e=we.next()).done);ve=!0){var Se=_e.value;Se.getAttribute("data-font-size")===""+d?Ie.default.addClass(Se,"active"):Ie.default.removeClass(Se,"active")}}catch(e){ye=!0,be=e}finally{try{!ve&&we.return&&we.return()}finally{if(ye)throw be}}}}]),r}();window.TalkWhiteboardToolbar=s,o.TalkWhiteboardToolbar=s,o.default=s},{"../../utils/DomUtils":333,"../../utils/Language":335,"../../utils/Utils":338,"../components/TalkcloudReact":342}],350:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}}(),y=n(e("../../utils/DomUtils")),r=n(e("../../utils/Configuration")),v=n(e("../../utils/Constant")),Ie=n(e("../../utils/Global")),b=n(e("../../utils/Utils")),Pe=n(e("../../intermediateLayer/WhiteboardIntermediateLayer")),_=n(e("../../intermediateLayer/DynamicPptIntermediateLayer")),w=n(e("../../intermediateLayer/H5DocumentPptIntermediateLayer"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var a=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Object.deepAssign({},r.default.defaultWhiteboard,r.default.commonWhiteboard),i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.parentNode=e,this.instanceId=t,this.configration=o,this.receiveActionCommand=i,this.whiteBoardManagerInstance=n,this.elements={},this.fileid=0,this.fullScreen=!1,this.remark=!1,this.scale=this.configration.defaultWhiteboardScale,this.remarkText="",this.fileTypeMark="generalDocument",this.cacheMaxPageNum=1,this.cacheMinPageNum=1,this.filePreLoadCurrPage=1,this.filePreLoadStep=2,this.dynamicPptVolume=100,this.maxGeneralFileForceReloadNumber=10,this.generalDocumentFileForceReloadNumber=0,this.whiteboardViewState={tool:{},action:{},zoom:{},page:{},documentType:this.fileTypeMark,fileid:this.fileid,dynamicPptVolume:this.dynamicPptVolume,fullScreen:this.fullScreen,remark:this.remark,scale:this.scale,remarkText:this.remarkText,other:{primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily}},this._createElements(),this._connectElements()}return i(a,[{key:"getConfigration",value:function(){return this.configration}},{key:"saveFiledataAndLoadCurrpageWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._saveFiledataAndLoadCurrpageWhiteboardData(e)}},{key:"noticeWhiteboardActionCommand",value:function(e,t){if("default"===this.instanceId)switch(e){case"playOrPauseDynamicPpt":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:t.pause?"stopDynamicPpt":"playDynamicPpt"});break;case"updateMute":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:{type:"updateMute",data:{mute:t.isMute}}});break;case"ExtendedNotice":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:t.extendedData});break;case"closeDynamicPptAutoVideo":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}},{key:"reloadCurrentDocument",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("default"===this.instanceId||this.configration.hasExtendDocument)switch(this.fileTypeMark){case"generalDocument":var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=t.swfpath,i=t.isContentDocument,n=t.fileid,a=t.filetype,r=t.currpage;if(o&&"whiteboard"!==a&&0!=n){var s=void 0;if(Number(i))o&&(s=o);else{var l=o.lastIndexOf("."),d=o.substring(l),c=o.replace(d,"-"+r+d);s=Ie.default.nowUseDocAddress+c}Pe.default.setWhiteboardWatermarkImage(this.instanceId,s,{resetDedaultWhiteboardMagnification:!1})}break;case"dynamicPPT":e.isAgainreconnect||(this.forceReloadTimestampFromPpt=(new Date).getTime()),this._loadCurrentDynamicPpt({},{isAgainreconnect:e.isAgainreconnect});break;case"h5Document":this._loadCurrentH5Document({forceReloadTimestamp:(new Date).getTime()})}}},{key:"changeDocumentRemarkState",value:function(e){this.remark=e&&this.configration.canRemark,this._viewStateUpdate()}},{key:"changeFullScreenState",value:function(e){this.fullScreen=e,this._viewStateUpdate(),this.resizeWhiteboardHandler()}},{key:"destroyWhiteboardView",value:function(){for(var e in Pe.default.hasWhiteboardById(this.instanceId)&&Pe.default.destroyWhiteboardInstance(this.instanceId),_.default.hasDynamicPptById(this.instanceId)&&_.default.destroyDynamicPptInstance(this.instanceId),w.default.hasH5DocumentById(this.instanceId)&&w.default.destroyH5DocumentInstance(this.instanceId),y.default.removeChild(this.elements.whiteboardViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"changeWhiteBoardConfigration",value:function(e){Object.deepAssign(this.configration,e);var t={},o={},i={},n=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(e)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=s.value,c=ke(d,2),u=c[0],h=c[1];"canDraw"===u?t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom:"myUserId"===u?t.myselfId=h:"myName"===u?t.nickname=h:"primaryColor"===u||"secondaryColor"===u||"primaryColor"===u?t[u.replace(/Color/g,"")]=h:"synchronization"===u?t.synchronizationWhiteboard=this.configration.synchronization&&this.configration.isConnectedRoom:t[u]=h,"synchronization"===u?o.synchronizationDynamicPpt=this.configration.synchronization&&this.configration.isConnectedRoom:"actionClick"===u?o.dynamicPptActionClick=this.configration.actionClick&&this.configration.isConnectedRoom:o[u]=h,"synchronization"===u?i.synchronizationH5Document=this.configration.synchronization&&this.configration.isConnectedRoom:"actionClick"===u?i.h5DocumentActionClick=this.configration.actionClick&&this.configration.isConnectedRoom:i[u]=h}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}void 0!==e.isConnectedRoom&&(t.synchronizationWhiteboard=this.configration.synchronization&&this.configration.isConnectedRoom,o.synchronizationDynamicPpt=this.configration.synchronization&&this.configration.isConnectedRoom,i.synchronizationH5Document=this.configration.synchronization&&this.configration.isConnectedRoom,o.dynamicPptActionClick=this.configration.actionClick&&this.configration.isConnectedRoom,i.h5DocumentActionClick=this.configration.actionClick&&this.configration.isConnectedRoom,t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom),void 0!==e.synchronization&&(t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom),Pe.default.updateWhiteboardProperty(this.instanceId,t),(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.updateDynamicPptProperty(this.instanceId,o),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.updateH5DocumentProperty(this.instanceId,i),void 0!==e.loadDynamicPptView&&this.elements.dynamicPptViewElement&&(e.loadDynamicPptView&&!document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))?(y.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),this._productionDynamicPpt()):!e.loadDynamicPptView&&document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))&&(_.default.hasDynamicPptById(this.instanceId)&&_.default.destroyDynamicPptInstance(this.instanceId),y.default.removeChild(this.elements.dynamicPptViewElement,this.elements.documentViewElement))),void 0!==e.loadH5DocumentView&&this.elements.h5DocumentViewElement&&(e.loadH5DocumentView&&!document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))?(y.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),this._productionH5Document()):!e.loadH5DocumentView&&document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))&&(w.default.hasH5DocumentById(this.instanceId)&&w.default.destroyH5DocumentInstance(this.instanceId),y.default.removeChild(this.elements.h5DocumentViewElement,this.elements.documentViewElement))),void 0!==e.rootBackgroundColor&&y.default.updateStyle(this.elements.whiteboardViewRootElement,{backgroundColor:e.rootBackgroundColor}),void 0!==e.isMobile&&(e.isMobile?y.default.addClass(this.elements.whiteboardViewRootElement,"app-mobile"):y.default.removeClass(this.elements.whiteboardViewRootElement,"app-mobile")),void 0===e.canPage&&void 0===e.addPage&&void 0===e.isConnectedRoom||this._viewStateUpdate()}},{key:"receiveEventRoomPubmsg",value:function(e){e&&"string"==typeof e&&(e=JSON.parse(e)),"object"===(void 0===e?"undefined":Se(e))&&e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),"object"===Se(e.message)&&e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"ShowPage":case"ExtendShowPage":t.source="room-pubmsg",this._handleShowPageSignalling(t,e.local);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?Pe.default.activeWhiteboardTool("tool_mouse",this.instanceId):Pe.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"receiveEventRoomDelmsg",value:function(e){}},{key:"receiveEventRoomMsglist",value:function(e,t){switch(e){case"ShowPage":case"ExtendShowPage":t.source="room-msglist",this._handleShowPageSignalling(t);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?Pe.default.activeWhiteboardTool("tool_mouse",this.instanceId):Pe.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e,t){switch(e){case"fullScreenChangeCallback":this.changeFullScreenState(t.isFullScreen);break;case"changeDynamicPptSize":this.configration.isMobile&&"dynamicPPT"===this.fileTypeMark&&_.default.changeDynamicPptSize(this.instanceId);break;case"closeDynamicPptWebPlay":if("dynamicPPT"===this.fileTypeMark){_.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}}},{key:"sendActionCommand",value:function(e,t){this.receiveActionCommand&&"function"==typeof this.receiveActionCommand&&("object"!==(void 0===t?"undefined":Se(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),this.receiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.pubMsg&&this.whiteBoardManagerInstance.pubMsg(e)}},{key:"delMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.delMsg&&this.whiteBoardManagerInstance.delMsg(e)}},{key:"getWhiteboardViewState",value:function(){return this.whiteboardViewState}},{key:"forceViewStateUpdate",value:function(){this._viewStateUpdate()}},{key:"useWhiteboardTool",value:function(e){if(this.whiteboardViewState.tool[e]&&this.whiteboardViewState.tool[e].disabled)L.Logger.warning("whiteboard tool("+e+") state is disabled , cannot use "+e+" tool!");else{if(("default"===this.instanceId||this.configration.hasExtendDocument)&&this.configration.synchronization&&this.configration.isConnectedRoom&&e!==Pe.default.getActiveTool(this.instanceId)&&("tool_mouse"!==e&&"tool_mouse"===Pe.default.getActiveTool(this.instanceId)||"tool_mouse"===e&&"tool_mouse"!==Pe.default.getActiveTool(this.instanceId))){var t={name:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool",id:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,selectMouse:"tool_mouse"===e},save:!0};this.pubMsg(t)}Pe.default.activeWhiteboardTool(e,this.instanceId)}}},{key:"executeWhiteboardAction",value:function(e){this.whiteboardViewState.action[e]&&this.whiteboardViewState.action[e].disabled?L.Logger.warning("whiteboard action("+e+") state is disabled , cannot execute "+e+" action!"):Pe.default.activeWhiteboardTool(e,this.instanceId)}},{key:"executeZoomWhiteaord",value:function(e){this.whiteboardViewState.zoom[e]&&this.whiteboardViewState.zoom[e].disabled?L.Logger.warning("whiteboard zoom("+e+") state is disabled , cannot execute "+e+" zoom!"):Pe.default.activeWhiteboardTool(e,this.instanceId)}},{key:"addPage",value:function(){var e=Pe.default.getWhiteboardFiledata(this.instanceId),t=e.fileid,o=e.pagenum;if("generalDocument"===this.fileTypeMark||0!==Number(t)){if(o++,Pe.default.updateWhiteboardFiledata(this.instanceId,{pagenum:o}),this.configration.synchronization&&this.configration.isConnectedRoom){var i={name:"default"===this.instanceId?"WBPageCount":"ExtendWBPageCount",id:"default"===this.instanceId?"WBPageCount":"WBPageCount_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,totalPage:o,fileid:t},save:!0};this.pubMsg(i)}this.nextPage()}else L.Logger.warning("whiteboard addPage method can only be used in pure whiteboard.")}},{key:"nextPage",value:function(){var t=this;if(this.whiteboardViewState.page.nextPage&&this.whiteboardViewState.page.nextPage.disabled)L.Logger.warning("whiteboard nexPage state is disabled , cannot execute nextPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=Pe.default.getWhiteboardFiledata(this.instanceId),o=e.currpage,i=e.pagenum;i<++o&&(o=i);var n={data:{filedata:{currpage:o}}};this._sendSignalling_ShowPage(n,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":w.default.nextPage(this.instanceId);break;case"dynamicPPT":_.default.nextSlide(this.instanceId)}}},{key:"prevPage",value:function(){var t=this;if(this.whiteboardViewState.page.prevPage&&this.whiteboardViewState.page.prevPage.disabled)L.Logger.warning("whiteboard prevPage state is disabled , cannot execute prevPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=Pe.default.getWhiteboardFiledata(this.instanceId).currpage;--e<1&&(e=1);var o={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(o,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":w.default.prevPage(this.instanceId);break;case"dynamicPPT":_.default.prevSlide(this.instanceId)}}},{key:"skipPage",value:function(e){var t=this;switch(this.fileTypeMark){case"generalDocument":var o=Pe.default.getWhiteboardFiledata(this.instanceId).pagenum;o<e&&(e=o),e<1&&(e=1);var i={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(i,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":w.default.skipPage(this.instanceId,e);break;case"dynamicPPT":var n=e;_.default.jumpToAnimation(this.instanceId,n,0,!0)}}},{key:"nextStep",value:function(){if("dynamicPPT"===this.fileTypeMark)if(this.whiteboardViewState.page.nextStep&&this.whiteboardViewState.page.nextStep.disabled)L.Logger.warning("whiteboard nextStep state is disabled , cannot execute nextStep method!");else switch(this.fileTypeMark){case"dynamicPPT":_.default.nextStep(this.instanceId)}else L.Logger.warning("whiteboard nextStep method can only be used in dynamic PPT files.")}},{key:"prevStep",value:function(){if("dynamicPPT"===this.fileTypeMark)if(this.whiteboardViewState.page.prevStep&&this.whiteboardViewState.page.prevStep.disabled)L.Logger.warning("whiteboard prevStep state is disabled , cannot execute prevStep method!");else switch(this.fileTypeMark){case"dynamicPPT":_.default.prevStep(this.instanceId)}else L.Logger.warning("whiteboard prevStep method can only be used in dynamic PPT files.")}},{key:"resizeWhiteboardSizeCallback",value:function(e){e.loadScrollBar?y.default.addClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"):y.default.removeClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"),y.default.updateStyle(this.elements.documentViewElement,{width:e.style.width,height:e.style.height}),y.default.updateStyle(this.elements.totalDocumentViewElement,{width:e.style.width,height:e.style.height,top:"50%",left:"50%"}),y.default.updateStyle(this.elements.totalDocumentViewElement,{marginLeft:"-"+this.elements.totalDocumentViewElement.offsetWidth/2+"px",marginTop:"-"+this.elements.totalDocumentViewElement.offsetHeight/2+"px"})}},{key:"noticeUpdateToolDescCallback",value:function(){this._viewStateUpdate()}},{key:"noticeUpdateWhiteboardFiledataCallback",value:function(){this._viewStateUpdate()}},{key:"receiveActionCommandCallback",value:function(e,t){if(t.id===this.instanceId)switch(e){case"closeAllSelectBox":this.sendActionCommand("closeAllSelectBox");break;case"changeWhiteboardActiveTool":this._updateViewShowAndHide();break;case"updateWhiteboardWatermarkImageScale":Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,t.scale);break;case"dynamicPptLoadEnd":case"h5DocumentLoadEnd":this.scale=t.scale,this._viewStateUpdate(),y.default.removeClass(this.elements.disableClickViewElement,"loading");break;case"sendSignalling_ShowPage":this._sendSignalling_ShowPage(t.updatePubmsgData);break;case"saveFiledataAndLoadCurrpageWhiteboardData":case"dynamicPptSlideChange":this._saveFiledataAndLoadCurrpageWhiteboardData(t.updateFileData);break;case"dynamicPptStepChange":Pe.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"publishDymanicPptNetworkMedia":if("default"===this.instanceId){_.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"});var o=Pe.default.getWhiteboardFiledata(this.instanceId),i=o.swfpath,n=o.isContentDocument,a=void 0;Number(n)?i&&(a=i.replace(/\/newppt.html/g,"")):a=Ie.default.nowUseDocAddress+i,t.url=a+"/"+t.url,this.whiteBoardManagerInstance&&(this.configration.clientMediaShare&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile?this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile(t.url,void 0,void 0,{IgnoreElementId:!0,toID:this.configration.mediaShareToID,attrs:t.attributes}):this.whiteBoardManagerInstance.startShareMedia(t.url,t.video,this.configration.mediaShareToID,t.attributes))}break;case"updateWhiteboardFiledata":Pe.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"getWhiteboardFiledata":t&&t.callback&&"function"==typeof t.callback&&t.callback(Pe.default.getWhiteboardFiledata(this.instanceId));break;case"reloadCurrentDocument":this.reloadCurrentDocument({isAgainreconnect:t.isAgainreconnect});break;case"reloadDynamicPptIframeSrc":if(t.iframeSrc&&"dynamicPPT"===this.fileTypeMark&&new RegExp(Pe.default.getWhiteboardFiledata(this.instanceId).swfpath+"/newppt.html","g").test(t.iframeSrc)){var r=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress;Ie.default.docAddressKey=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey,!0),this.whiteBoardManagerInstance&&b.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Ie.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(u(Ie.default.docAddressList)),docAddressIndex:Ie.default.docAddressKey,oldDocAddress:r,nowDocAddress:b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress})),Ie.default.nowUseDocAddress=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload dynamic ppt]change doc address , old address is "+r+" , now address is "+Ie.default.nowUseDocAddress),void 0!==t.forceReloadNumber&&(this.forceReloadNumberFromPpt=t.forceReloadNumber),this._loadCurrentDynamicPpt(),L.Logger.info("["+t.source+"]load dynamic ppt failure , reload file , old url is "+t.iframeSrc+" , now url is "+_.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber)}break;case"reloadH5DocumentIframeSrc":if(t.iframeSrc&&"h5Document"===this.fileTypeMark&&new RegExp(Pe.default.getWhiteboardFiledata(this.instanceId).swfpath,"g").test(t.iframeSrc)){var s=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress;Ie.default.docAddressKey=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey,!0),this.whiteBoardManagerInstance&&b.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Ie.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(u(Ie.default.docAddressList)),docAddressIndex:Ie.default.docAddressKey,oldDocAddress:s,nowDocAddress:b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress})),Ie.default.nowUseDocAddress=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload h5 document]change doc address , old address is "+s+" , now address is "+Ie.default.nowUseDocAddress);var l={};t.forceReloadNumber&&(l.forceReloadNumber=t.forceReloadNumber),this._loadCurrentH5Document(l,{forceReloadNumber:t.forceReloadNumber}),L.Logger.info("["+t.source+"]load h5 document failure , reload file , old url is "+t.iframeSrc+" , now url is "+_.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber)}break;case"updateWhiteboardToolsInfo":this._viewStateUpdate();break;case"h5DocumentOnJumpPage":this.whiteBoardManagerInstance.skipPage(t.toPage,this.instanceId)}}},{key:"whiteboardWatermarkImageOnFailureCallback",value:function(e){var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=t.swfpath,i=t.currpage,n=t.filetype,a=t.isContentDocument;if("generalDocument"===this.fileTypeMark&&o&&e&&"whiteboard"!==n&&this.generalDocumentFileForceReloadNumber<this.maxGeneralFileForceReloadNumber){var r=void 0;if(Number(a))r=o;else{var s=o.lastIndexOf("."),l=o.substring(s);r=o.replace(l,"-"+i+l)}if(new RegExp(r,"g").test(e)){if(Number(a))this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file ,  url is "+r+" , reload number is "+this.generalDocumentFileForceReloadNumber);else{var d=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress;Ie.default.docAddressKey=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey,!0),this.whiteBoardManagerInstance&&b.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Ie.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(u(Ie.default.docAddressList)),docAddressIndex:Ie.default.docAddressKey,oldDocAddress:d,nowDocAddress:b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress})),Ie.default.nowUseDocAddress=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload general document]change doc address , old address is "+d+" , now address is "+Ie.default.nowUseDocAddress),this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file , old url is "+(d+r)+" , now url is "+(Ie.default.nowUseDocAddress+r)+" , reload number is "+this.generalDocumentFileForceReloadNumber)}var c=void 0;Number(a)?r&&(c=r):c=Ie.default.nowUseDocAddress+r,Pe.default.setWhiteboardWatermarkImage(this.instanceId,c,{resetDedaultWhiteboardMagnification:!1})}else this.generalDocumentFileForceReloadNumber=0}}},{key:"whiteboardWatermarkImageOnloadCallback",value:function(e){var t=e.width,o=e.height;this.scale=t/o,this._viewStateUpdate()}},{key:"resizeWhiteboardHandler",value:function(){Pe.default.resizeWhiteboardHandler(this.instanceId),"dynamicPPT"===this.fileTypeMark&&"ios"===this.configration.clientType&&_.default.changeDynamicPptSize(this.instanceId)}},{key:"isWhiteboardTextEditing",value:function(){return Pe.default.isWhiteboardTextEditing(this.instanceId)}},{key:"resetWhiteboardData",value:function(){Pe.default.clearWhiteboardAllDataById(this.instanceId)}},{key:"receiveWindowMessageEvent",value:function(e){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.receiveWindowMessageEvent(this.instanceId,e),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.receiveWindowMessageEvent(this.instanceId,e)}},{key:"getWhiteboardRootElement",value:function(){return this.elements.whiteboardViewRootElement}},{key:"resetPureWhiteboardTotalPage",value:function(e){if(1<e)for(var t=2;t<=e;t++)Pe.default.clearWhiteboardDataByFileidAndCurrpage(this.instanceId,0,t);var o=Pe.default.getWhiteboardFiledata(this.instanceId);if(0==o.fileid){o.currpage=1,o.pagenum=1,this._saveFiledataAndLoadCurrpageWhiteboardData(o),this._generalDocumentFileShowPage(!1)}}},{key:"getDynamicPptInstanceByID",value:function(){return _.default.getDynamicPptInstanceByID(this.instanceId)}},{key:"getH5DocumentInstanceByID",value:function(){return w.default.getH5DocumentInstanceByID(this.instanceId)}},{key:"_createElements",value:function(){this.elements.whiteboardViewRootElement=y.default.createElement("section",this.instanceId+"TalkcloudSdkWhiteboardRoot",(this.configration.isMobile?"app-mobile ":" ")+"talkcloud-sdk-whiteboard "+this.instanceId+" sdkwhiteboard-root",{width:"100%",height:"100%",position:"relative",left:0,top:0,backgroundColor:this.configration.rootBackgroundColor}),this.elements.totalDocumentViewElement=y.default.createElement("section",this.instanceId+"TalkcloudTotalDocument","talkcloud-sdk-whiteboard "+this.instanceId+" total-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,maxWidth:"100%",maxHeight:"100%"}),this.elements.documentViewElement=y.default.createElement("section",this.instanceId+"TalkcloudDocument","talkcloud-sdk-whiteboard "+this.instanceId+" document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0}),this.elements.whiteboardViewElement=y.default.createElement("article",this.instanceId+"TalkcloudWhiteboard","talkcloud-sdk-whiteboard "+this.instanceId+" whiteboard-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:2}),this.elements.dynamicPptViewElement=y.default.createElement("article",this.instanceId+"TalkcloudDynamicPpt","talkcloud-sdk-whiteboard "+this.instanceId+" dynamic-ppt-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.h5DocumentViewElement=y.default.createElement("article",this.instanceId+"TalkcloudH5Document","talkcloud-sdk-whiteboard "+this.instanceId+" h5-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.disableClickViewElement=y.default.createElement("div",void 0,"talkcloud-sdk-whiteboard "+this.instanceId+" disable-clock-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:4})}},{key:"_connectElements",value:function(){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),y.default.appendChild(this.elements.documentViewElement,this.elements.whiteboardViewElement),y.default.appendChild(this.elements.documentViewElement,this.elements.disableClickViewElement),y.default.appendChild(this.elements.totalDocumentViewElement,this.elements.documentViewElement),y.default.appendChild(this.elements.whiteboardViewRootElement,this.elements.totalDocumentViewElement),y.default.appendChild(this.parentNode,this.elements.whiteboardViewRootElement),this._productionWhiteboard(),this._productionDynamicPpt(),this._productionH5Document()}},{key:"_productionWhiteboard",value:function(){var l=this;Pe.default.hasWhiteboardById(this.instanceId)&&Pe.default.destroyWhiteboardInstance(this.instanceId);var e={whiteboardElementId:this.elements.whiteboardViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,i,n,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:i,save:!n,expiresabs:a,associatedMsgID:r,associatedUserID:s})},delSignallingToServer:function(e,t,o,i){l.configration.synchronization&&l.configration.isConnectedRoom&&l.delMsg({name:e,id:t,toID:o,data:i})},resizeWhiteboardSizeCallback:this.resizeWhiteboardSizeCallback.bind(this),noticeUpdateToolDescCallback:this.noticeUpdateToolDescCallback.bind(this),noticeUpdateWhiteboardFiledataCallback:this.noticeUpdateWhiteboardFiledataCallback.bind(this),receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this),whiteboardWatermarkImageOnFailureCallback:this.whiteboardWatermarkImageOnFailureCallback.bind(this),whiteboardWatermarkImageOnloadCallback:this.whiteboardWatermarkImageOnloadCallback.bind(this)},productionOptions:Object.deepAssign({deawPermission:this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom,showShapeAuthor:this.configration.showShapeAuthor,myselfId:this.configration.myUserId,nickname:this.configration.myName,synchronizationWhiteboard:this.configration.synchronization&&this.configration.isConnectedRoom,primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily,parcelAncestorElementId:this.elements.whiteboardViewRootElement.getAttribute("id"),defaultWhiteboardScale:this.configration.defaultWhiteboardScale,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isOnlyUndoRedoClearMyselfShape:this.configration.isOnlyUndoRedoClearMyselfShape,insertPictureRule:this.configration.insertPictureRule},this.configration.initWhiteboardProductionOptions||{})};Pe.default.productionWhiteboard(e),Pe.default.registerWhiteboardTools(this.instanceId,{tool_pencil:{},tool_highlighter:{},tool_line:{},tool_arrow:{},tool_eraser:{},tool_text:{},tool_rectangle:{},tool_rectangle_empty:{},tool_ellipse:{},tool_ellipse_empty:{},tool_mouse:{},tool_laser:{},action_undo:{},action_redo:{},action_clear:{},zoom_big:{},zoom_small:{}}),Pe.default.clearRedoAndUndoStack(this.instanceId),Pe.default.loadCurrpageWhiteboard(this.instanceId),("default"===this.instanceId||this.configration.hasExtendDocument)&&Pe.default.activeWhiteboardTool("tool_mouse",this.instanceId)}},{key:"_productionDynamicPpt",value:function(){var l=this;if(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument){_.default.hasDynamicPptById(this.instanceId)&&_.default.destroyDynamicPptInstance(this.instanceId);var e={dynamicPptElementId:this.elements.dynamicPptViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,i,n,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:i,save:!n,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationDynamicPpt:this.configration.synchronization&&this.configration.isConnectedRoom,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,againreconnectElementParentNode:this.elements.documentViewElement,dynamicPptActionClick:this.configration.actionClick}};_.default.productionDynamicPpt(e)}}},{key:"_productionH5Document",value:function(){var l=this;if(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument){w.default.hasH5DocumentById(this.instanceId)&&w.default.destroyH5DocumentInstance(this.instanceId);var e={h5DocumentElementId:this.elements.h5DocumentViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,i,n,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:i,save:!n,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationH5Document:this.configration.synchronization&&this.configration.isConnectedRoom,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,h5DocumentActionClick:this.configration.actionClick}};w.default.productionH5Document(e)}}},{key:"_handleShowPageSignalling",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.source,i=e.data,n=this.fileid!=i.filedata.fileid;if(this.fileid=i.filedata.fileid,!this.configration.isPlayback)if(t)"ShowPage"===e.name?Ie.default.showPageFromId=this.configration.myUserId:"ExtendShowPage"===e.name&&(Ie.default.extendShowPageFromId=this.configration.myUserId);else{var a=!0;if("ShowPage"===e.name?((n||!e.fromID||Ie.default.showPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(a=!1),Ie.default.showPageFromId=e.fromID):"ExtendShowPage"===e.name&&((n||!e.fromID||Ie.default.extendShowPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(a=!1),Ie.default.extendShowPageFromId=e.fromID),a)return}if(this.fileTypeMark=i.isDynamicPPT?"dynamicPPT":i.isH5Document?"h5Document":"generalDocument",(i.isDynamicPPT||i.isH5Document)&&(i.filedata.pagenum=Pe.default.getWhiteboardFiledata(this.instanceId).pagenum),i.isGeneralFile||!n&&i.isDynamicPPT&&(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.isLoadFinished()||!n&&i.isH5Document&&(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.isLoadFinished()){var r=i.filedata;r.currpage>r.pagenum&&(r.currpage=r.pagenum),r.currpage<1&&(r.currpage=1),i.isDynamicPPT&&(r.pptslide=r.currpage)}if(this._updateViewShowAndHide(),this._viewStateUpdate(),i.isGeneralFile){if("room-pubmsg"===o&&!n&&Number(i.filedata.currpage)===Pe.default.getWhiteboardFiledata(this.instanceId).currpage)return;this._saveFiledataAndLoadCurrpageWhiteboardData(i.filedata),this._generalDocumentFileShowPage(n)}else if(i.isDynamicPPT)Pe.default.setWhiteboardWatermarkImage(this.instanceId,""),this._dynamicPPTFileShowPage(n,e);else if(i.isH5Document){if("room-pubmsg"===o&&!n&&Number(i.filedata.currpage)===Pe.default.getWhiteboardFiledata(this.instanceId).currpage)return;Pe.default.setWhiteboardWatermarkImage(this.instanceId,""),this._saveFiledataAndLoadCurrpageWhiteboardData(i.filedata),this._h5DocumentFileShowPage(n)}}},{key:"_generalDocumentFileShowPage",value:function(e){this.generalDocumentFileForceReloadNumber=0,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.setDynamicPptIframeSrc(this.instanceId,""),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.setH5DocumentIframeSrc(this.instanceId,""),Pe.default.resetDedaultWhiteboardMagnification(this.instanceId);var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=t.swfpath,i=t.currpage,n=t.pagenum,a=t.filetype,r=t.isContentDocument;if(y.default.removeClass(this.elements.disableClickViewElement,"loading"),"whiteboard"===a)this.scale=this.configration.defaultWhiteboardScale,this._viewStateUpdate(),Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),Pe.default.setWhiteboardWatermarkImage(this.instanceId,"",{resetDedaultWhiteboardMagnification:!1});else{var s=void 0;if(Number(r))o&&(s=o);else{var l=o.lastIndexOf("."),d=o.substring(l),c=o.replace(d,"-"+i+d);s=Ie.default.nowUseDocAddress+c}if(Pe.default.setWhiteboardWatermarkImage(this.instanceId,s,{resetDedaultWhiteboardMagnification:!1}),!Number(r)){var u=1,h=1;e?(this.cacheMaxPageNum=i,this.cacheMinPageNum=i,this.filePreLoadCurrPage=i,this.cacheMaxPageNum+this.filePreLoadStep<=n?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<n&&(this.cacheMaxPageNum+=n-this.cacheMaxPageNum),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,h=this.cacheMaxPageNum,u=this.cacheMinPageNum):(this.filePreLoadCurrPage<i?(u=this.cacheMaxPageNum+1,i>this.cacheMaxPageNum&&(this.cacheMaxPageNum=i),this.cacheMaxPageNum+this.filePreLoadStep<=n?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<n&&(this.cacheMaxPageNum+=n-this.cacheMaxPageNum),h=this.cacheMaxPageNum):this.filePreLoadCurrPage>i&&(h=this.cacheMinPageNum-1,i<this.cacheMinPageNum&&(this.cacheMinPageNum=i),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,u=this.cacheMinPageNum),this.filePreLoadCurrPage=i);for(var m=u;m<=h;m++)if(m!==i){var f=o.lastIndexOf("."),p=o.substring(f),g=o.replace(p,"-"+m+p),v=Ie.default.nowUseDocAddress+g;Pe.default.preloadWhiteboardImg(v)}}}}},{key:"_dynamicPPTFileShowPage",value:function(e,t){if(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)if((this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.setH5DocumentIframeSrc(this.instanceId,""),e)Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),this._saveFiledataAndLoadCurrpageWhiteboardData(t.data.filedata),y.default.addClass(this.elements.disableClickViewElement,"loading"),this.forceReloadNumberFromPpt=void 0,this.forceReloadTimestampFromPpt=void 0,this._loadCurrentDynamicPpt();else{var o=t.data.filedata,i=o.currpage,n=o.pptstep;_.default.jumpToAnimation(this.instanceId,i,n)}}},{key:"_h5DocumentFileShowPage",value:function(e){if(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.setDynamicPptIframeSrc(this.instanceId,"");var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=(t.swfpath,t.currpage);e?(Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),y.default.addClass(this.elements.disableClickViewElement,"loading"),this._loadCurrentH5Document()):w.default.jumpToPage(this.instanceId,o)}}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Pe.default.saveWhiteboardStackToStorage(this.instanceId),Pe.default.updateWhiteboardFiledata(this.instanceId,e),Pe.default.loadCurrpageWhiteboard(this.instanceId)}},{key:"_updateViewShowAndHide",value:function(){switch(this.fileTypeMark){case"generalDocument":y.default.show(this.elements.whiteboardViewElement),y.default.hide([this.elements.h5DocumentViewElement,this.elements.dynamicPptViewElement]);break;case"h5Document":y.default.show(this.elements.h5DocumentViewElement),y.default.hide(this.elements.dynamicPptViewElement),"tool_mouse"!==Pe.default.getActiveTool(this.instanceId)?y.default.show(this.elements.whiteboardViewElement):y.default.hide(this.elements.whiteboardViewElement);break;case"dynamicPPT":y.default.show(this.elements.dynamicPptViewElement),y.default.hide(this.elements.h5DocumentViewElement),"tool_mouse"!==Pe.default.getActiveTool(this.instanceId)?y.default.show(this.elements.whiteboardViewElement):y.default.hide(this.elements.whiteboardViewElement)}y.default.removeClass(this.elements.documentViewElement,["talkcloud-filetype-generalDocument","talkcloud-filetype-h5Document","talkcloud-filetype-dynamicPPT"]),y.default.addClass(this.elements.documentViewElement,"talkcloud-filetype-"+this.fileTypeMark),this.resizeWhiteboardHandler()}},{key:"_updatedynamicPptVolume",value:function(e){e<0?e=0:100<e&&(e=100),this.dynamicPptVolume=e,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessage(this.instanceId,{action:"PptVolumeControl",volumeValue:this.dynamicPptVolume/100}),this._viewStateUpdate()}},{key:"_viewStateUpdate",value:function(){if(Pe.default.hasWhiteboardById(this.instanceId)){var e={},t=Pe.default.getWhiteboardFiledata(this.instanceId),o=t.currpage,i=t.pagenum,n=t.pptslide,a=t.pptstep,r=t.steptotal,s=t.fileid,l=Pe.default.getRegisterWhiteboardToolsList(this.instanceId),d={nextPage:{disabled:Ie.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom&&o<i)},prevPage:{disabled:Ie.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom&&1<o)},skipPage:{disabled:Ie.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom)},addPage:{disabled:!(!(Ie.default.isPlayVideoing&&"default"===this.instanceId||"generalDocument"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.addPage&&this.configration.isConnectedRoom)||!(i<=o&&0===Number(s))},nextStep:{disabled:!(!(Ie.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.isConnectedRoom)||i<=n&&r-1<=a},prevStep:{disabled:!(!(Ie.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.isConnectedRoom)||n<=1&&a<=0},currentPage:o<1?1:o,totalPage:i<1?1:i},c=!0,u=!1,h=void 0;try{for(var m,f=Object.entries(l)[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var p=m.value,g=ke(p,2),v=g[0],y=g[1];if(/tool_/g.test(v)){if(this.whiteboardViewState.tool[v]!==y)if("object"!==(void 0===y?"undefined":Se(y))||Array.isArray(y))e.tool=e.tool||{},e.tool[v]=y;else{var b=!0,_=!1,w=void 0;try{for(var S,k=Object.entries(y)[Symbol.iterator]();!(b=(S=k.next()).done);b=!0){var I=S.value,P=ke(I,2),C=P[0],x=P[1];this.whiteboardViewState.tool[v]=this.whiteboardViewState.tool[v]||{},x!==this.whiteboardViewState.tool[v][C]&&(e.tool=e.tool||{},e.tool[v]=e.tool[v]||{},e.tool[v][C]=x)}}catch(e){_=!0,w=e}finally{try{!b&&k.return&&k.return()}finally{if(_)throw w}}}}else if(/action_/g.test(v)){if(this.whiteboardViewState.action[v]!==y)if("object"!==(void 0===y?"undefined":Se(y))||Array.isArray(y))e.action=e.action||{},e.action[v]=y;else{var T=!0,E=!1,D=void 0;try{for(var L,W=Object.entries(y)[Symbol.iterator]();!(T=(L=W.next()).done);T=!0){var A=L.value,M=ke(A,2),R=M[0],j=M[1];this.whiteboardViewState.action[v]=this.whiteboardViewState.action[v]||{},j!==this.whiteboardViewState.action[v][R]&&(e.action=e.action||{},e.action[v]=e.action[v]||{},e.action[v][R]=j)}}catch(e){E=!0,D=e}finally{try{!T&&W.return&&W.return()}finally{if(E)throw D}}}}else if(/zoom_/g.test(v)&&this.whiteboardViewState.zoom[v]!==y)if("object"!==(void 0===y?"undefined":Se(y))||Array.isArray(y))e.zoom=e.zoom||{},e.zoom[v]=y;else{var N=!0,V=!1,O=void 0;try{for(var B,F=Object.entries(y)[Symbol.iterator]();!(N=(B=F.next()).done);N=!0){var z=B.value,U=ke(z,2),H=U[0],J=U[1];this.whiteboardViewState.zoom[v]=this.whiteboardViewState.zoom[v]||{},J!==this.whiteboardViewState.zoom[v][H]&&(e.zoom=e.zoom||{},e.zoom[v]=e.zoom[v]||{},e.zoom[v][H]=J)}}catch(e){V=!0,O=e}finally{try{!N&&F.return&&F.return()}finally{if(V)throw O}}}}}catch(e){u=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}var K=!0,q=!1,G=void 0;try{for(var Y,X=Object.entries(d)[Symbol.iterator]();!(K=(Y=X.next()).done);K=!0){var Z=Y.value,$=ke(Z,2),Q=$[0],ee=$[1];if(this.whiteboardViewState.page[Q]=this.whiteboardViewState.page[Q]||{},"object"===(void 0===ee?"undefined":Se(ee))){var te=!0,oe=!1,ie=void 0;try{for(var ne,ae=Object.entries(ee)[Symbol.iterator]();!(te=(ne=ae.next()).done);te=!0){var re=ne.value,se=ke(re,2),le=se[0],de=se[1];this.whiteboardViewState.page[Q][le]!==de&&(e.page=e.page||{},e.page[Q]=e.page[Q]||{},e.page[Q][le]=de)}}catch(e){oe=!0,ie=e}finally{try{!te&&ae.return&&ae.return()}finally{if(oe)throw ie}}}else this.whiteboardViewState.page[Q]!==ee&&(e.page=e.page||{},e.page[Q]=ee)}}catch(e){q=!0,G=e}finally{try{!K&&X.return&&X.return()}finally{if(q)throw G}}this.fileTypeMark!==this.whiteboardViewState.documentType&&(e.documentType=this.fileTypeMark),this.fileid!=this.whiteboardViewState.fileid&&(e.fileid=this.fileid),this.dynamicPptVolume!==this.whiteboardViewState.dynamicPptVolume&&(e.dynamicPptVolume=this.dynamicPptVolume),this.fullScreen!==this.whiteboardViewState.fullScreen&&(e.fullScreen=this.fullScreen),this.remark!==this.whiteboardViewState.remark&&(e.remark=this.remark),this.scale!==this.whiteboardViewState.scale&&(e.scale=this.scale);var ce=Ie.default.allDocumentRemarkInfoMap.get("documentRemark_"+this.fileid);this.remarkText=0!=this.fileid&&ce&&ce[this.fileid+"_"+d.currentPage]?ce[s+"_"+d.currentPage]:"",this.remarkText!==this.whiteboardViewState.remarkText&&(e.remarkText=this.remarkText);var ue=Pe.default.getWhiteboardToolsInfo(this.instanceId);if(ue&&"object"===(void 0===ue?"undefined":Se(ue))){var he=!0,me=!1,fe=void 0;try{for(var pe,ge=Object.entries(ue)[Symbol.iterator]();!(he=(pe=ge.next()).done);he=!0){var ve=pe.value,ye=ke(ve,2),be=ye[0],_e=ye[1];void 0!==this.whiteboardViewState.other[be]&&this.whiteboardViewState.other[be]!==_e&&(e.other=e.other||{},e.other[be]=_e)}}catch(e){me=!0,fe=e}finally{try{!he&&ge.return&&ge.return()}finally{if(me)throw fe}}}if(Object.keys(e).length&&(void 0!==e.tool&&this._updateViewShowAndHide(),Object.deepAssign(this.whiteboardViewState,e),Object.keys(this.whiteboardViewState.tool).length&&Object.keys(this.whiteboardViewState.action).length&&Object.keys(this.whiteboardViewState.zoom).length&&Object.keys(this.whiteboardViewState.page).length)){var we={viewState:this.whiteboardViewState,updateViewState:e};this.sendActionCommand("viewStateUpdate",we)}}}},{key:"_sendSignalling_ShowPage",value:function(e,t){if("default"===this.instanceId||this.configration.hasExtendDocument){var o=Pe.default.getWhiteboardFiledata(this.instanceId),i={name:"default"===this.instanceId?"ShowPage":"ExtendShowPage",id:"default"===this.instanceId?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+this.instanceId,toID:"__all",data:{sourceInstanceId:this.instanceId,isGeneralFile:"generalDocument"===this.fileTypeMark,isMedia:!1,isDynamicPPT:"dynamicPPT"===this.fileTypeMark,isH5Document:"h5Document"===this.fileTypeMark,action:"",mediaType:"",filedata:o},save:!0};e&&Object.deepAssign(i,e),this.configration.synchronization&&this.configration.isConnectedRoom&&this.pubMsg(i),t&&"function"==typeof t&&t(i)}}},{key:"_loadCurrentDynamicPpt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("dynamicPPT"===this.fileTypeMark){var o=Pe.default.getWhiteboardFiledata(this.instanceId),i=o.fileid,n=o.swfpath,a=o.isContentDocument,r=Number(a)?n:Ie.default.nowUseDocAddress+n+"/newppt.html",s={versions:v.default.dynamicPptVersions,fileid:i,playback:this.configration.isPlayback,classbegin:!0,publishDynamicPptMediaPermission_video:this.configration.synchronization&&this.configration.isConnectedRoom,remoteNewpptUpdateTime:v.default.remoteDynamicPptUpdateTime,role:this.configration.myRole,dynamicPptActionClick:this.configration.actionClick&&this.configration.isConnectedRoom,newpptPagingPage:this.configration.canPage&&this.configration.isConnectedRoom,dynamicPptDebug:v.default.dynamicPptDebugLog,PptVolumeValue:this.dynamicPptVolume/100,deviceType:"phone"===this.configration.deviceType?0:void 0,isBackEvent:this.configration.isBackEvent};if(void 0!==this.forceReloadTimestampFromPpt&&(s.forceReloadTimestamp=this.forceReloadTimestampFromPpt),void 0!==this.forceReloadNumberFromPpt&&(s.forceReloadNumber=this.forceReloadNumberFromPpt,t.forceReloadNumber=this.forceReloadNumberFromPpt),e&&b.default.isJson(e)){var l=!0,d=!1,c=void 0;try{for(var u,h=Object.entries(e)[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value,f=ke(m,2),p=f[0],g=f[1];s[p]=g}}catch(e){d=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw c}}}t.playback=this.configration.isPlayback,_.default.setDynamicPptIframeSrc(this.instanceId,r,s,o,t)}}},{key:"_loadCurrentH5Document",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("h5Document"===this.fileTypeMark){var o=Pe.default.getWhiteboardFiledata(this.instanceId),i=o.swfpath,n=o.isContentDocument,a=void 0;L.Logger.info("Document swfpath：",i,"isContentDocument:",n),Number(n)?i&&(a=i):a=Ie.default.nowUseDocAddress+i;var r={role:this.configration.myRole};if(e&&b.default.isJson(e)){var s=!0,l=!1,d=void 0;try{for(var c,u=Object.entries(e)[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value,m=ke(h,2),f=m[0],p=m[1];r[f]=p}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}w.default.setH5DocumentIframeSrc(this.instanceId,a,r,o,t)}}}]),a}();o.default=a},{"../../intermediateLayer/DynamicPptIntermediateLayer":328,"../../intermediateLayer/H5DocumentPptIntermediateLayer":329,"../../intermediateLayer/WhiteboardIntermediateLayer":330,"../../utils/Configuration":331,"../../utils/Constant":332,"../../utils/DomUtils":333,"../../utils/Global":334,"../../utils/Utils":338}]},{},[339]);