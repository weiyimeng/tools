webpackJsonp([1],{"/Ml/":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),d=n(l),u=a("zwoO"),c=n(u),h=a("Pf15"),f=n(h),m=a("HUPQ"),g=n(m),p=a("GiK3"),v=n(p),b=a("T+56"),y=n(b),k=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={alert:{isShow:!1,ok:"",type:""},confirm:{isShow:!1},isHasClassCenter:!1,title:"",message:"",callback:null},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;y.default.CoreController.addEventListener("showAlert",e.showAlert.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("showConfirm",e.showConfirm.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("showInputTooltip",e.showInputTooltip.bind(e),self.listernerBackupid)}},{key:"componentWillUnmount",value:function(){y.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"alertCloseClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0)}},{key:"confirmClick",value:function(e){var t={text:this.refs.subNode_1?this.refs.subNode_1.value:void 0,href:this.refs.subNode_2?this.refs.subNode_2.value:void 0};this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0,t)}},{key:"cancelClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!1)}},{key:"showAlert",value:function(e){var t=e.message.data,a=t.title,n=t.message,i=t.ok,o=t.callback,r=t.type;this.setState({alert:{isShow:!0,ok:i,type:r},confirm:{isShow:!1},title:a,message:n,callback:o,isHasClassCenter:!0})}},{key:"showConfirm",value:function(e){var t=e.message.data,a=t.title,n=t.message,i=t.isOk,o=t.callback;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:i},title:a,message:n,callback:o,isHasClassCenter:!0})}},{key:"showInputTooltip",value:function(e){var t=e.data,a=t.title,n=t.message,i=t.isOk,o=t.callback,r=t.contentType;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:i},title:a,message:n,callback:o,isHasClassCenter:!0,contentType:r})}},{key:"__loadContent",value:function(){var e=this,t=void 0;if(e.state.message)t=e.state.message;else if(e.state.contentType)switch(e.state.contentType){case"edit-text-area":t=v.default.createElement("div",{className:"edit-node"},v.default.createElement("textarea",{ref:"subNode_1",name:"",id:"",cols:"50",rows:"6",maxLength:"50"}));break;case"edit-input":t=v.default.createElement("div",{className:"edit-node"},v.default.createElement("label",{htmlFor:""},g.default.language.languageData.notice.content,":"),v.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".08rem"},maxLength:"20"}));break;case"edit-input-db":t=v.default.createElement("div",{className:"edit-node"},v.default.createElement("label",{htmlFor:""},g.default.language.languageData.notice.content,":"),v.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".22rem",marginBottom:".3rem"},maxLength:"30"}),v.default.createElement("br",null),v.default.createElement("label",{htmlFor:""},g.default.language.languageData.notice.href,":"),v.default.createElement("input",{ref:"subNode_2",type:"text",style:{marginLeft:".08rem"},maxLength:"50"}));break;default:L.Logger.error("This content type has not defined, please check out and define this content!")}return{content:t}}},{key:"render",value:function(){var e=this,t=this.state,a=t.alert,n=t.confirm,i=t.isHasClassCenter,o=t.title,r=(t.message,t.callback),s=e.__loadContent(),l=s.content;return v.default.createElement("section",{id:"alert-error-confrim",className:"alert-error-confrim "+(a.isShow?"error"===a.type?" error-message":" prompt-message":""),style:{display:a.isShow||n.isShow?"block":"none"}},v.default.createElement("div",{id:"alert-box",className:"alert-box "+(i?"center ":"")},v.default.createElement("div",{className:"alert-title"},v.default.createElement("p",{className:"title-text"},o),a.isShow?v.default.createElement("button",{onClick:e.alertCloseClick.bind(e,r),className:"title-close",id:"title-close"}):""),v.default.createElement("div",{className:"alert-contant"},l),v.default.createElement("div",{className:"alert-isOk"},v.default.createElement("button",{id:"alert-confrim",onClick:a.isShow?e.alertCloseClick.bind(e,r):n.isShow?e.confirmClick.bind(e,r):void 0},a.isShow?a.ok:n.isShow?n.isOk.ok:""),n.isShow?v.default.createElement("button",{id:"alert-cancel",onClick:e.cancelClick.bind(e,r),className:"alert-cancel"},n.isOk.cancel):"")))}}]),t}(v.default.Component);t.default=k},0:function(e,t,a){e.exports=a("6G9P")},"0jvK":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),d=n(l),u=a("T+56"),c=n(u),h=function(){function e(){(0,s.default)(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return(0,d.default)(e,[{key:"productionDefaultAppAppPermissions",value:function(){return{canDraw:!1,isShowVideoDrawTool:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromBlackBoardDrag:!1,allUserTools:!1,sendSignallingFromBlackBoard:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,sendSignallingDataStudentToTeacherAnswer:!0,studentInit:!1,dialIconClose:!1,sendSignallingAnswerToStudent:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1,isShowCoursewareRemarks:!1,isSendSignallingFromCaptureImg:!1,canDragCaptureImg:!1,isSendSignallingFromCaptureImgDrag:!1,canResizeCaptureImg:!1,isSendCaptureImgResize:!1,sendSignallingFromRemoteControl:!1,sendQuestion:!1,publishResult:!1,answerCommit:!1,getQuestionCount:!1,sendSignallingFromUpdateTime:!1}}},{key:"resetDefaultAppPermissions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&c.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&(Object.customAssign(a.permissionsJson,e),t&&c.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var a=this;if(a.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",a.permissionsJson[e]),a.permissionsJson[e]=t;var n={type:"updateAppPermissions_"+e,message:{key:e,value:t}};c.default.CoreController.dispatchEvent(n)}}},{key:"getAppPermissions",value:function(e){return this.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var a in e)t.permissionsJson[a]=e[a];c.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),f=new h;t.default=f},"0lA4":function(e,t){},"292p":function(e,t){},"2KxR":function(e,t){e.exports=function(e,t,a,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(a+": incorrect invocation!");return e}},"2vo4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠標"},pencil:{title:"筆",pen:{text:"鉛筆工具"},Highlighter:{text:"熒光筆工具"},linellae:{text:"線條工具"},arrow:{text:"箭頭工具"},laser:{title:"激光筆",text:"激光筆工具"}},text:{title:"文字",Msyh:{text:"微軟雅黑"},Ming:{text:"宋體"},Arial:{text:"Arial"}},shape:{title:"形狀",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心橢圓"},filledCircle:{text:"橢圓"}},eraser:{title:"橡皮擦"},undo:{title:"撤銷"},redo:{title:"恢復"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"縮小"},tool_rotate_left:{title:"逆時針旋轉"},tool_rotate_right:{title:"順時針旋轉"},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"},colors:{title:"顏色"},measure:{title:"粗細"}},page:{prev:{text:"上壹頁"},next:{text:"下壹頁"},add:{text:"加頁"},lcFullBtn:{title:"繪制區域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5課件全屏"},skipPage:{text_one:"至第",text_two:"頁"},ok:{text:"確定"},coursewareRemarks:{title:"課件備註"}},volume:{title:"音量"}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"計時器"},timerBegin:{text:"開始"},timerStop:{text:"暫停"},again:{text:"重新開始"}},dial:{turntable:{text:"轉盤"}},answers:{headerTopLeft:{text:"答題器"},headerMiddel:{text:"點擊字母預設正確答案"},beginAnswer:{text:"開始答題"},tureAccuracy:{text:"正確率"},trueAnswer:{text:"正確答案"},endAnswer:{text:"結束答題"},restarting:{text:"重新開始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"請至少選擇壹個答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答題人數"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"詳情 >"},statistics:{text:"統計"},student:{text:"學生"},TheSelectedTheAnswer:{text:"所選答案"},AnswerTime:{text:"答題用時"},end:{text:"請先結束答題"}},responder:{responder:{text:"搶答器"},begin:{text:"開始搶答"},restart:{text:"重新開始"},close:{text:"關閉"},update:{text:"當前瀏覽器不支持canvas組件請升級！"},inAnswer:{text:"搶答中..."},answer:{text:"搶答中"},noContest:{text:"無人搶答"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}},coursewareRemarks:{remarks:"備註",close:"關閉"}};t.default=n},"3C/1":function(e,t,a){a("M6a0"),a("zQR9"),a("+tPU"),a("qCoq"),a("UvrK"),a("Xjd4"),a("bqnK"),e.exports=a("FeBl").Map},"4MrL":function(e,t){},"4O1h":function(e,t,a){a("jEnx"),e.exports=a("FeBl").Object.is},"4WTo":function(e,t,a){var n=a("NWt+");e.exports=function(e,t){var a=[];return n(e,!1,a.push,a,t),a}},"4yR4":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("fZjL"),o=n(i),r=a("pFYg"),s=n(r),l=a("Zx67"),d=n(l),u=a("Zrlr"),c=n(u),h=a("wxAW"),f=n(h),m=a("zwoO"),g=n(m),p=a("Pf15"),v=n(p),b=a("GiK3"),y=n(b),k=a("O27J"),S=(n(k),a("T+56")),w=n(S),T=a("VSuD"),C=n(T),D=a("yE5a"),E=n(D),I=a("HUPQ"),P=n(I),A=function(e){function t(){(0,c.default)(this,t);var e=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e.state={passPreload:!1,preloadWidth:"0%",preLoadBegin:!1,iframeSrc:void 0},e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;w.default.Window.addEventListener(C.default.EVENTTYPE.WindowEvent.onMessage,e.BeginLoading.bind(e),e.listernerBackupid),w.default.CoreController.addEventListener(C.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid)}},{key:"receiveActionCommand",value:function(e){var t=e.message,a=t.cmd;if("preLoadingFile"===t.action){var n=a.cmd;if(n&&"string"==typeof n)try{n=JSON.parse(n)}catch(e){L.Logger.error("preLoadingFile error info:",e)}if(C.default.joinRoomInfo.preLoading&&n&&"object"===(void 0===n?"undefined":(0,s.default)(n))&&(0,o.default)(n).length&&n.downloadpath)try{this.setState({preLoadBegin:!0,iframeSrc:void 0,preloadWidth:"0%"}),this.handlerPreLoadBegin(n)}catch(e){L.Logger.error("preLoadingFile error info:",e)}else E.default.getTkRoom().sendActionCommand("preloadingFished",{})}}},{key:"handlerPreLoadBegin",value:function(e){var t=this;this.timer=setTimeout(function(){t.setState({passPreload:!0})},3e4),e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&e.downloadpath?t.setState({iframeSrc:window.WBGlobal.nowUseDocAddress+"/Public/html/preload.html?fileUrl="+e.downloadpath+"&fileid="+e.fileid}):(E.default.getTkRoom().sendActionCommand("preloadingFished",{}),this.setState({preLoadBegin:!1}))}},{key:"BeginLoading",value:function(e){if(e&&e.message&&e.message.event){var t=e.message.event,a=void 0;try{a=JSON.parse(t.data)}catch(e){return void L.Logger.warning("preload dynamic ppt receive iframe message data can't be converted to JSON , iframe data:",t.data)}a&&"tk_dynamicPPT_preload"===a.source&&(a.data&&a.data.progress&&this.setState({preloadWidth:Math.floor(100*a.data.progress)+"%"}),a.data&&a.data.progress>=1&&(clearTimeout(this.timer),E.default.getTkRoom().sendActionCommand("preloadingFished",{}),this.setState({preLoadBegin:!1})))}}},{key:"passPreload",value:function(){clearTimeout(this.timer),E.default.getTkRoom().sendActionCommand("preloadingFished",{}),this.setState({passPreload:!1,preLoadBegin:!1})}},{key:"PreLoadingBoxOnTouchEnd",value:function(){var e=null;document.body.addEventListener("touchend",function(t){var a=(new Date).getTime();e=e||a+1;var n=a-e;if(n<500&&n>0)return t.preventDefault(),!1;e=a},!1)}},{key:"render",value:function(){var e=this;return y.default.createElement("div",{id:"PreLoading_box",className:"PreLoading_box",style:{display:this.state.preLoadBegin?"block":"none"},onTouchEnd:e.PreLoadingBoxOnTouchEnd.bind(e)},y.default.createElement("div",{className:"bg"}),y.default.createElement("div",{className:"container"},y.default.createElement("div",{className:"PreLoad"},y.default.createElement("div",{className:"PreLoading",style:{width:this.state.preloadWidth}})),y.default.createElement("span",{className:"skip",onClick:e.passPreload.bind(e),style:{display:e.state.passPreload?"":"none"}},P.default.language.languageData.preLoad.pass)),y.default.createElement("div",{className:"load"},P.default.language.languageData.preLoad.text,"(",this.state.preloadWidth,")"),y.default.createElement("iframe",{id:"preload_iframe",src:e.state.iframeSrc,allow:"autoplay",frameBorder:"0"}))}}]),t}(y.default.Component);t.default=A},"5PlU":function(e,t,a){var n=a("RY/4"),i=a("dSzd")("iterator"),o=a("/bQp");e.exports=a("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},"6G9P":function(e,t,a){"use strict";a("0lA4"),a("PRvV"),a("FDbx"),a("xPSH"),a("292p"),a("9Z7U"),a("4MrL"),a("sKCO"),a("DeyK"),a("CmTZ"),a("WN3Y"),a("CPua"),a("bMTV"),a("WcKi"),a("CUPi"),a("9Xwq"),a("w5fS"),a("rPQW"),a("qVFD"),a("XkXc"),a("9j6Y"),a("gDty"),a("buLY"),a("PqAP");var n=a("nst9");(0,function(e){return e&&e.__esModule?e:{default:e}}(n).default)()},"7Doy":function(e,t,a){var n=a("EqjI"),i=a("7UMu"),o=a("dSzd")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"7nRM":function(e,t,a){"use strict";t.__esModule=!0;var n=a("c/Tr"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){return Array.isArray(e)?e:(0,i.default)(e)}},"9Bbf":function(e,t,a){"use strict";var n=a("kM2E");e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,a){"use strict";var n=a("evD5").f,i=a("Yobk"),o=a("xH/j"),r=a("+ZMJ"),s=a("2KxR"),l=a("NWt+"),d=a("vIB/"),u=a("EGZi"),c=a("bRrM"),h=a("+E39"),f=a("06OY").fastKey,m=a("LIJb"),g=h?"_s":"size",p=function(e,t){var a,n=f(t);if("F"!==n)return e._i[n];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,d){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=n&&l(n,a,e[d],e)});return o(u.prototype,{clear:function(){for(var e=m(this,t),a=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete a[n.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var a=m(this,t),n=p(a,e);if(n){var i=n.n,o=n.p;delete a._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),a._f==n&&(a._f=i),a._l==n&&(a._l=o),a[g]--}return!!n},forEach:function(e){m(this,t);for(var a,n=r(e,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(n(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!p(m(this,t),e)}}),h&&n(u.prototype,"size",{get:function(){return m(this,t)[g]}}),u},def:function(e,t,a){var n,i,o=p(e,t);return o?o.v=a:(e._l=o={i:i=f(t,!0),k:t,v:a,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:p,setStrong:function(e,t,a){d(e,t,function(e,a){this._t=m(e,t),this._k=a,this._l=void 0},function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?"keys"==t?u(0,a.k):"values"==t?u(0,a.v):u(0,[a.k,a.v]):(e._t=void 0,u(1))},a?"entries":"values",!a,!0),c(t)}}},"9Xwq":function(e,t){},"9Z7U":function(e,t){},"9j6Y":function(e,t){},ALrJ:function(e,t,a){var n=a("+ZMJ"),i=a("MU5D"),o=a("sB3e"),r=a("QRG4"),s=a("oeOm");e.exports=function(e,t){var a=1==e,l=2==e,d=3==e,u=4==e,c=6==e,h=5==e||c,f=t||s;return function(t,s,m){for(var g,p,v=o(t),b=i(v),y=n(s,m,3),k=r(b.length),S=0,w=a?f(t,k):l?f(t,0):void 0;k>S;S++)if((h||S in b)&&(g=b[S],p=y(g,S,v),e))if(a)w[S]=p;else if(p)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:w.push(g)}else if(u)return!1;return c?-1:d||u?u:w}}},BO1k:function(e,t,a){e.exports={default:a("fxRn"),__esModule:!0}},CJli:function(e,t,a){a("pRCB");var n=a("FeBl").Object;e.exports=function(e,t){return n.defineProperties(e,t)}},CPua:function(e,t){},CUPi:function(e,t){},Cdx3:function(e,t,a){var n=a("sB3e"),i=a("lktj");a("uqUo")("keys",function(){return function(e){return i(n(e))}})},"CmP/":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},CmTZ:function(e,t){},DeyK:function(e,t){},DrPG:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),o=n(i),r=a("W3Iv"),s=n(r),l=a("BO1k"),d=n(l),u=a("d7EF"),c=n(u),h=a("fZjL"),f=n(h),m=a("pFYg"),g=n(m),p={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},isFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},runPrefixMethod:function(e,t){var a=void 0;return["webkit","moz","ms","o",""].forEach(function(n){if(!a){""===n&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var i=(0,g.default)(e[n+t]);i+""!="undefined"&&(a="function"===i?e[n+t]():e[n+t])}}),a},addFullscreenchange:function(e){p.tool.addEvent(document,"fullscreenchange",e,!1),p.tool.addEvent(document,"webkitfullscreenchange",e,!1),p.tool.addEvent(document,"mozfullscreenchange",e,!1),p.tool.addEvent(document,"MSFullscreenChange",e,!1),p.tool.addEvent(document,"msfullscreenchange",e,!1),p.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){p.tool.removeEvent(document,"fullscreenchange",e,!1),p.tool.removeEvent(document,"webkitfullscreenchange",e,!1),p.tool.removeEvent(document,"mozfullscreenchange",e,!1),p.tool.removeEvent(document,"MSFullscreenChange",e,!1),p.tool.removeEvent(document,"msfullscreenchange",e,!1),p.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){p.tool.addEvent(document,"fullscreenerror",e,!1),p.tool.addEvent(document,"webkitfullscreenerror",e,!1),p.tool.addEvent(document,"mozfullscreenerror",e,!1),p.tool.addEvent(document,"MSFullscreenError",e,!1),p.tool.addEvent(document,"msfullscreenerror",e,!1),p.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){p.tool.removeEvent(document,"fullscreenerror",e,!1),p.tool.removeEvent(document,"webkitfullscreenerror",e,!1),p.tool.removeEvent(document,"mozfullscreenerror",e,!1),p.tool.removeEvent(document,"MSFullscreenError",e,!1),p.tool.removeEvent(document,"msfullscreenerror",e,!1),p.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,n){n=void 0!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,n){e.addEventListener?e.removeEventListener(t,a,n):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)},autoElementPositionCneter:function(e){e.css({"margin-left":-e.width()/2+"px","margin-top":-e.height()/2+"px"})},clearElementPositionCneter:function(e){e.css({"margin-left":"","margin-top":""})}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),n=0;n<9;n++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return void 0!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)})}return new e},getNewGUID:function(){p.guidObj||(p.guidObj=new p.getGUID);var e=p.guidObj.newGUID();return p.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,a=/(firefox)\/([\w.]+)/,n=/(opera).+version\/([\w.]+)/,i=/(chrome)\/([\w.]+)/,o=/version\/([\w.]+).*(safari)/,r=function(e){var r=t.exec(e);return null!=r?{browser:"IE",version:r[2]||"0"}:null!=(r=a.exec(e))?{browser:r[1]||"",version:r[2]||"0"}:null!=(r=n.exec(e))?{browser:r[1]||"",version:r[2]||"0"}:null!=(r=i.exec(e))?{browser:r[1]||"",version:r[2]||"0"}:(r=o.exec(e),null!=r?{browser:r[2]||"",version:r[1]||"0"}:null!=r?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"})}(e.toLowerCase());return{versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:r.browser,browserVersion:r.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}}},isEmpty:function(e){return 0===(0,f.default)(e).length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=p.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var n=decodeURIComponent(a),i=n.indexOf("?"),o=n.substring(i+1),r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=o.match(r);return null!=s?s[2]:""},replaceFirstUper:function(e){if(e.length>0)return e.substring(0,1).toUpperCase()+e.substring(1)},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"===(void 0===e?"undefined":(0,g.default)(e))&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=p;if(e&&!t.isArray(e)&&"object"===(void 0===e?"undefined":(0,g.default)(e))){var a={},n=!0,i=!1,o=void 0;try{for(var r,l=(0,d.default)((0,s.default)(e));!(n=(r=l.next()).done);n=!0){var u=r.value,h=(0,c.default)(u,2),f=h[0],m=h[1];/^tkcustomdata/g.test(f)&&(a[f]=m)}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return a}return e},getFiletyeByFilesuffix:function(e){return"jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){return{disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand}},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var n=Math.floor(a/864e5),i=a%864e5,o=Math.floor(i/36e5),r=i%36e5,s=Math.floor(r/6e4),l=r%6e4,d=Math.round(l/1e3),u=o+24*n,c={};return d>=60&&(d=0,s+=1),s>=60&&(s=0,u+=1),c.hh=u>9?u:"0"+u,c.mm=s>9?s:"0"+s,c.ss=d>9?d:"0"+d,c}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||p.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else if(p.getUrlParams("debug"))return e;return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";if("X11"===navigator.platform&&!t&&!a)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";if(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)return"Win2003";if(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7";if(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)return"Win8";if(e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1)return"Win10"}return"Other"},percentageChangeToRem:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(a);if(i){var o=i.offsetWidth,r=i.offsetHeight,s=void 0,l=void 0;if("pc"===TK.SDKTYPE){var d=document.getElementById("lc-full-vessel");s=d.clientWidth,l=d.clientHeight}else s=window.GLOBAL.windowInnerWidth,l=window.GLOBAL.windowInnerHeight;var u=e*(s-o)/n,c=t*(l-r)/n;return u=u&&u!==1/0&&!isNaN(u)&&u>0?u:0,c=c&&c!==1/0&&!isNaN(c)&&c>0?c:0,{left:u,top:c}}return{left:0,top:0}},RemChangeToPercentage:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(a);if(i){var o=i.offsetWidth,r=i.offsetHeight,s=void 0,l=void 0;if("pc"===TK.SDKTYPE){var d=document.getElementById("lc-full-vessel");s=d.clientWidth,l=d.clientHeight}else s=window.GLOBAL.windowInnerWidth,l=window.GLOBAL.windowInnerHeight;var u=e*n/(s-o),c=t*n/(l-r);return u=u&&u!==1/0&&!isNaN(u)&&u>0?u:0,c=c&&c!==1/0&&!isNaN(c)&&c>0?c:0,{percentLeft:u,percentTop:c}}return{percentLeft:0,percentTop:0}},controlDragBounds:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(t),o=i.offsetWidth/n,r=i.offsetHeight/n,s=document.getElementById(a),l=s.clientWidth/n,d=s.clientHeight/n;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>l-o?l-o:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-r?d-r:e.state[t].top,e.state[t]},replaceRemToNumber:function(e){return e&&"string"==typeof e&&(e=Number(e.replace(/rem/g,""))),e},replaceCalc:function(e){return e&&"string"==typeof e&&(e=e.replace(/(^\s*)|(\s*$)/g,""),e=e.replace(/(^calc\s*\(|\)$)/g,"")),e},limitEleReSize:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=window.GLOBAL.windowInnerWidth/n,o=window.GLOBAL.windowInnerHeight/n;if("pc"===TK.SDKTYPE){var r=document.getElementById("lc-full-vessel");i=r.clientWidth/n,o=r.clientHeight/n}return(e>i||t>o)&&(a>i/o?(e=i,t=i/a):(t=o,e=o*a)),{width:e,height:t}},getStyle:function(e,t){return e?window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]:0},getSpecifyRoleList:function(e,t){if(void 0===e||void 0===t)return{};var a={},n=!0,i=!1,r=void 0;try{for(var s,l=(0,d.default)((0,o.default)(t));!(n=(s=l.next()).done);n=!0){var u=s.value;a[u.role]||(a[u.role]={}),a[u.role][u.id]=u}}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}return a[e]||{}}};t.default=p},E09H:function(e,t){},EXAz:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=n(i),r=a("KmDb"),s=n(r),l=a("g4PW"),d=n(l),u=a("Zx67"),c=n(u),h=a("Zrlr"),f=n(h),m=a("wxAW"),g=n(m),p=a("zwoO"),v=n(p),b=a("Pf15"),y=n(b),k=a("GiK3"),S=n(k),w=a("O27J"),T=n(w),C=a("HUPQ"),D=n(C),E=a("T+56"),I=n(E),P=a("VSuD"),A=n(P),R=a("FH8v"),B=n(R),_=function(e){function t(e){(0,f.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.state={position:{top:e.defaultPosition?e.defaultPosition.top:0,left:e.defaultPosition?e.defaultPosition.left:0},size:{width:e.defaultSize?e.defaultSize.width:void 0,height:e.defaultSize?e.defaultSize.height:void 0},opacity:1,scale:1,isCanDrag:!1},a.newSize={},a.position={top:0,left:0},a.clientX=0,a.clientY=0,a.isCanDrag=!1,a.isDragging=!1,a.isResizing=!1,a.scale=0,a.onTouchTime=null,a.longTouchTime=500,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){I.default.Window.addEventListener(A.default.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),I.default.Document.addEventListener(A.default.EVENTTYPE.DocumentEvent.onFullscreenchange,this.handlerOnFullscreenchange.bind(this),this.listernerBackupid),I.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),I.default.CoreController.addEventListener("changeMainContentVesselSmartSize",this.changeMainContentVesselSmartSize.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){I.default.Window.removeBackupListerner(this.listernerBackupid),I.default.CoreController.removeBackupListerner(this.listernerBackupid),I.default.Document.removeBackupListerner(this.listernerBackupid)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=(t.id,t.size),n=t.percentPosition;if(e.percentPosition&&(!this.props.percentPosition||!(0,d.default)(e.percentPosition.percentLeft,n.percentLeft)||!(0,d.default)(e.percentPosition.percentTop,n.percentTop))){var i=this.getPosition(e.percentPosition,e.size);this.state.position=Object.customAssign(this.state.position,i),this.setState({position:this.state.position})}if(e.size&&(!a||!(0,d.default)(e.size.width,a.width)||!(0,d.default)(e.size.height,a.height))){var o=this.getPosition(e.percentPosition,e.size);this.state.position=Object.customAssign(this.state.position,o),this.setState({position:this.state.position,size:{width:e.size.width,height:e.size.height}})}}},{key:"handlerOnResize",value:function(){this.recalculation()}},{key:"handlerOnFullscreenchange",value:function(){this.recalculation()}},{key:"changeMainContentVesselSmartSize",value:function(){this.recalculation()}},{key:"recalculation",value:function(){var e=this.props,t=e.id,a=e.percentPosition,n=e.canResize,i=e.changeEleReSize,o=e.size,r=this.getPosition(a,o);this.state.position=Object.customAssign(this.state.position,r),this.setState({position:this.state.position}),n&&(this.newSize=this.limitResizeBounds(this.state.size),i&&"function"==typeof i&&i(t,this.newSize))}},{key:"getPosition",value:function(e,t){var a=this.props,n=a.bounds,i=void 0===n?"#tk_app":n,o=a.borderWidth,r=void 0===o?0:o,s=T.default.findDOMNode(this),l=void 0;if("string"==typeof i&&(l=document.querySelector(i)),s&&l&&e&&void 0!==e.percentLeft&&void 0!==e.percentTop){var d=D.default.windowInnerWidth/A.default.STANDARDSIZE,u=t?t.width*d+2*r*d:s.offsetWidth,c=t?t.height*d+2*r*d:s.offsetHeight,h=l.offsetWidth,f=l.offsetHeight,m=e.percentLeft*(h-u),g=e.percentTop*(f-c);return m=isNaN(m)||m===1/0||null===m||m<0?0:m,g=isNaN(g)||g===1/0||null===g||g<0?0:g,{left:m,top:g}}return{left:0,top:0}}},{key:"getPercentPosition",value:function(e){var t=this.props.bounds,a=void 0===t?"#tk_app":t,n=T.default.findDOMNode(this),i=void 0;if("string"==typeof a&&(i=document.querySelector(a)),n&&i&&e&&void 0!==e.left&&void 0!==e.top){var o=n.offsetWidth,r=n.offsetHeight,s=i.offsetWidth,l=i.offsetHeight,d=e.left/(s-o),u=e.top/(l-r);return d=isNaN(d)||d===1/0||null===d||d<0?0:d,u=isNaN(u)||u===1/0||null===u||u<0?0:u,{percentLeft:d,percentTop:u}}return{percentLeft:0,percentTop:0}}},{key:"limitDragBounds",value:function(e){var t=this.props.bounds,a=T.default.findDOMNode(this),n=void 0;return"string"==typeof t&&(n=document.querySelector(t)),a&&n&&void 0!==e.left&&void 0!==e.top&&(e.left=e.left<0?0:e.left>n.offsetWidth-a.offsetWidth?n.offsetWidth-a.offsetWidth:e.left,e.top=e.top<0?0:e.top>n.offsetHeight-a.offsetHeight?n.offsetHeight-a.offsetHeight:e.top),e}},{key:"limitResizeBounds",value:function(e){var t=this.props,a=t.bounds,n=t.defaultSize,i=t.minResize,o=t.borderWidth,r=void 0===o?0:o,s=T.default.findDOMNode(this),l=e.width,d=e.height;if(!n||!s)return e;var u=n.originalResizeScale,c=void 0,h=void 0,f=void 0;"string"==typeof a&&(c=document.querySelector(a),h=c.clientWidth,f=c.clientHeight);var m=window.innerWidth/A.default.STANDARDSIZE;return i&&(u>i.width/i.height?d<i.height&&(d=i.height,l=d*u):l<i.width&&(l=i.width,d=l/u)),c&&(l>=h/m-2*r||d>=f/m-2*r)&&(u>h/f?(l=h/m-2*r,d=l/u):(d=f/m-2*r,l=d*u)),{width:l,height:d}}},{key:"onPress",value:function(){}},{key:"onPressUp",value:function(){}},{key:"onTouchStart",value:function(e){var t=this;e.persist();var a=this.props.handle;if(a&&e.target&&"string"==typeof a){var n=T.default.findDOMNode(this).querySelector(a);if(e.target!==n&&$(e.target).parents(a).length<=0)return}clearTimeout(this.onTouchTime),this.clientX=e.targetTouches[0].clientX,this.clientY=e.targetTouches[0].clientY,this.position.left=this.state.position.left||0,this.position.top=this.state.position.top||0,this.onTouchTime=setTimeout(function(){t.state.isCanDrag=!0,t.setState({isCanDrag:t.state.isCanDrag});var a=t.props.onPanStart;a&&"function"==typeof a&&a(e)},this.longTouchTime)}},{key:"onTouchMove",value:function(e){var t=Math.abs(e.touches[0].clientX-this.clientX),a=Math.abs(e.touches[0].clientY-this.clientY);if((0,s.default)(t,a)>=40&&clearTimeout(this.onTouchTime),this.state.isCanDrag){this.state.position.top=this.position.top+e.targetTouches[0].clientY-this.clientY,this.state.position.left=this.position.left+e.targetTouches[0].clientX-this.clientX;var n=this.limitDragBounds(this.state.position);this.setState({position:n}),e.preventDefault()}}},{key:"onTouchEnd",value:function(e){if(clearTimeout(this.onTouchTime),this.state.isCanDrag){this.state.isCanDrag=!1,this.setState({isCanDrag:this.state.isCanDrag}),this.clientX=0,this.clientY=0,this.position.left=0,this.position.top=0;var t=this.getPercentPosition(this.state.position),a=this.props,n=a.onPanEnd,i=a.id;n&&"function"==typeof n&&n(e,this.state.position,t,i)}}},{key:"onPinchStart",value:function(e){this.scale=this.state.scale||1;var t=this.props.onPinchStart;t&&"function"==typeof t&&t(e)}},{key:"onPinch",value:function(e){var t=this.props,a=t.id,n=t.onPinch;t.defaultSize&&(this.state.scale=this.scale*e.scale,this.newSize.width=this.props.defaultSize.width*this.state.scale,this.newSize.height=this.props.defaultSize.height*this.state.scale,this.newSize=this.limitResizeBounds(this.newSize),this.setState({size:this.newSize}),n&&"function"==typeof n&&n(e,a,this.newSize))}},{key:"onPinchEnd",value:function(e){var t=this.props,a=t.id,n=t.onPinchEnd;n&&"function"==typeof n&&n(e,a,this.newSize)}},{key:"onPinchIn",value:function(e){}},{key:"onPinchOut",value:function(e){}},{key:"onPinchCancel",value:function(e){}},{key:"render",value:function(){var e=this.props,t=(e.id,e.disabled),a=e.canResize,n=this.state,i=n.position,r=n.size,s=(n.opacity,n.isCanDrag),l={left:i.left+"px",top:i.top+"px",pointerEvents:s?"none":"auto",transform:s?"scale(1.05)":void 0};a&&(l.width=r.width+"rem",l.height=r.height+"rem");var d={recognizers:{pinch:{enable:a}}},u=S.default.Children.only(this.props.children),c={options:d,onPinchStart:this.onPinchStart.bind(this),onPinch:this.onPinch.bind(this),onPinchEnd:this.onPinchEnd.bind(this),onPinchIn:this.onPinchIn.bind(this),onPinchOut:this.onPinchOut.bind(this),onPress:this.onPress.bind(this),onPressUp:this.onPressUp.bind(this)};return S.default.createElement(B.default,c,S.default.cloneElement(u,{style:(0,o.default)({},u.props.style,l),onTouchStart:!0===t?void 0:this.onTouchStart.bind(this),onTouchMove:!0===t?void 0:this.onTouchMove.bind(this),onTouchEnd:!0===t?void 0:this.onTouchEnd.bind(this)}))}}]),t}(S.default.Component);t.default=_},F5u0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),d=n(l),u=a("zwoO"),c=n(u),h=a("Pf15"),f=n(h),m=a("GiK3"),g=n(m),p=a("bA4h"),v=n(p);a("E09H");var b=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={updateState:!1},a.isSlidering=!1,a.changeValue=void 0,a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"onChange",value:function(e){this.isSlidering&&(this.changeValue=e,this.setState({updateState:!this.state.updateState})),this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e)}},{key:"onBeforeChange",value:function(e){this.isSlidering=!0,this.changeValue=e,this.props.onBeforeChange&&"function"==typeof this.props.onBeforeChange&&this.props.onBeforeChange(e)}},{key:"onAfterChange",value:function(e){this.isSlidering=!1,this.changeValue=void 0,this.props.onAfterChange&&"function"==typeof this.props.onAfterChange&&this.props.onAfterChange(e)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled,n=e.vertical,i=e.style;return g.default.createElement(v.default,{style:i,vertical:n,className:t,disabled:a,value:void 0!==this.changeValue?this.changeValue:this.props.value,onChange:this.onChange.bind(this),onBeforeChange:this.onBeforeChange.bind(this),onAfterChange:this.onAfterChange.bind(this)})}}]),t}(g.default.Component);t.default=b},FDbx:function(e,t){},GrKX:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),o=n(i),r=a("fZjL"),s=n(r),l=a("W3Iv"),d=n(l),u=a("BO1k"),c=n(u),h=a("d7EF"),f=n(h),m=a("mvHQ"),g=n(m),p=a("Zrlr"),v=n(p),b=a("wxAW"),y=n(b),k=a("T+56"),S=n(k),w=a("VSuD"),T=n(w),C=a("DrPG"),D=n(C),E=a("Wi6Q"),I=n(E),P=a("HUPQ"),A=n(P),R=a("yE5a"),B=n(R),_=a("0jvK"),x=n(_),M=a("YRCL"),N=n(M),W=function(){function e(t){(0,v.default)(this,e),this.room=t}return(0,y.default)(e,[{key:"registerEventToRoom",value:function(){for(var e in T.default.EVENTTYPE.RoomEvent)!function(e){B.default.getTkRoom().addEventListener(T.default.EVENTTYPE.RoomEvent[e],function(t){var a=!0;("stream-rtcStats"===t.type||"room-pubmsg"===t.type&&"sendNetworkState"===t.message.name)&&(a=!1),a&&L.Logger.debug(T.default.EVENTTYPE.RoomEvent[e]+" event:",t),S.default.Room.dispatchEvent(t,!1)})}(e)}},{key:"addEventListenerToRoomHandler",value:function(){var e=this;for(var t in T.default.EVENTTYPE.RoomEvent)!function(t){S.default.Room.addEventListener(T.default.EVENTTYPE.RoomEvent[t],function(a){if(!e["handler"+D.default.replaceFirstUper(t)]||"function"!=typeof e["handler"+D.default.replaceFirstUper(t)]||!e["handler"+D.default.replaceFirstUper(t)](a)){var n=!0;("stream-rtcStats"===a.type||"room-pubmsg"===a.type&&"sendNetworkState"===a.message.name)&&(n=!1),S.default.CoreController.dispatchEvent(a,n)}})}(t)}},{key:"handlerRoomPubmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var a=e.message;if(A.default.signallingMessageList&&A.default.signallingMessageList.length>0&&"UpdateTime"!==a.name&&"LowConsume"!==a.name&&"StreamFailure"!==a.name)return A.default.signallingMessageList.push(a),!0;switch(A.default.serviceTime||(A.default.serviceTime=1e3*a.ts,A.default.remindServiceTime=1e3*a.ts),a.name){case"ClassBegin":A.default.serviceTime=D.default.isMillisecondClass(a.ts)?a.ts:1e3*a.ts,A.default.remindServiceTime=D.default.isMillisecondClass(a.ts)?a.ts:1e3*a.ts,t._classBeginStartHandler(a);break;case"UpdateTime":A.default.serviceTime=1e3*a.ts,A.default.remindServiceTime=1e3*a.ts,A.default.firstGetServiceTime||A.default.isHandleMsglistFromRoomPubmsg||!A.default.signallingMessageList||(A.default.firstGetServiceTime=!0,A.default.classBegin||this._msglistOnConnected(A.default.signallingMessageList,"roomConnected"),this._msglistOnConnected(A.default.signallingMessageList,"roomPubmsg"),A.default.signallingMessageList=null,delete A.default.signallingMessageList);break;case"RemoteControl":switch(a.data.action){case"nowSomeoneCdnIp":N.default.sendSignallingFromRemoteControl(a.fromID,{action:"callCdnIp",serverInfo:{serverKey:window.WBGlobal.docAddressKey}});break;case"changeCdnIp":var n=a.data.key;window.WBGlobal.docAddressKey!==n&&B.default.getTkWhiteBoardManager().switchDocAddress(n,!0)}break;case"StreamFailure":L.Logger.info("StreamFailure signalling:"+(0,g.default)(a))}return"sendNetworkState"===a.name||"BlackBoardDrag"===a.name||"videoDraghandle"===a.name||void 0}},{key:"handlerRoomDelmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var a=e.message;if(A.default.signallingMessageList&&A.default.signallingMessageList.length>0){for(var n=A.default.signallingMessageList.length-1;n>=0;n--)A.default.signallingMessageList[n].id!==a.id&&A.default.signallingMessageList[n].associatedMsgID!==a.id||A.default.signallingMessageList.splice(n,1);return!0}switch(a.name){case"ClassBegin":t._classBeginEndHandler(a)}}},{key:"handlerRoomConnected",value:function(e){this._compareDocServerSpeedSwitchCND(),B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({languageType:"chinese"===A.default.language.name?"ch":"complex"===A.default.language.name?"tw":"en",mediaShareToID:B.default.getTkRoom().getMySelf().id,clientMediaShare:A.default.isClient&&A.default.clientversion>=2018031e3&&!A.default.isMacClient,synchronization:!1,canDraw:B.default.getTkRoom().getMySelf().candraw,canPage:B.default.getTkRoom().getMySelf().candraw||T.default.hasRole.roleTeachingAssistant||T.default.hasRole.roleChairman||T.default.hasRole.roleStudent&&T.default.joinRoomInfo.isSupportPageTrun,actionClick:B.default.getTkRoom().getMySelf().candraw,isMobile:"mobile"===TK.SDKTYPE,pptVolumeSynchronization:!1,addPage:!1}),A.default.showShapeAuthor=T.default.joinRoomInfo.brushName&&!A.default.playback,A.default.firstGetServiceTime=!1,A.default.isHandleMsglistFromRoomPubmsg=!1,A.default.appConnected=!0;var t=I.default.getRoleHasDefalutAppPermissions();x.default.initAppPermissions(t);var a=e.message;A.default.signallingMessageList=a,this._msglistOnConnected(A.default.signallingMessageList,"roomConnected"),A.default.serviceTime&&!A.default.firstGetServiceTime&&!A.default.isHandleMsglistFromRoomPubmsg&&A.default.signallingMessageList&&(A.default.firstGetServiceTime=!0,this._msglistOnConnected(A.default.signallingMessageList,"roomPubmsg"),A.default.signallingMessageList=null,delete A.default.signallingMessageList),N.default.setParticipantPropertyToAll(B.default.getTkRoom().getMySelf().id,{codeVersion:2}),$(window).resize(),this._startTime()}},{key:"handlerRoomDisconnected",value:function(e){A.default.appConnected=!1,A.default.classBegin=!1,A.default.serviceTime=void 0,A.default.remindServiceTime=void 0,A.default.signallingMessageList=null,delete A.default.signallingMessageList,A.default.isHandleMsglistFromRoomPubmsg=!1,A.default.participantGiftNumberJson={}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user,n=!0,i=!1,o=void 0;try{for(var r,s=(0,c.default)((0,d.default)(t));!(n=(r=s.next()).done);n=!0){var l=r.value,u=(0,f.default)(l,2),h=u[0],m=u[1];a.id===B.default.getTkRoom().getMySelf().id&&"candraw"===h&&(B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({canDraw:m,canPage:m||T.default.hasRole.roleStudent&&T.default.joinRoomInfo.isSupportPageTrun,actionClick:m,synchronization:m}),x.default.setAppPermissions("canDraw",m),x.default.setAppPermissions("canDragCaptureImg",m),x.default.setAppPermissions("canResizeCaptureImg",m))}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"handlerRoomPlaybackClearAll",value:function(e){return S.default.CoreController.dispatchEvent({type:T.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController}),!0}},{key:"handlerRoomReceiveActionCommand",value:function(e){var t=e.message,a=t.action;switch(t.cmd,a){case"transmitWindowSize":document.getElementById("tk_app")?(A.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,A.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(A.default.windowInnerWidth=window.innerWidth,A.default.windowInnerHeight=window.innerHeight);var n=A.default.windowInnerWidth/T.default.STANDARDSIZE,i=document.getElementById("all_root")||document.getElementsByTagName("html");if(i){var o=D.default.isArray(i)?i[0]:i;o&&o.style&&(o.style.fontSize=n+"px")}return S.default.Window.dispatchEvent({type:T.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:n}}),!0}}},{key:"handlerRoomModeChanged",value:function(e){e.message.roomMode===TK.ROOM_MODE.BIG_ROOM?A.default.HeightConcurrence=!0:e.message.roomMode===TK.ROOM_MODE.NORMAL_ROOM&&(A.default.HeightConcurrence=!1)}},{key:"handlerRoomAudiovideostateSwitched",value:function(e){var t=e.message;A.default.isOnlyAudioRoom=t.onlyAudio}},{key:"handlerRoomCheckroom",value:function(e){var t=e.message||{},a=t.ret,n=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(a,n)}},{key:"handlerRoomCheckroomPlayback",value:function(e){var t=e.message||{},a=t.ret,n=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(a,n)}},{key:"handlerRoomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message;void 0!==t.playback&&(A.default.playback=t.playback),void 0!==t.deviceType&&(A.default.mobileDeviceType=t.deviceType,A.default.clientType=t.clientType,T.default.STANDARDSIZE="pad"===t.deviceType?20.48:13.34)}},{key:"handlerRoomServeraddressUpdate",value:function(e){var t=e.message,a=t.web_protocol,n=t.web_host,i=t.web_port;T.default.bindServiceinfoToTkConstant({protocol:a,web_host:n,web_port:i,isInit:A.default.handlerRoomServeraddressUpdateIsInit})}},{key:"_classBeginStartHandler",value:function(e){A.default.classBeginTime=D.default.isMillisecondClass(e.ts)?e.ts:1e3*e.ts,A.default.classBegin=!0,B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:"__all",synchronization:!(!T.default.hasRole.roleChairman&&!T.default.hasRole.roleTeachingAssistant)||B.default.getTkRoom().getMySelf().candraw,addPage:T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant,pptVolumeSynchronization:T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant});var t=I.default.getRoleHasDefalutAppPermissions();x.default.initAppPermissions(t)}},{key:"_classBeginEndHandler",value:function(e){A.default.classBegin=!1,A.default.endClassBegin=!0,B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:void 0,synchronization:!1,addPage:!1,pptVolumeSynchronization:!1});var t=I.default.getRoleHasDefalutAppPermissions();x.default.initAppPermissions(t)}},{key:"_msglistOnConnected",value:function(e,t){var a=this,n={};return function(e,t,n){var i={};for(var o in e)n&&n[e[o].name]||(e[o].data&&"string"==typeof e[o].data&&(e[o].data=JSON.parse(e[o].data)),/outIframe/.test(e[o].name)?S.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[o]}}):null==i[e[o].name]||void 0==i[e[o].name]?(i[e[o].name]=[],i[e[o].name].push(e[o])):i[e[o].name].push(e[o]));if("roomConnected"===t){var r=i.ClassBegin;null!=r&&void 0!=r&&r.length>0?"ClassBegin"==r[r.length-1].name&&(a._classBeginStartHandler(r[r.length-1]),S.default.CoreController.dispatchEvent({type:"receive-msglist-ClassBegin",source:"room-msglist",message:r[r.length-1]})):S.default.CoreController.dispatchEvent({type:"receive-msglist-not-ClassBegin",source:"room-msglist",message:{}}),i.ClassBegin=null}else if("roomPubmsg"===t){var l=i.whiteboardMarkTool;null!=l&&void 0!=l&&l.length>0&&"whiteboardMarkTool"==l[l.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-whiteboardMarkTool",source:"room-msglist",message:l[l.length-1]}),i.whiteboardMarkTool=null;var d=i.SharpsChange;null!=d&&void 0!=d&&d.length,i.SharpsChange=null;var u=i.CaptureImg;null!==u&&void 0!==u&&u.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImg",message:{CaptureImgArray:u}}),i.CaptureImg=null;var c=i.CaptureImgDrag;null!==c&&void 0!==c&&c.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImgDrag",message:{CaptureImgDragArray:c}}),i.CaptureImgDrag=null;var h=i.CaptureImgResize;null!==h&&void 0!==h&&h.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-CaptureImgResize",message:{CaptureImgResizeArray:h}}),i.CaptureImgResize=null;var f=i.WBPageCount;null!=f&&void 0!=f&&f.length>0&&"WBPageCount"==f[f.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-WBPageCount",source:"room-msglist",message:f[f.length-1]}),i.WBPageCount=null;var m=i.timer;null!=m&&void 0!=m&&m.length>0&&"timer"==m[m.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-timer",source:"room-msglist",message:{timerShowArr:m}}),i.timer=null;var g=i.TimerDrag;null!==g&&void 0!==g&&g.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-TimerDrag",message:{TimerDragArray:g}}),i.TimerDrag=null;var p=i.dial;null!=p&&void 0!=p&&p.length>0&&"dial"==p[p.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-dial",source:"room-msglist",message:{dialShowArr:p}}),i.dial=null;var v=i.DialDrag;null!==v&&void 0!==v&&v.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-DialDrag",message:{DialDragArray:v}}),i.DialDrag=null;var b=i.answer;null!=b&&void 0!=b&&b.length>0&&"answer"==b[b.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-answer",source:"room-msglist",message:{answerShowArr:b}}),i.answer=null;var y=i.submitAnswers;null!=y&&void 0!=y&&y.length>0&&"submitAnswers"==y[y.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-submitAnswers",source:"room-msglist",message:{submitAnswersArr:y}}),i.submitAnswers=null;var k=i.Question;null!=k&&void 0!=k&&k.length>0&&"Question"==k[k.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-question",source:"room-msglist",message:{data:k[0]}}),i.question=null;var w=i.PublishResult;null!=w&&void 0!=w&&w.length>0&&"PublishResult"==w[w.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-publishResult",source:"room-msglist",message:{data:w[0]}}),i.PublishResult=null;var T=i.AnswerDrag;null!==T&&void 0!==T&&T.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-AnswerDrag",message:{AnswerDragArray:T}}),i.AnswerDrag=null;var C=i.qiangDaQi;null!=C&&void 0!=C&&C.length>0&&"qiangDaQi"==C[C.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-qiangDaQi",source:"room-msglist",message:{qiangDaQiArr:C}}),i.qiangDaQi=null;var D=i.QiangDaZhe;null!=D&&void 0!=D&&D.length>0&&"QiangDaZhe"==D[D.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-QiangDaZhe",source:"room-msglist",message:{QiangDaZheArr:D}}),i.QiangDaZhe=null;var E=i.ResponderDrag;null!==E&&void 0!==E&&E.length>0&&S.default.CoreController.dispatchEvent({type:"receive-msglist-ResponderDrag",message:{ResponderDragArray:E}}),i.ResponderDrag=null;var I=i.MoreUsers;if(null!=I&&void 0!=I&&I.length>0)"MoreUsers"==I[I.length-1].name&&(A.default.isMoreUsers=!0,S.default.CoreController.dispatchEvent({type:"receive-msglist-MoreUsers",source:"room-msglist",message:I[I.length-1]}));else if((0,s.default)(B.default.getTkRoom().getUsers()).length>A.default.userCount&&!A.default.HeightConcurrence){var P={hasMoreUser:!0};A.default.isMoreUsers=!0,N.default.sendSignallingFromMoreUsers(P,!1)}i.MoreUsers=null;var R=i.BlackBoard;null!=R&&void 0!=R&&R.length>0&&"BlackBoard"==R[R.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-BlackBoard",source:"room-msglist",message:R[R.length-1]}),i.BlackBoard=null;var _=i.BlackBoard_new;null!=_&&void 0!=_&&_.length>0&&"BlackBoard_new"==_[_.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-NewBlackBoard",source:"room-msglist",message:_[_.length-1]}),i.BlackBoard_new=null;var x=i.UserHasNewBlackBoard;null!=x&&void 0!=x&&x.length>0&&"UserHasNewBlackBoard"==x[x.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-UserHasNewBlackBoard",source:"room-msglist",message:x}),i.UserHasNewBlackBoard=null;var M=i.PptVolumeControl;null!=M&&void 0!=M&&M.length>0&&"PptVolumeControl"==M[M.length-1].name&&S.default.CoreController.dispatchEvent({type:"receive-msglist-PptVolumeControl",source:"room-msglist",message:{PptVolumeControlArr:M}}),i.PptVolumeControl=null;var W=i.FullScreen;null!==W&&void 0!==W&&W.length>0&&(A.default.isVideoInFullscreen=!0,S.default.CoreController.dispatchEvent({type:"receive-msglist-FullScreen",message:{FullScreenArray:W}})),i.FullScreen=null;var O=null,z=i.ShowPage;if(null!=z&&void 0!=z&&z.length>0)for(var H=0;H<z.length;H++)z[H].data.isMedia||(O=z[H]);i.ShowPage=null,void 0!=O&&null!=O&&(L.Logger.debug("receive-msglist-ShowPage-lastDocument info:",O),S.default.CoreController.dispatchEvent({type:"receive-msglist-ShowPage-lastDocument",message:{data:O.data,source:"room-msglist"}})),A.default.isHandleMsglistFromRoomPubmsg=!0}}(e,t,n),!0}},{key:"_handlerCheckroomOrInitPlaybackInfo",value:function(e,t){L.Logger.debug("checkroom  ret and roominfo:",e,t);var a=D.default.decrypt(T.default.SERVICEINFO.joinUrl)||window.location.href,n=B.default.getTkRoom().getRoomProperties().chairmancontrol,i=void 0,r=void 0;A.default.playback?"mobile"===TK.SDKTYPE&&TK.global&&void 0!==TK.global.fakeJsSdkInitInfo.mobileInfo.clientType?t.skins&&"object"===(0,o.default)(t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType])&&(i=t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType].tplId,r=t.skins[TK.global.fakeJsSdkInitInfo.mobileInfo.clientType].skinId):t.skins&&"object"===(0,o.default)(t.skins.pc)&&(i=t.skins.pc.tplId,r=t.skins.pc.skinId):t.room&&"object"===(0,o.default)(t.room)&&(i=t.room.tplId,r=t.room.skinId);var s={starttime:B.default.getTkRoom().getRoomProperties().starttime,endtime:B.default.getTkRoom().getRoomProperties().endtime,nickname:B.default.getTkRoom().getMySelf().nickname,thirdid:B.default.getTkRoom().getMySelf().id,joinUrl:D.default.encrypt(a),serial:B.default.getTkRoom().getRoomProperties().serial,roomrole:Number(B.default.getTkRoom().getMySelf().role),roomtype:Number(B.default.getTkRoom().getRoomProperties().roomtype),companyid:Number(B.default.getTkRoom().getRoomProperties().companyid),isLivebypass:void 0!==B.default.getTkRoom().getRoomProperties().livebypass&&null!==B.default.getTkRoom().getRoomProperties().livebypass&&1===Number(B.default.getTkRoom().getRoomProperties().livebypass),autoStartAV:!A.default.playback&&!!n&&1===Number(n.substr(23,1)),autoClassBegin:!A.default.playback&&!!n&&1===Number(n.substr(32,1)),studentCloseMyseftAV:!A.default.playback&&!!n&&1===Number(n.substr(33,1)),hiddenClassBegin:!A.default.playback&&!!n&&1===Number(n.substr(34,1)),isUploadH5Document:!(A.default.playback||!n)&&1===Number(n.substr(35,1)),assistantOpenMyseftAV:!(A.default.playback||!n)&&1===Number(n.substr(36,1)),isSupportCandraw:!(A.default.playback||!n)&&1===Number(n.substr(37,1)),isSupportPageTrun:!(A.default.playback||!n)&&1===Number(n.substr(38,1)),isShowTheAnswer:!(A.default.playback||!n)&&1===Number(n.substr(42,1)),hasCoursewareRemarks:!(A.default.playback||!n)&&1===Number(n.substr(43,1)),isDoubleScreenDisplay:!(A.default.playback||!n)&&1===Number(n.substr(39,1)),isBeforeClassReleaseVideo:!(A.default.playback||!n)&&1===Number(n.substr(41,1)),isClassOverNotLeave:!(A.default.playback||!n)&&1===Number(n.substr(47,1)),videoWhiteboardDraw:!(A.default.playback||!n)&&1===Number(n.substr(48,1)),localRecord:!(A.default.playback||!n)&&1===Number(n.substr(49,1)),videoInFullScreen:!(A.default.playback||!n)&&1===Number(n.substr(50,1)),pictureInPicture:!(A.default.playback||!n)&&1===Number(n.substr(51,1)),pauseWhenOver:!(A.default.playback||!n)&&1===Number(n.substr(52,1)),classBeginEndCloseClient:!(A.default.playback||!n)&&1===Number(n.substr(54,1)),chatSendImg:!(A.default.playback||!n)&&1===Number(n.substr(53,1)),isDocumentClassification:!(A.default.playback||!n)&&1===Number(n.substr(56,1)),brushName:!(A.default.playback||!n)&&1===Number(n.substr(58,1)),hasCaptureImg:!(A.default.playback||!n)&&1===Number(n.substr(59,1)),pushflow:!(A.default.playback||!n)&&1===Number(n.substr(60,1)),qrCode:!(A.default.playback||!n)&&1===Number(n.substr(69,1)),shapeUndoRedoClear:!(A.default.playback||!n)&&1===Number(n.substr(68,1)),isMoviesShare:!!n&&1===Number(n.substr(70,1)),isDoubleShare:!!n&&1===Number(n.substr(72,1)),endOfClassHoursIsClassOver:!(A.default.playback||!n)&&1===Number(n.substr(71,1)),customTrophysVoice:!!n&&1===Number(n.substr(44,1)),pointerReminder:!!n&&1===Number(n.substr(73,1)),areaExchange:!(A.default.playback||!n)&&1===Number(n.substr(74,1)),tourCancelBtn:!(A.default.playback||!n)&&1===Number(n.substr(78,1)),isHasVideo:!!n&&1===Number(n.substr(1,1)),customWhiteboardBackground:!!n&&1===Number(n.substr(81,1)),createOnlyAudioRoom:!(A.default.playback||!n)&&1===Number(n.substr(80,1)),isConfigVideoMirror:!(A.default.playback||!n)&&1===Number(n.substr(55,1)),preLoading:!(A.default.playback||!n)&&1===Number(n.substr(102,1)),toolBox:{answer:!(A.default.playback||!n)&&1===Number(n.substr(61,1)),turnplate:!(A.default.playback||!n)&&1===Number(n.substr(62,1)),timer:!(A.default.playback||!n)&&1===Number(n.substr(63,1)),responder:!(A.default.playback||!n)&&1===Number(n.substr(64,1)),moreBlackboard:!(A.default.playback||!n)&&1===Number(n.substr(65,1)),destTopShare:!(A.default.playback||!n)&&1===Number(n.substr(66,1))},pptpagingoptions:!(A.default.playback||!n)&&1===Number(n.substr(112,1)),mouseoptions:!(A.default.playback||!n)&&1===Number(n.substr(113,1)),shapeoptions:!(A.default.playback||!n)&&1===Number(n.substr(114,1)),fontoptions:!(A.default.playback||!n)&&1===Number(n.substr(115,1)),isHandsUpOnStage:!0,jumpurl:A.default.playback?"":D.default.getUrlParams("jumpurl"),roomname:B.default.getTkRoom().getRoomProperties().roomname,pullConfigure:B.default.getTkRoom().getRoomProperties().pullConfigure,pushConfigure:B.default.getTkRoom().getRoomProperties().pushConfigure,pushUrl:B.default.getTkRoom().getRoomProperties().pullid,helpcallbackurl:t.helpcallbackurl,classRoomLogoUrl:t.room.classroomlogo?t.room.classroomlogo:void 0,whiteboardcolor:A.default.playback?void 0!==B.default.getTkRoom().getRoomProperties().whiteboardcolor?Number(B.default.getTkRoom().getRoomProperties().whiteboardcolor)-1:0:void 0!==t.room.whiteboardcolor?Number(t.room.whiteboardcolor)-1:0,template:T.default.testTemplate?T.default.testTemplate:i&&!/^\d*$/g.test(i)?"template_"+i:T.default.template,skin:T.default.testSkin?T.default.testSkin:r&&!/^\d*$/g.test(r)?"skin_"+r:T.default.skin,localRecordInfo:{localrecordtype:B.default.getTkRoom().getRoomProperties().localrecordtype},foregroundpic:B.default.getTkRoom().getRoomProperties().foregroundpic,voicefileUrl:B.default.getTkRoom().getRoomProperties().voicefile,customTrophys:B.default.getTkRoom().getRoomProperties().trophy?B.default.getTkRoom().getRoomProperties().trophy:void 0,pushflowaddr:B.default.getTkRoom().getRoomProperties().pushflowaddr?B.default.getTkRoom().getRoomProperties().pushflowaddr:void 0};s.roomtype===T.default.ROOMTYPE.oneToOne&&s.assistantOpenMyseftAV&&(s.roomtype=3,A.default.roomChange=!0),B.default.setRoomName(B.default.getTkRoom().getRoomProperties().roomname),B.default.setUserName(B.default.getTkRoom().getMySelf().nickname),B.default.setUserThirdid(B.default.getTkRoom().getMySelf().id),document.head.getElementsByTagName("title")[0].innerHTML=B.default.getRoomName(),T.default.bindRoomInfoToTkConstant(s),T.default.bindParticipantHasRoleToTkConstant(),T.default.bindParticipantHasRoomtypeToTkConstant(),T.default.updateTemplate("template_beyond"),T.default.updateSkin("skin_beyond_default"),A.default.videoScale=T.default.joinRoomInfo.roomVideoWidth/T.default.joinRoomInfo.roomVideoHeight,A.default.showShapeAuthor=T.default.joinRoomInfo.brushName&&!A.default.playback,B.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaSharePauseWhenOver:T.default.joinRoomInfo.pauseWhenOver,isLoadDocumentRemark:T.default.joinRoomInfo.hasCoursewareRemarks,canRemark:T.default.joinRoomInfo.hasCoursewareRemarks,showShapeAuthor:A.default.showShapeAuthor,documentToolBarConfig:{isLoadRemark:T.default.joinRoomInfo.hasCoursewareRemarks}})}},{key:"_compareDocServerSpeedSwitchCND",value:function(){var e=function(e,t){if("function"==typeof t)if("mobile"===TK.SDKTYPE){if(B.default.getTkRoom()&&"function"==typeof B.default.getTkRoom().getLocalStorageItem)try{B.default.getTkRoom().getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("getLocalStorageItem error:",e),t("")}}else t(L.Utils.localStorage.getItem("tkDocAddressKey"))};e("tkDocAddressKey",function(t){if(!t){var a=void 0,n=1,i=[],o=!1,r=function(e,t,a,n,i){var o={},r=(new Date).getTime(),s=e+"/speed.bmp?ts="+r,l=new Image;l.onload=function(){var e=(new Date).getTime();o={code:0,loadingTime:i?e-r-50:e-r},"function"==typeof t&&t(o,a,n)},l.onerror=function(){o={code:-1,loadingTime:void 0},"function"==typeof t&&t(o,a,n)},l.src=s},s=function(t){e("tkDocAddressKey",function(e){e||t!==window.WBGlobal.docAddressKey&&(B.default.getTkWhiteBoardManager().switchDocAddress(t,!1),L.Logger.info("auto switch cdn , cdn key is "+window.WBGlobal.docAddressKey+", address is "+window.WBGlobal.nowUseDocAddress))})},l=function(e,t){return e.filter(function(e,a){return(n-1)*t<=a&&a<n*t})},d=function(e,t,a){return e+"://"+t+":"+a};!function e(){var t=[],u=[];l(window.WBGlobal.docAddressList,3).forEach(function(l,c){r(d(l.protocol,l.hostname,l.port),function(n,r,l){L.Logger.info("load backup document cdn  speed.bmp , response is "+L.Utils.toJsonStringify(n)),0===n.code&&n.loadingTime?o||(u.push({hostname:l.hostname,speed:n.loadingTime}),clearTimeout(a),a=setTimeout(function(){if(u.length>1){var e=u.sort(function(e,t){return e.speed-t.speed});s(e[0].hostname)}else s(l.hostname);o=!0},100)):(t.push(1),i.push(1)),i.length===window.WBGlobal.docAddressList.length?s(window.WBGlobal.docAddressList[0].hostname):3===t.length&&e()},c,l,1===n&&0===c)}),n+=1}()}})}},{key:"_startTime",value:function(){var e=this;clearInterval(e.timer),e.intervalNumber=0,N.default.sendSignallingFromUpdateTime(B.default.getTkRoom().getMySelf().id),e.timer=setInterval(function(){A.default.classBeginTime&&A.default.serviceTime?A.default.serviceTime+=1e3:A.default.serviceTime||N.default.sendSignallingFromUpdateTime(B.default.getTkRoom().getMySelf().id),++e.intervalNumber>300&&(N.default.sendSignallingFromUpdateTime(B.default.getTkRoom().getMySelf().id),e.intervalNumber=0)},1e3)}},{key:"_stopTime",value:function(){var e=this;clearInterval(e.timer),e.timer=null,e.intervalNumber=0}}]),e}(),O=new W;O.addEventListenerToRoomHandler(),t.default=O},HSQo:function(e,t,a){e.exports={default:a("CJli"),__esModule:!0}},HUPQ:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=n(i),r=a("DrPG"),s=n(r);window.GLOBAL=window.GLOBAL||{};var l=window.GLOBAL;l.classBegin=!1,l.endClassBegin=!1,l.routeName=void 0,l.playback=!1,l.playPptVideoing=!1,l.playMediaFileing=!1,l.serviceTime=void 0,l.firstGetServiceTime=!1,l.isHandleMsglist=!1,l.remindServiceTime=void 0,l.classBeginTime=void 0,l.isSkipPageing=!1,l.isClient=!1,l.isBroadcast=!1,l.mobileDeviceType=void 0,l.windowInnerWidth=window.innerWidth,l.windowInnerHeight=window.innerHeight,l.isOnlyAudioRoom=!1;var d=s.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+(0,o.default)(d)),l.isMobile=d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad,l.isBroadcastClient=l.isClient&&l.isBroadcast,l.isBroadcastMobile=l.isMobile&&l.isBroadcast,l.languageName="ch"===s.default.getUrlParams("languageType")?"chinese":"tw"===s.default.getUrlParams("languageType")?"complex":"english",l.defaultFileInfo={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0},l.showShapeAuthor=!1,l.isMoreUsers=!1,l.userCount=50,l.customWhiteboardColorArry=["ffffff","000000","415646","ffc973","5d4245","9ad0ea","756691","558289"],l.clientComponentName=s.default.getUrlParams("loadComponentName"),l.handlerRoomServeraddressUpdateIsInit=!0,l.roomChange=!1,l.minimizedDragAndDropArry=[],t.default=l},Ha7l:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("GiK3"),o=n(i),r=a("HUPQ"),s=n(r),l=a("VSuD"),d=n(l),u=function(e){var t=e.dispose;return e.parentState,o.default.createElement("div",{className:"header"},o.default.createElement("span",{className:"subject item"},s.default.language.languageData.qPanel.answerPanel),o.default.createElement("span",{className:"btn item"},o.default.createElement("button",{className:"size-btn",onClick:function(){t({action:"changeSizeState",data:{}})}}),o.default.createElement("button",{className:"close-btn "+(d.default.hasRole.rolePatrol?" hide":""),onClick:function(){t({action:"close",data:{}})}})))};t.default=u},HpRW:function(e,t,a){"use strict";var n=a("kM2E"),i=a("lOnJ"),o=a("+ZMJ"),r=a("NWt+");e.exports=function(e){n(n.S,e,{from:function(e){var t,a,n,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(a=[],t?(n=0,s=o(l,arguments[2],2),r(e,!1,function(e){a.push(s(e,n++))})):r(e,!1,a.push,a),new this(a))}})}},JfkP:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),o=n(i),r=a("mvHQ"),s=n(r),l=a("W3Iv"),d=n(l),u=a("BO1k"),c=n(u),h=a("d7EF"),f=n(h),m=a("Zx67"),g=n(m),p=a("Zrlr"),v=n(p),b=a("wxAW"),y=n(b),k=a("zwoO"),S=n(k),w=a("Pf15"),T=n(w),C=a("woOf"),D=n(C),E=a("ifoU"),I=n(E),P=a("GiK3"),A=n(P),R=a("EXAz"),B=n(R),_=a("yE5a"),x=n(_),M=a("T+56"),N=n(M),W=a("YRCL"),O=n(W);a("QqT5");var z=a("HUPQ"),H=n(z),F=a("m/zC"),U=n(F),j=a("s3NG"),K=n(j),V=a("fC09"),q=n(V),Q=a("hxXK"),Y=n(Q),Z=a("Ha7l"),G=n(Z),J=a("e+zB"),X=n(J),$=a("VSuD"),ee=n($),te={on:N.default.CoreController.addEventListener,off:N.default.CoreController.removeBackupListerner,emit:N.default.CoreController.dispatchEvent},ae={detail:"DETAIL",option:"OPTION",statistics:"STATISTICS",current:"CURRENT"},ne=[ee.default.EVENTTYPE.RoomEvent.roomPubmsg,ee.default.EVENTTYPE.RoomEvent.roomDelmsg,"receive-msglist-question","receive-msglist-publishResult","change-minimizedDragAndDropArry","receiveWhiteboardSDKAction"],ie=["UNCOMMIT","COMMITTED"],oe=new I.default([[ie[0],ae.option],[ie[1],ae.current]]),re=["RUNNING","FINISHED"],se=new I.default([[re[0],ae.option],[re[1],ae.statistics]]),le=["NORMAL","MINIMIZED"],de={hasChose:!1},ue=new Array(4).fill(void 0).map(function(e){return(0,D.default)({},de)}),ce=function(e){function t(){(0,v.default)(this,t);var e=(0,S.default)(this,(t.__proto__||(0,g.default)(t)).call(this));return e.owner=x.default.getTkRoom().getMySelf(),e.role=e.owner.role,e.markID=(new Date).getTime()+"_"+Math.random(),e.historyOptions=[],e.quesID=void 0,e.rightOptions=[],e.state={show:!1,commitState:ie[0],questionState:re[0],sizeState:le[0],page:{index:ae.option,data:null},result:new Array(ue.length).fill(0),options:ue,resizeInfo:{width:0,height:0},rightOptions:[],detailPageInfo:{current:1,total:1},detailData:[],pubRight:!1,scale:void 0},e}return(0,T.default)(t,e),(0,y.default)(t,[{key:"reset",value:function(){this.historyOptions=[],this.setState({rightOptions:[],commitState:"UNCOMMIT",detailData:[],detailPageInfo:{current:1,total:1}})}},{key:"componentDidMount",value:function(){var e=this;ne.forEach(function(t,a){return te.on(t,e.handleEvent.bind(e),e.markID)})}},{key:"componentWillUnmount",value:function(){te.off(this.markID)}},{key:"componentDidUpdate",value:function(e,t){this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=H.default.windowInnerWidth/ee.default.STANDARDSIZE,n=t.offsetWidth/a,i=t.offsetHeight/a;this.state.resizeInfo&&(Math.abs(this.state.resizeInfo.width-n)>.04||Math.abs(this.state.resizeInfo.height-i)>.04)&&(this.state.resizeInfo={width:n,height:i},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:.5,percentTop:0,isDrag:!1},!0)}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=this,a=e.data,n=a.cmd;switch(a.action){case"viewStateUpdate":for(var i in n.viewState)switch(i){case"scale":var o=Math.abs(n.viewState[i]-16/9),r=Math.abs(n.viewState[i]-4/3);o>.1&&r<=.1?t.setState({scale:0}):o<=.1&&r>.1?t.setState({scale:1}):t.setState({scale:2})}}}},{key:"dispose",value:function(e){var t=e.action,a=e.data,n=e.extra;if(null===t||null===a)return L.Logger.error("Incomplete parameter");this[t]&&"function"==typeof this[t]&&this[t]({action:t,data:a,extra:n})}},{key:"turn",value:function(e){var t=e.data,a=e.extra,n=e.extra.page;if(null===t||null===a||void 0===n)return L.Logger.error("Error parameter");n.index!==ae.current&&this.setState({page:n})}},{key:"handleEvent",value:function(e){var t=e.type,a=e.message;t=/-/.test(t)&&t.replace(/\-/g,"")||t,this.dispose({action:t,data:a})}},{key:"changeQuestionState",value:function(e){var t=e.data,a=this.state.questionState,n=re.indexOf(a),i=se.get(re.length-1===n?re[0]:re[n+1]),o=i===ae.current?this.state.page:{index:i,data:t};this.setState({questionState:re[re.length-1===n?0:n+1],page:o})}},{key:"changeCommitState",value:function(e){var t=e.data,a=this.state.commitState,n=ie.indexOf(a),i=oe.get(ie.length-1===n?ie[0]:ie[n+1]),o=i===ae.current?this.state.page:{index:i,data:t};("UNCOMMIT"!==a||this.state.options.some(function(e){return!0===e.hasChose}))&&(this["answerWill"+("UNCOMMIT"===a?"Commit":"Modify")](),this.setState({commitState:ie[ie.length-1===n?0:n+1],page:o}))}},{key:"changeSizeState",value:function(e){var t=(e.data,this.state.sizeState),a=le.indexOf(t);this.setState({sizeState:le[le.length-1===a?0:a+1]}),"NORMAL"===this.state.sizeState?this._minimizedDragAndDrop():this._restore()}},{key:"_restore",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds),o=!0,r=!1,s=void 0;try{for(var l,u=(0,c.default)((0,d.default)(H.default.minimizedDragAndDropArry));!(o=(l=u.next()).done);o=!0){var h=l.value,m=(0,f.default)(h,2),g=m[0],p=m[1],v=!0,b=!1,y=void 0;try{for(var k,S=(0,c.default)((0,d.default)(p));!(v=(k=S.next()).done);v=!0){var w=k.value,T=(0,f.default)(w,2),C=T[0],D=T[1];C===t&&n&&i&&a.changePosition&&"function"==typeof a.changePosition&&(a.changePosition(t,{percentLeft:D.percentLeft,percentTop:D.percentTop,isDrag:!1},!1),H.default.minimizedDragAndDropArry.splice(g,1),N.default.CoreController.dispatchEvent({type:"change-minimizedDragAndDropArry"}))}}catch(e){b=!0,y=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw y}}}}catch(e){r=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw s}}}},{key:"changeminimizedDragAndDropArry",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds),o=!0,r=!1,s=void 0;try{for(var l,u=(0,c.default)((0,d.default)(H.default.minimizedDragAndDropArry));!(o=(l=u.next()).done);o=!0){var h=l.value,m=(0,f.default)(h,2),g=m[0],p=m[1],v=!0,b=!1,y=void 0;try{for(var k,S=(0,c.default)((0,d.default)(p));!(v=(k=S.next()).done);v=!0){var w=k.value,T=(0,f.default)(w,2),C=T[0];T[1],C===t&&n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:155*g,percentTop:1,isDrag:!1},!1)}}catch(e){b=!0,y=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw y}}}}catch(e){r=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw s}}}},{key:"_minimizedDragAndDrop",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=e.studentAnswerDrag,i=document.getElementById(t),o=document.querySelector(a.bounds),r=null,s=!1,l=!0,u=!1,h=void 0;try{for(var m,g=(0,c.default)((0,d.default)(H.default.minimizedDragAndDropArry));!(l=(m=g.next()).done);l=!0){var p=m.value,v=(0,f.default)(p,2),b=(v[0],v[1]);if(b.hasOwnProperty(t)){b[t].percentLeft=n.percentLeft,b[t].percentTop=n.percentTop,s=b.hasOwnProperty(t);break}}}catch(e){u=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(u)throw h}}if(!s){var y={};y[t]={},y[t].width="pad"===H.default.mobileDeviceType?105:89,y[t].percentLeft=n.percentLeft,y[t].percentTop=n.percentTop,H.default.minimizedDragAndDropArry.length>=1?(r=y[t].width/(o.clientWidth-y[t].width)*H.default.minimizedDragAndDropArry.length,i&&o&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:r,percentTop:1,isDrag:!1},!1)):i&&o&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:0,percentTop:1,isDrag:!1},!1),H.default.minimizedDragAndDropArry.push(y)}}},{key:"answerWillCommit",value:function(){var e=this.state.options,t={};this.historyOptions.length>0&&this.historyOptions.forEach(function(e,a){e.hasChose&&(t[""+a]=-1)}),e.forEach(function(e,a){e.hasChose&&!t[""+a]?t[""+a]=1:e.hasChose&&-1===t[""+a]&&delete t[""+a]}),O.default.answerCommit({options:e,actions:t,modify:this.historyOptions.length>0&&1||0,stuName:x.default.getTkRoom().getMySelf().nickname,quesID:this.quesID,isRight:this.equals(e,this.rightOptions)}),this.historyOptions=JSON.parse((0,s.default)(e))}},{key:"answerWillModify",value:function(){}},{key:"roompubmsg",value:function(e){var t=e.data;if(t.data){var a=t.data,n=a.action,i=a.state,o=a.quesID;switch(t.name){case"Question":switch(n){case"start":var r=i.options;this.reset(),this.quesID=o,this.rightOptions=r,"RUNNING"===i.questionState&&ee.default.hasRole.roleStudent&&this.setState({show:!0,questionState:"RUNNING",page:{index:ae.option,data:{}},options:new Array(r.length).fill(void 0).map(function(e){return(0,D.default)({},de)}),pubRight:!1});break;case"end":this.quesID=o,ee.default.hasRole.roleStudent&&this.setState({show:!0})}break;case"PublishResult":var s=t.data,l=s.result,d=s.resultNum,u=s.ansTime,c=s.rightOptions,h=s.hasPub;ee.default.hasRole.roleStudent&&this.setState({questionState:"FINISHED",page:{index:ae.statistics,data:{}},show:!0,result:l,resultNum:d,ansTime:u,rightOptions:c,pubRight:h})}}}},{key:"roomdelmsg",value:function(e){switch(e.data.name){case"Question":case"ClassBegin":ee.default.hasRole.roleStudent&&this.setState({show:!1,sizeState:"NORMAL"}),this._spliceArry()}}},{key:"receivemsglistpublishResult",value:function(e){var t=e.data.data;this.state.show&&this.roompubmsg({data:t})}},{key:"receivemsglistquestion",value:function(e){var t=e.data.data;this.roompubmsg({data:t})}},{key:"equals",value:function(e,t){if(!e||!t)return 0;if(e.length!=t.length)return 0;for(var a=0,n=e.length;a<n;a++)if(e[a]instanceof Array&&t[a]instanceof Array){if(!this.equals(e[a],t[a]))return 0}else if("object"===(0,o.default)(e[a])&&"object"===(0,o.default)(t[a])){if((0,s.default)(e[a])!==(0,s.default)(t[a]))return 0}else if(e[a]!=t[a])return 0;return 1}},{key:"changeOptionLength",value:function(e){var t=e.data.num,a=this.state.options;t>0&&a.push((0,D.default)({},de))||a.pop(),this.setState({options:a})}},{key:"optionClick",value:function(e){var t=e.data.index;if("UNCOMMIT"===this.state.commitState){var a=this.state.options;a[t].hasChose=!a[t].hasChose,this.setState({options:a})}}},{key:"changeDetail",value:function(e){var t=(e.action,e.data);1===this.state.detailPageInfo.current&&-1===t.action||this.state.detailPageInfo.current===this.state.detailPageInfo.total&&1===t.action||(-1===t.action?this.getDetailData(this.state.detailPageInfo.current-1):1===t.action&&this.getDetailData(this.state.detailPageInfo.current+1))}},{key:"changeDetailOrStatistics",value:function(){var e=this.state.page;this.getDetailData(1),this.setState({page:{index:e.index===ae.statistics?ae.detail:ae.statistics}})}},{key:"getDetailData",value:function(e){var t=this;U.default.getSimplifyAnswer({id:this.quesID,page:e},{doneCallback:function(a){0===a.result&&t.setState({detailData:a.data,detailPageInfo:{total:a.pageinfo&&Math.ceil(a.pageinfo.count/20)||1,current:e}})}})}},{key:"close",value:function(){this.setState({show:!1}),this._spliceArry()}},{key:"_spliceArry",value:function(){var e=this.props.id,t=!0,a=!1,n=void 0;try{for(var i,o=(0,c.default)((0,d.default)(H.default.minimizedDragAndDropArry));!(t=(i=o.next()).done);t=!0){var r=i.value,s=(0,f.default)(r,2),l=s[0],u=s[1],h=!0,m=!1,g=void 0;try{for(var p,v=(0,c.default)((0,d.default)(u));!(h=(p=v.next()).done);h=!0){var b=p.value,y=(0,f.default)(b,2),k=y[0];y[1],k===e&&H.default.minimizedDragAndDropArry.splice(l,1)}}catch(e){m=!0,g=e}finally{try{!h&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.questionState,n=e.sizeState,i=e.commitState,o=e.resizeInfo,r=(0,D.default)(this.state,{role:this.role,owner:this.owner}),s=this.props,l=s.id,d=s.studentAnswerDrag,u=s.draggableData,c={position:"absolute",zIndex:130,display:t?"":"none",left:0},h=Object.customAssign({id:l,size:o,percentPosition:{percentLeft:d.percentLeft,percentTop:d.percentTop}},u),f=ee.default.hasRoomtype.oneToOne||2!==this.state.scale?" ":" change-size";return A.default.createElement(B.default,h,A.default.createElement("div",{id:l,className:"question-panel student "+a.toLowerCase()+" "+n.toLowerCase()+" "+i.toLowerCase()+f,style:c,onClick:"minimized"===n.toLowerCase()?this.changeSizeState.bind(this):void 0},A.default.createElement(G.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:ae}),A.default.createElement("div",{className:"body"},this.state.page.index===ae.option?A.default.createElement(K.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:ae}):void 0,this.state.page.index===ae.detail?A.default.createElement(q.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:ae}):void 0,this.state.page.index===ae.statistics?A.default.createElement(X.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:ae}):void 0),A.default.createElement(Y.default,{parentState:r,dispose:this.dispose.bind(this),pageDict:ae})))}}]),t}(A.default.Component);t.default=ce},KmDb:function(e,t,a){e.exports={default:a("XxZZ"),__esModule:!0}},KyAL:function(e,t,a){function n(e){return a(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./i18_chinese.js":"ppOE","./i18_complex.js":"2vo4","./i18_english.js":"yZ13"};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id="KyAL"},LIJb:function(e,t,a){var n=a("EqjI");e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"NWt+":function(e,t,a){var n=a("+ZMJ"),i=a("msXi"),o=a("Mhyx"),r=a("77Pl"),s=a("QRG4"),l=a("3fs2"),d={},u={},t=e.exports=function(e,t,a,c,h){var f,m,g,p,v=h?function(){return e}:l(e),b=n(a,c,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(f=s(e.length);f>y;y++)if((p=t?b(r(m=e[y])[0],m[1]):b(e[y]))===d||p===u)return p}else for(g=v.call(e);!(m=g.next()).done;)if((p=i(g,b,m.value,t))===d||p===u)return p};t.BREAK=d,t.RETURN=u},NZEr:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("BO1k"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),d=n(l),u=a("wxAW"),c=n(u),h=a("zwoO"),f=n(h),m=a("Pf15"),g=n(m),p=a("GiK3"),v=n(p),b=a("HUPQ"),y=n(b),k=a("VSuD"),S=n(k),w=a("yE5a"),T=n(w),C=a("YRCL"),D=n(C),E=a("ZZXC"),I=n(E),P=a("adC7"),A=(n(P),a("m/zC")),R=(n(A),a("T+56")),B=n(R),_=a("Sa83"),x=(n(_),a("DrPG")),M=(n(x),a("EXAz")),N=(n(M),function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={isShow:!1,qrCodeBoxIsShow:!1,disabledSharing:!1,toolsShow:{destTopShare:!1,answer:!1,turnplate:!1,qrCode:!1,timer:!1,responder:!1,moreBlackboard:!1},holdData:{answer:{name:y.default.language.languageData.answers.headerTopLeft.text,bgName:"answerBtn",click:a.answerAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"answer"},turnplate:{name:y.default.language.languageData.dial.turntable.text,bgName:"turnplateBtn",click:a.turntableAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"turnplate"},timer:{name:y.default.language.languageData.timers.timerSetInterval.text,bgName:"timerBtn",click:a.timerAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"timer"},responder:{name:y.default.language.languageData.responder.responder.text,bgName:"responderBtn",click:a.responderAssemblyShowHandel.bind(a),isDisabled:!1,isShow:!0,id:"responder"},blackboard:{name:y.default.language.languageData.header.tool.blackBoard.title.open,bgName:"blackboardBtn",click:a.handleBlackBoardClick.bind(a),isDisabled:!1,isShow:!0,id:"blackboard"}},holdPagingIndex:0},a.maxPagingIndex=0,a.minPagingIndex=0,a.maxPagingNum=6,a.holdBoxWidth=0,a.holdBoxHeight=0,a.contentWidth=0,a.contentHeight=0,a.holdAllProportion=1.42,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("togo_holdArr",e.handleTogoHoldAll.bind(e),this.listernerBackupid),B.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("updateAppPermissions_isCapture",e.handlerIsCaptureUpdate.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("updateAppPermissions_isQrCode",e.handlerIsQrCode.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("updateAppPermissions_Asharing",e.Asharing.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("colse-holdAll-item",this.handleCloseItem.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-NewBlackBoard",e.handlerReceive_msglist_NewBlackBoard.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-dial",e.handlerMsglistDialShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-question",e.handlerMsglistQuestion.bind(e),e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.isShow!==this.state.isShow&&this.state.isShow}},{key:"receiveActionCommand",value:function(e){var t=e.message,a=t.action,n=t.cmd;if("toolbox"===a){var i=document.querySelector("#tk_app");this.holdBoxHeight=i.offsetHeight*("phone"===y.default.mobileDeviceType?.85:.6),this.holdBoxWidth=this.holdBoxHeight*this.holdAllProportion,this.contentWidth=.85*this.holdBoxWidth,this.contentHeight=.7*this.holdBoxHeight;var o=document.querySelector("#"+this.props.id);o.style.width=this.holdBoxWidth+"px",o.style.height=this.holdBoxHeight+"px",this.setState({isShow:n.isShow})}}},{key:"handlerIsCaptureUpdate",value:function(){this.handlerInitAppPermissions()}},{key:"handlerIsQrCode",value:function(){this.handlerInitAppPermissions()}},{key:"Asharing",value:function(){this.handlerInitAppPermissions()}},{key:"handlerInitAppPermissions",value:function(){var e=this.state.holdData;e.turnplate.isShow=S.default.joinRoomInfo.toolBox.turnplate&&(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant),e.answer.isShow=S.default.joinRoomInfo.toolBox.answer&&(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant),e.responder.isShow=S.default.joinRoomInfo.toolBox.responder&&!S.default.hasRoomtype.oneToOne&&!y.default.roomChange&&(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant),e.blackboard.isShow=S.default.joinRoomInfo.toolBox.moreBlackboard&&(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant),e.timer.isShow=S.default.joinRoomInfo.toolBox.timer&&(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant),this.setState({holdData:e})}},{key:"handlerReceive_msglist_NewBlackBoard",value:function(e){this.handlerRoomPubmsg(e),"BlackBoard_new"===e.message.name&&this.isDisabledHoldItem("blackboard",!0)}},{key:"handlerMsglistTimerShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=(0,o.default)(e.message.timerShowArr);!(t=(i=r.next()).done);t=!0)i.value,this.isDisabledHoldItem("timer",!0)}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}},{key:"handlerMsglistDialShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=(0,o.default)(e.message.dialShowArr);!(t=(i=r.next()).done);t=!0)i.value,this.isDisabledHoldItem("turnplate",!0)}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}},{key:"handlerMsglistAnswerShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=(0,o.default)(e.message.answerShowArr);!(t=(i=r.next()).done);t=!0)i.value,this.isDisabledHoldItem("answer",!0)}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}},{key:"handlerMsglistQrCodeShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=(0,o.default)(e.message.answerShowArr);!(t=(i=r.next()).done);t=!0)i.value,this.isDisabledHoldItem("qrCode",!0)}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=(0,o.default)(e.message.qiangDaQiArr);!(t=(i=r.next()).done);t=!0)i.value,this.isDisabledHoldItem("responder",!0)}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}},{key:"handlerMsglistQuestion",value:function(e){this.isDisabledHoldItem("answer",!0)}},{key:"handlerRoomPubmsg",value:function(e){switch(e.message.name){case"BlackBoard_new":this.isDisabledHoldItem("blackboard",!0);break;case"answer":this.isDisabledHoldItem("answer",!0);break;case"dial":this.isDisabledHoldItem("turnplate",!0);break;case"timer":this.isDisabledHoldItem("timer",!0);break;case"qiangDaQi":this.isDisabledHoldItem("responder",!0);break;case"OnlyAudioRoom":this.isDisabledHoldItem("sharing",!0),this.isDisabledHoldItem("movieShare",!0)}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"BlackBoard_new":this.isDisabledHoldItem("blackboard",!1);break;case"answer":this.isDisabledHoldItem("answer",!1);break;case"dial":this.isDisabledHoldItem("turnplate",!1);break;case"timer":this.isDisabledHoldItem("timer",!1);break;case"qiangDaQi":this.isDisabledHoldItem("responder",!1);break;case"OnlyAudioRoom":this.isDisabledHoldItem("sharing",!1),this.isDisabledHoldItem("movieShare",!1);break;case"ClassBegin":var t=this.state.holdData;for(var a in t)t[a].isDisabled=!1;this.setState({holdData:t})}}},{key:"close",value:function(){var e=this;B.default.CoreController.dispatchEvent({type:"colose_holdArr"}),e.setState({isShow:!1});var t={toolbox:!1};T.default.getTkRoom().sendActionCommand("viewStateUpdate",t)}},{key:"answerAssemblyShowHandel",value:function(e){D.default.sendQuestion(!1,{action:"open"}),B.default.CoreController.dispatchEvent({type:"handleAnswerShow",className:"answer-implement-bg",isShow:!0}),this.isDisabledHoldItem("answer",!0),this.close()}},{key:"turntableAssemblyShowHandel",value:function(){var e={rotationAngle:"rotate(0deg)",isShow:!0};D.default.sendSignallingDialToStudent(e,!1),this.isDisabledHoldItem("turnplate",!0),this.close()}},{key:"timerAssemblyShowHandel",value:function(){var e={isStatus:!1,sutdentTimerArry:[0,5,0,0],isShow:!0,isRestart:!1};D.default.sendSignallingTimerToStudent(e),B.default.CoreController.dispatchEvent({type:"handleTurnShow",className:"timer-implement-bg",isShow:!0}),this.isDisabledHoldItem("timer",!0),this.close()}},{key:"handleQrCodeBoxClick",value:function(){this.setState({qrCodeBoxIsShow:!0}),B.default.CoreController.dispatchEvent({type:"handleQrCodeShow",isShow:!0}),this.isDisabledHoldItem("qrCode",!0),this.close()}},{key:"responderAssemblyShowHandel",value:function(){var e=this,t={isShow:!0,begin:!1,userAdmin:""};D.default.sendSignallingQiangDaQi(!1,t),B.default.CoreController.dispatchEvent({type:"responderShow",className:"responder-implement-bg",isShow:!0}),e.isDisabledHoldItem("responder",!0),e.close()}},{key:"_screenSharing",value:function(){B.default.CoreController.dispatchEvent({type:"programmShare"}),this.setState({disabledSharing:!0}),this.isDisabledHoldItem("sharing",!0),this.close()}},{key:"handleBlackBoardClick",value:function(){var e={blackBoardState:"_prepareing",currentTapKey:"blackBoardCommon",currentTapPage:1};D.default.sendSignallingFromNewBlackBoard(e,!1),this.isDisabledHoldItem("blackboard",!0),this.close()}},{key:"handleTogoHoldAll",value:function(e){this.setState({isShow:e.isShow})}},{key:"handleMovieShareClick",value:function(){var e=this;y.default.isClient&&!y.default.isMacClient&&(T.default.getTkRoom().getOpenLocalFileName({caption:"Media File Selector",filter:{"Media File":"*.mp4;*.3gp;*.avi;*.flv;*.mkv;*.mov;*.mpg;*.rmvb;*.vob;*.wmv"}},function(e){"Complete"===e.action&&I.default.unpublishAllFileStream(function(t,a){switch(t){case-1:case 1:var n=e.filename;B.default.CoreController.dispatchEvent({type:"localFileStreamCreateFromClient",message:{path:n}})}})}),e.close())}},{key:"getOpenHoldItemArr",value:function(){var e=this,t=e.state.holdData,a=[];for(var n in t)t[n].isShow&&a.push(t[n]);return a}},{key:"createHoldItemElement",value:function(){var e=this,t=e.getOpenHoldItemArr(),a=0,n=[],i=-1,o=[];a=t.length%e.maxPagingNum==0?t.length/8:parseInt(t.length/e.maxPagingNum)+1;for(var r=0;r<a;r++)n.push([]);t.forEach(function(t,a,o){a%e.maxPagingNum==0&&(i+=1),n[i].push(v.default.createElement("li",{key:a,className:"holdAllitem "+t.bgName},v.default.createElement("button",{className:t.bgName+" "+(t.isDisabled?"disabled":""),onClick:t.click}),v.default.createElement("span",null,t.name)))});for(var s=0;s<n.length;s++)o.push(v.default.createElement("ul",{key:s,className:"holdAllList",style:{width:e.contentWidth+"px"}},n[s]));var l=v.default.createElement("div",{className:"holdAllListBox",style:{width:o.length*e.contentWidth+"px",left:-e.state.holdPagingIndex*e.contentWidth+"px"}},o);return this.maxPagingIndex=a-1,l}},{key:"createLimitBtns",value:function(){for(var e=this,t=[],a=0;a<=e.maxPagingIndex;a++)t.push(v.default.createElement("button",{key:a,className:"limitBtn "+(a===e.state.holdPagingIndex?"active":""),onClick:e.jumpPaging.bind(e,a)}));return t}},{key:"jumpPaging",value:function(e){var t=this;t.state.holdPagingIndex!==e&&t.setState({holdPagingIndex:e})}},{key:"preventPaging",value:function(){var e=this;0!==e.state.holdPagingIndex&&e.setState({holdPagingIndex:e.state.holdPagingIndex-1})}},{key:"nextPaging",value:function(){var e=this;e.state.holdPagingIndex!==e.maxPagingIndex&&e.setState({holdPagingIndex:e.state.holdPagingIndex+1})}},{key:"handleCloseItem",value:function(e){this.isDisabledHoldItem(e.message.type,!1)}},{key:"isDisabledHoldItem",value:function(e,t){var a=this,n=a.state.holdData;n[e].isDisabled=t,a.setState({holdData:n})}},{key:"render",value:function(){var e=this,t=(e.state.toolsShow,this.props),a=t.id;return t.holdAllBoxDrag,t.draggableData,v.default.createElement("div",{id:a,className:"holdAllBox",style:{display:e.state.isShow?"block":"none",width:e.holdBoxWidth+"px",height:e.holdBoxHeight+"px"}},v.default.createElement("h3",{className:"holdAllTit"},y.default.language.languageData.toolCase.toolBox.text),v.default.createElement("button",{className:"closeHoldAll",onClick:e.close.bind(this)}),v.default.createElement("div",{className:"holdItemBox",ref:"holdItemBox",style:{width:e.contentWidth+"px"}},e.createHoldItemElement()),e.maxPagingIndex>0?v.default.createElement("div",{className:"limitBox"},e.createLimitBtns()):void 0)}}]),t}(v.default.Component));t.default=N},Ovlj:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=n(i),r=a("pFYg"),s=n(r),l=a("Zrlr"),d=n(l),u=a("wxAW"),c=n(u),h=a("HUPQ"),f=n(h),m=a("yE5a"),g=n(m),p=a("Sa83"),v=n(p),b=a("VSuD"),y=(n(b),function(){function e(){(0,d.default)(this,e)}return(0,c.default)(e,[{key:"pubMsg",value:function(e,t,a,n,i,r,l,d){if(v.default.handler.getAppPermissions("pubMsg")&&f.default.appConnected){a=a||"__all";var u=!i;n&&"object"===(void 0===n?"undefined":(0,s.default)(n))&&(n=(0,o.default)(n));var c={msgName:e,msgId:t,toId:a,data:n,save:u,expiresabs:r,associatedMsgID:l,associatedUserID:d,expires:void 0,type:void 0,write2DB:void 0,actions:void 0,do_not_replace:void 0};g.default.getTkRoom().pubMsg(c)}}},{key:"delMsg",value:function(e,t,a,n){if(v.default.handler.getAppPermissions("delMsg")&&f.default.appConnected){a=a||"__all",n&&"object"===(void 0===n?"undefined":(0,s.default)(n))&&(n=(0,o.default)(n));var i={msgName:e,msgId:t,toId:a,data:n};g.default.getTkRoom().delMsg(i)}}},{key:"setProperty",value:function(e,t,a){v.default.handler.getAppPermissions("setProperty")&&f.default.appConnected&&(t=t||"__all",g.default.getTkRoom().changeUserProperty(e,t,a))}},{key:"setParticipantPropertyToAll",value:function(e,t){v.default.handler.getAppPermissions("setParticipantPropertyToAll")&&this.setProperty(e,"__all",t)}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,n,i,o,r,s,l){if(v.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,a,n,i):(s||"VideoWhiteboard"===t||"ClassBegin"===t||"SharpsChange"===t||"WBPageCount"===t||"ShowPage"===t||"whiteboardMarkTool"===t||(s="ClassBegin"),d.pubMsg(t,a,n,i,o,r,s,l))}}}]),e}());t.default=y},PRvV:function(e,t){},PqAP:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a("GiK3"),o=n(i),r=a("O27J"),s=n(r),l=a("Sa83"),d=n(l),u=a("rkp3"),c=n(u);d.default.handler.loadSystemRequiredInfo(),s.default.render(o.default.createElement(c.default,null),document.getElementById("tk_app"))},QqT5:function(e,t){},RkqK:function(e,t,a){var n=a("kM2E"),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var a,n,o=0,r=0,s=arguments.length,l=0;r<s;)a=i(arguments[r++]),l<a?(n=l/a,o=o*n*n+1,l=a):a>0?(n=a/l,o+=n*n):o+=a;return l===1/0?1/0:l*Math.sqrt(o)}})},Sa83:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("T+56"),o=n(i),r=a("GrKX"),s=n(r),l=a("VSuD"),d=n(l),u=a("HUPQ"),c=n(u),h=a("DrPG"),f=n(h),m=a("0jvK"),g=n(m),p=a("ZZXC"),v=n(p),b=a("yE5a"),y=n(b),k=TK.EventDispatcher({});o.default.CoreController=k,k.handler={},k.handler.loadSystemRequiredInfo=function(){if(TK.tkLogPrintConfig)if(d.default.DEV){var e={debug:!0},t={development:!0,logLevel:d.default.LOGLEVEL.DEBUG},a={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,a)}else{var n={debug:!1},i={development:!1,logLevel:d.default.LOGLEVEL.INFO},o={webrtcLogDebug:!1};TK.tkLogPrintConfig(n,i,o)}v.default.getAppLanguageInfo(function(e){c.default.language=e}),y.default.setTkRoom(TK.MobileNativeRoom()),s.default.registerEventToRoom();var r=new window.TKWhiteBoardManager(void 0,void 0,!0);y.default.setTkWhiteBoardManager(r),y.default.getTkRoom().registerRoomWhiteBoardDelegate(r),"videoDrawWhiteboardComponent"!==c.default.clientComponentName&&"localFileVideoDrawWhiteboardComponent"!==c.default.clientComponentName||y.default.getTkRoom().changeExtendSendInterfaceName("_videoWhiteboardPage")},k.handler.checkRoom=function(e){var t={type:d.default.EVENTTYPE.RoomEvent.roomCheckroom,message:{checkMeetingAterCallback:e}};o.default.CoreController.dispatchEvent(t)},k.handler.setAppPermissions=function(e,t){g.default.setAppPermissions(e,t)},k.handler.getAppPermissions=function(e){return g.default.getAppPermissions(e)},k.handler.initAppPermissions=function(e){g.default.initAppPermissions(e)},k.handler.addEventListenerOnCoreController=function(){document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},$(document).off("selectstart"),$(document).bind("selectstart",function(){return!0}),$(window).off("resize"),$(window).resize(function(){document.getElementById("tk_app")?(c.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,c.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(c.default.windowInnerWidth=window.innerWidth,c.default.windowInnerHeight=window.innerHeight);var e=c.default.windowInnerWidth/d.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var a=f.default.isArray(t)?t[0]:t;a&&a.style&&(a.style.fontSize=e+"px")}o.default.Window.dispatchEvent({type:d.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}})}),$(window).resize();var e=function(e){o.default.Window.dispatchEvent({type:d.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};f.default.tool.removeEvent(window,"message",e),f.default.tool.addEvent(window,"message",e,!1)},k.handler.addEventListenerOnCoreController(),t.default=k},"T+56":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.Document=TK.EventDispatcher({}),n.Window=TK.EventDispatcher({}),n.Element=TK.EventDispatcher({}),n.Room=TK.EventDispatcher({}),n.Stream=TK.EventDispatcher({}),n.Role=TK.EventDispatcher({}),t.default=n},TmV0:function(e,t,a){a("fZOM"),e.exports=a("FeBl").Object.values},UvrK:function(e,t,a){var n=a("kM2E");n(n.P+n.R,"Map",{toJSON:a("m9gC")("Map")})},VSuD:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HSQo"),o=n(i),r=a("DrPG"),s=n(r),l=a("T+56"),d=n(l),u=a("HUPQ"),c=n(u),h=a("yE5a"),f=(n(h),{}),m="v2.1.7",g="2018031000",p=!1;try{m="3.0.1",g=2018073010,p=!1}catch(a){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}f.VERSIONS=m,f.VERSIONSTIME=g,f.newpptVersions=2017091401,f.remoteNewpptUpdateTime=2018032113,f.debugFromAddress=!!s.default.getUrlParams("debug")&&""!=s.default.getUrlParams("debug"),f.DEV=p||f.debugFromAddress,f.role={},(0,o.default)(f.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var v={};(0,o.default)(v,{roomConnected:{value:"room-connected",writable:!1,enumerable:!0},roomParticipantJoin:{value:"room-participant_join",writable:!1,enumerable:!0},roomParticipantLeave:{value:"room-participant_leave",writable:!1,enumerable:!0},roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomUserpropertyChanged:{value:"room-userproperty-changed",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomPlaybackDuration:{value:"room-playback-duration",writable:!1,enumerable:!0},roomPlaybackPlaybackEnd:{value:"room-playback-playbackEnd",writable:!1,enumerable:!0},roomPlaybackPlaybackUpdatetime:{value:"room-playback-playback_updatetime",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomPlaybackClearAllFromPlaybackController:{value:"room-playback-clear_all-from-playback-controller",writable:!1,enumerable:!0},roomServeraddressUpdate:{value:"room-serveraddress-update",writable:!1,enumerable:!0},roomUpdateFakeJsSdkInitInfo:{value:"room-updateFakeJsSdkInitInfo",writable:!1,enumerable:!0},roomReceiveActionCommand:{value:"room-receiveActionCommand",writable:!1,enumerable:!0},roomCheckroom:{value:"room-checkroom",writable:!1,enumerable:!0},roomCheckroomPlayback:{value:"room-checkroom-playback",writable:!1,enumerable:!0},roomAudiovideostateSwitched:{value:"room-audiovideostate-switched",writable:!1,enumerable:!0},roomModeChanged:{value:"room-mode-changed",writable:!1,enumerable:!0}});var b={};(0,o.default)(b,{onResize:{value:"onResize",writable:!1}}),(0,o.default)(b,{onMessage:{value:"onMessage",writable:!1}});var y={};(0,o.default)(y,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),f.EVENTTYPE={},(0,o.default)(f.EVENTTYPE,{RoomEvent:{value:v,writable:!1},WindowEvent:{value:b,writable:!1},DocumentEvent:{value:y,writable:!1}}),f.ROOMTYPE={},(0,o.default)(f.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),f.PUBLISHSTATE={},(0,o.default)(f.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),f.STANDARDSIZE=15.8,f.companyidToCompanyName={10035:{value:"icoachu",writable:!1,enumerable:!0},10036:{value:"stupidBird",writable:!1,enumerable:!0},10059:{value:"17zuoye",writable:!1,enumerable:!0}},f.LOGLEVEL={},(0,o.default)(f.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),f.SERVICEINFO={},f.bindServiceinfoToTkConstant=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.protocol,a=e.web_host,n=e.web_port,i=e.isInit,o=void 0===i||i,r={webProtocol:t||f.SERVICEINFO.webProtocol,webHostname:a||f.SERVICEINFO.webHostname,webPort:n||f.SERVICEINFO.webPort};Object.customAssign(r,{webProtocolAndHostname:r.webProtocol+"://"+r.webHostname,webAddress:r.webProtocol+"://"+r.webHostname+":"+r.webPort}),o&&(r.joinUrl=s.default.encrypt(window.location.href)),Object.customAssign(f.SERVICEINFO,r),o&&console.info("encrypt_tk_info:\n",f.SERVICEINFO.joinUrl),d.default&&d.default.CoreController&&d.default.CoreController.dispatchEvent&&d.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:f.SERVICEINFO}}),c.default.handlerRoomServeraddressUpdateIsInit=!1},f.joinRoomInfo={},f.bindRoomInfoToTkConstant=function(e){if(!e)return void L.Logger.error("joinRoomInfo is not exist!");L.Logger.debug("joinRoomInfo:",e),f.joinRoomInfo=e,d.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:f.joinRoomInfo}})},f.hasRole={},f.bindParticipantHasRoleToTkConstant=function(){if(!f.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,o.default)(f.hasRole,{roleChairman:{value:f.joinRoomInfo&&f.joinRoomInfo.roomrole===f.role.roleChairman,writable:!1},roleTeachingAssistant:{value:f.joinRoomInfo&&f.joinRoomInfo.roomrole===f.role.roleTeachingAssistant,writable:!1},roleStudent:{value:f.joinRoomInfo&&f.joinRoomInfo.roomrole===f.role.roleStudent,writable:!1},roleAudit:{value:f.joinRoomInfo&&f.joinRoomInfo.roomrole===f.role.roleAudit,writable:!1},rolePatrol:{value:f.joinRoomInfo&&f.joinRoomInfo.roomrole===f.role.rolePatrol,writable:!1},rolePlayback:{value:f.joinRoomInfo&&f.joinRoomInfo.roomrole===f.role.rolePlayback,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:f.hasRole}})},f.hasRoomtype={},f.bindParticipantHasRoomtypeToTkConstant=function(){if(!f.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,o.default)(f.hasRoomtype,{oneToOne:{value:f.joinRoomInfo&&f.joinRoomInfo.roomtype===f.ROOMTYPE.oneToOne,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:f.hasRoomtype}})};var k=function(){switch(f.skin){case"skin_beyond_default":if(document.getElementById("skinContainer")&&!/newTemplate.css/.test(document.getElementById("skinContainer").href))try{document.head.removeChild(document.getElementById("skinContainer"))}catch(e){L.Logger.error(e)}else document.getElementById("skinContainer")||$(document.head).append('<link id="skinContainer" rel="stylesheet" href="./cssTemplate/beyondDefault.css"/>')}};f.template="template_beyond",f.updateTemplate=function(e){var t=f.template;$(document.body).removeClass(t+" "+f.template+" "+(c.default.isClient?"clientApp":"webpageApp")).addClass(f.template+" "+(c.default.isClient?"clientApp":"webpageApp")).attr("tkcustomdatatemplate",f.template),d.default.CoreController.dispatchEvent({type:"updateTemplate",message:{template:f.template}})};var S=s.default.getUrlParams("skinId");S&&(f.skin="skin_"+S),f.skin=f.skin||"skin_beyond_default",f.updateSkin=function(e){var t=f.skin;f.skin=e,k(),$(document.body).removeClass(t+" "+f.skin+" ").addClass(f.skin+" ").attr("tkcustomdataskin",f.skin),d.default.CoreController.dispatchEvent({type:"updateSkin",message:{skin:f.skin}})},window.TkConstant=f,t.default=f},W3Iv:function(e,t,a){e.exports={default:a("wEtr"),__esModule:!0}},WN3Y:function(e,t){},WcKi:function(e,t){},Wi6Q:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("fZjL"),o=n(i),r=a("BO1k"),s=n(r),l=a("Zrlr"),d=n(l),u=a("wxAW"),c=n(u),h=a("VSuD"),f=n(h),m=a("yE5a"),g=n(m),p=a("0jvK"),v=n(p),b=a("T+56"),y=(n(b),a("HUPQ")),k=n(y),S=a("Sa83"),w=(n(S),function(){function e(t){(0,d.default)(this,e),this.role=t}return(0,c.default)(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||v.default.productionDefaultAppAppPermissions();if(f.default.joinRoomInfo&&void 0!=f.default.joinRoomInfo.roomrole)switch(f.default.joinRoomInfo.roomrole){case f.default.role.roleChairman:if(k.default.classBegin){var a=!0,n=!1,i=void 0;try{for(var r,l=(0,s.default)((0,o.default)(t));!(a=(r=l.next()).done);a=!0)t[r.value]=!0}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}Object.customAssign(t,{raisehand:!1,dialCircleClick:!1,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks,canDraw:g.default.getTkRoom().getMySelf().candraw,canDragCaptureImg:g.default.getTkRoom().getMySelf().candraw,canResizeCaptureImg:g.default.getTkRoom().getMySelf().candraw})}else Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:!0,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0});break;case f.default.role.roleTeachingAssistant:if(k.default.classBegin){var d=!0,u=!1,c=void 0;try{for(var h,m=(0,s.default)((0,o.default)(t));!(d=(h=m.next()).done);d=!0)t[h.value]=!0}catch(e){u=!0,c=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw c}}Object.customAssign(t,{endClassbeginRevertToStartupLayout:!1,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks,canDraw:g.default.getTkRoom().getMySelf().candraw,canDragCaptureImg:g.default.getTkRoom().getMySelf().candraw,canResizeCaptureImg:g.default.getTkRoom().getMySelf().candraw})}else Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:f.default.joinRoomInfo.isClassOverNotLeave,isShowCoursewareRemarks:f.default.joinRoomInfo.hasCoursewareRemarks,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0});break;case f.default.role.rolePatrol:k.default.classBegin?Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,getQuestionCount:!0,sendSignallingFromUpdateTime:!0}):Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:f.default.joinRoomInfo.isClassOverNotLeave,sendSignallingFromUpdateTime:!0});break;case f.default.role.roleStudent:k.default.classBegin?Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromRemoteControl:!0,answerCommit:!0,sendSignallingFromUpdateTime:!0,canDraw:g.default.getTkRoom().getMySelf().candraw,canDragCaptureImg:g.default.getTkRoom().getMySelf().candraw,canResizeCaptureImg:g.default.getTkRoom().getMySelf().candraw}):Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:f.default.joinRoomInfo.isClassOverNotLeave,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0});break;case f.default.role.rolePlayback:k.default.classBegin,Object.customAssign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1,sendSignallingFromRemoteControl:!0});break;case f.default.role.roleAudit:var p=!0,b=!1,y=void 0;try{for(var S,w=(0,s.default)((0,o.default)(t));!(p=(S=w.next()).done);p=!0)t[S.value]=!1}catch(e){b=!0,y=e}finally{try{!p&&w.return&&w.return()}finally{if(b)throw y}}Object.customAssign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),T=new w;T.addEventListenerToRoomHandler(),t.default=T},Xd32:function(e,t,a){a("+tPU"),a("zQR9"),e.exports=a("5PlU")},Xjd4:function(e,t,a){a("9Bbf")("Map")},XkXc:function(e,t){},XxZZ:function(e,t,a){a("RkqK"),e.exports=a("FeBl").Math.hypot},YRCL:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=n(i),r=a("pFYg"),s=n(r),l=a("Zx67"),d=n(l),u=a("Zrlr"),c=n(u),h=a("wxAW"),f=n(h),m=a("zwoO"),g=n(m),p=a("Pf15"),v=n(p),b=a("Ovlj"),y=n(b),k=a("yE5a"),S=n(k),w=a("DrPG"),T=(n(w),a("VSuD")),C=n(T),D=a("HUPQ"),E=n(D),I=a("Sa83"),P=n(I),A=function(e){function t(){return(0,c.default)(this,t),(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(P.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,a=e||"__all",n={};t.sendSignallingDataToParticipant(!1,"UpdateTime","UpdateTime",a,n,!0)}}},{key:"sendSignallingFromCaptureImg",value:function(e,t,a){if(P.default.handler.getAppPermissions("isSendSignallingFromCaptureImg")){var n=this;a=a||!1,n.sendSignallingDataToParticipant(a,"CaptureImg",e,"__all",t,!1)}}},{key:"sendSignallingFromCaptureImgDrag",value:function(e,t,a){P.default.handler.getAppPermissions("isSendSignallingFromCaptureImgDrag")&&this.sendSignallingDataToParticipant(!1,"CaptureImgDrag",t,"__allExceptSender",e,!1,void 0,a)}},{key:"sendSignallingFromCaptureImgResize",value:function(e,t,a){P.default.handler.getAppPermissions("isSendCaptureImgResize")&&this.sendSignallingDataToParticipant(!1,"CaptureImgResize",t,"__allExceptSender",e,!1,void 0,a)}},{key:"sendSignallingFromBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];P.default.handler.getAppPermissions("sendSignallingFromBlackBoard")&&this.sendSignallingDataToParticipant(t,"BlackBoard","BlackBoard","__all",e)}},{key:"sendSignallingTimerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!P.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"timer","timerMesg","__all",e)}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(P.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"BlackBoardDrag","BlackBoardDrag",t,e,!1,void 0,"BlackBoard_new")}}},{key:"sendSignallingDialToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];P.default.handler.getAppPermissions("sendSignallingDialToStudent")&&this.sendSignallingDataToParticipant(t,"dial","dialMesg","__all",e)}},{key:"sendSignallingAnswerToStudent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!P.default.handler.getAppPermissions("sendSignallingAnswerToStudent"))return!1;this.sendSignallingDataToParticipant(t,"answer","answerMesg","__all",e)}},{key:"sendSignallingDataStudentToTeacherAnswer",value:function(e,t){if(!P.default.handler.getAppPermissions("sendSignallingDataStudentToTeacherAnswer"))return!1;var a=this,n="submitAnswers_"+S.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"submitAnswers",n,"__all",t,void 0,void 0,"answerMesg")}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!P.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;this.sendSignallingDataToParticipant(e,"qiangDaQi","qiangDaQiMesg","__all",t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!P.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a=this,n="QiangDaZhe_"+S.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,"QiangDaZhe",n,"__all",t,void 0,void 0,"qiangDaQiMesg")}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(P.default.handler.getAppPermissions("sendSignallingFromDialDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"DialDrag","DialDrag",t,e,!1,void 0,"dialMesg")}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(P.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"ResponderDrag","ResponderDrag",t,e,!1,void 0,"qiangDaQiMesg")}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(P.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"TimerDrag","TimerDrag",t,e,!1,void 0,"timerMesg")}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(P.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a=this;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(!1,"AnswerDrag","AnswerDrag",t,e,!1,void 0,"answerMesg")}}},{key:"sendSignallingFromRemoteControl",value:function(e,t){if(P.default.handler.getAppPermissions("sendSignallingFromRemoteControl")){var a=e||"__all";this.sendSignallingDataToParticipant(!1,"RemoteControl","RemoteControl",a,t,!0)}}},{key:"sendSignallingFromMoreUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.sendSignallingDataToParticipant(t,"MoreUsers","MoreUsers","__all",e)}},{key:"sendSignallingFromNewBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];P.default.handler.getAppPermissions("sendSignallingFromBlackBoard")&&this.sendSignallingDataToParticipant(t,"BlackBoard_new","BlackBoard_new","__all",e)}},{key:"sendSignallingFromUserHasNewBlackBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,n="_"+e.id,i=e.id;a.sendSignallingDataToParticipant(t,"UserHasNewBlackBoard",n,"__all",e,!1,void 0,"BlackBoard_new",i)}},{key:"sendQuestion",value:function(e,t){if(P.default.handler.getAppPermissions("sendQuestion")){var a="Question_"+C.default.joinRoomInfo.serial;if("start"===t.action&&(t.quesID="ques_"+(new Date).getTime()),E.default.appConnected){t&&"object"===(void 0===t?"undefined":(0,s.default)(t))&&!Array.isArray(t)&&(t=(0,o.default)(t));var n={msgName:"Question",msgId:a,toID:"__all",data:t,save:!0,write2DB:!0};e?S.default.getTkRoom().delMsg({name:"Question",id:a,toID:"__all",data:t}):S.default.getTkRoom().pubMsg(n)}}}},{key:"publishResult",value:function(e,t){P.default.handler.getAppPermissions("publishResult")&&(t=t||!1,this.sendSignallingDataToParticipant(t,"PublishResult","PublishResult","__all",e))}},{key:"answerCommit",value:function(e){if(P.default.handler.getAppPermissions("answerCommit")){var t="Question_"+C.default.joinRoomInfo.serial,a=e,n=a.actions,i=a.modify;if(E.default.appConnected){e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&!Array.isArray(e)&&(e=(0,o.default)(e));var r={msgName:"AnswerCommit",msgId:t,toId:"__none",data:e,save:!1,associatedMsgID:"Question",type:"count",write2DB:!0,actions:n,modify:i};S.default.getTkRoom().pubMsg(r)}}}},{key:"getQuestionCount",value:function(e){if(P.default.handler.getAppPermissions("getQuestionCount")){var t="Question_"+C.default.joinRoomInfo.serial,a=S.default.getTkRoom().getMySelf().id;if(E.default.appConnected){e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&!Array.isArray(e)&&(e=(0,o.default)(e));var n={msgName:"GetQuestionCount",msgId:t,toId:a,data:e,save:!1,associatedMsgID:"Question",type:"getCount"};S.default.getTkRoom().pubMsg(n)}}}}]),t}(y.default),R=new A;t.default=R},Z5jD:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("7nRM"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),d=n(l),u=a("wxAW"),c=n(u),h=a("zwoO"),f=n(h),m=a("Pf15"),g=n(m),p=a("GiK3"),v=n(p),b=a("O27J"),y=(n(b),a("HUPQ")),k=n(y),S=a("VSuD"),w=n(S),T=a("DrPG"),C=n(T),D=a("T+56"),E=n(D),I=a("Sa83"),P=(n(I),a("yE5a")),A=n(P),R=a("YRCL"),B=n(R),_=a("EXAz"),x=n(_),M=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.props.id,a.state={timeDescArray:[0,5,0,0],triangleStyle:"visible",againBtnStyle:!1,startBtnStyle:!0,numContentBorder:!1,timerIsShow:!1,restarting:!1,startAndStop:!1,startAndStopImg:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1,resizeInfo:{width:0,height:0},playBackServerTime:0},a.servicerTimes=0,a.isSetDefaultPosition=!1,a.stop=null,a.startTime=0,a.endTime=0,a.timerBeginTsValue=0,a.speedOrBack=!1,a.initTimerValue=[],a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,e.handlerRoomPlaybackPlaybackEnd.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,e.handlerRoomPlaybackPlaybackUpdatetime.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,e.handlerRoomPlaybackDuration.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;E.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){if(t.timerIsShow!==this.state.timerIsShow&&this.state.timerIsShow){var a=this.props.id,n=document.getElementById(a);if(n){var i=k.default.windowInnerWidth/w.default.STANDARDSIZE;this.state.resizeInfo.width=n.offsetWidth/i,this.state.resizeInfo.height=n.offsetHeight/i,this.setState({resizeInfo:this.state.resizeInfo})}this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())}var r=(t.playBackServerTime/1e3).toFixed(0),s=(this.state.playBackServerTime/1e3).toFixed(0);if(t.playBackServerTime&&this.state.playBackServerTime&&Math.abs(s-r)>1&&this.timerBeginTsValue){var l=this._timeDifferenceToFormat(this.startTime,this.state.playBackServerTime),d=this._timeDifferenceToFormat(this.startTime,this.timerBeginTsValue),u=(0,o.default)(this.initTimerValue),c=u.slice(0);if(l<=d)clearInterval(this.stop),this.stop=setInterval(this.timeReduce.bind(this),1e3),this.state.timeDescArray=this.initTimerValue,this.setState({timeDescArray:this.state.timeDescArray});else{var h=600*c[0]+60*c[1]+10*c[2]+1*c[3],f=h-l+d;if(f<0)clearInterval(this.stop);else{clearInterval(this.stop),this.stop=setInterval(this.timeReduce.bind(this),1e3);var m=parseInt(f/60)<10?"0"+parseInt(f/60):parseInt(f/60),g=parseInt(f%60)<10?"0"+parseInt(f%60):parseInt(f%60),p=[parseInt(m/10),parseInt(m%10),parseInt(g/10),parseInt(g%10)];this.setState({timeDescArray:p})}}}}},{key:"handlerRoomDisconnected",value:function(){clearInterval(this.stop),this.setState({timerIsShow:!1,startAndStopImg:!1,timeDescArray:[0,5,0,0],stopUnClickableStyle:!1})}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var o=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:o,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!0)}}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){var e=this;clearInterval(e.stop)}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=this,a=e.message,n=a.startTime,i=a.endTime;t.startTime=n,t.endTime=i}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=Number(e.message.current.toFixed(0));this.setState({playBackServerTime:t})}},{key:"_timeDifferenceToFormat",value:function(e,t){if(0!==t){var a=C.default.getTimeDifferenceToFormat(e,t),n=void 0;if(a){var i=a.hh,o=a.mm,r=a.ss;n=Number(r)+60*o+360*i}return n}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"timer":w.default.hasRole.roleStudent?t.handelTmerShowStudent(a):t.handleTimerShow(a);break;case"UpdateTime":k.default.serviceTime=1e3*a.ts}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":t.setState({timerIsShow:!1});break;case"timer":clearInterval(t.stop),t.setState({timerIsShow:!1,startAndStopImg:!1,timeDescArray:[0,5,0,0],stopUnClickableStyle:!1}),t.timerBeginTsValue=0}}},{key:"handlerMsglistTimerShow",value:function(e){var t=this,a=e.message.timerShowArr[0];w.default.hasRole.roleStudent?t.handelTmerMsglistShowStudent(a):t.handleMsgListTimerShow(a)}},{key:"handelTmerShowStudent",value:function(e){if(e.data.isShow)return!1;this.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,triangleStyle:"hidden"}),this._ShowStudentData(e)}},{key:"handelTmerMsglistShowStudent",value:function(e){var t=this;if(e.data.isShow)return!1;this.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,triangleStyle:"hidden"}),setTimeout(function(){t._ShowStudentData(e)},1e3)}},{key:"_ShowStudentData",value:function(e){var t=this,a=k.default.serviceTime/1e3-e.ts,n=600*t.state.timeDescArray[0]+60*t.state.timeDescArray[1]+10*t.state.timeDescArray[2]+1*t.state.timeDescArray[3],i=n-a;if(t.isSetDefaultPosition=!0,t.timerBeginTsValue=e.ts,e.data.isStatus)if(clearInterval(t.stop),t.setState({startAndStopImg:!1,numContentBorder:!1}),t.stop=setInterval(t.timeReduce.bind(t),1e3),i>0){i>n&&(i=n);var o=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),r=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60),s=[parseInt(o/10),parseInt(o%10),parseInt(r/10),parseInt(r%10)];t.setState({timeDescArray:s})}else clearInterval(t.stop),t.setState({timeDescArray:[0,0,0,0],numContentBorder:!0,startAndStopImg:!0});else t.setState({timeDescArray:e.data.sutdentTimerArry,startAndStopImg:!0,numContentBorder:!1}),clearInterval(t.stop)}},{key:"handleMsgListTimerShow",value:function(e){var t=this;t.setState({timeDescArray:e.data.sutdentTimerArry}),t.isSetDefaultPosition=!0,setTimeout(function(){t._TimerShowData(e)},1e3)}},{key:"_TimerShowData",value:function(e){var t=this,a=void 0,n=void 0;t.setState({timeDescArray:e.data.sutdentTimerArry}),this.isSetDefaultPosition=!0;var i=600*e.data.sutdentTimerArry[0]+60*e.data.sutdentTimerArry[1]+10*e.data.sutdentTimerArry[2]+1*e.data.sutdentTimerArry[3];if(k.default.playback?(clearInterval(t.stop),n=i):(a=k.default.serviceTime/1e3-e.ts,n=i-a),e.data.isShow)t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,againUnClickableStyle:!0,startBtnStyle:!0,startAndStopImg:!1,againBtnStyle:!1,numContentBorder:!1,triangleStyle:"visible"});else if(e.data.isStatus){var r=(0,o.default)(e.data.sutdentTimerArry),s=r.slice(0);if(t.initTimerValue=s,t.timerBeginTsValue=e.ts,clearInterval(t.stop),t.setState({startAndStopImg:!0,timerIsShow:!0,startBtnStyle:!1,numContentBorder:!1,againBtnStyle:!0,triangleStyle:"hidden",againUnClickableStyle:!1,playBackServerTime:!1}),t.stop=setInterval(t.timeReduce.bind(t),1e3),n>0){n>i&&(n=i);var l=parseInt(n/60)<10?"0"+parseInt(n/60):parseInt(n/60),d=parseInt(n%60)<10?"0"+parseInt(n%60):parseInt(n%60),u=[parseInt(l/10),parseInt(l%10),parseInt(d/10),parseInt(d%10)];t.setState({timeDescArray:u})}else clearInterval(t.stop),t.setState({timeDescArray:[0,0,0,0],numContentBorder:!0,startAndStopImg:!0,stopUnClickableStyle:!0})}else e.data.isRestart?(clearInterval(t.stop),t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,numContentBorder:!1,startAndStopImg:!1,startBtnStyle:!0,againBtnStyle:!1,triangleStyle:"visible",startAndStop:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1})):(t.setState({timeDescArray:e.data.sutdentTimerArry,timerIsShow:!0,numContentBorder:!1,startAndStopImg:!1,startBtnStyle:!0,againBtnStyle:!0,triangleStyle:"hidden",startAndStop:!1,againUnClickableStyle:!1}),clearInterval(t.stop))}},{key:"handleTimerShow",value:function(e){this._TimerShowData(e)}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!k.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this.setState({timeDescArray:[0,5,0,0],triangleStyle:"visible",againBtnStyle:!1,startBtnStyle:!0,numContentBorder:!1,timerIsShow:!1,restarting:!1,startAndStop:!1,startAndStopImg:!1,isShow:!1,againUnClickableStyle:!0,stopUnClickableStyle:!1}),this.stop=null}},{key:"_loadTimeDescArray",value:function(e){var t=this,a=[],n=[];return e.forEach(function(e,i){var o=v.default.createElement("div",{className:"timer-teachTool-num-div",key:i},v.default.createElement("div",{className:"timer-teachTool-triangle-top",style:{visibility:t.state.triangleStyle},onClick:t.AddHandel.bind(t,i)}),v.default.createElement("div",{className:"timer-teacher-num-content"+(t.state.numContentBorder?" timer-font-style-red":" timer-font-style-default")},e),v.default.createElement("div",{className:"timer-teachTool-triangle-down",style:{visibility:t.state.triangleStyle},onClick:t.ReduceHandel.bind(t,i)}));i>1?n.push(o):a.push(o)}),{afterArray:n,beforeArray:a}}},{key:"AddHandel",value:function(e,t){(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant)&&(0===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[0]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[0]=t.target.nextSibling.textContent)),1===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[1]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[1]=t.target.nextSibling.textContent)),2===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[2]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>5&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[2]=t.target.nextSibling.textContent)),3===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[3]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[3]=t.target.nextSibling.textContent=0)),this.setState({timeDescArray:this.state.timeDescArray}))}},{key:"ReduceHandel",value:function(e,t){(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant)&&(0===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[0]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[0]=t.target.previousSibling.textContent)),1===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[1]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[1]=t.target.previousSibling.textContent)),2===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[2]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=5,this.state.timeDescArray[2]=t.target.previousSibling.textContent)),3===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[3]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[3]=t.target.previousSibling.textContent)),this.setState({timeDescArray:this.state.timeDescArray}))}},{key:"timeReduce",value:function(){var e=this;e.state.timeDescArray[3]--,e.state.timeDescArray[3]<0&&(e.state.timeDescArray[3]=9,e.state.timeDescArray[2]--),e.state.timeDescArray[2]<0&&(e.state.timeDescArray[2]=5,e.state.timeDescArray[1]--),e.state.timeDescArray[1]<0&&(e.state.timeDescArray[1]=9,e.state.timeDescArray[0]--),e.state.timeDescArray[0]<0&&(e.state.timeDescArray=[0,0,0,0],e.state.numContentBorder=!0,clearInterval(e.stop)),0===e.state.timeDescArray[0]&&0===e.state.timeDescArray[1]&&0===e.state.timeDescArray[2]&&0===e.state.timeDescArray[3]&&(e.state.timeDescArray=[0,0,0,0],e.playAudioToAudiooutput("ring_audio",!0),e.state.numContentBorder=!0,clearInterval(e.stop)),e.setState({timeDescArray:e.state.timeDescArray,numContentBorder:e.state.numContentBorder})}},{key:"startBtnHandel",value:function(e){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){if(this.state.stopUnClickableStyle)return;clearInterval(this.stop);var t={isStatus:!0,sutdentTimerArry:this.state.timeDescArray,isShow:!1,isRestart:!1};B.default.sendSignallingTimerToStudent(t)}}},{key:"stopBtnHandel",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){if(this.state.stopUnClickableStyle)return;clearInterval(this.stop);var e={isStatus:!1,sutdentTimerArry:this.state.timeDescArray,isShow:!1,isRestart:!1};B.default.sendSignallingTimerToStudent(e)}}},{key:"againBtnHandel",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){clearInterval(this.stop);var e={isStatus:!1,sutdentTimerArry:[0,5,0,0],isShow:!1,isRestart:!0};B.default.sendSignallingTimerToStudent(e)}}},{key:"timerCloseHandel",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){clearInterval(this.stop);var e={};B.default.sendSignallingTimerToStudent(e,!0)}}},{key:"playAudioToAudiooutput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ring_audio",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("mobile"===TK.SDKTYPE){var a=document.getElementById("ring_audio");L.Utils.mediaPlay(a)}else if(TK.isTkNative&&TK.subscribe_from_native){var n=k.default.projectPublishDirAddress+"music/timer_default.wav",i=t?"play":"destroy",o={localMediaFile:"timer_default.wav"};A.default.getTkRoom().clientAudioMediaPlayer(n,i,o)}else{var r=$("#"+e);r&&r.length>0&&(t?L.Utils.mediaPlay(r[0]):L.Utils.mediaPause(r[0]))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.timeDescArray,n=t.resizeInfo,i=this._loadTimeDescArray(a),o=i.afterArray,r=i.beforeArray,s=e.props,l=s.id,d=s.draggableData,u=s.timerDrag,c=Object.customAssign({id:l,size:n,percentPosition:{percentLeft:u.percentLeft,percentTop:u.percentTop}},d);return v.default.createElement(x.default,c,v.default.createElement("div",{id:l,className:"timer-div"+(w.default.hasRole.roleStudent?" student":" teacher"),style:{display:this.state.timerIsShow?"block":"none"}},v.default.createElement("div",{id:l,className:(w.default.hasRole.roleStudent?"timer-sutdentTool-wraps":"timer-teachTool-wrap")+" touch-select-select",ref:"timerTeachToolWrap"},v.default.createElement("div",{className:"timer-teachTool-header"+(w.default.hasRole.roleStudent?" timer-studentTool-header":"")},v.default.createElement("span",null),v.default.createElement("span",{className:"timer-title"},k.default.language.languageData.timers.timerSetInterval.text),w.default.hasRole.roleStudent?v.default.createElement("div",null):v.default.createElement("div",{className:"timer-teacher-close-btn",onClick:this.timerCloseHandel.bind(this)})),v.default.createElement("div",{className:w.default.hasRole.roleStudent?"timer-student-content":"timer-teacher-content"},r,v.default.createElement("div",{className:"timer-teachTool-colon"}),o),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"timer-teachTool-startBtn",ref:"timerStartBtn",style:{display:this.state.startBtnStyle?"block":"none"},onClick:this.startBtnHandel.bind(this),title:k.default.language.languageData.timers.timerBegin.text}),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:this.state.stopUnClickableStyle?"unclick-stopBtn":"timer-teachTool-stopBtn",style:{display:this.state.startAndStopImg?"block":"none"},onClick:this.stopBtnHandel.bind(this),title:k.default.language.languageData.timers.timerStop.text}),w.default.hasRole.roleStudent?v.default.createElement("div",{className:"student-teachTool-stopBtn",style:{display:this.state.startAndStopImg?"block":"none"},title:k.default.language.languageData.timers.timerStop.text}):void 0,w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"timer-teachTool-againBtn",style:{display:this.state.againBtnStyle?"block":"none"},onClick:this.againBtnHandel.bind(this),title:k.default.language.languageData.timers.again.text}),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"timer-teachTool-againBtn-unclickable",style:{display:this.state.againUnClickableStyle?"block":"none"},title:k.default.language.languageData.timers.again.text}),"mobile"===TK.SDKTYPE?v.default.createElement("audio",{id:"ring_audio",src:"./music/ring.mp3?ts="+this.listernerBackupid,className:"audio-play"}):TK.isTkNative&&TK.subscribe_from_native?void 0:v.default.createElement("audio",{id:"ring_audio",src:"./music/timer_default.wav",className:"audio-play"}))))}}]),t}(v.default.Component);t.default=M},ZZXC:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("DrPG"),o=n(i),r=a("HUPQ"),s=n(r),l=a("VSuD"),d=(n(l),a("yE5a")),u=(n(d),a("T+56")),c=(n(u),a("YRCL")),h=(n(c),{getAppLanguageInfo:function(e,t){var n=t||s.default.languageName,i={};s.default.language=s.default.language||{},i.name=n,i.languageData=a("KyAL")("./i18_"+n+".js").default,e&&"function"==typeof e&&e(i),document.body.className=document.body.className.replace(/(chinese|english|complex)/g,"")+" "+i.name,document.body.setAttribute("data-language",i.name)},TkUtils:o.default});t.default=h},adC7:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HUPQ"),o=n(i),r=a("T+56"),s=n(r),l={showAlert:function(e,t){s.default.CoreController.dispatchEvent({type:"showAlert",message:{data:{title:e.title,message:e.message,ok:e.ok,callback:function(e){t&&"function"==typeof t&&t(e)}}}})},showConfirm:function(e,t){s.default.CoreController.dispatchEvent({type:"showConfirm",message:{data:{title:e.title,message:e.message,isOk:{cancel:e.button.cancel,ok:e.button.ok},callback:function(e){t&&"function"==typeof t&&t(e)}}}})}},d={showError:function(e,t,a,n){var i={message:e,title:a||o.default.language.languageData.alertWin.title.showError.text,ok:n||o.default.language.languageData.alertWin.ok.showError.text};l.showAlert(i,t)},showPrompt:function(e,t,a,n){var i={message:e,title:a||o.default.language.languageData.alertWin.title.showPrompt.text,ok:n||o.default.language.languageData.alertWin.ok.showPrompt.text};l.showAlert(i,t)},showConfirm:function(e,t,a,n,i){var r={title:a||o.default.language.languageData.alertWin.title.showConfirm.text,button:{cancel:i||o.default.language.languageData.alertWin.ok.showConfirm.cancel,ok:n||o.default.language.languageData.alertWin.ok.showConfirm.ok},message:e};l.showConfirm(r,t)}};t.default=d},bMTV:function(e,t){},bRrM:function(e,t,a){"use strict";var n=a("7KvD"),i=a("FeBl"),o=a("evD5"),r=a("+E39"),s=a("dSzd")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];r&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},bqnK:function(e,t,a){a("HpRW")("Map")},buLY:function(e,t,a){"use strict";var n={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=n},cSSE:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("W3Iv"),o=n(i),r=a("BO1k"),s=n(r),l=a("d7EF"),d=n(l),u=a("Zx67"),c=n(u),h=a("Zrlr"),f=n(h),m=a("wxAW"),g=n(m),p=a("zwoO"),v=n(p),b=a("Pf15"),y=n(b),k=a("GiK3"),S=n(k),w=a("Sa83"),T=n(w),C=a("T+56"),D=n(C),E=a("yE5a"),I=n(E),P=a("HUPQ"),A=n(P),R=a("VSuD"),B=n(R),_=a("Ovlj"),x=(n(_),function(e){function t(e){(0,f.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.state={fileTypeMark:"general",isHideFullScreen:!1,isFileFullScreen:!1,fullScreen:!1,scale:void 0,isDynamicPPTStudentRole:!1},a.fatherContainerId="white_board_outer_layout",a.whiteboardContainerId="big_literally_wrap",a.sendMobileData={page:{},zoom:{},remarkText:!1,chooseType:"tool_mouse",scale:void 0},a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this;D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),D.default.CoreController.addEventListener(B.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),D.default.CoreController.addEventListener("receive-msglist-FullScreen",e.handlerReceiveMsglistFullScreen.bind(e),e.listernerBackupid),e._initWhiteboardDefault()}},{key:"componentWillUnmount",value:function(){I.default.getTkWhiteBoardManager().destroyMainWhiteboard()}},{key:"componentDidUpdate",value:function(e,t){t.scale!==this.state.scale&&(this.sendMobileData.scale=this.state.scale,I.default.getTkRoom().sendActionCommand("viewStateUpdate",this.sendMobileData))}},{key:"handlerReceiveMsglistFullScreen",value:function(e){"courseware_file"===e.message.FullScreenArray[0].data.fullScreenType&&(B.default.hasRole.roleStudent||B.default.hasRole.rolePatrol)&&this.setState({isHideFullScreen:!0}),this.setState({isFileFullScreen:!0})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"ClassBegin":B.default.joinRoomInfo.isClassOverNotLeave&&(I.default.getTkWhiteBoardManager().resetWhiteboardData(),I.default.getTkWhiteBoardManager().resetPureWhiteboardTotalPage());break;case"FullScreen":"courseware_file"===t.data.fullScreenType&&(B.default.hasRole.roleStudent||B.default.hasRole.rolePatrol)&&this.setState({isHideFullScreen:!0}),this.setState({isFileFullScreen:!0})}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":B.default.joinRoomInfo.isClassOverNotLeave||(I.default.getTkWhiteBoardManager().resetWhiteboardData(),I.default.getTkWhiteBoardManager().resetPureWhiteboardTotalPage()),t.setState({isHideFullScreen:!1,isFileFullScreen:!1});break;case"FullScreen":this.setState({isHideFullScreen:!1,isFileFullScreen:!1}),I.default.getTkWhiteBoardManager().exitFullScreen()}}},{key:"_receiveActionCommand",value:function(e,t){if(L.Logger.info("receive whiteboard sdk action command（action,cmd）:",e,t),D.default.CoreController.dispatchEvent({type:"receiveWhiteboardSDKAction",message:{action:e,cmd:t}}),"viewStateUpdate"===e&&t.updateViewState.tool){var a=t.updateViewState.tool,n=!0,i=!1,r=void 0;try{for(var l,u=(0,s.default)((0,o.default)(a));!(n=(l=u.next()).done);n=!0){var c=l.value,h=(0,d.default)(c,2),f=h[0];h[1].isUse&&(this.sendMobileData.chooseType=f)}}catch(e){i=!0,r=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw r}}}if("viewStateUpdate"===e)for(var m in t.viewState)switch(m){case"page":for(var g in t.viewState[m])this.sendMobileData.page[g]="currentPage"===g||"totalPage"===g?t.viewState[m][g]:!t.viewState[m][g].disabled;break;case"zoom":this.sendMobileData.zoom.zoom_big=!t.viewState[m].zoom_big.disabled,this.sendMobileData.zoom.zoom_small=!t.viewState[m].zoom_small.disabled;break;case"remarkText":this.sendMobileData.remarkText=""!==t.viewState[m];break;case"remark":void 0!==t.viewState[m]&&(this.sendMobileData.remark=t.viewState[m]);break;case"scale":var p=Math.abs(t.viewState[m]-16/9),v=Math.abs(t.viewState[m]-4/3);p>.1&&v<=.1?this.setState({scale:0}):p<=.1&&v>.1?this.setState({scale:1}):this.setState({scale:2});break;case"other":if(I.default.getTkRoom().getMySelf().id&&I.default.getTkRoom().getMySelf().primaryColor!==t.viewState[m].primaryColor){var b=I.default.getTkRoom().getMySelf().id,y={primaryColor:t.viewState[m].primaryColor};I.default.getTkRoom().changeUserProperty(b,"__all",y)}break;case"documentType":this.setState({fileTypeMark:t.viewState[m]});break;case"fullScreen":this.setState({fullScreen:t.viewState[m]})}"viewStateUpdate"===e&&B.default.joinRoomInfo.pptpagingoptions&&B.default.hasRole.roleStudent&&("dynamicPPT"===t.viewState.documentType?this.setState({isDynamicPPTStudentRole:!0}):this.setState({isDynamicPPTStudentRole:!1}))}},{key:"receiveActionCommand",value:function(e){var t=e.message,a=t.action,n=t.cmd;if(document.getElementById("tk_app")&&document.getElementsByClassName("all-container")[0]&&(document.getElementById("tk_app").getElementsByClassName("all-container")[0].style.background="#161616"),"mobile"===TK.SDKTYPE)if("chooseShow"===a);else if("whiteboardSDK_addPage"===a)I.default.getTkWhiteBoardManager().addPage();else if("whiteboardSDK_nextPage"===a)I.default.getTkWhiteBoardManager().nextPage();else if("whiteboardSDK_prevPage"===a)I.default.getTkWhiteBoardManager().prevPage();else if("whiteboardSDK_skipPage"===a){var i=n.number;I.default.getTkWhiteBoardManager().skipPage(i)}else"whiteboardSDK_nextStep"===a?I.default.getTkWhiteBoardManager().nextStep():"whiteboardSDK_prevStep"===a?I.default.getTkWhiteBoardManager().prevStep():"whiteboardSDK_enlargeWhiteboard"===a?I.default.getTkWhiteBoardManager().enlargeWhiteboard():"whiteboardSDK_narrowWhiteboard"===a?I.default.getTkWhiteBoardManager().narrowWhiteboard():"whiteboardSDK_openDocumentRemark"===a?I.default.getTkWhiteBoardManager().openDocumentRemark():"whiteboardSDK_closeDocumentRemark"===a&&I.default.getTkWhiteBoardManager().closeDocumentRemark()}},{key:"_initWhiteboardDefault",value:function(){var e=document.getElementById(this.whiteboardContainerId),t={isMobile:!0,canDraw:T.default.handler.getAppPermissions("canDraw"),isLoadDocumentToolBar:!0,isLoadWhiteboardToolBar:!1,documentRemarkConfig:{parentNode:void 0,isDrag:!0,initDragPosition:{left:50,top:40}},whiteboardToolBarConfig:{isDrag:!1,loadWhiteboardTools:{mouse:!0,laser:!1,pen:!0,text:!0,shape:!0,eraser:!0,clear:!1,undo:!1,redo:!1,setting:!1}},documentToolBarConfig:{initDragPosition:{left:50,top:95},isLoadRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")},fontSize:18,primaryColor:B.default.hasRole.roleStudent?"#000000":"#ED3E3A",canRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadDocumentRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")};I.default.getTkWhiteBoardManager().createMainWhiteboard(e,t,this._receiveActionCommand.bind(this))}},{key:"handlerRoomConnected",value:function(){this._changeWhiteboardConfig()}},{key:"handlerInitAppPermissions",value:function(){var e={canDraw:T.default.handler.getAppPermissions("canDraw"),documentToolBarConfig:{isLoadRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")},canRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks"),isLoadDocumentRemark:B.default.joinRoomInfo.hasCoursewareRemarks&&T.default.handler.getAppPermissions("isShowCoursewareRemarks")};I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(e,"default")}},{key:"_changeWhiteboardConfig",value:function(){if(B.default.joinRoomInfo.customWhiteboardBackground){var e=B.default.joinRoomInfo.whiteboardcolor,t="#"+A.default.customWhiteboardColorArry[e],a=void 0;a=B.default.hasRole.roleChairman||B.default.hasRole.roleTeachingAssistant?"ffffff"===A.default.customWhiteboardColorArry[e]?"#ED3E3A":"#EDEDED":"000000"===A.default.customWhiteboardColorArry[e]?"#FFCC00":"#000000";var n={primaryColor:a,backgroundColor:t,secondaryColor:t};I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(n,"default")}else{var i={primaryColor:B.default.hasRole.roleStudent?"#000000":"#ED3E3A"};I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(i,"default")}var o=document.getElementById("defaultDocumentToolViewRoot");if(o){var r=document.getElementById("defaultTalkcloudFullScreen"),s=document.getElementById("defaultTalkcloudVolume"),l=o.querySelector("#defaultTalkcloudRemark");o.appendChild(r),o.appendChild(s),o.appendChild(l)}}},{key:"render",value:function(){var e=this,t=this.state.isHideFullScreen?" hide-full-screen":"",a=this.state.isFileFullScreen?" yes":"",n=this.state.fullScreen?" full-screen":"";return S.default.createElement("div",{id:e.fatherContainerId,className:"white-board-outer-layout "+(2===this.state.scale||A.default.playback?" change-background-border":"")+(this.state.isDynamicPPTStudentRole?" dynamicPPT-student-role":"")},"  ",S.default.createElement("div",{id:e.whiteboardContainerId,className:"big-literally-wrap "+("dynamicPPT"===e.state.fileTypeMark||"h5Document"===e.state.fileTypeMark?" hide-document":"")+t+a+n}," "))}}]),t}(S.default.Component));t.default=x},d7EF:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=a("us/S"),o=n(i),r=a("BO1k"),s=n(r);t.default=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=(0,s.default)(e);!(n=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},dtxI:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("W3Iv"),o=n(i),r=a("BO1k"),s=n(r),l=a("d7EF"),d=n(l),u=a("Zx67"),c=n(u),h=a("Zrlr"),f=n(h),m=a("wxAW"),g=n(m),p=a("zwoO"),v=n(p),b=a("Pf15"),y=n(b),k=a("woOf"),S=n(k),w=a("ifoU"),T=n(w),C=a("GiK3"),D=n(C),E=a("EXAz"),I=n(E),P=a("yE5a"),A=n(P),R=a("T+56"),B=n(R),_=a("YRCL"),x=n(_),M=a("m/zC"),N=n(M),W=a("VSuD"),O=n(W),z=a("HUPQ"),H=n(z);a("QqT5");var F=a("s3NG"),U=n(F),j=a("fC09"),K=n(j),V=a("hxXK"),q=n(V),Q=a("Ha7l"),Y=n(Q),Z=a("e+zB"),G=n(Z),J={on:B.default.CoreController.addEventListener,off:B.default.CoreController.removeBackupListerner,emit:B.default.CoreController.dispatchEvent},X={detail:"DETAIL",option:"OPTION",statistics:"STATISTICS",current:"CURRENT"},$=[O.default.EVENTTYPE.RoomEvent.roomPubmsg,O.default.EVENTTYPE.RoomEvent.roomDelmsg,"receive-msglist-question","receive-msglist-publishResult","change-minimizedDragAndDropArry","receiveWhiteboardSDKAction"],ee=["UNSTART","RUNNING","FINISHED"],te=new T.default([[ee[0],X.option],[ee[1],X.statistics],[ee[2],X.current]]),ae=["NORMAL","MINIMIZED"],ne={hasChose:!1},ie=new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)}),oe=function(e){function t(){(0,f.default)(this,t);var e=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return e.owner=A.default.getTkRoom().getMySelf(),e.role=e.owner.role,e.pollTimerID=void 0,e.ansTimerID=void 0,e.statisticsTimerID=void 0,e.quesID=void 0,e.pollInterval=3e3,e.markID=(new Date).getTime()+"_"+Math.random(),e.state={show:!1,questionState:ee[0],sizeState:ae[0],page:{index:X.option,data:null},options:ie,result:new Array(ie.length).fill(0),hasPub:!1,ansTime:0,resultNum:0,rightOptions:[],detailData:[],resizeInfo:{width:0,height:0},detailPageInfo:{current:1,total:1},hintShow:!1,scale:void 0},e}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this;$.forEach(function(t,a){return J.on(t,e.handleEvent.bind(e),e.markID)})}},{key:"componentWillUnmount",value:function(){J.off(this.markID)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&this.setDefaultPosition(),this.updateResize()}},{key:"updateResize",value:function(){var e=this.props.id,t=document.getElementById(e);if(t){var a=H.default.windowInnerWidth/O.default.STANDARDSIZE,n=t.offsetWidth/a,i=t.offsetHeight/a;this.state.resizeInfo&&(Math.abs(this.state.resizeInfo.width-n)>.04||Math.abs(this.state.resizeInfo.height-i)>.04)&&(this.state.resizeInfo={width:n,height:i},this.setState({resizeInfo:this.state.resizeInfo}))}}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:.5,percentTop:0,isDrag:!1},!0)}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=this,a=e.data,n=a.cmd;switch(a.action){case"viewStateUpdate":for(var i in n.viewState)switch(i){case"scale":var o=Math.abs(n.viewState[i]-16/9),r=Math.abs(n.viewState[i]-4/3);o>.1&&r<=.1?t.setState({scale:0}):o<=.1&&r>.1?t.setState({scale:1}):t.setState({scale:2})}}}},{key:"dispose",value:function(e){var t=e.action,a=e.data,n=e.extra;if(null===t||null===a)return L.Logger.error("Incomplete parameter");this[t]&&"function"==typeof this[t]&&this[t]({action:t,data:a,extra:n})}},{key:"turn",value:function(e){var t=e.data,a=e.extra,n=e.extra.page;if(null===t||null===a||void 0===n)return L.Logger.error("Error parameter");n.index!==X.current&&this.setState({page:n})}},{key:"handleEvent",value:function(e){var t=this,a=e.type,n=e.message;a=/-/.test(a)&&a.replace(/\-/g,"")||a,this.setState({event:{type:a,message:n}},function(){return t.dispose({action:a,data:n})})}},{key:"changeQuestionState",value:function(e){var t=this,a=e.data,n=this.state,i=n.questionState,o=n.options,r=ee.indexOf(i),s=te.get(ee.length-1===r?ee[0]:ee[r+1]),l=s===X.current?this.state.page:{index:s,data:a};if("UNSTART"===i&&!o.some(function(e){return!0===e.hasChose}))return void this.setState({hintShow:!0});var d="UNSTART"===i?"Start":"RUNNING"===i?"End":"Reset",u=o.map(function(e,t){if(!0===e.hasChose)return t}).filter(function(e){return void 0!==e});this.setState({questionState:ee[ee.length-1===r?0:r+1],page:l,rightOptions:u},function(){t["questionWill"+d]()})}},{key:"changeSizeState",value:function(e){var t=(e.data,this.state.sizeState),a=ae.indexOf(t);this.setState({sizeState:ae[ae.length-1===a?0:a+1]}),"NORMAL"===this.state.sizeState?this._minimizedDragAndDrop():this._restore()}},{key:"_restore",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds),r=!0,l=!1,u=void 0;try{for(var c,h=(0,s.default)((0,o.default)(H.default.minimizedDragAndDropArry));!(r=(c=h.next()).done);r=!0){var f=c.value,m=(0,d.default)(f,2),g=m[0],p=m[1],v=!0,b=!1,y=void 0;try{for(var k,S=(0,s.default)((0,o.default)(p));!(v=(k=S.next()).done);v=!0){var w=k.value,T=(0,d.default)(w,2),C=T[0],D=T[1];C===t&&n&&i&&a.changePosition&&"function"==typeof a.changePosition&&(a.changePosition(t,{percentLeft:D.percentLeft,percentTop:D.percentTop,isDrag:!1},!1),H.default.minimizedDragAndDropArry.splice(g,1),B.default.CoreController.dispatchEvent({type:"change-minimizedDragAndDropArry"}))}}catch(e){b=!0,y=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw y}}}}catch(e){l=!0,u=e}finally{try{!r&&h.return&&h.return()}finally{if(l)throw u}}}},{key:"changeminimizedDragAndDropArry",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds),r=!0,l=!1,u=void 0;try{for(var c,h=(0,s.default)((0,o.default)(H.default.minimizedDragAndDropArry));!(r=(c=h.next()).done);r=!0){var f=c.value,m=(0,d.default)(f,2),g=m[0],p=m[1],v=!0,b=!1,y=void 0;try{for(var k,S=(0,s.default)((0,o.default)(p));!(v=(k=S.next()).done);v=!0){var w=k.value,T=(0,d.default)(w,2),C=T[0];T[1],C===t&&n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:155*g,percentTop:1,isDrag:!1},!1)}}catch(e){b=!0,y=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw y}}}}catch(e){l=!0,u=e}finally{try{!r&&h.return&&h.return()}finally{if(l)throw u}}}},{key:"_minimizedDragAndDrop",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=e.answerDrag,i=document.getElementById(t),r=document.querySelector(a.bounds),l=null,u=!1,c=!0,h=!1,f=void 0;try{for(var m,g=(0,s.default)((0,o.default)(H.default.minimizedDragAndDropArry));!(c=(m=g.next()).done);c=!0){var p=m.value,v=(0,d.default)(p,2),b=(v[0],v[1]);if(b.hasOwnProperty(t)){b[t].percentLeft=n.percentLeft,b[t].percentTop=n.percentTop,u=b.hasOwnProperty(t);break}}}catch(e){h=!0,f=e}finally{try{!c&&g.return&&g.return()}finally{if(h)throw f}}if(!u){var y={};y[t]={},y[t].width="pad"===H.default.mobileDeviceType?105:89,y[t].percentLeft=n.percentLeft,y[t].percentTop=n.percentTop,H.default.minimizedDragAndDropArry.length>=1?(l=y[t].width/(r.clientWidth-y[t].width)*H.default.minimizedDragAndDropArry.length,i&&r&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:l,percentTop:1,isDrag:!1},!1)):i&&r&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:0,percentTop:1,isDrag:!1},!1),H.default.minimizedDragAndDropArry.push(y)}}},{key:"questionWillStart",value:function(){var e=this.state,t=e.options,a=e.rightOptions;x.default.sendQuestion(!1,{options:t,action:"start",rightOptions:a,state:this.state}),this.startAnsTimer(),this.startGetAnswerData()}},{key:"questionWillEnd",value:function(){this.stopGetAnswerData(),this.stopAnsTimer(),x.default.sendQuestion(!1,{action:"end",state:this.state,quesID:this.quesID||void 0});var e=this.state,t=e.result,a=e.resultNum,n=e.ansTime,i=e.rightOptions;x.default.publishResult({result:t,resultNum:a,ansTime:n,rightOptions:i})}},{key:"questionWillReset",value:function(){x.default.sendQuestion(!0,{}),x.default.publishResult({},!0),x.default.sendQuestion(!1,{action:"open"}),this.statisticsTimerID&&clearInterval(this.statisticsTimerID);var e=this.state;e.result,e.resultNum,e.ansTime,e.rightOptions,this.setState({resultNum:0,ansTime:0,hasPub:!1,options:new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)}),detailData:[],detailPageInfo:{current:1,total:1},hintShow:!1})}},{key:"roompubmsg",value:function(e){var t=this,a=e.data;if(a.data){var n=a.name,i=a.values,o=a.answerCount,r=a.data,s=(r.options,r.action),l=(r.rightOptions,r.state),d=r.quesID;switch(n){case"Question":if(!O.default.hasRole.roleStudent)switch(s){case"open":this.setState({show:!0,questionState:ee[0],page:{index:X.option},options:new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)})});break;case"start":this.quesID=a.data.quesID,this.setState(l,function(){t.startAnsTimer(),t.startGetAnswerData()});break;case"end":this.quesID=d,this.stopAnsTimer(),this.stopGetAnswerData(),this.setState({questionState:ee[2]})}break;case"GetQuestionCount":var u=null!==i&&void 0!==i?new Array(this.state.options.length).fill(0).map(function(e,t){return Number(i[""+t])||0}):new Array(this.state.options.length).fill(0),c=o;this.setState({result:u,resultNum:c});break;case"PublishResult":var h=a.data.hasPub;h&&this.setState({hasPub:h})}}}},{key:"roomdelmsg",value:function(e){switch(e.data.name){case"Question":case"ClassBegin":this.setState({show:!1,questionState:ee[0],options:new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)}),resultNum:0,ansTime:0,hasPub:!1},function(){J.emit({type:"colse-holdAll-item",message:{type:"answer"}})})}}},{key:"receivemsglistpublishResult",value:function(){this.setState({hasPub:!0})}},{key:"receivemsglistquestion",value:function(e){var t=this;if(e.data.data.data){var a=(this.state.questionState,H.default.serviceTime/1e3-e.data.data.ts),n=e.data.data.data,i=n.action,o=n.options,r=n.rightOptions,s=n.quesID,l=n.state;"open"!==i||O.default.hasRole.roleStudent||this.setState({show:!0,options:new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)})}),"start"!==i||O.default.hasRole.roleStudent||(this.quesID=s,x.default.getQuestionCount({}),this.setState({show:!0,questionState:"RUNNING",page:{index:X.statistics},ansTime:a,rightOptions:r,options:o},function(){t.startAnsTimer(),t.startGetAnswerData()})),"end"!==i||O.default.hasRole.roleStudent||(this.quesID=s,this.stopAnsTimer(),this.stopGetAnswerData(),this.setState(l))}}},{key:"startGetAnswerData",value:function(){this.pollTimerID&&clearInterval(this.pollTimerID),this.pollTimerID=setInterval(function(){x.default.getQuestionCount({})},this.pollInterval),this.setState({result:new Array(this.state.options.length).fill(0)})}},{key:"startAnsTimer",value:function(){var e=this;this.ansTimerID&&clearInterval(this.ansTimerID),this.ansTimerID=setInterval(function(){var t=e.state.ansTime+1;e.setState({ansTime:t})},1e3)}},{key:"stopGetAnswerData",value:function(){this.pollTimerID&&clearInterval(this.pollTimerID),this.pollTimerID=void 0,x.default.getQuestionCount({})}},{key:"stopAnsTimer",value:function(){this.ansTimerID&&clearInterval(this.ansTimerID)}},{key:"publishResult",value:function(){var e=this.state,t=e.result,a=e.resultNum,n=e.ansTime,i=e.rightOptions;x.default.publishResult({result:t,resultNum:a,ansTime:n,rightOptions:i,hasPub:!0}),this.setState({hasPub:!0})}},{key:"changeOptionLength",value:function(e){var t=e.data.num,a=this.state.options;a.length>=8&&t>0||a.length<=2&&t<0||(t>0&&a.push((0,S.default)({},ne))||a.pop(),this.setState({options:a}))}},{key:"optionClick",value:function(e){var t=e.data.index,a=this.state.options;a[t].hasChose=!a[t].hasChose,this.setState({options:a})}},{key:"changeDetail",value:function(e){var t=this,a=(e.action,e.data);if(!(1===this.state.detailPageInfo.current&&-1===a.action||this.state.detailPageInfo.current===this.state.detailPageInfo.total&&1===a.action))if(-1===a.action){var n=this.state.detailPageInfo.current-1;this.getDetailData(n),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=setInterval(function(){t.getDetailData(n)},2e3))}else if(1===a.action){var i=this.state.detailPageInfo.current+1;this.getDetailData(i),this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=setInterval(function(){t.getDetailData(i)},2e3))}}},{key:"changeDetailOrStatistics",value:function(){var e=this,t=this.state.page;this.state.page.index===X.statistics?this.statisticsTimerID=setInterval(function(){e.getDetailData(1)},2e3):this.statisticsTimerID&&(clearInterval(this.statisticsTimerID),this.statisticsTimerID=void 0),this.setState({page:{index:t.index===X.statistics?X.detail:X.statistics}})}},{key:"getDetailData",value:function(e){var t=this;N.default.getSimplifyAnswer({id:this.quesID,page:e},{doneCallback:function(a){0===a.result&&t.setState({detailData:a.data,detailPageInfo:{total:a.pageinfo&&Math.ceil(a.pageinfo.count/20)||1,current:e}})}})}},{key:"close",value:function(){var e=this.props.id;this.statisticsTimerID&&clearInterval(this.statisticsTimerID),this.setState({show:!1,questionState:ee[0],options:new Array(4).fill(void 0).map(function(e){return(0,S.default)({},ne)}),resultNum:0,ansTime:0,hasPub:!1,hintShow:!1,detailData:[],detailPageInfo:{current:1,total:1}},function(){x.default.sendQuestion(!0,{}),x.default.publishResult({},!0),J.emit({type:"colse-holdAll-item",message:{type:"answer"}})});var t=!0,a=!1,n=void 0;try{for(var i,r=(0,s.default)((0,o.default)(H.default.minimizedDragAndDropArry));!(t=(i=r.next()).done);t=!0){var l=i.value,u=(0,d.default)(l,2),c=u[0],h=u[1],f=!0,m=!1,g=void 0;try{for(var p,v=(0,s.default)((0,o.default)(h));!(f=(p=v.next()).done);f=!0){var b=p.value,y=(0,d.default)(b,2),k=y[0];y[1],k===e&&H.default.minimizedDragAndDropArry.splice(c,1)}}catch(e){m=!0,g=e}finally{try{!f&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.questionState,n=e.sizeState,i=e.resizeInfo,o=(0,S.default)(this.state,{role:this.role,owner:this.owner}),r=this.props,s=r.id,l=r.answerDrag,d=r.draggableData,u={position:"absolute",zIndex:130,display:t?"":"none",left:0},c=Object.customAssign({id:s,size:i,percentPosition:{percentLeft:l.percentLeft,percentTop:l.percentTop}},d),h=O.default.hasRoomtype.oneToOne||2!==this.state.scale?" ":" change-size";return D.default.createElement(I.default,c,D.default.createElement("div",{id:s,className:"question-panel teacher "+a.toLowerCase()+" "+n.toLowerCase()+h,onClick:"minimized"===n.toLowerCase()?this.changeSizeState.bind(this):void 0,style:u},D.default.createElement(Y.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:X}),D.default.createElement("div",{className:"body"},this.state.page.index===X.option?D.default.createElement(U.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:X}):void 0,this.state.page.index===X.detail||this.state.page.index===X.statistics?D.default.createElement(K.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:X}):void 0,this.state.page.index===X.detail||this.state.page.index===X.statistics?D.default.createElement(G.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:X}):void 0),D.default.createElement(q.default,{parentState:o,dispose:this.dispose.bind(this),pageDict:X})))}}]),t}(D.default.Component);t.default=oe},"e+zB":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("GiK3"),o=n(i),r=a("HUPQ"),s=n(r),l=function(e){var t=e.parentState,a=e.dispose,n=e.pageDict,i=(t.studentNum,t.result),r=t.ansTime,l=t.resultNum;return o.default.createElement("div",{className:"statistics",style:{display:t.page.index===n.statistics?"":"none"}},o.default.createElement("div",{className:"statistics-header"},o.default.createElement("span",{className:"num item"},s.default.language.languageData.qPanel.answerNum,":",l,s.default.language.languageData.qPanel.people),o.default.createElement("span",{className:"time item"},s.default.language.languageData.qPanel.useTime,":",function(e){var t=Number(e%60),a=Math.floor(e/60),n=Math.floor(e/3600);return(n>9&&n||"0"+n)+":"+(a>9&&a||"0"+a)+":"+(t>9&&t||"0"+t)}(r)),o.default.createElement("span",{className:"cut item",onClick:function(){a({action:"changeDetailOrStatistics",data:{}})}},o.default.createElement("span",null,s.default.language.languageData.qPanel.detail," >"))),o.default.createElement("div",{className:(i.length>4?"double ":"")+"statistics-wrap"},function(){return i.map(function(e,t){return o.default.createElement("div",{className:"statistics-item",key:t},o.default.createElement("span",{className:"op op-"+t},String.fromCharCode("A".charCodeAt()+t)),o.default.createElement("span",{className:"total"},o.default.createElement("span",{className:"process",style:{width:Number(e)/Number(l)*100+"%"}})),o.default.createElement("span",{className:"num"},e,s.default.language.languageData.qPanel.people))})}()))};t.default=l},fC09:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("GiK3"),o=n(i),r=a("HUPQ"),s=n(r),l=a("VSuD"),d=(n(l),function(e){var t=e.parentState,a=e.dispose,n=e.pageDict,i=(t.studentNum,t.result,t.ansTime),r=t.resultNum,l=t.detailData;return o.default.createElement("div",{className:"statistics",style:{display:t.page.index===n.detail?"":"none"}},o.default.createElement("div",{className:"statistics-header"},o.default.createElement("span",{className:"num item"},s.default.language.languageData.qPanel.answerNum,":",r,s.default.language.languageData.qPanel.people),o.default.createElement("span",{className:"time item"},s.default.language.languageData.qPanel.useTime,":",function(e){var t=Number(e%60),a=Math.floor(e/60),n=Math.floor(e/3600);return(n>9&&n||"0"+n)+":"+(a>9&&a||"0"+a)+":"+(t>9&&t||"0"+t)}(i)),o.default.createElement("span",{className:"cut item",onClick:function(){a({action:"changeDetailOrStatistics",data:{}})}},o.default.createElement("span",null,s.default.language.languageData.qPanel.statistics," >"))),o.default.createElement("div",{className:"detail"},function(){return l&&l.length&&l.length>0?l.map(function(e,t){return o.default.createElement("div",{className:"detail-item",key:t},o.default.createElement("span",null,e.studentname),o.default.createElement("span",{className:"selectedAnswers"},s.default.language.languageData.qPanel.choseAnswer,":",e.options.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})+""),o.default.createElement("span",{className:"useTime"},s.default.language.languageData.qPanel.useTime,":",e.timestr))}):o.default.createElement("div",{className:"detail-item"},o.default.createElement("span",null,s.default.language.languageData.qPanel.loading))}()),function(){return o.default.createElement("div",{className:"detail-page"},o.default.createElement("div",{onClick:function(){a({action:"changeDetail",data:{action:-1}})},className:"left"}),o.default.createElement("p",{className:"content-text"},t.detailPageInfo.current+"/"+t.detailPageInfo.total),o.default.createElement("div",{onClick:function(){a({action:"changeDetail",data:{action:1}})},className:"right"}))}())});t.default=d},"fZJ/":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=n(i),r=a("+6Bu"),s=n(r),l=a("Zx67"),d=n(l),u=a("Zrlr"),c=n(u),h=a("wxAW"),f=n(h),m=a("zwoO"),g=n(m),p=a("Pf15"),v=n(p),b=a("GiK3"),y=n(b),k=a("KSGD"),S=n(k),w=a("T+56"),T=n(w),C=a("DrPG"),D=n(C),E=a("HUPQ"),I=n(E),P=a("yE5a"),A=n(P),R=a("VSuD"),B=(n(R),function(e){function t(e){(0,c.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.containerWidthAndHeight=Object.customAssign({},a.props.containerWidthAndHeight),a.instanceId=void 0!==a.props.instanceId?a.props.instanceId:"whiteboard_default",a.whiteboardElementId="whiteboard_container_"+a.instanceId,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.showShapeAuthor=void 0!==a.props.showShapeAuthor?a.props.showShapeAuthor:I.default.showShapeAuthor,a.HandlerWhiteboardAndCoreInstance=A.default.getTkWhiteBoardManager().getWhiteboardIntermediateLayerInstance(),a.HandlerTkWhiteBoardManager=A.default.getTkWhiteBoardManager(),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;T.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;e.props.saveImage&&this.HandlerWhiteboardAndCoreInstance.downCanvasImageToLocalFile(e.instanceId),T.default.Window.removeBackupListerner(e.listernerBackupid),T.default.CoreController.removeBackupListerner(e.listernerBackupid),this.HandlerTkWhiteBoardManager.destroyExtendWhiteboard(e.instanceId)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this;if(e.show!==this.props.show&&this.props.show&&this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId),!n.props.containerWidthAndHeight||n.props.containerWidthAndHeight.width===n.containerWidthAndHeight.width&&n.props.containerWidthAndHeight.height===n.containerWidthAndHeight.height||(Object.customAssign(n.containerWidthAndHeight,n.props.containerWidthAndHeight),setTimeout(function(){a.HandlerTkWhiteBoardManager.updateWhiteboardSize(a.instanceId)},100)),n.props.deawPermission!==e.deawPermission){var i={canDraw:n.props.deawPermission};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(i,n.instanceId)}if(n.props.useToolKey!==e.useToolKey&&"tool_color"!==n.props.useToolKey&&this.HandlerTkWhiteBoardManager.useWhiteboardTool(n.props.useToolKey,n.instanceId),n.props.useToolColor!==e.useToolColor){var o={primaryColor:n.props.useToolColor};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(o,n.instanceId)}if(n.props.pencilWidth!==e.pencilWidth){var r={pencilWidth:n.props.pencilWidth,eraserWidth:n.props.pencilWidth};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(r,n.instanceId)}if(n.props.fontSize!==e.fontSize){var s={fontSize:n.props.fontSize};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(s,n.instanceId)}if(n.props.fontFamily!==e.fontFamily){var l={fontFamily:n.props.fontFamily};this.HandlerTkWhiteBoardManager.changeWhiteBoardConfigration(l,n.instanceId)}this.props.watermarkImageUrl!==e.watermarkImageUrl&&this.HandlerWhiteboardAndCoreInstance.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl),n.props.watermarkImageScalc!==e.watermarkImageScalc&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardWatermarkImageScale(n.instanceId,n.props.watermarkImageScalc),n.props.isBaseboard!==e.isBaseboard&&this.HandlerWhiteboardAndCoreInstance.updateIsBaseboard(n.instanceId,n.props.isBaseboard),n.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&this.HandlerWhiteboardAndCoreInstance.updateDependenceBaseboardWhiteboardID(n.instanceId,n.props.dependenceBaseboardWhiteboardID),n.props.saveRedoStack!==e.saveRedoStack&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardSaveRedoStackAndSaveUndoStack(n.instanceId,{saveRedoStack:n.props.saveRedoStack})}},{key:"_receiveActionCommand",value:function(e,t){if(this.props.receiveVideoWhiteboardSDKAction){var a={action:e,cmd:t};this.props.receiveVideoWhiteboardSDKAction(a)}}},{key:"handlerResizeHandler",value:function(){this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId)}},{key:"_lcInit",value:function(){if(document.getElementById(this.whiteboardElementId)){var e=document.getElementById(this.whiteboardElementId),t={};t="mobile"===TK.SDKTYPE?"videoDrawWhiteboardComponent"===I.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===I.default.clientComponentName?{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},isConnectedRoom:!0,canDraw:this.props.deawPermission,synchronization:!0,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor}:{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},canDraw:this.props.deawPermission,synchronization:!0,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor}:{initWhiteboardProductionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,needLooadBaseboard:this.props.needLooadBaseboard,associatedMsgID:this.props.associatedMsgID},canDraw:this.props.deawPermission,isLoadWhiteboardToolBar:!1,backgroundColor:this.props.backgroundColor,primaryColor:this.props.useToolColor},this.HandlerTkWhiteBoardManager.createExtendWhiteboard(e,this.instanceId,t,this._receiveActionCommand.bind(this)),this.HandlerTkWhiteBoardManager.updateWhiteboardSize(this.instanceId),this.props.watermarkImageScalc&&void 0!==this.props.watermarkImageScalc&&this.HandlerWhiteboardAndCoreInstance.updateWhiteboardWatermarkImageScale(this.instanceId,this.props.watermarkImageScalc),this.props.watermarkImageUrl&&void 0!==this.props.watermarkImageUrl&&this.HandlerWhiteboardAndCoreInstance.setWhiteboardWatermarkImage(this.instanceId,this.props.watermarkImageUrl)}}},{key:"render",value:function(){var e=this,t=e.props,a=t.show,n=(0,s.default)(t,["show"]);return y.default.createElement("div",(0,o.default)({id:e.whiteboardElementId,style:{display:a?"block":"none",width:this.containerWidthAndHeight.width?this.containerWidthAndHeight.width:"100%",height:this.containerWidthAndHeight.height?this.containerWidthAndHeight.height:"100%"},className:"overflow-hidden  scroll-literally-container "},D.default.filterContainDataAttribute(n)))}}]),t}(y.default.Component));B.propTypes={instanceId:S.default.string.isRequired},t.default=B},fZOM:function(e,t,a){var n=a("kM2E"),i=a("mbce")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},fZjL:function(e,t,a){e.exports={default:a("jFbC"),__esModule:!0}},fxRn:function(e,t,a){a("+tPU"),a("zQR9"),e.exports=a("g8Ux")},g4PW:function(e,t,a){e.exports={default:a("4O1h"),__esModule:!0}},g8Ux:function(e,t,a){var n=a("77Pl"),i=a("3fs2");e.exports=a("FeBl").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},gDty:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a("pFYg"),o=n(i),r=a("woOf"),s=n(r);Object.customAssign=function(e){try{return s.default.apply(s.default,arguments)}catch(r){for(var t=L.Utils.toJsonParse(L.Utils.toJsonStringify(e)),a=1;a<arguments.length;a++){var n=arguments[a];if(n&&"object"===(void 0===n?"undefined":(0,o.default)(n)))for(var i in n)t[i]=n[i]}return e=t||{}}}},gRE1:function(e,t,a){e.exports={default:a("TmV0"),__esModule:!0}},gSvA:function(e,t,a){var n=a("kM2E"),i=a("mbce")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},hHPy:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("BO1k"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),d=n(l),u=a("wxAW"),c=n(u),h=a("zwoO"),f=n(h),m=a("Pf15"),g=n(m),p=a("GiK3"),v=n(p),b=a("O27J"),y=(n(b),a("HUPQ")),k=n(y),S=a("VSuD"),w=n(S),T=a("DrPG"),C=n(T),D=a("T+56"),E=n(D),I=a("Sa83"),P=(n(I),a("yE5a")),A=n(P),R=a("YRCL"),B=n(R),_=a("EXAz"),x=n(_),M=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.props.id,a.state={responderIsShow:!1,answerText:"begin",beginIsStatus:!1,firstUser:!1,responderMsgTitle:"clickTitle",translateMove:null,isHasTransition:!1,resizeInfo:{width:0,height:0},studentIsGifImg:!1,startTime:0,endTime:0,playBackServerTime:0,getUserPublishState:null},a.userSort={},a.userArry=[],a.isClick=!1,a.timesRun=3,a.isSetDefaultPosition=!1,a.teacherTimeOut=null,a.isHasTransition=!1,a.intervals=void 0,a.timeOutIntervals=void 0,a.temporaryStyle={percentLeft:null,percentTop:null},a.isRestart=!1,a.responderBeginTsValue=0,a.fastBackWard=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener("receive-msglist-ResponderDrag",e.handlerMsglistResponderDrag.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener("receive-msglist-QiangDaZhe",e.handlerMsglistQiangDaZhe.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,e.handlerRoomUserpropertyChanged.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackEnd,e.handlerRoomPlaybackPlaybackEnd.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackPlaybackUpdatetime,e.handlerRoomPlaybackPlaybackUpdatetime.bind(e),e.listernerBackupid),E.default.CoreController.addEventListener(w.default.EVENTTYPE.RoomEvent.roomPlaybackDuration,e.handlerRoomPlaybackDuration.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;E.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.isHasTransition!==this.state.isHasTransition&&this.state.isHasTransition&&(this.isHasTransition=!1,this.setState({isHasTransition:!1})),t.responderIsShow!==this.state.responderIsShow&&this.state.responderIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition());var a=(t.playBackServerTime/1e3).toFixed(0),n=(this.state.playBackServerTime/1e3).toFixed(0);t.playBackServerTime!==this.state.playBackServerTime&&Math.abs(n-a)>1&&this.responderBeginTsValue&&this.state.playBackServerTime&&(this.fastBackWard=!0,this.playBackResponderHandle())}},{key:"handlerRoomDisconnected",value:function(){this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"playBackResponderHandle",value:function(){var e=this;if(e.state.playBackServerTime&&e.responderBeginTsValue){var t=e._timeDifferenceToFormat(e.state.startTime,e.state.playBackServerTime),a=e._timeDifferenceToFormat(e.state.startTime,e.responderBeginTsValue);if(t<=a&&(clearTimeout(this.state.teacherTimeOut),e._clearDataHandle()),t-a>=8&&(clearTimeout(e.state.teacherTimeOut),e.state.firstUser?e.setState({answerText:e.state.answerText,responderMsgTitle:e.state.responderMsgTitle}):e.setState({answerText:"restart",responderMsgTitle:"noContest"})),t-a>0&&t-a<8){var n=t-a,i=1e3*(8-n);e.setState({responderMsgTitle:"inAnswerTitle",answerText:"inAnswerBtn"}),e.state.teacherTimeOut=setTimeout(function(){e.state.firstUser?e.setState({answerText:e.state.answerText,responderMsgTitle:e.state.responderMsgTitle,beginIsStatus:!1}):e.setState({answerText:"restart",responderMsgTitle:"noContest",beginIsStatus:!1})},i)}}}},{key:"handlerRoomPlaybackPlaybackEnd",value:function(){this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!k.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this._clearDataHandle(),this.setState({responderIsShow:!1})}},{key:"handlerRoomPlaybackPlaybackUpdatetime",value:function(e){var t=e.message.current;this.setState({playBackServerTime:t})}},{key:"handlerRoomPlaybackDuration",value:function(e){var t=this,a=e.message,n=a.startTime,i=a.endTime;t.setState({startTime:n,endTime:i})}},{key:"_timeDifferenceToFormat",value:function(e,t){var a=C.default.getTimeDifferenceToFormat(e,t),n=void 0;if(a){var i=a.hh,o=a.mm,r=a.ss;n=Number(r)+60*o+360*i}return n}},{key:"handlerMsglistResponderDrag",value:function(e){var t=this;e.message.ResponderDragArray.map(function(e,a){t.temporaryStyle.percentLeft=e.data.percentLeft,t.temporaryStyle.percentTop=e.data.percentTop})}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:.5,percentTop:0,isDrag:!1},!0)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"qiangDaQi":w.default.hasRole.roleStudent?(this.state.getUserPublishState>0||A.default.getTkRoom().getMySelf().publishstate>0)&&t._studentRecevedServiceQiangDaQiData(a):t._teacherRecevedServiceQiangDaQiData(a);break;case"QiangDaZhe":w.default.hasRole.roleStudent?t._studentRecevedServiceQiangDaZheData(a):t._teacherRecevedServiceQiangDaZheData(a);break;case"ResponderDrag":t.temporaryStyle.percentLeft=a.data.percentLeft,t.temporaryStyle.percentTop=a.data.percentTop}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":t._clearDataHandle(),t.setState({responderIsShow:!1});break;case"qiangDaQi":w.default.hasRole.roleStudent?(t._clearDataHandle(),t.setState({responderIsShow:!1})):a.data.isShow?(t._clearDataHandle(),t.setState({responderIsShow:!0})):(t._clearDataHandle(),t.setState({responderIsShow:!1}))}}},{key:"_clearDataHandle",value:function(){clearTimeout(this.teacherTimeOut),clearInterval(this.intervals),clearTimeout(this.timeOutIntervals),this.setState({answerText:"begin",beginIsStatus:!1,firstUser:!1,responderMsgTitle:"clickTitle",translateMove:null,isHasTransition:!1,resizeInfo:{width:0,height:0},getUserPublishState:null}),this.isClick=!1,this.userSort={},this.userArry=[],this.isRestart=!1,this.timesRun=3,this.isSetDefaultPosition=!1,this.teacherTimeOut=null,this.isHasTransition=!1,this.intervals=void 0,this.timeOutIntervals=void 0,this.temporaryStyle={percentLeft:null,percentTop:null}}},{key:"handlerRoomUserpropertyChanged",value:function(e){A.default.getTkRoom().getMySelf().id===e.user.id&&void 0!==e.message.publishstate&&this.setState({getUserPublishState:e.message.publishstate})}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var r,s=(0,o.default)(e.message.qiangDaQiArr);!(a=(r=s.next()).done);a=!0){var l=r.value;w.default.hasRole.roleStudent?(this.state.getUserPublishState>0||A.default.getTkRoom().getMySelf().publishstate>0)&&t._studentRecevedServiceQiangDaQiData(l):t._teacherRecevedServiceQiangDaQiData(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"handlerMsglistQiangDaZhe",value:function(e){var t=this,a=!0,n=!1,i=void 0;try{for(var r,s=(0,o.default)(e.message.QiangDaZheArr);!(a=(r=s.next()).done);a=!0){var l=r.value;w.default.hasRole.roleStudent?t._studentRecevedServiceQiangDaZheData(l):t._teacherRecevedServiceQiangDaZheData(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"_teacherRecevedServiceQiangDaQiData",value:function(e){var t=this;this.isSetDefaultPosition=!0;var a=k.default.serviceTime/1e3-e.ts;e.data.isShow&&(clearTimeout(t.teacherTimeOut),t.setState({responderIsShow:!0,answerText:"begin"}),e.data.begin&&(this.setState({beginIsStatus:e.data.begin}),this.isRestart=!0,this.responderBeginTsValue=e.ts,a>=8?(clearTimeout(t.teacherTimeOut),t.state.firstUser?t.setState({answerText:t.state.answerText,responderMsgTitle:t.state.responderMsgTitle,beginIsStatus:!1}):t.setState({answerText:"restart",responderMsgTitle:"noContest",beginIsStatus:!1})):(t.setState({beginIsStatus:e.data.begin,responderMsgTitle:"inAnswerTitle",answerText:"inAnswerBtn"}),t.teacherTimeOut=setTimeout(function(){t.state.firstUser?t.setState({answerText:t.state.answerText,responderMsgTitle:t.state.responderMsgTitle,beginIsStatus:!1}):t.setState({answerText:"restart",responderMsgTitle:"noContest",beginIsStatus:!1})},8e3))))}},{key:"_teacherRecevedServiceQiangDaZheData",value:function(e){var t=this;if(e.data.isClick){clearTimeout(t.teacherTimeOut),t.userSort[e.fromID]={},t.userSort[e.fromID][e.seq]=e.data.userAdmin,t.userArry=[];for(var a in t.userSort)for(var n in t.userSort[a])t.userArry.push(n),t.userArry=t.userArry.sort(),void 0!==t.userSort[a][t.userArry[0]]&&t.setState({answerText:"somebodyTeacher",responderMsgTitle:t.userSort[a][t.userArry[0]]});this.isRestart=!0,t.setState({firstUser:!0,beginIsStatus:!1})}}},{key:"_studentRecevedServiceQiangDaQiData",value:function(e){var t=this,a=t.props,n=a.id,i=a.draggableData,o=k.default.serviceTime/1e3-e.ts;if(t.setState({responderMsgTitle:"inAnswerStudent",answerText:"inAnswerStudent",beginIsStatus:e.data.begin}),e.data.begin){if(o>=8){var r=void 0,s=void 0;null===t.temporaryStyle.percentLeft?(r=.5,s=0):(r=t.temporaryStyle.percentLeft,s=t.temporaryStyle.percentTop),i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:r,percentTop:s,isDrag:!0},!1),t.setState({beginIsStatus:!1,responderMsgTitle:"noContest",answerText:"noContest",studentIsGifImg:!1})}else t.intervals=setInterval(function(){t.timesRun-=1,0===t.timesRun&&i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:.2,percentTop:.2,isDrag:!0},!1),1===t.timesRun&&i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:.4,percentTop:.6,isDrag:!0},!1),2===t.timesRun&&i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:.7,percentTop:.2,isDrag:!0},!1),t.timesRun<=0&&(clearInterval(t.intervals),t.setState({beginIsStatus:!1,studentIsGifImg:!0,responderMsgTitle:"clickTitle",answerText:"begin"}),!1===t.isClick&&(t.timeOutIntervals=setTimeout(function(){var e=void 0,a=void 0;null===t.temporaryStyle.percentLeft?(e=.5,a=0):(e=t.temporaryStyle.percentLeft,a=t.temporaryStyle.percentTop),t.isHasTransition=!0,i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:e,percentTop:a,isDrag:!0},!1),t.setState({isHasTransition:t.isHasTransition,responderMsgTitle:"noContest",beginIsStatus:!1,studentIsGifImg:!1,answerText:"noContest"})},4500)))},1e3);t.setState({responderIsShow:!0})}}},{key:"_studentRecevedServiceQiangDaZheData",value:function(e){var t=this,a=t.props,n=a.id,i=a.draggableData,o=[];if(e.data.isClick){t.userSort[e.fromID]={},t.userSort[e.fromID][e.seq]=e.data.userAdmin;for(var r in t.userSort)for(var s in t.userSort[r])o.push(s),t.userArry=o.sort(),void 0!==t.userSort[r][t.userArry[0]]&&(r===A.default.getTkRoom().getMySelf().id?t.setState({responderMsgTitle:"my",answerText:"other"}):t.setState({responderMsgTitle:t.userSort[r][t.userArry[0]],answerText:"other"}));clearInterval(t.intervals),clearTimeout(t.timeOutIntervals);var l=void 0,d=void 0;null===t.temporaryStyle.percentLeft?(l=.5,d=0):(l=t.temporaryStyle.percentLeft,d=t.temporaryStyle.percentTop),i.changePosition&&"function"==typeof i.changePosition&&i.changePosition(n,{percentLeft:l,percentTop:d,isDrag:!0},!1),t.setState({responderMsgTitle:t.state.responderMsgTitle}),this.isClick=e.data.isClick}}},{key:"beginOrRestartResponder",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant)if(this.state.beginIsStatus||this.isRestart)!this.state.beginIsStatus&&this.isRestart&&this.restartResponder();else{var e={isShow:this.state.responderIsShow,begin:!0,userAdmin:""};B.default.sendSignallingQiangDaQi(!1,e)}else w.default.hasRole.roleStudent&&this.studentResponder()}},{key:"studentResponder",value:function(){var e=A.default.getTkRoom().getMySelf();if((this.state.getUserPublishState>0||e.publishstate>0)&&w.default.hasRole.roleStudent&&"begin"===this.state.answerText&&!this.isClick){this.isClick=!0;var t={userAdmin:e.nickname,isClick:!0};B.default.sendSignallingQiangDaZhe(!1,t)}}},{key:"closeResponder",value:function(){if(w.default.hasRole.roleChairman||w.default.hasRole.roleTeachingAssistant){var e={};B.default.sendSignallingQiangDaQi(!0,e),E.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"responder"}})}}},{key:"restartResponder",value:function(){var e={isShow:!0,begin:!1,userAdmin:""},t=!0;B.default.sendSignallingQiangDaQi(t,e),t=!1,B.default.sendSignallingQiangDaQi(t,e);var a=this.props,n=a.id,i=a.responderDrag,o=a.draggableData;o.changePosition&&"function"==typeof o.changePosition&&o.changePosition(n,i,!0)}},{key:"render",value:function(){var e=this,t=e.props,a=t.id,n=t.responderDrag,i=t.draggableData,o=e.state,r=o.answerText,s=o.responderMsgTitle,l=o.firstUser,d=o.beginIsStatus,u=o.studentIsGifImg,c={display:this.state.responderIsShow?"block":"none"},h=Object.customAssign({id:a,percentPosition:{percentLeft:n.percentLeft,percentTop:n.percentTop}},i);return v.default.createElement(x.default,h,v.default.createElement("div",{id:a,style:c,className:"responder-wrap"},v.default.createElement("div",{className:"responder-lining"},v.default.createElement("div",{className:"responder-circle touch-select-select defalut-bg"+(d||w.default.hasRole.roleStudent&&u?" gif-img":"")+(l?" somebody-click":" nobody-click")},v.default.createElement("div",{className:"responder-msg-title"}," ",k.default.language.languageData.responder[s]&&void 0!==k.default.language.languageData.responder[s].text?k.default.language.languageData.responder[s].text:s),v.default.createElement("div",{className:"responder-begin-circle"+(d?" disabled":""),onClick:this.beginOrRestartResponder.bind(this)},k.default.language.languageData.responder[r].text),w.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"responder-close-img",onClick:this.closeResponder.bind(this)})))))}}]),t}(v.default.Component);t.default=M},hxXK:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("GiK3"),o=n(i),r=a("VSuD"),s=n(r),l=a("HUPQ"),d=n(l),u=function(e){var t=e.dispose,a=e.parentState,n=a.questionState,i=(a.role,a.hasPub),r=a.options,l=a.pubRight;return o.default.createElement("div",{className:"footer"},o.default.createElement("div",{className:"footer-left"},o.default.createElement("span",{className:"hint item",style:{display:s.default.hasRole.roleStudent&&a.rightOptions.length<=0||s.default.hasRole.roleStudent&&!l?"none":""}},s.default.hasRole.roleStudent?l&&a.rightOptions.length>0?d.default.language.languageData.qPanel.rightOptionIs+":"+(a.rightOptions&&a.rightOptions.map(function(e){return String.fromCharCode("A".charCodeAt()+e)})):"":"RUNNING"===a.questionState||"FINISHED"===a.questionState?d.default.language.languageData.qPanel.rightOptionIs+":"+(a.rightOptions&&a.rightOptions.map(function(e){return String.fromCharCode("A".charCodeAt()+e)}))+(!0===a.hasPub?"("+d.default.language.languageData.qPanel.hasPub+")":""):d.default.language.languageData.qPanel.tips[0]),o.default.createElement("span",{className:"hint item empty",style:{display:!s.default.hasRole.roleStudent&&"UNSTART"===a.questionState&&a.hintShow?"":"none"}},d.default.language.languageData.qPanel.tips[1]),o.default.createElement("span",{className:" option item",style:{display:s.default.hasRole.roleStudent&&"FINISHED"===a.questionState?"":"none"}},d.default.language.languageData.qPanel.myAnswer,":",r.map(function(e,t){return!0===e.hasChose&&String.fromCharCode("A".charCodeAt()+t)||void 0}).filter(function(e){return void 0!==e}).toString()),o.default.createElement("button",{onClick:function(){t({action:"publishResult",data:{}})},disabled:i&&!0,style:{display:"FINISHED"===n&&(s.default.hasRole.roleChairman||s.default.hasRole.roleTeachingAssistant)&&s.default.joinRoomInfo&&s.default.joinRoomInfo.isShowTheAnswer?"":"none"},className:"item pub-btn"},i?d.default.language.languageData.qPanel.hasPub:d.default.language.languageData.qPanel.pubResult)),o.default.createElement("button",{className:"ques-state-btn item",onClick:function(){t({action:s.default.hasRole.roleStudent?"changeCommitState":"changeQuestionState",data:{}})},style:{display:"FINISHED"!==n||s.default.hasRole.roleChairman||s.default.hasRole.roleTeachingAssistant?"":"none"},disabled:!(s.default.hasRole.roleChairman||s.default.hasRole.roleStudent||s.default.hasRole.roleTeachingAssistant)},s.default.hasRole.roleStudent?"UNCOMMIT"===a.commitState?d.default.language.languageData.qPanel.commitAnswer:d.default.language.languageData.qPanel.modifyAnswer:"UNSTART"===a.questionState?d.default.language.languageData.qPanel.start:"RUNNING"===a.questionState?d.default.language.languageData.qPanel.end:d.default.language.languageData.qPanel.restart))};t.default=u},iCxh:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("BO1k"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),d=n(l),u=a("wxAW"),c=n(u),h=a("zwoO"),f=n(h),m=a("Pf15"),g=n(m),p=a("GiK3"),v=n(p),b=a("HUPQ"),y=n(b),k=a("VSuD"),S=n(k),w=a("T+56"),T=n(w),C=a("YRCL"),D=n(C),E=a("DrPG"),I=(n(E),a("EXAz")),P=n(I),A=a("yE5a"),R=(n(A),function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={dialIsShow:!1,dialIconClose:!1,turnTableDeg:"rotate(0)"},a.deg=50,a.num=0,a.numdeg=0,a.isClick=!1,a.msgDeg=!1,a.isSetDefaultPosition=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;T.default.CoreController.addEventListener("receive-msglist-dial",e.handlerMsglistDialShow.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;T.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.dialIsShow!==this.state.dialIsShow&&this.state.dialIsShow&&this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var o=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:o,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!0)}}},{key:"handlerMsglistDialShow",value:function(e){var t=this;this.msgDeg=!0;var a=!0,n=!1,i=void 0;try{for(var r,s=(0,o.default)(e.message.dialShowArr);!(a=(r=s.next()).done);a=!0){var l=r.value;t.handlerDisplayTeachTool(l)}}catch(e){n=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"dial":t.handlerDisplayTeachTool(a)}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"dial":case"ClassBegin":t._clearDataHanler()}}},{key:"handlerRoomDisconnected",value:function(){this._clearDataHanler()}},{key:"_clearDataHanler",value:function(){this.deg=50,this.num=0,this.numdeg=0,this.isClick=!1,this.msgDeg=!1,this.isSetDefaultPosition=!1,this.setState({dialIsShow:!1,dialIconClose:!1,turnTableDeg:"rotate(0)"})}},{key:"handlerDisplayTeachTool",value:function(e){var t=this;this.isSetDefaultPosition=!0,t.refs.turnTable.style.transform="rotate(0)",t.refs.turnTable.style.transition="transform 0s ease",S.default.hasRole.roleStudent?(t.refs.turnTable.style.transition="transform 4s ease",e.data.isShow?t.setState({dialIsShow:!0,turnTableDeg:"rotate(0)",dialIconClose:!1}):t.setState({turnTableDeg:e.data.rotationAngle,dialIconClose:!1,dialIsShow:!0})):(t.refs.turnTable.style.transition="transform 4s ease",e.data.isShow?t.setState({dialIsShow:!0,turnTableDeg:t.state.turnTableDeg,dialIconClose:!0}):(this.msgDeg=!1,t.setState({turnTableDeg:e.data.rotationAngle,dialIconClose:!1,dialIsShow:!0}),setTimeout(function(){t.setState({dialIconClose:!0}),t.isClick=!1},4e3)))}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!y.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");this._clearDataHanler()}},{key:"clickBeginHandle",value:function(){if(S.default.hasRole.roleStudent||!0===this.isClick||S.default.hasRole.rolePatrol)return!1;this.msgDeg&&this.setState({turnTableDeg:"rotate(0)"});var e=Math.floor(5*Math.random()+1);this.num=e+this.num,this.numdeg+=e*this.deg+360*Math.floor(2*Math.random()+3),90!==this.numdeg.toString().substr(-2)&&30!==this.numdeg.toString().substr(-2)&&10!==this.numdeg.toString().substr(-2)&&50!==this.numdeg.toString().substr(-2)&&70!==this.numdeg.toString().substr(-2)||(this.numdeg=this.numdeg+30),this.isClick=!0,this.msgDeg=!1;var t={rotationAngle:"rotate("+this.numdeg+"deg)",isShow:!1};D.default.sendSignallingDialToStudent(t)}},{key:"dialCloseHandle",value:function(){if(S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant){var e={};D.default.sendSignallingDialToStudent(e,!0)}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.dialDrag,n=e.draggableData,i={position:"absolute",zIndex:130,display:this.state.dialIsShow?"block":"none",left:0,top:0},o=Object.customAssign({id:t,percentPosition:{percentLeft:a.percentLeft,percentTop:a.percentTop}},n);return v.default.createElement(P.default,o,v.default.createElement("div",{id:"dialDrag",className:S.default.hasRole.roleChairman||S.default.hasRole.roleTeachingAssistant?"teacher":"student",style:i},v.default.createElement("div",{className:"dial-teachComponent-bg touch-select-select ",ref:"dialTeachComponentBg",style:{display:this.state.dialIsShow}},v.default.createElement("button",{alt:"pointer",className:"dial-teachComponent-pointer-button",onClick:this.clickBeginHandle.bind(this)}),v.default.createElement("div",{className:"dial-teachComponent-turntable",ref:"turnTable",style:{transition:"transform 4s ease",transform:this.state.turnTableDeg}}),S.default.hasRole.roleStudent?void 0:v.default.createElement("div",{className:"dialCloseP",onClick:this.dialCloseHandle.bind(this),style:{display:this.state.dialIconClose?"block":"none"}}))))}}]),t}(v.default.Component));t.default=R},iHfv:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),o=n(i),r=a("Dd8w"),s=n(r),l=a("Zx67"),d=n(l),u=a("Zrlr"),c=n(u),h=a("wxAW"),f=n(h),m=a("zwoO"),g=n(m),p=a("Pf15"),v=n(p),b=a("GiK3"),y=n(b),k=a("HUPQ"),S=n(k),w=a("VSuD"),T=n(w),C=a("fZJ/"),D=n(C),E=a("T+56"),I=n(E),P=a("Sa83"),A=n(P),R=a("DrPG"),B=(n(R),a("yE5a")),_=n(B),x=a("YRCL"),M=(n(x),a("F5u0")),N=n(M),L=a("ZZXC"),W=n(L),O=function(e){function t(e,a){(0,c.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e,a));return n.state={videoDrawBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageScalc:16/9,isShow:!1,backgroundColor:"transparent",instanceId:n.props.videoDrawingBoardInstanceId||"videoDrawBoard",saveImage:!1,nickname:n.props.videoDrawingBoardInstanceId||"videoDrawBoard",deawPermission:!1,associatedMsgID:"VideoWhiteboard",role:void 0},useToolInfo:{useToolKey:"tool_pencil",useToolColor:n._changeWhiteboardConfig(),blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:15},selectBlackboardToolSizeId:"blackboard_size_small"},BlackboardSmartIsShow:!1,stream:void 0,eraserIsDisabled:!0,isShowPenList:!1,isShowEraser:!1},n.streamType=void 0,n.userid=void 0,n.watermarkImageScalc=void 0,n.listernerBackupid=(new Date).getTime()+"_"+Math.random(),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;I.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),I.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),I.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),I.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),I.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),I.default.CoreController.addEventListener("receive-msglist-VideoWhiteboard",e.receiveMsglistVideoWhiteboard.bind(e),e.listernerBackupid),I.default.CoreController.addEventListener(T.default.EVENTTYPE.RoomEvent.roomUpdateFakeJsSdkInitInfo,e.roomUpdateFakeJsSdkInitInfo.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this,t=(0,s.default)({},this.state.videoDrawBoardInfo);I.default.CoreController.removeBackupListerner(e.listernerBackupid),_.default.getTkWhiteBoardManager().destroyExtendWhiteboard(t.instanceId),_.default.getTkWhiteBoardManager().resetWhiteboardData(t.instanceId)}},{key:"componentDidUpdate",value:function(e,t){t.videoDrawBoardInfo.isShow!==this.state.videoDrawBoardInfo.isShow&&this.setState({BlackboardSmartIsShow:this.state.videoDrawBoardInfo.isShow})}},{key:"handlerRoomConnected",value:function(){}},{key:"handlerRoomPlaybackClearAll",value:function(){var e=(0,s.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e})}},{key:"handlerRoomDisconnected",value:function(){var e=(0,s.default)({},this.state.videoDrawBoardInfo);e.isShow=!1,this.setState({videoDrawBoardInfo:e}),_.default.getTkWhiteBoardManager().destroyExtendWhiteboard(e.instanceId),_.default.getTkWhiteBoardManager().resetWhiteboardData(e.instanceId)}},{key:"roomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message,a=(t._skinId,t._tplId,t.deviceType),n=t.myself,i=t.languageType;T.default.updateTemplate("template_beyond"),T.default.updateSkin("skin_beyond_default"),S.default.mobileDeviceType=a;var o="ch"===i?"chinese":"tw"===i?"complex":"english";S.default.languageName=o,W.default.getAppLanguageInfo(function(e){S.default.language=e},o),this.setState({role:n.role})}},{key:"receiveVideoWhiteboardSDKAction",value:function(e){var t=e.action,a=e.cmd;if("viewStateUpdate"===t){var n=a.viewState.tool.tool_eraser.disabled;this.setState({eraserIsDisabled:n})}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"VideoWhiteboard":var a=(0,s.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,0!==this.state.role&&1!==this.state.role?a.deawPermission=!1:a.deawPermission=!0,t.data&&"object"===(0,o.default)(t.data)&&t.data.videoRatio&&(a.watermarkImageScalc=t.data.videoRatio),this.setState({videoDrawBoardInfo:a})}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"VideoWhiteboard":case"ClassBegin":var t=(0,s.default)({},this.state.videoDrawBoardInfo),a=(0,s.default)({},this.state.useToolInfo);t.isShow=!1,t.deawPermission=!1,a.useToolKey="tool_pencil",a.useToolColor=this._changeWhiteboardConfig(),a.blackboardToolsInfo="mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:15},a.selectBlackboardToolSizeId="blackboard_size_small",this.setState({eraserIsDisabled:!0,isShowPenList:!1,videoDrawBoardInfo:t,useToolInfo:a}),_.default.getTkWhiteBoardManager().destroyExtendWhiteboard(t.instanceId)}}},{key:"receiveMsglistVideoWhiteboard",value:function(e){var t=e.message.VideoWhiteboardArray[0].data,a=(0,s.default)({},this.state.videoDrawBoardInfo);a.isShow=!0,a.deawPermission=A.default.handler.getAppPermissions("isShowVideoDrawTool"),t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&t.videoRatio&&(a.watermarkImageScalc=t.videoRatio),this.setState({videoDrawBoardInfo:a})}},{key:"_changeWhiteboardConfig",value:function(){if(T.default.joinRoomInfo.customWhiteboardBackground){var e=T.default.joinRoomInfo.whiteboardcolor,t=void 0;return(T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant)&&(t="ffffff"===S.default.customWhiteboardColorArry[e]?"#ED3E3A":"#EDEDED"),t}return"#ED3E3A"}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=["#00CBFF","#FFCC00","#ED3E3A","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"];return a.forEach(function(n,i){var o=y.default.createElement("button",{className:"color-option color-"+e._colorFilter(n)+" "+(e.state.useToolInfo.useToolColor===n?" active":""),key:i,onClick:e.changeStrokeColorClick.bind(e,n),"data-color":a[i],id:"blackboard_color_"+e._colorFilter(n)});t.push(o)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"changeStrokeColorClick",value:function(e,t){var a=(0,s.default)({},this.state.useToolInfo);a.useToolColor=e,this.setState({useToolInfo:a,isShowPenList:!1}),t.stopPropagation()}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||("tool_pencil"===e?this.setState({isShowPenList:!this.state.isShowPenList,isShowEraser:!1}):"tool_eraser"!==e||this.state.eraserIsDisabled||this.setState({isShowPenList:!1,isShowEraser:!this.state.isShowEraser}),this.state.useToolInfo.useToolKey=e,this.setState({useToolInfo:this.state.useToolInfo}))}},{key:"_changeStrokeSizeClick",value:function(e,t){this.state.useToolInfo.selectBlackboardToolSizeId=e,this.state.useToolInfo.blackboardToolsInfo=t,this.setState({useToolInfo:this.state.useToolInfo})}},{key:"playMediaHandle",value:function(){"videoDrawWhiteboardComponent"===S.default.clientComponentName?_.default.getTkRoom().exitAnnotation("media"):"localFileVideoDrawWhiteboardComponent"===S.default.clientComponentName&&_.default.getTkRoom().exitAnnotation("file")}},{key:"onAfterChangeEraserWidth",value:function(e){var t=(0,s.default)({},this.state.useToolInfo);t.blackboardToolsInfo.eraser=e<1?1:e,this.setState({useToolInfo:t})}},{key:"onAfterChangePencilWidth",value:function(e){var t=(0,s.default)({},this.state.useToolInfo);t.blackboardToolsInfo.pencil=e<1?1:e,this.setState({useToolInfo:t})}},{key:"render",value:function(){var e=this,t=e.state,a=t.videoDrawBoardInfo,n=t.useToolInfo,i=t.role,o=t.eraserIsDisabled,r=n.useToolKey,s=e._loadToolColorsElementArray(),l=s.toolColorsArray,d="tool_eraser"===r?n.blackboardToolsInfo.eraser:n.blackboardToolsInfo.pencil;return y.default.createElement("div",{className:"video-drawing-board-box",style:{display:a.isShow?"block":"none"}},y.default.createElement("div",{className:"video-drawing-board"},this.state.BlackboardSmartIsShow?y.default.createElement(D.default,{isBaseboard:!1,containerWidthAndHeight:a.containerWidthAndHeight,instanceId:a.instanceId,nickname:a.nickname,show:this.state.BlackboardSmartIsShow,backgroundColor:a.backgroundColor,useToolKey:r,fontSize:n.blackboardToolsInfo.text,useToolColor:n.useToolColor,pencilWidth:d,showShapeAuthor:!1,deawPermission:a.deawPermission,watermarkImageScalc:a.watermarkImageScalc,associatedMsgID:a.associatedMsgID,receiveVideoWhiteboardSDKAction:this.receiveVideoWhiteboardSDKAction.bind(this)}):void 0),0!==i&&1!==i&&-1!==i?void 0:y.default.createElement("ul",{id:"video-drawing-tool",className:"blackboard-tool clear-float"},y.default.createElement("li",{className:"blackboard-tool-option"+("tool_pencil"===r?" active":"")},y.default.createElement("button",{id:"video_blackboard_tool_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===r?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleToolClick.bind(e,"tool_pencil")}),y.default.createElement("div",{className:"tool-pen-list-extend",style:{display:this.state.isShowPenList?"block":"none"}},y.default.createElement("div",{className:"colors-container"},l),y.default.createElement("div",{className:"silder-width"},y.default.createElement("span",{className:"slider-title"},S.default.language.languageData.newTemplateLanguage.lineWidth),y.default.createElement(N.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this),value:n.blackboardToolsInfo.pencil}),y.default.createElement("span",{className:"slider-value"},n.blackboardToolsInfo.pencil)))),y.default.createElement("li",{className:"blackboard-tool-option"+("tool_text"===r?" active":""),style:{display:"none"}}," ",y.default.createElement("button",{id:"video_blackboard_tool_text",className:"tool-btn text-icon"+("tool_text"===r?" active":""),title:S.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleToolClick.bind(e,"tool_text")})),y.default.createElement("li",{className:"blackboard-tool-option"+("tool_eraser"===r?" active":"")},y.default.createElement("button",{id:"video_blackboard_tool_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===r?" active":"")+(o?" disable":""),disabled:o,title:S.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleToolClick.bind(e,"tool_eraser")}),y.default.createElement("div",{className:"tool-eraser-list-extend silder-width",style:{display:this.state.isShowEraser&&!this.state.eraserIsDisabled?"flex":"none"}},y.default.createElement("em",{className:"arrow"}),y.default.createElement("span",{className:"slider-title"},S.default.language.languageData.newTemplateLanguage.eraserWidth),y.default.createElement(N.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this),value:n.blackboardToolsInfo.eraser}),y.default.createElement("span",{className:"slider-value"},n.blackboardToolsInfo.eraser))),y.default.createElement("li",{className:"blackboard-tool-option"},y.default.createElement("button",{id:"video_blackboard_tool_exit",className:"tool-btn exit-icon",title:S.default.language.languageData.videLabel.exit,onClick:e.playMediaHandle.bind(e)}))))}}]),t}(y.default.Component);t.default=O},ifoU:function(e,t,a){e.exports={default:a("3C/1"),__esModule:!0}},jEnx:function(e,t,a){var n=a("kM2E");n(n.S,"Object",{is:a("CmP/")})},jFbC:function(e,t,a){a("Cdx3"),e.exports=a("FeBl").Object.keys},lnhd:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),o=n(i),r=a("pFYg"),s=n(r),l=a("Dd8w"),d=n(l),u=a("fZjL"),c=n(u),h=a("W3Iv"),f=n(h),m=a("d7EF"),g=n(m),p=a("BO1k"),v=n(p),b=a("Zx67"),y=n(b),k=a("Zrlr"),S=n(k),w=a("wxAW"),T=n(w),C=a("zwoO"),D=n(C),E=a("Pf15"),I=n(E),P=a("GiK3"),A=n(P),R=a("T+56"),B=n(R),_=a("VSuD"),x=n(_),M=a("HUPQ"),N=n(M),W=a("DrPG"),O=(n(W),a("Sa83")),z=(n(O),a("YRCL")),H=n(z),F=a("yE5a"),U=n(F),j=a("fZJ/"),K=n(j),V=a("EXAz"),q=n(V),Q=a("F5u0"),Y=n(Q),Z=function(e){function t(e){(0,S.default)(this,t);var a=(0,D.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e));return a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a.state=Object.customAssign({},a._getDefaultState(),{show:!1,moreBlackboardDrag:{pagingToolLeft:"",pagingToolTop:""},isMinimize:!1,useToolColor:void 0,containerWidthAndHeight:{width:0,height:0},whiteboardWidthAndHeight:{width:0,height:0},resizeInfo:{width:0,height:0},eraserDisabled:!1,isShowPenList:!1,isShowFontList:!1,isShowEraser:!1,scale:void 0}),a.containerWidthAndHeight={},a.isSetDefaultPosition=!1,a.isMsglist=!1,a.countNotice=0,a.msglist_BlackBoard_recvEventData={},a.blackboardCanvasBackgroundColor=a.props.blackboardCanvasBackgroundColor||"#ffffff",a.blackboardThumbnailImageId=a.props.blackboardThumbnailImageId||"blackboardThumbnailImageId",a.associatedMsgID="BlackBoard_new",a.currentTapKey=void 0,a.whiteboardMagnification=16/9,a.maxBlackboardNumber=8,a.studentBlackboardList={},a.hasNewBlackBoard=!1,a.hasUserNewBlackBoard=!1,a.titleContainerHeight=void 0,a.blackboardToolContainerHeight=void 0,a.descArray=void 0,a}return(0,I.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),B.default.Window.addEventListener(x.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomParticipantJoin,e.handlerRoomParticipantJoin.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomParticipantLeave,e.handlerRoomParticipantLeave.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-NewBlackBoard",e.handlerReceive_msglist_NewBlackBoard.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("isSendSignallingFromBlackBoardDrag",e.handlerBlackBoardDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-MoreUsers",e.handlerReceive_msglist_MoreUsers.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-UserHasNewBlackBoard",e.handlerReceive_msglist_UserHasNewBlackBoard.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(x.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,this.handlerRoomUserpropertyChanged.bind(this),this.listernerBackupid),B.default.CoreController.addEventListener("change-minimizedDragAndDropArry",this.changeminimizedDragAndDropArry.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receiveWhiteboardSDKAction",e.receiveWhiteboardSDKAction.bind(e),e.listernerBackupid),this._updateContainerWidthAndHeight()}},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(this.disabledBlackboardToolBtnTimer),B.default.Window.removeBackupListerner(e.listernerBackupid),B.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&(this._updateContainerWidthAndHeight(),this.isSetDefaultPosition&&(this.isSetDefaultPosition=!1,this.setDefaultPosition())),t.blackBoardState!==this.state.blackBoardState&&(this._updateBlackBoardDescListByBlackBoardState(),this._updateContainerWidthAndHeight()),this.updateResize()}},{key:"handlerRoomConnected",value:function(e){this.maxBlackboardNumber="phone"===N.default.mobileDeviceType?3:8}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user;if(t.publishstate&&this.hasNewBlackBoard&&0!==t.publishstate&&2===a.role&&a.id===U.default.getTkRoom().getMySelf().id&&!N.default.playback&&!this.hasUserNewBlackBoard&&x.default.hasRole.roleStudent&&(!N.default.isMoreUsers&&!N.default.HeightConcurrence||0!==t.publishstate&&(N.default.isMoreUsers||N.default.HeightConcurrence))){var n={id:U.default.getTkRoom().getMySelf().id,nickname:U.default.getTkRoom().getMySelf().nickname,role:U.default.getTkRoom().getMySelf().role};H.default.sendSignallingFromUserHasNewBlackBoard(n)}}},{key:"updateResize",value:function(){var e=this,t=this.props.id,a=document.getElementById(t);a&&(clearTimeout(this.testTimer),this.testTimer=setTimeout(function(){var t=N.default.windowInnerWidth/x.default.STANDARDSIZE,n=a.offsetWidth/t,i=a.offsetHeight/t;e.state.resizeInfo&&(Math.abs(e.state.resizeInfo.width-n)>.04||Math.abs(e.state.resizeInfo.height-i)>.04)&&(e.state.resizeInfo={width:n,height:i},e.setState({resizeInfo:e.state.resizeInfo}))},0))}},{key:"setDefaultPosition",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds);if(n&&i){var o=(i.offsetWidth-n.offsetWidth)/2;a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{left:o,top:0,percentLeft:.5,percentTop:0,isDrag:!1},!1)}}},{key:"handlerRoomPlaybackClearAll",value:function(){N.default.isMoreUsers=!1,this._recoverDedaultState()}},{key:"handlerRoomDisconnected",value:function(){this._recoverDedaultState()}},{key:"handlerRoomParticipantJoin",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerRoomParticipantLeave",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerOnResize",value:function(){this._updateContainerWidthAndHeight()}},{key:"handlerResizeHandler",value:function(e){this._updateContainerWidthAndHeight()}},{key:"handlerReceive_msglist_NewBlackBoard",value:function(e){this.isMsglist=!0,this.handlerRoomPubmsg(e)}},{key:"handlerReceive_msglist_MoreUsers",value:function(e){this.handlerRoomPubmsg(e)}},{key:"handlerReceive_msglist_UserHasNewBlackBoard",value:function(e){var t=e.message,a=!0,n=!1,i=void 0;try{for(var o,r=(0,v.default)(t);!(a=(o=r.next()).done);a=!0){var s=o.value,l={};l.message=s,this.handlerRoomPubmsg(l)}}catch(e){n=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"handleCloseWhiteBoardNotice",value:function(){this.setState({show:!1})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"UserHasNewBlackBoard":t.data.id===U.default.getTkRoom().getMySelf().id&&(this.hasUserNewBlackBoard=!0),this._getstudentBlackboardList(t.data,"add"),this._updateBlackBoardDescListByBlackBoardState();break;case"MoreUsers":t.data.hasMoreUser?N.default.isMoreUsers=!0:N.default.playback&&(N.default.isMoreUsers=!1),this._updateBlackBoardDescListByBlackBoardState();break;case"BlackBoard_new":if(this.isSetDefaultPosition=!0,this.hasNewBlackBoard=!0,this.hasUserNewBlackBoard||!x.default.hasRole.roleStudent||0!==U.default.getTkRoom().getMySelf().publishstate||!N.default.isMoreUsers&&!N.default.HeightConcurrence||"_dispenseed"!==t.data.blackBoardState&&"_againDispenseed"!==t.data.blackBoardState){if((x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)&&void 0===this.state.useToolColor?this.setState({useToolColor:"#ED3E3A"}):x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||void 0!==this.state.useToolColor||this.setState({useToolColor:"#000000"}),(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol||x.default.hasRole.rolePlayback)&&"_none"!==t.data.blackBoardState||"_dispenseed"===t.data.blackBoardState||"_recycle"===t.data.blackBoardState||"_againDispenseed"===t.data.blackBoardState){if(!1===this.isMsglist&&(this.isSetDefaultPosition=!0),!N.default.playback&&x.default.hasRole.roleStudent&&!this.hasUserNewBlackBoard&&(!N.default.isMoreUsers&&!N.default.HeightConcurrence||0!==U.default.getTkRoom().getMySelf().publishstate&&(N.default.isMoreUsers||N.default.HeightConcurrence))){var a={id:U.default.getTkRoom().getMySelf().id,nickname:U.default.getTkRoom().getMySelf().nickname,role:U.default.getTkRoom().getMySelf().role};H.default.sendSignallingFromUserHasNewBlackBoard(a)}this.setState({show:!0})}var n=this.currentTapKey,i=this.state.blackBoardState;if(void 0!==t.data.currentTapKey&&(this.currentTapKey=t.data.currentTapKey),"phone"===N.default.mobileDeviceType){var o=this.descArray,r=!0,s=!1,l=void 0;try{for(var d,u=(0,v.default)((0,f.default)(o));!(r=(d=u.next()).done);r=!0){var c=d.value,h=(0,g.default)(c,2),m=h[0],p=h[1];t.data.currentTapKey===p.instanceId&&this.setState({currentTapPage:(1*m+1)/2})}}catch(e){s=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw l}}}else void 0!==t.data.currentTapPage&&this.state.currentTapPage!==t.data.currentTapPage&&(this.state.currentTapPage=t.data.currentTapPage);this.setState({blackBoardState:t.data.blackBoardState,updateState:!this.state.updateState,currentTapPage:this.state.currentTapPage}),i===t.data.blackBoardState&&n!==t.data.currentTapKey&&(!x.default.hasRole.roleStudent||"_dispenseed"!==t.data.blackBoardState&&"_againDispenseed"!==t.data.blackBoardState)&&this._updateBlackBoardDescListByBlackBoardState()}else this.handleCloseWhiteBoardNotice()}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard_new":case"ClassBegin":this._recoverDedaultState();break;case"UserHasNewBlackBoard":this._getstudentBlackboardList(t.data,"delete"),this._updateBlackBoardDescListByBlackBoardState()}}},{key:"handlerBlackBoardDrag",value:function(e){var t=e.message.data;"_recycle"===this.state.blackBoardState&&H.default.sendSignallingFromBlackBoardDrag(t)}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=this,a=e.message,n=a.cmd;switch(a.action){case"viewStateUpdate":for(var i in n.viewState)switch(i){case"scale":var o=Math.abs(n.viewState[i]-16/9),r=Math.abs(n.viewState[i]-4/3);o>.1&&r<=.1?t.setState({scale:0}):o<=.1&&r>.1?t.setState({scale:1}):t.setState({scale:2})}}}},{key:"handlerChangeWebPageWindowSize",value:function(){var e=this,t=this.props,a=t.id,n=t.draggableData,i=document.getElementById(a),o=document.querySelector(n.bounds);this._updateContainerWidthAndHeight(),this.setState({isMinimize:!1});var r=!0,s=!1,l=void 0;try{for(var d,u=(0,v.default)((0,f.default)(N.default.minimizedDragAndDropArry));!(r=(d=u.next()).done);r=!0){var c=d.value,h=(0,g.default)(c,2),m=h[0],p=h[1],b=!0,y=!1,k=void 0;try{for(var S,w=(0,v.default)((0,f.default)(p));!(b=(S=w.next()).done);b=!0){var T=S.value,C=(0,g.default)(T,2),D=C[0],E=C[1];D===a&&i&&o&&n.changePosition&&"function"==typeof n.changePosition&&(n.changePosition(a,{percentLeft:E.percentLeft,percentTop:E.percentTop,isDrag:!1},!1),N.default.minimizedDragAndDropArry.splice(m,1),B.default.CoreController.dispatchEvent({type:"change-minimizedDragAndDropArry"}))}}catch(e){y=!0,k=e}finally{try{!b&&w.return&&w.return()}finally{if(y)throw k}}}}catch(e){s=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw l}}setTimeout(function(){U.default.getTkWhiteBoardManager().updateWhiteboardSize(e.instanceId)},100)}},{key:"changeminimizedDragAndDropArry",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=document.getElementById(t),i=document.querySelector(a.bounds),o=!0,r=!1,s=void 0;try{for(var l,d=(0,v.default)((0,f.default)(N.default.minimizedDragAndDropArry));!(o=(l=d.next()).done);o=!0){var u=l.value,c=(0,g.default)(u,2),h=c[0],m=c[1],p=!0,b=!1,y=void 0;try{for(var k,S=(0,v.default)((0,f.default)(m));!(p=(k=S.next()).done);p=!0){var w=k.value,T=(0,g.default)(w,2),C=T[0];T[1],C===t&&n&&i&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:155*h,percentTop:1,isDrag:!1},!1)}}catch(e){b=!0,y=e}finally{try{!p&&S.return&&S.return()}finally{if(b)throw y}}}}catch(e){r=!0,s=e}finally{try{!o&&d.return&&d.return()}finally{if(r)throw s}}}},{key:"handlerCloseClick",value:function(){var e={};H.default.sendSignallingFromNewBlackBoard(e,!0),B.default.CoreController.dispatchEvent({type:"colse-holdAll-item",message:{type:"blackboard"}});var t=!0,a=!1,n=void 0;try{for(var i,o=(0,v.default)((0,f.default)(N.default.minimizedDragAndDropArry));!(t=(i=o.next()).done);t=!0){var r=i.value,s=(0,g.default)(r,2),l=s[0],d=s[1],u=!0,c=!1,h=void 0;try{for(var m,p=(0,v.default)((0,f.default)(d));!(u=(m=p.next()).done);u=!0){var b=m.value,y=(0,g.default)(b,2),k=y[0];y[1],k===id&&N.default.minimizedDragAndDropArry.splice(l,1)}}catch(e){c=!0,h=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw h}}}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"handlerBlackBoardDispatchClick",value:function(){var e=this,t=void 0,a=this.props,n=(a.id,a.moreBlackboardDrag),i={percentLeft:n.percentLeft,percentTop:n.percentTop,isDrag:!0};if("_prepareing"===this.state.blackBoardState)H.default.sendSignallingFromBlackBoardDrag(i),t="_dispenseed";else if("_dispenseed"===this.state.blackBoardState)H.default.sendSignallingFromBlackBoardDrag(i),t="_recycle";else if("_recycle"===this.state.blackBoardState)t="_againDispenseed";else if("_againDispenseed"===this.state.blackBoardState)H.default.sendSignallingFromBlackBoardDrag(i),t="_recycle";else if("_none"===this.state.blackBoardState)return void L.Logger.error("current blackBoardState is _none , can't execute blackBoardDispatchClick!");if(t){var o={blackBoardState:t,currentTapKey:this.currentTapKey,currentTapPage:this.state.currentTapPage};H.default.sendSignallingFromNewBlackBoard(o,!1)}this.setState({disabledBlackboardToolBtn:!0}),clearTimeout(this.disabledBlackboardToolBtnTimer),this.disabledBlackboardToolBtnTimer=setTimeout(function(){e.setState({disabledBlackboardToolBtn:!1})},300)}},{key:"handlerTabClick",value:function(e){if(void 0!==e){var t=this.descArray,a=!0,n=!1,i=void 0;try{for(var o,r=(0,v.default)((0,f.default)(t));!(a=(o=r.next()).done);a=!0){var s=o.value,l=(0,g.default)(s,2),d=l[0];if(e===l[1].instanceId)if("phone"===N.default.mobileDeviceType){var u=Math.floor((1*d+1)/2);this.setState({currentTapPage:u})}else{var c=Math.floor((1*d+1)/7);this.setState({currentTapPage:c})}}}catch(e){n=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}var h={blackBoardState:this.state.blackBoardState,currentTapKey:e,currentTapPage:this.state.currentTapPage};H.default.sendSignallingFromNewBlackBoard(h,!1)}}},{key:"handleShowToolClick",value:function(e){this.setState({useToolKey:e}),"tool_pencil"===e?this.setState({isShowPenList:!this.state.isShowPenList,isShowFontList:!1,isShowEraser:!1}):"tool_text"===e?this.setState({isShowPenList:!1,isShowFontList:!this.state.isShowFontList,isShowEraser:!1}):"tool_eraser"===e&&this.setState({isShowPenList:!1,isShowFontList:!1,isShowEraser:!this.state.isShowEraser})}},{key:"onTapPrevOrNextClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,c.default)(this.state.blackBoardDescList).length,n=Math.ceil(a/(this.maxBlackboardNumber-1));switch(e){case"prev":this.state.currentTapPage--;break;case"next":this.state.currentTapPage++}this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>n&&(this.state.currentTapPage=n),t&&(this.state.blackBoardState,this.currentTapKey,this.state.currentTapPage),this.setState({currentTapPage:this.state.currentTapPage})}},{key:"blackboardThumbnailImageClick",value:function(){var e=document.getElementsByClassName("title-container")[0],t=document.getElementById("blackboard-tool-container");this.titleContainerHeight=e.clientHeight,this.blackboardToolContainerHeight=t.clientHeight,this.setState({isMinimize:!0}),this._minimizedDragAndDrop()}},{key:"_minimizedDragAndDrop",value:function(){var e=this.props,t=e.id,a=e.draggableData,n=e.moreBlackboardDrag,i=document.getElementById(t),o=document.querySelector(a.bounds),r=null,s=!1,l=!0,d=!1,u=void 0;try{for(var c,h=(0,v.default)((0,f.default)(N.default.minimizedDragAndDropArry));!(l=(c=h.next()).done);l=!0){var m=c.value,p=(0,g.default)(m,2),b=(p[0],p[1]);if(b.hasOwnProperty(t)){b[t].percentLeft=n.percentLeft,b[t].percentTop=n.percentTop,s=b.hasOwnProperty(t);break}}}catch(e){d=!0,u=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw u}}if(!s){var y={};y[t]={},y[t].width="pad"===N.default.mobileDeviceType?105:89,y[t].percentLeft=n.percentLeft,y[t].percentTop=n.percentTop,N.default.minimizedDragAndDropArry.length>=1?(r=y[t].width/(o.clientWidth-y[t].width)*N.default.minimizedDragAndDropArry.length,i&&o&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:r,percentTop:1,isDrag:!1},!1)):i&&o&&a.changePosition&&"function"==typeof a.changePosition&&a.changePosition(t,{percentLeft:0,percentTop:1,isDrag:!1},!1),N.default.minimizedDragAndDropArry.push(y)}}},{key:"_updateContainerWidthAndHeight",value:function(){var e=document.getElementById("big_literally_wrap"),t=document.getElementById("top-header"),a=document.getElementById("blackboard-tool-container"),n=(0,d.default)({},this.state.containerWidthAndHeight),i=0===t.clientHeight?this.titleContainerHeight:t.clientHeight,o=0===a.clientHeight?this.blackboardToolContainerHeight:a.clientHeight;if("mobile"===TK.SDKTYPE){var r=void 0;if(e)if("pad"===N.default.mobileDeviceType){r=Math.floor(.9*e.clientHeight);var s=Math.floor(16*(r-i-o)/9+20);s<e.clientWidth&&r<e.clientHeight?(n.height=r,n.width=s,this.containerWidthAndHeight.height=Math.floor(r-i-o),this.containerWidthAndHeight.width=Math.floor(16*(r-i-o)/9),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight})):s>=e.clientWidth&&r<e.clientHeight&&(n.height=r,n.width=e.clientWidth,this.containerWidthAndHeight.height=Math.floor(r-i-o),this.containerWidthAndHeight.width=Math.floor(e.clientWidth-20),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight}))}else{r=Math.floor(e.clientHeight);var l=Math.floor(16*(r-i-o)/9+10);l<e.clientWidth?(n.height=r,n.width=l,this.containerWidthAndHeight.height=Math.floor(e.clientHeight-i-o),this.containerWidthAndHeight.width=Math.floor(16*(r-i-o)/9),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight})):l>e.clientWidth&&(n.height=r,n.width=e.clientWidth,this.containerWidthAndHeight.height=Math.floor(e.clientHeight-i-o),this.containerWidthAndHeight.width=Math.floor(e.clientWidth-20),this.setState({containerWidthAndHeight:n,whiteboardWidthAndHeight:this.containerWidthAndHeight}))}}}},{key:"_getUser",value:function(e){var t=!1,a=!0,n=!1,i=void 0;try{for(var o,r=(0,v.default)((0,f.default)(this.studentBlackboardList));!(a=(o=r.next()).done);a=!0){var s=o.value,l=(0,g.default)(s,2),d=l[0],u=l[1];if(d===e){t={},t=u;break}}}catch(e){n=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}return t}},{key:"_updateBlackBoardDescListByBlackBoardState",value:function(){if(U.default.getTkRoom()){var e=this.state.blackBoardDescList;"blackBoardCommon"===this.currentTapKey||this._getUser(this.currentTapKey)||(this.currentTapKey="blackBoardCommon"),"_prepareing"===this.state.blackBoardState?((x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol||x.default.hasRole.rolePlayback)&&(this.currentTapKey="blackBoardCommon"),e=Object.customAssign({},this._getBlackBoardCommon())):"_dispenseed"===this.state.blackBoardState||"_againDispenseed"===this.state.blackBoardState?(x.default.hasRole.roleStudent&&(this.currentTapKey=U.default.getTkRoom().getMySelf().id),e=Object.customAssign({},this._getBlackBoardCommon(),this._getStudentBlackboard())):"_recycle"===this.state.blackBoardState?e=Object.customAssign({},this._getBlackBoardCommon(),this._getStudentBlackboard()):"_none"===this.state.blackBoardState&&(e={});var t=(0,c.default)(e).length,a=Math.ceil(t/(this.maxBlackboardNumber-1));this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>a&&(this.state.currentTapPage=a),this.setState({blackBoardDescList:e,currentTapPage:this.state.currentTapPage})}}},{key:"_getstudentBlackboardList",value:function(e,t){"add"===t?2===e.role&&(this.studentBlackboardList[e.id]=e):delete this.studentBlackboardList[e.id]}},{key:"_getStudentBlackboard",value:function(){var e={},t=!0,a=!1,n=void 0;try{for(var i,o=(0,v.default)((0,f.default)(this.studentBlackboardList));!(t=(i=o.next()).done);t=!0){var r=i.value,s=(0,g.default)(r,2),l=s[0],d=s[1];e[l]={instanceId:l,show:this.currentTapKey===l,isBaseboard:!1,deawPermission:!1,dependenceBaseboardWhiteboardID:"blackBoardCommon",needLooadBaseboard:!0,saveImage:!1,nickname:d.nickname},!x.default.role.roleStudent||"_dispenseed"!==this.state.blackBoardState&&"_againDispenseed"!==this.state.blackBoardState||U.default.getTkRoom().getMySelf().id!==l||(e[l].deawPermission=!0),"_recycle"===this.state.blackBoardState&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)&&(e[l].deawPermission=!0)}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}return e}},{key:"_getBlackBoardCommon",value:function(e){var t={blackBoardCommon:{instanceId:"blackBoardCommon",show:"blackBoardCommon"===this.currentTapKey,isBaseboard:"_prepareing"===this.state.blackBoardState,deawPermission:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant,dependenceBaseboardWhiteboardID:void 0,needLooadBaseboard:!1,saveImage:!1,nickname:"blackBoardCommon"}};return e&&"object"===(void 0===e?"undefined":(0,s.default)(e))&&Object.customAssign(t.blackBoardCommon,e),t}},{key:"_getDefaultState",value:function(){return{blackBoardState:"_none",disabledBlackboardToolBtn:!1,blackBoardDescList:{},useToolKey:"tool_pencil",useToolColor:void 0===x.default.hasRole.roleChairman?void 0:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"#FF0000":"#000000",containerWidthAndHeight:{width:0,height:0},updateState:!1,currentTapPage:1,blackboardToolsInfo:{pencil:5,text:18,eraser:15},selectBlackboardToolSizeId:"blackboard_size_small",selectBlackboardFontSizeId:"font-36",blackboardThumbnailImage:void 0}}},{key:"_loadBlackBoardElementArray",value:function(e){var t=this,a=[],n=[],i="tool_eraser"===this.state.useToolKey?this.state.blackboardToolsInfo.eraser:this.state.blackboardToolsInfo.pencil,r=this.state.blackboardToolsInfo.text,s=[],l=void 0,d=!0,u=!1,h=void 0;try{for(var f,m=(0,v.default)((0,o.default)(e));!(d=(f=m.next()).done);d=!0){var g=f.value;"blackBoardCommon"!==g.instanceId?s.push(g):l=g}}catch(e){u=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw h}}s.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("instanceId")&&void 0!==t&&t.hasOwnProperty("instanceId")?e.instanceId<t.instanceId?-1:e.instanceId>t.instanceId?1:0:0}),l&&s.unshift(l),this.descArray=s;var p=(0,c.default)(e).length,b=void 0,y=void 0,k=Math.ceil(p/(this.maxBlackboardNumber-1));if(k>1)if(b=100/(this.maxBlackboardNumber-1),1===k||this.state.currentTapPage<k)y=(this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)*b;else{var S=k*(this.maxBlackboardNumber-1)-p;y=((this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)-S)*b}return s.forEach(function(e,o){("blackBoardCommon"===e.instanceId||"blackBoardCommon"!==e.instanceId&&U.default.getTkRoom()&&t._getUser(e.instanceId))&&(a.push(A.default.createElement("li",{className:"tab-content-option ",key:e.instanceId,style:{display:e.show?"block":"none"}},A.default.createElement(K.default,{containerWidthAndHeight:t.containerWidthAndHeight,instanceId:e.instanceId,show:e.show,isBaseboard:e.isBaseboard,deawPermission:e.deawPermission,dependenceBaseboardWhiteboardID:e.dependenceBaseboardWhiteboardID,associatedMsgID:t.associatedMsgID,associatedUserID:void 0,needLooadBaseboard:e.needLooadBaseboard,saveImage:e.saveImage,nickname:e.nickname,useToolKey:t.state.useToolKey,fontSize:r,useToolColor:t.state.useToolColor,pencilWidth:i,saveRedoStack:x.default.hasRole.roleChairman||x.default.joinRoomInfo.shapeUndoRedoClear,undoRedoClearToMySelf:x.default.hasRole.roleStudent&&x.default.joinRoomInfo.shapeUndoRedoClear,imageThumbnailId:e.show?t.state.blackboardThumbnailImage:void 0,backgroundColor:t.blackboardCanvasBackgroundColor,imageThumbnailTipContent:N.default.language.languageData.header.tool.blackBoard.content.blackboardHeadTitle,showShapeAuthor:!1,fontFamily:t.state.fontFamily}))),n.push(A.default.createElement("li",{style:{marginLeft:0===o&&void 0!==y?-y+"%":void 0,width:void 0!==b?b+"%":void 0,maxWidth:void 0!==b?b+"%":void 0,minWidth:void 0!==b?b+"%":void 0},className:"tap-option add-nowrap "+(e.show?"active":"")+(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?" ":" disabled"),key:e.instanceId,onClick:"mobile"!==TK.SDKTYPE&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)?t.handlerTabClick.bind(t,e.instanceId):void 0,onTouchStart:"mobile"===TK.SDKTYPE&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant)?t.handlerTabClick.bind(t,e.instanceId):void 0},A.default.createElement("span",{className:"text add-nowrap"},"blackBoardCommon"===e.instanceId?N.default.language.languageData.header.tool.blackBoard.toolBtn.commonTeacher:t._getUser(e.instanceId).nickname))))}),{tabContentBlackBoardElementArray:a,tabBlackBoardElementArray:n}}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=["#00CBFF","#FFCC00","#ED3E3A","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"];return a.forEach(function(n,i){var o=A.default.createElement("button",{className:"color-option color-"+e._colorFilter(n)+" "+(e.state.useToolColor===n?" active":""),key:i,onClick:e.changePenColor.bind(e,n),"data-color":a[i],id:"blackboard_color_"+e._colorFilter(n)});t.push(o)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"_recoverDedaultState",value:function(){this.studentBlackboardList={},this.hasNewBlackBoard=!1,this.hasUserNewBlackBoard=!1,this.descArray=void 0,clearTimeout(this.disabledBlackboardToolBtnTimer);var e=this._getDefaultState();this.currentTapKey=void 0,this.setState(Object.customAssign({},e,{show:!1,isMinimize:!1,isShowPenList:!1,isShowFontList:!1,isShowEraser:!1})),U.default.getTkWhiteBoardManager().destroyExtendWhiteboard("blackBoardCommon")}},{key:"onAfterChangeEraserWidth",value:function(e){var t=(0,d.default)({},this.state.blackboardToolsInfo);t.eraser=e<1?1:e,this.setState({blackboardToolsInfo:t})}},{key:"onAfterChangePencilWidth",value:function(e){var t=(0,d.default)({},this.state.blackboardToolsInfo);t.pencil=e<1?1:e,this.setState({blackboardToolsInfo:t})}},{key:"onAfterChangeTextWidth",value:function(e){0===e&&(e=1);var t=(0,d.default)({},this.state.blackboardToolsInfo);t.text=6*Math.ceil(Number(e)/10)+12,this.setState({blackboardToolsInfo:t})}},{key:"changePenColor",value:function(e){this.setState({isShowFontList:!1,isShowShapeList:!1,isShowPenList:!1,isShowEraser:!1,useToolColor:e})}},{key:"render",value:function(){var e=this,t=e.state,a=t.blackBoardState,n=t.resizeInfo,i=t.show,o=t.blackBoardDescList,r=t.containerWidthAndHeight,s=t.useToolKey,l=t.blackboardThumbnailImage,d=t.isMinimize,u=t.whiteboardWidthAndHeight,h=(t.selectBlackboardFontSizeId,this.props),f=h.id,m=h.draggableData,g=h.moreBlackboardDrag,p=Object.customAssign({id:f,size:n,handle:d?void 0:".title-container",disabled:!(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||(x.default.hasRole.roleStudent||x.default.hasRole.rolePatrol)&&"_recycle"!==a),position:{x:g.left,y:g.top},percentPosition:{percentLeft:g.percentLeft,percentTop:g.percentTop}},m),v="_none"!==a?"_prepareing"===a?N.default.language.languageData.header.tool.blackBoard.toolBtn.dispenseed:"_dispenseed"===a?N.default.language.languageData.header.tool.blackBoard.toolBtn.recycle:"_recycle"===a?N.default.language.languageData.header.tool.blackBoard.toolBtn.againDispenseed:"_againDispenseed"===a?N.default.language.languageData.header.tool.blackBoard.toolBtn.recycle:"":"",b=e._loadBlackBoardElementArray(o),y=b.tabContentBlackBoardElementArray,k=b.tabBlackBoardElementArray,S=e._loadToolColorsElementArray(),w=S.toolColorsArray,T=(0,c.default)(o).length,C=Math.ceil(T/(e.maxBlackboardNumber-1)),D=!("_recycle"===a||("_dispenseed"===a||"_againDispenseed"===a)&&(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol||x.default.hasRole.rolePlayback)),E="mobile"===TK.SDKTYPE&&"phone"===N.default.mobileDeviceType?!(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant||x.default.hasRole.rolePatrol)&&(x.default.hasRole.rolePlayback||x.default.hasRole.rolePatrol||x.default.hasRole.roleStudent&&!("_dispenseed"===a||"_againDispenseed"===a)):x.default.hasRole.rolePlayback||x.default.hasRole.rolePatrol||x.default.hasRole.roleStudent&&!("_dispenseed"===a||"_againDispenseed"===a),I="mobile"===TK.SDKTYPE&&"phone"===N.default.mobileDeviceType,P={display:d?"none":"block",opacity:void 0===l?void 0:0,zIndex:void 0===l?void 0:-999,width:!d&&r.width?r.width:"2.06rem",height:!d&&r.height?r.height:"1.67rem"},R={width:r.width?u.width:"1.55rem",height:u.height?u.height:0,marginLeft:r.width&&u.width?(r.width-u.width)/2:0},B={display:i?"block":"none",position:"absolute",zIndex:112},_=1===this.state.scale||2===this.state.scale?" normal":" unnormal",M="android"===N.default.clientType&&"pad"===N.default.mobileDeviceType&&2===this.state.scale?" android-pad-style":" ";return A.default.createElement(q.default,p,A.default.createElement("div",{id:f,style:B},A.default.createElement("section",{className:"black-board-container "+(E?" hideBottom":" ")+(D?" hideTap":" ")+(I?" hideTitle":" ")+_+(x.default.hasRoomtype.oneToOne?" ":" change"),style:P},A.default.createElement("article",{className:"title-container",id:"top-header",style:{cursor:(x.default.hasRole.roleStudent||x.default.hasRole.rolePatrol)&&"_recycle"===a?"default":"move",width:r.width?r.width:"1.55rem",marginLeft:r.width&&u.width?(r.width-u.width)/2:0}},A.default.createElement("article",{className:"tap-container clear-float",style:{display:D?"none":""}},A.default.createElement("ul",{className:"tap add-fl clear-float"},k),A.default.createElement("button",{className:"prev add-fl "+(e.state.currentTapPage<=1?"disabled":""),disabled:e.state.currentTapPage<=1,style:{display:T<e.maxBlackboardNumber?"none":""},title:N.default.language.languageData.header.tool.blackBoard.title.prev,onClick:e.state.currentTapPage<=1?void 0:e.onTapPrevOrNextClick.bind(e,"prev",!0)}),A.default.createElement("button",{className:"next add-fr "+(e.state.currentTapPage>=C?"disabled":""),disabled:e.state.currentTapPage>=C,style:{display:T<e.maxBlackboardNumber?"none":""},title:N.default.language.languageData.header.tool.blackBoard.title.next,onClick:e.state.currentTapPage>=C?void 0:e.onTapPrevOrNextClick.bind(e,"next",!0)})),A.default.createElement("div",{className:"minimize-and-close-wrap-div"},A.default.createElement("button",{className:"blackboard-thumbnail-image "+(x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"":" right"),onClick:e.blackboardThumbnailImageClick.bind(e,{action:"shrink"}),title:N.default.language.languageData.header.tool.blackBoard.title.shrink}),A.default.createElement("button",{style:{display:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-close-image",disabled:this.state.disabledBlackboardToolBtn,onClick:e.handlerCloseClick.bind(e),title:N.default.language.languageData.header.tool.blackBoard.title.close}))),A.default.createElement("article",{className:"tab-content-container",id:"blackboardContentBox",style:R},A.default.createElement("ul",{className:"tab-content clear-float overflow-hidden",style:{width:"100%",height:"100%"}},y)),A.default.createElement("article",{id:"blackboard-tool-container",className:"blackboard-tool-container clear-float",style:{width:"100%"}},A.default.createElement("ul",{className:"blackboard-tool clear-float "+M,style:{display:x.default.hasRole.rolePlayback||x.default.hasRole.rolePatrol||x.default.hasRole.roleStudent&&"_dispenseed"!==a&&"_againDispenseed"!==a?"none":"",marginLeft:r.width&&u.width?(r.width-u.width)/2:0}},A.default.createElement("li",{className:"blackboard-tool-option-beyond "},A.default.createElement("em",{id:"blackboard_tool_vessel_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===s?" active":""),title:N.default.language.languageData.header.tool.blackBoard.boardTool.pen,onClick:e.handleShowToolClick.bind(e,"tool_pencil")}),A.default.createElement("div",{className:"tool-pen-list-extend",style:{display:this.state.isShowPenList?"block":"none"}},A.default.createElement("div",{className:"colors-container"},w),A.default.createElement("div",{className:"silder-width"},A.default.createElement("span",{className:"slider-title"},N.default.language.languageData.newTemplateLanguage.lineWidth),A.default.createElement(Y.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this),value:this.state.blackboardToolsInfo.pencil}),A.default.createElement("span",{className:"slider-value"},this.state.blackboardToolsInfo.pencil)))),A.default.createElement("li",{className:"blackboard-tool-option-beyond"},A.default.createElement("em",{id:"blackboard_tool_vessel_text",className:"tool-btn text-icon "+("tool_text"===s?" active":""),title:N.default.language.languageData.header.tool.blackBoard.boardTool.text,onClick:e.handleShowToolClick.bind(e,"tool_text")}),A.default.createElement("div",{className:"tool-font-list-extend",style:{display:this.state.isShowFontList?"block":"none"}},A.default.createElement("div",{className:"colors-container"},w),A.default.createElement("div",{className:"silder-width"},A.default.createElement("span",{className:"slider-title"},N.default.language.languageData.newTemplateLanguage.fontSize),A.default.createElement(Y.default,{onAfterChange:this.onAfterChangeTextWidth.bind(this),value:this.state.blackboardToolsInfo.text}),A.default.createElement("span",{className:"slider-value"},this.state.blackboardToolsInfo.text)))),A.default.createElement("li",{className:"blackboard-tool-option-beyond"},A.default.createElement("em",{id:"blackboard_tool_vessel_eraser",className:"tool-btn eraser-icon "+("tool_eraser"===s?" active":""),title:N.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onClick:e.handleShowToolClick.bind(e,"tool_eraser")}),A.default.createElement("div",{className:"tool-eraser-list-extend silder-width",style:{display:this.state.isShowEraser?"flex":"none"}},A.default.createElement("em",{className:"arrow"}),A.default.createElement("span",{className:"slider-title"},N.default.language.languageData.newTemplateLanguage.eraserWidth),A.default.createElement(Y.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this),value:this.state.blackboardToolsInfo.eraser}),A.default.createElement("span",{className:"slider-value"},this.state.blackboardToolsInfo.eraser)))),A.default.createElement("span",{className:"blackboard-function-btn-container"},A.default.createElement("button",{style:{display:x.default.hasRole.roleChairman||x.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-send-btn "+(this.state.disabledBlackboardToolBtn?"disabled":""),disabled:this.state.disabledBlackboardToolBtn,onClick:e.handlerBlackBoardDispatchClick.bind(e)},v)))),A.default.createElement("div",{className:"minimize-window-wrap blackboardThumbnailImageId",style:{display:d?"block":"none"},onClick:e.handlerChangeWebPageWindowSize.bind(e)})))}}]),t}(A.default.Component);t.default=Z},"m/2z":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),d=n(l),u=a("zwoO"),c=n(u),h=a("Pf15"),f=n(h),m=a("GiK3"),g=n(m),p=a("yE5a"),v=n(p),b=a("T+56"),y=n(b),k=a("VSuD"),S=n(k),w=a("YRCL"),T=(n(w),a("adC7")),C=(n(T),a("HUPQ")),D=n(C),E=a("F5u0"),I=n(E),P=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.state={isActive:"tool_mouse",eraserDisabled:!1,isShowPenList:!1,isShowShapeList:!1,isShowFontList:!1,isShowEraser:!1,eraserWidth:void 0,pencilWidth:void 0,shapeWidth:void 0,fontFamily:void 0,fontSize:void 0,lineWidth:void 0,primaryColor:void 0,isShowToolBar:!1,pen:"tool_pencil",shape:"tool_rectangle_empty",isShowToolList:!1,scale:void 0,isFullScreen:!1},e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;y.default.CoreController.addEventListener("receiveWhiteboardSDKAction",e.handlerReceiveWhiteboardSDKAction.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,e.handlerRoomUserpropertyChanged.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":v.default.getTkRoom().getMySelf().candraw&&t.setState({isShowToolBar:!0});break;case"FullScreen":t.setState({isFullScreen:!0})}}},{key:"handlerRoomDelmsg",value:function(e){var t=this;switch(e.message.name){case"ClassBegin":t.setState({isShowToolBar:!1});break;case"FullScreen":t.setState({isFullScreen:!1})}}},{key:"handlerRoomUserpropertyChanged",value:function(){D.default.classBegin&&(v.default.getTkRoom().getMySelf().candraw?this.setState({isShowToolBar:!0}):this.setState({isShowToolBar:!1}))}},{key:"penActive",value:function(e){return-1!==["tool_pencil","tool_highlighter","tool_line","tool_arrow"].indexOf(e)?e:""}},{key:"shapeActive",value:function(e){return-1!==["tool_rectangle_empty","tool_rectangle","tool_ellipse_empty","tool_ellipse"].indexOf(e)?e:""}},{key:"handlerReceiveWhiteboardSDKAction",value:function(e){var t=this,a=e.message,n=a.cmd;switch(a.action){case"viewStateUpdate":for(var i in n.viewState)switch(i){case"tool":for(var o in n.viewState[i])"tool_pencil"!==o&&"tool_highlighter"!==o&&"tool_line"!==o&&"tool_arrow"!==o||n.viewState[i][o].isUse&&t.setState({pen:o}),"tool_rectangle_empty"!==o&&"tool_rectangle"!==o&&"tool_ellipse_empty"!==o&&"tool_ellipse"!==o||n.viewState[i][o].isUse&&t.setState({shape:o}),n.viewState[i][o].isUse&&t.setState({isActive:o}),n.viewState[i].tool_eraser.disabled?t.setState({eraserDisabled:!0}):t.setState({eraserDisabled:!1});break;case"other":for(var r in n.viewState[i])"fontSize"===r&&this.setState({fontSize:n.viewState[i][r]}),"pencilWidth"!==r&&"shapeWidth"!==r||this.setState({lineWidth:n.viewState[i][r]}),"fontFamily"===r&&this.setState({fontFamily:n.viewState[i][r]}),"primaryColor"===r&&this.setState({primaryColor:n.viewState[i][r]}),"eraserWidth"===r&&this.setState({eraserWidth:n.viewState[i][r]});break;case"scale":var s=Math.abs(n.viewState[i]-16/9),l=Math.abs(n.viewState[i]-4/3);s>.1&&l<=.1?t.setState({scale:0}):s<=.1&&l>.1?t.setState({scale:1}):t.setState({scale:2});break;case"fullScreen":this.setState({isFullScreen:n.viewState[i]})}}}},{key:"openToolMouse",value:function(e){v.default.getTkWhiteBoardManager().useWhiteboardTool(e),this.setState({isActive:e,isShowPenList:!1,isShowShapeList:!1,isShowFontList:!1,isShowEraser:!1})}},{key:"openToolText",value:function(e){v.default.getTkWhiteBoardManager().useWhiteboardTool(e),this.setState({isActive:e,isShowPenList:!1,isShowShapeList:!1,isShowFontList:!this.state.isShowFontList,isShowEraser:!1})}},{key:"changePen",value:function(e){v.default.getTkWhiteBoardManager().useWhiteboardTool(e),this.setState({isShowPenList:!this.state.isShowPenList,isActive:e}),event.stopPropagation()}},{key:"changeShape",value:function(e){v.default.getTkWhiteBoardManager().useWhiteboardTool(e),this.setState({isShowShapeList:!this.state.isShowShapeList,isActive:e}),event.stopPropagation()}},{key:"changeFont",value:function(e){v.default.getTkWhiteBoardManager().useWhiteboardTool(e.target.dataset.type),this.setState({isShowFontList:!this.state.isShowFontList,isActive:"tool_text"}),e.stopPropagation()}},{key:"isShowPenList",value:function(){v.default.getTkWhiteBoardManager().useWhiteboardTool(this.state.pen),this.setState({isShowPenList:!this.state.isShowPenList,isShowShapeList:!1,isShowFontList:!1,isActive:this.state.pen,isShowEraser:!1})}},{key:"isShowShapeList",value:function(){v.default.getTkWhiteBoardManager().useWhiteboardTool(this.state.shape),this.setState({isShowShapeList:!this.state.isShowShapeList,isShowPenList:!1,isShowFontList:!1,isActive:this.state.shape,isShowEraser:!1})}},{key:"openToolEraser",value:function(e){this.state.eraserDisabled||(v.default.getTkWhiteBoardManager().useWhiteboardTool(e),this.setState({isActive:e,isShowPenList:!1,isShowShapeList:!1,isShowFontList:!1,isShowEraser:!this.state.isShowEraser}))}},{key:"changeFontFamily",value:function(e){void 0!==e.target.dataset.fontfamily&&(this.setState({isShowFontList:!this.state.isShowFontList,isActive:"tool_text"}),v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({fontFamily:e.target.dataset.fontfamily}))}},{key:"changePenColor",value:function(e,t){v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({primaryColor:e}),this.setState({isShowFontList:!1,isShowShapeList:!1,isShowPenList:!1,isShowEraser:!1}),t.stopPropagation(),t.preventDefault()}},{key:"onAfterChangeEraserWidth",value:function(e){var t=this.getWidthByType(e,"eraser");v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({eraserWidth:t})}},{key:"onAfterChangePencilWidth",value:function(e){var t=this.getWidthByType(e,"line");v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({pencilWidth:t,shapeWidth:t})}},{key:"onAfterChangeShapeWidth",value:function(e){var t=this.getWidthByType(e,"line");v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({pencilWidth:t,shapeWidth:t})}},{key:"onAfterChangeTextWidth",value:function(e){var t=this.getWidthByType(e,"text");this.setState({fontSize:t}),v.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({fontSize:t})}},{key:"getWidthByType",value:function(e,t){if(t){var a=void 0;switch(t){case"line":0===(a=Math.ceil(Number(e)))&&(a=1);break;case"text":0===e&&(e=1),a=6*Math.ceil(Number(e)/10)+12;break;case"eraser":0===(a=Math.ceil(Number(e)))&&(a=1)}return a}}},{key:"_isShowToolBar",value:function(){this.setState({isShowToolList:!this.state.isShowToolList})}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=["#00CBFF","#FFCC00","#ED3E3A","#4740D2","#007BFF","#09C62B","#000000","#EDEDED"];return a.forEach(function(n,i){var o=g.default.createElement("button",{className:"color-option color-"+e._colorFilter(n)+" "+(e.state.primaryColor===n?" active":""),key:i,onClick:e.changePenColor.bind(e,n),"data-color":a[i],id:"blackboard_color_"+e._colorFilter(n)});t.push(o)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"_loadToolPenElementArray",value:function(){var e=this,t=[];return["tool_pencil","tool_highlighter","tool_line","tool_arrow"].forEach(function(a,n){var i=g.default.createElement("li",{className:"pen-option "+a+(e.state.pen===a?" active":""),key:n,onClick:e.changePen.bind(e,a)},g.default.createElement("em",{"data-type":a,className:"pen-icon "}));t.push(i)}),{toolPenArray:t}}},{key:"render",value:function(){var e=this,t=e._loadToolColorsElementArray(),a=t.toolColorsArray,n=e._loadToolPenElementArray(),i=n.toolPenArray,o=S.default.hasRoomtype.oneToOne?" normal":2!==this.state.scale?" normal":" unnormal",r=this.state.isFullScreen?" yes":"",s=[S.default.joinRoomInfo.mouseoptions,S.default.joinRoomInfo.shapeoptions],l=0;s.forEach(function(e,t){!0===e&&S.default.hasRole.roleStudent&&l++});var d=1===l?" one":2===l?" two":"";return g.default.createElement("div",{className:"tool-bar "+(this.state.isShowToolBar?" show":" hide")+(this.state.isShowToolList?"":" auto")+d+o+r},g.default.createElement("div",{className:"tool-bar-header",onClick:this._isShowToolBar.bind(this)}),g.default.createElement("ul",{className:"whiteboard-tool-list-container",style:{display:this.state.isShowToolList?"block":"none"}},S.default.joinRoomInfo.mouseoptions&&S.default.hasRole.roleStudent?void 0:g.default.createElement("li",{className:"tool-option tool_mouse "+("tool_mouse"===this.state.isActive?"active":""),onClick:this.openToolMouse.bind(this,"tool_mouse")},g.default.createElement("em",{className:"icon"})),g.default.createElement("li",{className:"tool-option pen-list "+this.state.pen+" "+(this.state.isActive===e.penActive(e.state.pen)?"active":""),"data-current-pen":this.state.pen,onClick:this.isShowPenList.bind(this)},g.default.createElement("em",{className:"icon"}),g.default.createElement("div",{className:"tool-pen-list-extend",style:{display:this.state.isShowPenList?"block":"none"}},g.default.createElement("ol",{className:"tool-pen-container"},g.default.createElement("em",{className:"arrow"}),i),g.default.createElement("div",{className:"colors-container"},a),g.default.createElement("div",{className:"silder-width"},g.default.createElement("span",{className:"slider-title"},D.default.language.languageData.newTemplateLanguage.lineWidth),g.default.createElement(I.default,{onAfterChange:this.onAfterChangePencilWidth.bind(this),value:this.state.lineWidth}),g.default.createElement("span",{className:"slider-value"},this.state.lineWidth)))),g.default.createElement("li",{className:"tool-option tool_text "+("tool_text"===this.state.isActive?"active":""),onClick:this.openToolText.bind(this,"tool_text")},g.default.createElement("em",{className:"icon"}),g.default.createElement("div",{className:"tool-font-list-extend",style:{display:this.state.isShowFontList?"block":"none"},onClick:this.changeFont.bind(this)},g.default.createElement("em",{className:"arrow"}),g.default.createElement("div",{className:"font-family-container",onClick:this.changeFontFamily.bind(this)},S.default.joinRoomInfo.fontoptions&&S.default.hasRole.roleStudent?void 0:g.default.createElement("div",null,g.default.createElement("button",{className:"font-family-option Msyh "+("微软雅黑"===this.state.fontFamily?"active":""),"data-fontfamily":"微软雅黑"},D.default.language.languageData.header.tool.text.Msyh.text),g.default.createElement("button",{className:"font-family-option Ming "+("宋体"===this.state.fontFamily?"active":""),"data-fontfamily":"宋体"},D.default.language.languageData.header.tool.text.Ming.text),g.default.createElement("button",{className:"font-family-option Arial "+("Arial"===this.state.fontFamily?"active":""),"data-fontfamily":"Arial"},D.default.language.languageData.header.tool.text.Arial.text))),g.default.createElement("div",{className:"colors-container"},a),S.default.joinRoomInfo.fontoptions&&S.default.hasRole.roleStudent?void 0:g.default.createElement("div",{className:"silder-width"},g.default.createElement("span",{className:"slider-title"},D.default.language.languageData.newTemplateLanguage.fontSize),g.default.createElement(I.default,{onAfterChange:this.onAfterChangeTextWidth.bind(this),value:this.state.fontSize}),g.default.createElement("span",{className:"slider-value"},this.state.fontSize)))),S.default.joinRoomInfo.shapeoptions&&S.default.hasRole.roleStudent?void 0:g.default.createElement("li",{className:"tool-option shape-list "+this.state.shape+" "+(this.state.isActive===e.shapeActive(e.state.shape)?"active":""),"data-current-shape":this.state.shape,onClick:this.isShowShapeList.bind(this)},g.default.createElement("em",{className:"icon"}),g.default.createElement("div",{className:"tool-shape-list-extend",style:{display:this.state.isShowShapeList?"block":"none"}},g.default.createElement("ol",{className:"tool-shape-container"},g.default.createElement("em",{className:"arrow"}),g.default.createElement("li",{className:"shape-option tool_rectangle_empty "+("tool_rectangle_empty"===this.state.isActive?"active":""),onClick:this.changeShape.bind(this,"tool_rectangle_empty")},g.default.createElement("em",{"data-type":"tool_rectangle_empty",className:"shape-icon"})),g.default.createElement("li",{className:"shape-option tool_rectangle "+("tool_rectangle"===this.state.isActive?"active":""),onClick:this.changeShape.bind(this,"tool_rectangle")},g.default.createElement("em",{"data-type":"tool_rectangle",className:"shape-icon"})),g.default.createElement("li",{className:"shape-option tool_ellipse_empty "+("tool_ellipse_empty"===this.state.isActive?"active":""),onClick:this.changeShape.bind(this,"tool_ellipse_empty")},g.default.createElement("em",{"data-type":"tool_ellipse_empty",className:"shape-icon"})),g.default.createElement("li",{className:"shape-option tool_ellipse "+("tool_ellipse"===this.state.isActive?"active":""),onClick:this.changeShape.bind(this,"tool_ellipse")},g.default.createElement("em",{"data-type":"tool_ellipse",className:"shape-icon"}))),g.default.createElement("div",{className:"colors-container"},a),g.default.createElement("div",{className:"silder-width"},g.default.createElement("span",{className:"slider-title"},D.default.language.languageData.newTemplateLanguage.lineSize),g.default.createElement(I.default,{onAfterChange:this.onAfterChangeShapeWidth.bind(this),value:this.state.lineWidth}),g.default.createElement("span",{className:"slider-value"},this.state.lineWidth)))),g.default.createElement("li",{className:"tool-option tool_eraser "+(this.state.eraserDisabled?" disabled":"")+("tool_eraser"===this.state.isActive?" active":""),onClick:this.openToolEraser.bind(this,"tool_eraser")},g.default.createElement("em",{className:"icon"}),g.default.createElement("div",{className:"tool-eraser-list-extend silder-width",style:{display:this.state.isShowEraser?"flex":"none"}},g.default.createElement("em",{className:"arrow"}),g.default.createElement("span",{className:"slider-title"},D.default.language.languageData.newTemplateLanguage.eraserWidth),g.default.createElement(I.default,{onAfterChange:this.onAfterChangeEraserWidth.bind(this),value:this.state.eraserWidth}),g.default.createElement("span",{className:"slider-value"},this.state.eraserWidth)))),g.default.createElement("div",{className:"tool-bar-footer "+(this.state.isShowToolList?" up":" down"),onClick:this._isShowToolBar.bind(this)}))}}]),t}(g.default.Component);t.default=P},"m/zC":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.webRequestFail=t.webRequestSuccess=void 0;var i=a("mvHQ"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),d=n(l),u=a("VSuD"),c=n(u),h=a("HUPQ"),f=(n(h),a("T+56")),m=n(f),g=t.webRequestSuccess=1,p=t.webRequestFail=0,v=function(){function e(){(0,s.default)(this,e)}return(0,d.default)(e,[{key:"baseAjax",value:function(e,t){t=t||{},t.ajaxHandlerCallback=function(t,a){if(e.handlerEventKey){var n={type:c.default.EVENTTYPE.WebDaoEvent[e.handlerEventKey]};if(t&&!a)n.message={error:t,requestResult:p};else if(a&&(n.message={response:a,requestResult:g},e.excessResponseResultJson))for(var i in e.excessResponseResultJson)n.message[i]=e.excessResponseResultJson[i];m.default.HandlerWebDaoInterface.dispatchEvent(n)}else L.Logger.error("requestJson not handlerEventKey!",(0,o.default)(e))},$.ajax({type:e.type||"post",url:e.url,dataType:e.dataType||"json",async:e.async||!1,data:e.data}).done(function(a){L.Logger.debug((e.remark?"["+e.remark+"]":"")+"success:ajax request  response:",a),t&&t.doneCallback&&"function"==typeof t.doneCallback?t.doneCallback(a):t.ajaxHandlerCallback(void 0,a)}).fail(function(a){L.Logger.error((e.remark?"["+e.remark+"]":"")+"fail:ajax request  error:",a),t&&t.failCallback&&"function"==typeof t.failCallback?t.failCallback(a):t.ajaxHandlerCallback(a,void 0)})}},{key:"getSimplifyAnswer",value:function(e,t){var a=e.id,n=e.page,i=this,o={serial:c.default.joinRoomInfo.serial,id:a,page:n},r={type:"post",url:c.default.SERVICEINFO.webAddress+"/ClientAPI/simplifyAnswer?ts="+(new Date).getTime(),data:o,async:!0,handlerEventKey:"getSimplifyAnswer",remark:"获取答题详情"};i.baseAjax(r,t)}}]),e}(),b=new v;t.default=b},m9gC:function(e,t,a){var n=a("RY/4"),i=a("4WTo");e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},mbce:function(e,t,a){var n=a("lktj"),i=a("TcQ7"),o=a("NpIQ").f;e.exports=function(e){return function(t){for(var a,r=i(t),s=n(r),l=s.length,d=0,u=[];l>d;)o.call(r,a=s[d++])&&u.push(e?[a,r[a]]:r[a]);return u}}},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},oeOm:function(e,t,a){var n=a("7Doy");e.exports=function(e,t){return new(n(e))(t)}},pRCB:function(e,t,a){var n=a("kM2E");n(n.S+n.F*!a("+E39"),"Object",{defineProperties:a("qio6")})},ppOE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={preLoad:{text:"课件加载中",pass:"跳过"},header:{tool:{blackBoard:{title:{open:"小白板",close:"关闭",prev:"上一位",next:"下一位",shrink:"缩小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分发",recycle:"回收",againDispenseed:"再次分发",commonTeacher:"老师"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"笔",text:"文字",eraser:"橡皮",color:"颜色及粗细"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠标"},pencil:{title:"笔",pen:{text:"铅笔工具"},Highlighter:{text:"荧光笔工具"},linellae:{text:"线条工具"},arrow:{text:"箭头工具"},laser:{title:"激光笔",text:"激光笔工具"}},text:{title:"文字",Msyh:{text:"微软雅黑"},Ming:{text:"宋体"},Arial:{text:"Arial"}},shape:{title:"形状",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心椭圆"},filledCircle:{text:"椭圆"}},eraser:{title:"橡皮擦"},undo:{title:"撤销"},redo:{title:"恢复"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"缩小"},tool_rotate_left:{title:"逆时针旋转"},tool_rotate_right:{title:"顺时针旋转"},colorAndMeasure:{title:"颜色及粗细",selectColorText:"选择颜色",selectMeasure:"选择粗细"},colors:{title:"颜色"},measure:{title:"粗细"}},page:{prev:{text:"上一页"},next:{text:"下一页"},add:{text:"加页"},lcFullBtn:{title:"绘制区域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5课件全屏"},skipPage:{text_one:"至第",text_two:"页"},ok:{text:"确定"},coursewareRemarks:{title:"课件备注"}},volume:{title:"音量"}},alertWin:{ok:{showError:{text:"确定"},showPrompt:{text:"确定"},showConfirm:{cancel:"取消",ok:"确定"}},title:{showError:{text:"错误信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"确认消息"}},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"计时器"},timerBegin:{text:"开始"},timerStop:{text:"暂停"},again:{text:"重新开始"}},dial:{turntable:{text:"转盘"}},answers:{headerTopLeft:{text:"答题器"},headerMiddel:{text:"点击字母预设正确答案"},beginAnswer:{text:"开始答题"},tureAccuracy:{text:"正确率"},add:{text:"添加答案"},reduce:{text:"删除答案"},people:{text:"人"},trueAnswer:{text:"正确答案"},endAnswer:{text:"结束答题"},restarting:{text:"重新开始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"请至少选择一个答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答题人数"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"详情"},statistics:{text:"统计"},student:{text:"学生"},TheSelectedTheAnswer:{text:"所选答案"},AnswerTime:{text:"用时"},end:{text:"请先结束答题"},selectedAnswer:{text:"所选答案"}},responder:{responder:{text:"抢答器"},begin:{text:"开始抢答"},restart:{text:"重新开始"},clickTitle:{text:"点击按钮开始抢答"},somebodyTeacher:{text:"有人抢中"},my:{text:"恭喜您已抢中"},other:{text:"已抢中"},inAnswerTitle:{text:"抢答中..."},inAnswerBtn:{text:"抢答中"},inAnswerStudent:{text:"准备抢答"},noContest:{text:"无人抢答"}},videLabel:{exit:"退出"},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}},coursewareRemarks:{remarks:"备注",close:"关闭"},moreUser:{text:"当前场景下，上台学生才可使用小白板！"},qPanel:{answerPanel:"答题器",tips:["点击字母预设正确答案","请选择答案"],addOption:"添加答案",delOption:"删除答案",start:"开始答题",end:"结束答题",restart:"重新开始",rightOptionIs:"正确答案是",hasPub:"已公布",answerNum:"答题人数",people:"人",commitAnswer:"提交答案",modifyAnswer:"修改答案",detail:"详情",statistics:"统计",useTime:"用时",choseAnswer:"所选答案",myAnswer:"我的答案",pubResult:"公布结果",loading:"暂无数据"},whiteboardSetSize:{lineWidth:"线条宽度",eraserWidth:"橡皮擦大小"},newTemplateLanguage:{lineWidth:"线条宽度",lineSize:"线条粗细",fontSize:"字体大小",eraserWidth:"橡皮大小"},fontSize:{number:"号"}};t.default=n},qCoq:function(e,t,a){"use strict";var n=a("9C8M"),i=a("LIJb");e.exports=a("qo66")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},qVFD:function(e,t){},qkKv:function(e,t,a){var n=a("FeBl"),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},qo66:function(e,t,a){"use strict";var n=a("7KvD"),i=a("kM2E"),o=a("06OY"),r=a("S82l"),s=a("hJx8"),l=a("xH/j"),d=a("NWt+"),u=a("2KxR"),c=a("EqjI"),h=a("e6n0"),f=a("evD5").f,m=a("ALrJ")(0),g=a("+E39");e.exports=function(e,t,a,p,v,b){var y=n[e],k=y,S=v?"set":"add",w=k&&k.prototype,T={};return g&&"function"==typeof k&&(b||w.forEach&&!r(function(){(new k).entries().next()}))?(k=t(function(t,a){u(t,k,e,"_c"),t._c=new y,void 0!=a&&d(a,v,t[S],t)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!b||"clear"!=e)&&s(k.prototype,e,function(a,n){if(u(this,k,e),!t&&b&&!c(a))return"get"==e&&void 0;var i=this._c[e](0===a?0:a,n);return t?this:i})}),b||f(k.prototype,"size",{get:function(){return this._c.size}})):(k=p.getConstructor(t,e,v,S),l(k.prototype,a),o.NEED=!0),h(k,e),T[e]=k,i(i.G+i.W+i.F,T),b||p.setStrong(k,e,v),k}},rPQW:function(e,t){},rkp3:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("g4PW"),o=n(i),r=a("W3Iv"),s=n(r),l=a("BO1k"),d=n(l),u=a("d7EF"),c=n(u),h=a("Dd8w"),f=n(h),m=a("bOdI"),g=n(m),p=a("Zx67"),v=n(p),b=a("Zrlr"),y=n(b),k=a("wxAW"),S=n(k),w=a("zwoO"),T=n(w),C=a("Pf15"),D=n(C),E=a("GiK3"),I=n(E),P=a("yE5a"),A=n(P),R=a("T+56"),B=n(R),_=a("HUPQ"),x=n(_),M=a("Sa83"),N=(n(M),a("YRCL")),L=n(N),W=a("DrPG"),O=(n(W),a("cSSE")),z=n(O),H=a("lnhd"),F=n(H),U=a("Z5jD"),j=n(U),K=a("iCxh"),V=n(K),q=a("hHPy"),Q=n(q),Y=a("dtxI"),Z=n(Y),G=a("JfkP"),J=n(G),X=a("/Ml/"),$=n(X),ee=a("yms7"),te=n(ee),ae=a("NZEr"),ne=n(ae),ie=a("iHfv"),oe=n(ie),re=a("VSuD"),se=n(re),le=a("4yR4"),de=n(le),ue=a("m/2z"),ce=n(ue),he=function(e){function t(e){(0,y.default)(this,t);var a=(0,T.default)(this,(t.__proto__||(0,v.default)(t)).call(this,e));return a.state={updateState:!1,mainContentLayerIsShow:!1,captureImgInfos:{},selectMouse:!0,dragPosition:{},eleResizeInfos:{},useToolInfo:{useToolKey:"tool_pencil",useToolColor:"#FF0000",blackboardToolsInfo:{pencil:5,text:18,eraser:30,shape:5}},mobileDeviceType:null},a.listCaptureImgResizeArray=null,a.eleInitResizeInfos={},a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,D.default)(t,e),(0,S.default)(t,[{key:"componentWillMount",value:function(){this.initDragData()}},{key:"componentDidMount",value:function(){var e=this;B.default.CoreController.addEventListener(se.default.EVENTTYPE.RoomEvent.roomUpdateFakeJsSdkInitInfo,e.roomUpdateFakeJsSdkInitInfo.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(se.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener(se.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-DialDrag",e.handlerMsglistDialDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-TimerDrag",e.handlerMsglistTimerDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-AnswerDrag",e.handlerMsglistAnswerDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-ResponderDrag",e.handlerMsglistResponderDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-CaptureImg",e.handlerMsglistCaptureImg.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-CaptureImgDrag",e.handlerMsglistCaptureImgDrag.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receive-msglist-CaptureImgResize",e.handlerMsglistCaptureImgResize.bind(e),e.listernerBackupid),B.default.CoreController.addEventListener("receiveWhiteboardSDKAction",e.receiveWhiteboardSDKAction.bind(e),e.listernerBackupid),A.default.getTkRoom()&&A.default.getTkRoom().onPageFinished&&A.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){B.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"roomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message.deviceType;this.setState({mobileDeviceType:t})}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"DialDrag":Object.customAssign(this.state.dialDrag,t.data),this.setState({dialDrag:this.state.dialDrag});break;case"TimerDrag":Object.customAssign(this.state.timerDrag,t.data),Object.customAssign(this.state.studentTimerDrag,t.data),this.setState({timerDrag:this.state.timerDrag,studentTimerDrag:this.state.studentTimerDrag});break;case"AnswerDrag":Object.customAssign(this.state.answerDrag,t.data),Object.customAssign(this.state.studentAnswerDrag,t.data),this.setState({answerDrag:this.state.answerDrag,studentAnswerDrag:this.state.studentAnswerDrag});break;case"ResponderDrag":Object.customAssign(this.state.responderDrag,t.data),Object.customAssign(this.state.studentResponderDrag,t.data),this.setState({responderDrag:this.state.responderDrag,studentResponderDrag:this.state.studentResponderDrag});break;case"CaptureImgDrag":t.data.position&&t.data.id&&this.state[t.data.id]&&this.setState((0,g.default)({},t.data.id,Object.customAssign({},t.data.position)));break;case"CaptureImg":if(t.data.captureImgInfo&&t.data.remSize){var a=window.innerWidth/se.default.STANDARDSIZE,n=t.data.remSize,i="captureImg_"+t.data.captureImgInfo.fileid,o={width:n.width*a,height:n.height*a};this.setInitResize(i,o,.04);var r=t.data.captureImgInfo;this.handleCaptureImg(r)}break;case"CaptureImgResize":if(t.data.scale&&t.data.id){var s=t.data.scale;if(this.state.eleResizeInfos&&this.eleInitResizeInfos){var l=this.eleInitResizeInfos[t.data.id],d=l.width,u=l.height,c=d*s,h=u*s;this.state.eleResizeInfos[t.data.id]={width:c,height:h},this.setState({eleResizeInfos:this.state.eleResizeInfos})}}}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"CaptureImg":if(t.id.startsWith("CaptureImg_")){var a=t.id.split("_")[1],n=(0,f.default)({},this.state.captureImgInfos);delete n[a],this.setState({captureImgInfos:n})}break;case"ClassBegin":this.setState({captureImgInfos:{}})}}},{key:"receiveWhiteboardSDKAction",value:function(e){var t=e.message,a=t.action,n=t.cmd,i=(0,f.default)({},this.state.useToolInfo);switch(a){case"viewStateUpdate":for(var o in n.viewState)switch(o){case"other":i.blackboardToolsInfo.pencilWidth=n.viewState.other.pencilWidth,i.blackboardToolsInfo.shapeWidth=n.viewState.other.shapeWidth,i.blackboardToolsInfo.eraserWidth=n.viewState.other.eraserWidth,i.blackboardToolsInfo.fontSize=n.viewState.other.fontSize,i.useToolColor=n.viewState.other.primaryColor,this.setState({useToolInfo:i});break;case"tool":var r=n.viewState[o],l=!0,u=!1,h=void 0;try{for(var m,g=(0,d.default)((0,s.default)(r));!(l=(m=g.next()).done);l=!0){var p=m.value,v=(0,c.default)(p,2),b=v[0],y=v[1];"tool_mouse"===b&&this.setState({selectMouse:r[b].isUse}),y.isUse&&(i.useToolKey=b,this.setState({useToolInfo:i}))}}catch(e){u=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(u)throw h}}}}}},{key:"handlerMsglistDialDrag",value:function(e){var t=this;e.message.DialDragArray.map(function(e,a){Object.customAssign(t.state.dialDrag,e.data),t.setState({dialDrag:t.state.dialDrag})})}},{key:"handlerMsglistTimerDrag",value:function(e){var t=this;e.message.TimerDragArray.map(function(e,a){Object.customAssign(t.state.timerDrag,e.data),Object.customAssign(t.state.studentTimerDrag,e.data),t.setState({timerDrag:t.state.timerDrag,studentTimerDrag:t.state.studentTimerDrag})})}},{key:"handlerMsglistAnswerDrag",value:function(e){var t=this;e.message.AnswerDragArray.map(function(e,a){Object.customAssign(t.state.answerDrag,e.data),Object.customAssign(t.state.studentAnswerDrag,e.data),t.setState({answerDrag:t.state.answerDrag,studentAnswerDrag:t.state.studentAnswerDrag})})}},{key:"handlerMsglistResponderDrag",value:function(e){var t=this;e.message.ResponderDragArray.map(function(e,a){Object.customAssign(t.state.responderDrag,e.data),Object.customAssign(t.state.studentResponderDrag,e.data),t.setState({responderDrag:t.state.responderDrag,studentResponderDrag:t.state.studentResponderDrag})})}},{key:"handlerMsglistCaptureImg",value:function(e){var t=this,a=e.message.CaptureImgArray,n={};a.map(function(e,a){if(e.data.captureImgInfo){var i=e.data.captureImgInfo,o=i.fileid;n[o]=i,t.setState({captureImgInfos:n});var r=window.innerWidth/se.default.STANDARDSIZE,s=e.data.remSize,l="captureImg_"+e.data.captureImgInfo.fileid,d={width:s.width*r,height:s.height*r};t.setInitResize(l,d,.04)}})}},{key:"handlerMsglistCaptureImgDrag",value:function(e){var t=this;e.message.CaptureImgDragArray.map(function(e,a){e.data.position&&e.data.id&&t.state[e.data.id]&&(Object.customAssign(t.state[e.data.id],e.data.position),t.setState((0,g.default)({},e.data.id,t.state[e.data.id])))})}},{key:"handlerMsglistCaptureImgResize",value:function(e){var t=this,a=e.message.CaptureImgResizeArray;a&&a.map(function(e,a){if(e.data.scale&&e.data.id){var n=e.data.scale;if(t.state.eleResizeInfos&&t.eleInitResizeInfos){var i=t.eleInitResizeInfos[e.data.id],o=i.width,r=i.height,s=o*n,l=r*n;t.state.eleResizeInfos[e.data.id]={width:s,height:l},t.setState({eleResizeInfos:t.state.eleResizeInfos})}}})}},{key:"callAllWrapOnClick",value:function(e){B.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"handleCaptureImg",value:function(e){var t=e.fileid,a=(0,f.default)({},this.state.captureImgInfos);a[t]=e,this.setState({captureImgInfos:a})}},{key:"_getCaptureImgEleArr",value:function(e){var t=[],a=!0,n=!1,i=void 0;try{for(var o,r=(0,d.default)((0,s.default)(e));!(a=(o=r.next()).done);a=!0){var l=o.value,u=(0,c.default)(l,2),h=u[0],f=u[1];this.state["captureImg_"+h]||(this.state["captureImg_"+h]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}),this.state.eleResizeInfos&&!this.state.eleResizeInfos["captureImg_"+h]&&(this.state.eleResizeInfos["captureImg_"+h]={width:0,height:0}),this.eleInitResizeInfos&&!this.eleInitResizeInfos["captureImg_"+h]&&(this.eleInitResizeInfos["captureImg_"+h]={width:0,height:0,eleInitResizeInfos:1});var m={percentPosition:this.state["captureImg_"+h],defaultSize:this.eleInitResizeInfos["captureImg_"+h],size:this.state.eleResizeInfos["captureImg_"+h],changeEleReSize:this.changeEleReSize.bind(this),onPanStart:this.onPanStart.bind(this),onPanEnd:this.onPanEnd.bind(this),onPinchStart:this.onPinchStart.bind(this),onPinch:this.onPinch.bind(this),onPinchEnd:this.onPinchEnd.bind(this)};t.push(I.default.createElement(te.default,{key:h,id:"captureImg_"+h,captureImgInfo:f,dragData:m,useToolInfo:this.state.useToolInfo,sendSignallingOfDrag:this.sendSignallingOfDrag.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this),selectMouse:this.state.selectMouse}))}}catch(e){n=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}return t}},{key:"changeLayerIsShow",value:function(e){this.setState({mainContentLayerIsShow:e})}},{key:"setInitResize",value:function(e,t,a){var n=(0,f.default)({},t),i=n.width/n.height,o=x.default.windowInnerWidth/se.default.STANDARDSIZE,r=void 0,s=void 0;if("pc"===TK.SDKTYPE){var l=document.getElementById("lc-full-vessel");r=l.clientWidth,s=l.clientHeight}else r=x.default.windowInnerWidth,s=x.default.windowInnerHeight;return(n.width>r-2*a*o||n.height>s-2*a*o)&&(i>r/s?(n.width=r-2*a*o,n.height=n.width/i):(n.height=s-2*a*o,n.width=n.height*i)),this.eleInitResizeInfos[e]={width:n.width/o,height:n.height/o,originalResizeScale:i},this.state.eleResizeInfos[e]={width:n.width/o,height:n.height/o},this.setState({eleResizeInfos:this.state.eleResizeInfos}),n}},{key:"changeEleReSize",value:function(e,t){this.state.eleResizeInfos[e]=t,this.setState({eleResizeInfos:this.state.eleResizeInfos})}},{key:"sendSignallingOfResize",value:function(e){if(e.startsWith("captureImg_")){var t=e.split("_")[1],a={id:e,scale:this.state.eleResizeInfos[e].width/this.eleInitResizeInfos[e].width},n="CaptureImgResize_"+t,i="CaptureImg_"+t;L.default.sendSignallingFromCaptureImgResize(a,n,i)}}},{key:"initDragData",value:function(){var e=this;["moreBlackboardDrag","page_wrap","lc_tool_container","timerDrag","studentTimerDrag","dialDrag","answerDrag","studentAnswerDrag","responderDrag","studentResponderDrag","coursewareRemarks","holdAllBox"].map(function(t,a){e.state[t]={left:0,top:0,percentLeft:0,percentTop:0,isDrag:!1}})}},{key:"changePosition",value:function(e,t,a){t&&e&&(Object.customAssign(this.state[e],t),this.setState((0,g.default)({},e,this.state[e])),a&&this.sendSignallingOfDrag(e))}},{key:"sendSignallingOfDrag",value:function(e){var t=this.state[e],a=t.percentLeft,n=t.percentTop,i={percentLeft:a,percentTop:n,isDrag:!0};if(e.startsWith("captureImg_")){var o=e.split("_")[1],r={id:e,position:i},s="CaptureImgDrag_"+o,l="CaptureImg_"+o;L.default.sendSignallingFromCaptureImgDrag(r,s,l)}else switch(e){case"timerDrag":case"studentTimerDrag":L.default.sendSignallingFromTimerDrag(i);break;case"moreBlackboardDrag":B.default.CoreController.dispatchEvent({type:"isSendSignallingFromBlackBoardDrag",message:{data:i}});break;case"dialDrag":L.default.sendSignallingFromDialDrag(i);break;case"responderDrag":L.default.sendSignallingFromResponderDrag(i);break;case"answerDrag":L.default.sendSignallingFromAnswerDrag(i)}}},{key:"onPanStart",value:function(e){}},{key:"onPanEnd",value:function(e,t,a,n){!n||""===n||(0,o.default)(this.state[n].percentLeft,a.percentLeft)&&(0,o.default)(this.state[n].percentTop,a.percentTop)||(Object.customAssign(this.state[n],t,a),this.state[n].isDrag=!0,this.setState((0,g.default)({},n,this.state[n])),this.sendSignallingOfDrag(n))}},{key:"onPinchStart",value:function(e){}},{key:"onPinch",value:function(e,t,a){this.changeEleReSize(t,Object.customAssign({},a))}},{key:"onPinchEnd",value:function(e,t,a){this.sendSignallingOfResize(t),this.sendSignallingOfDrag(t)}},{key:"bbb",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.captureImgInfos,n=t.mainContentLayerIsShow,i=t.mobileDeviceType,o={bounds:"pc"===TK.SDKTYPE?"#lc-full-vessel":"#tk_app",onPanStart:this.onPanStart.bind(this),onPanEnd:this.onPanEnd.bind(this),changePosition:this.changePosition.bind(this),changeLayerIsShow:this.changeLayerIsShow.bind(this)};return I.default.createElement("section",{className:"app-mobile  all-container "+("phone"===x.default.mobileDeviceType||("videoDrawWhiteboardComponent"===x.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===x.default.clientComponentName)&&"phone"===i?"phone":"pad")+("videoDrawWhiteboardComponent"===x.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===x.default.clientComponentName?" remove-background":""),onTouchStart:this.callAllWrapOnClick.bind(this)},"mainContentComponent"===x.default.clientComponentName||""===x.default.clientComponentName?I.default.createElement(z.default,null):void 0," ","videoDrawWhiteboardComponent"===x.default.clientComponentName||"localFileVideoDrawWhiteboardComponent"===x.default.clientComponentName?I.default.createElement(oe.default,null):void 0,I.default.createElement(F.default,{id:"moreBlackboardDrag",blackboardThumbnailImageId:"blackboardThumbnailImageId",blackboardCanvasBackgroundColor:"#ffffff",moreBlackboardDrag:e.state.moreBlackboardDrag,draggableData:o}),I.default.createElement(j.default,{id:"timerDrag",timerDrag:e.state.timerDrag,draggableData:o}),I.default.createElement(V.default,{id:"dialDrag",dialDrag:e.state.dialDrag,draggableData:o}),I.default.createElement(Q.default,{id:"responderDrag",responderDrag:e.state.responderDrag,draggableData:o}),I.default.createElement($.default,null),I.default.createElement(ne.default,{id:"holdAllBox",holdAllBoxDrag:e.state.holdAllBox,draggableData:o}),this._getCaptureImgEleArr(a),x.default.playback?void 0:I.default.createElement(Z.default,{id:"answerDrag",answerDrag:e.state.answerDrag,draggableData:o}),x.default.playback?void 0:I.default.createElement(J.default,{id:"studentAnswerDrag",studentAnswerDrag:e.state.studentAnswerDrag,draggableData:o}),I.default.createElement("div",{style:{display:n?"block":"none"},className:"main-content-layer"}),I.default.createElement(de.default,null),I.default.createElement(ce.default,null))}}]),t}(I.default.Component);t.default=he},s3NG:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("GiK3"),o=n(i),r=a("HUPQ"),s=n(r),l=a("VSuD"),d=n(l),u=function(e){var t=e.dispose,a=e.parentState;return o.default.createElement("div",{className:"option-panel"},o.default.createElement("div",{className:"options"},function(){return a.options.map(function(e,a){return o.default.createElement("div",{className:"option-wrap",key:a},o.default.createElement("div",{className:(e.hasChose?"active":"")+" option option-"+a,onClick:function(){t({action:"optionClick",data:{index:a}})}},o.default.createElement("span",null,String.fromCharCode("A".charCodeAt()+a))))})}()),o.default.createElement("button",{style:{display:d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant?"":"none"},className:"option-btn",onClick:function(){t({action:"changeOptionLength",data:{num:1}})}},s.default.language.languageData.qPanel.addOption),o.default.createElement("button",{style:{display:d.default.hasRole.roleChairman||d.default.hasRole.roleTeachingAssistant?"":"none"},className:"option-btn",onClick:function(){t({action:"changeOptionLength",data:{num:-1}})}},s.default.language.languageData.qPanel.delOption))};t.default=u},sKCO:function(e,t){},"us/S":function(e,t,a){e.exports={default:a("Xd32"),__esModule:!0}},w5fS:function(e,t){},wEtr:function(e,t,a){a("gSvA"),e.exports=a("FeBl").Object.entries},"xH/j":function(e,t,a){var n=a("hJx8");e.exports=function(e,t,a){for(var i in t)a&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},xPSH:function(e,t){},yE5a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=void 0,t=void 0,a=void 0,n=void 0,i=void 0,o=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return n},this.setLocalStream=function(e){n=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return i},this.setUserThirdid=function(e){i=e},this.getTkWhiteBoardManager=function(e){return o},this.setTkWhiteBoardManager=function(e){o=e},this.clearAll=function(){e=null,t=null,a=null,n=null,i=null,o=null}};t.default=new n},yZ13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={preLoad:{text:"Courseware loading",pass:"Skip "},header:{tool:{blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous one",next:"Next person",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Again Send",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Pen",pen:{text:"Pencils"},Highlighter:{text:"Highlighters"},linellae:{text:"Lines"},arrow:{text:"Arrows"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text Input",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shapes",outlinedRectangle:{text:"Squares"},filledRectangle:{text:"Solid Squares"},outlinedCircle:{text:"Circles"},filledCircle:{text:"Solid Circles"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},tool_rotate_left:{title:"Contrarotate"},tool_rotate_right:{title:"Clockwise rotation"},colorAndMeasure:{title:"Colors and Thickness",selectColorText:"select Colour",selectMeasure:"select Thickness"},colors:{title:"Colors"},measure:{title:"Thickness"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen  of PPT"},h5FileFullBtn:{title:"Full Screen  of Courseware"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"},coursewareRemarks:{title:"Courseware Remarks"}},volume:{title:"volume"}},alertWin:{ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}}},toolCase:{toolBox:{text:"ToolBox"}},timers:{timerSetInterval:{text:"Timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"}},dial:{turntable:{text:"Turntable"}},answers:{headerTopLeft:{text:"The answer is"},headerMiddel:{text:"Click the default answer"},beginAnswer:{text:"Begin to answer"},tureAccuracy:{text:"Accuracy"},add:{text:"The right answer"},reduce:{text:"Delete answer"},people:{text:"People"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Student"},TheSelectedTheAnswer:{text:"The selected the answer"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"},selectedAnswer:{text:"Selected answer"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},clickTitle:{text:"Click button to start answering"},somebodyTeacher:{text:"Someone grabs"},my:{text:"Congratulations on your grab"},other:{text:"Has been grabbed"},inAnswerTitle:{text:"Answering..."},inAnswerBtn:{text:"Answering"},inAnswerStudent:{text:"Ready to answer"},noContest:{text:"No answer"}},videLabel:{exit:"Drop out"},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}},coursewareRemarks:{remarks:"remarks",close:"close"},moreUser:{text:"Under current scene，only onstage students can use little whiteboard !"},qPanel:{answerPanel:"Answer Panel",tips:["Click on the letter to preset the correct answer","Please Chose Option"],addOption:"Add",delOption:"Delete",start:"Start",end:"End",restart:"Restart",rightOptionIs:"The Right Option is",hasPub:"Published",answerNum:"Answer Number",people:"People",commitAnswer:"Commit",modifyAnswer:"Modify",detail:"Detail",statistics:"Statistics",useTime:"Time",choseAnswer:"Chose Answer",myAnswer:"My Answer",pubResult:"Publish Result",loading:"No Data"},whiteboardSetSize:{lineWidth:"Line width",eraserWidth:"Eraser size"},newTemplateLanguage:{lineWidth:"Line width",lineSize:"Line thickness",fontSize:"Font size",eraserWidth:"Eraser size"},fontSize:{number:"Number"}};t.default=n},yms7:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),d=n(l),u=a("zwoO"),c=n(u),h=a("Pf15"),f=n(h),m=a("GiK3"),g=n(m),p=a("HUPQ"),v=n(p),b=a("yE5a"),y=(n(b),a("fZJ/")),k=n(y),S=a("Sa83"),w=n(S),T=a("T+56"),C=n(T),D=a("YRCL"),E=n(D),I=a("EXAz"),P=n(I),A=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),n=a.props.captureImgInfo;return a.state={captureImgBoardInfo:{containerWidthAndHeight:{width:0,height:0},watermarkImageUrl:"",isShow:!1,backgroundColor:"transparent",instanceId:"captureImgBoard"+n.fileid,saveImage:!1,nickname:"captureImgBoard",deawPermission:w.default.handler.getAppPermissions("canDraw"),associatedMsgID:"CaptureImg_"+n.fileid},isRender:!1},a.isAnewCountPosition=!1,a.listernerBackupid=(new Date).getTime()+"_"+Math.random(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){C.default.Window.addEventListener(TkConstant.EVENTTYPE.WindowEvent.onResize,this.handlerOnResize.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("resizeHandler",this.handlerOnResize.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("updateAppPermissions_canDraw",this.handlerUpdateAppPermissions_canDraw.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("updateAppPermissions_canDragCaptureImg",this.handlerUpdate_canDragCaptureImg.bind(this),this.listernerBackupid),C.default.CoreController.addEventListener("updateAppPermissions_canResizeCaptureImg",this.handlerUpdate_canResizeCaptureImg.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){C.default.Window.removeBackupListerner(this.listernerBackupid),C.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"handlerOnResize",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"handlerUpdateAppPermissions_canDraw",value:function(){this.state.captureImgBoardInfo.deawPermission=w.default.handler.getAppPermissions("canDraw"),this.setState({captureImgBoardInfo:this.state.captureImgBoardInfo})}},{key:"handlerUpdate_canDragCaptureImg",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"handlerUpdate_canResizeCaptureImg",value:function(){this.setState({isRender:!this.state.isRender})}},{key:"captureImgCloseClick",value:function(){var e=this.props.captureImgInfo,t="CaptureImg_"+e.fileid,a={};E.default.sendSignallingFromCaptureImg(t,a,!0)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.captureImgInfo,n=e.dragData,i=e.useToolInfo,o=e.selectMouse,r=(e.changeLayerIsShow,this.state.captureImgBoardInfo),s=v.default.windowInnerWidth/TkConstant.STANDARDSIZE,l=a.swfpath.substring(a.swfpath.lastIndexOf("."))||".jpg",d=a.swfpath.replace(l,"-1"+l),u=window.WBGlobal.nowUseDocAddress;r.watermarkImageUrl=u+d;var c="tool_eraser"===i.useToolKey?i.blackboardToolsInfo.eraser:i.blackboardToolsInfo.pencil;s&&(r.containerWidthAndHeight={width:n.size.width*s,height:n.size.height*s});var h=Object.customAssign({id:t,bounds:"pc"===TK.SDKTYPE?"#lc-full-vessel":"#tk_app",disabled:!(o&&w.default.handler.getAppPermissions("canDragCaptureImg")),canResize:w.default.handler.getAppPermissions("canResizeCaptureImg")&&o,minResize:{width:2,height:2},borderWidth:.04},n);return g.default.createElement(P.default,h,g.default.createElement("div",{id:t,className:"capture-img-box"},g.default.createElement(k.default,{resizeInfo:n.size,isBaseboard:!1,watermarkImageUrl:r.watermarkImageUrl,instanceId:r.instanceId,nickname:r.nickname,show:!0,backgroundColor:r.backgroundColor,containerWidthAndHeight:r.containerWidthAndHeight,showRemoteRemindContent:!1,deawPermission:r.deawPermission,associatedMsgID:r.associatedMsgID,fontSize:i.blackboardToolsInfo.text,useToolColor:i.useToolColor,pencilWidth:c,useToolKey:i.useToolKey}),g.default.createElement("div",{className:"capture-img-layer",style:{display:h.disabled?"none":"block"}}),g.default.createElement("button",{className:"capture-img-close",style:{display:TkConstant.hasRole.roleChairman||TkConstant.hasRole.roleTeachingAssistant?void 0:"none"},onClick:this.captureImgCloseClick.bind(this),title:"关闭"})))}}]),t}(g.default.Component);t.default=A}},[0]);